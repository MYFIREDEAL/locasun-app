import{c as fs,aA as E,aB as H,aC as He,aD as et,aE as Ze,r as p,j as t,aF as Nt,aG as Ee,aH as ta,i as ue,a2 as ie,aI as ts,a1 as ms,s as ss,l as We,D as Dt,k as Ct,n as kt,o as _t,af as hs,ac as xe,ap as Ie,aq as Ae,B,g as je,ar as Pe,as as vt,at as xt,au as pt,av as gt,aw as bt,ax as yt,m as Le,S as Mt,v as St,w as Tt,x as Ot,y as we,aJ as vs,t as It,p as Fe,C as At,ad as sa,ae as Te,aK as aa,aL as xs,z as Pt,aM as na,b as ra,u as la,h as oa,U as Et,X as ia,M as ps,q as gs,A as bs,E as ys,T as js,F as ws,G as Ns,H as Ds,I as Cs,J as ks,K as _s,L as Ms,P as da,N as K}from"./index-f3f9473d.js";import{t as L,f as F,i as Ss,V as ca}from"./index-db550b9f.js";import{u as ua}from"./useSupabaseProjectStepsStatus-6e153194.js";import{E as fa}from"./external-link-c96bde5b.js";const ma=fs("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Ts=fs("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function Q(e,s){E(2,arguments);var a=H(e),n=L(s);return isNaN(n)?new Date(NaN):(n&&a.setDate(a.getDate()+n),a)}function re(e,s){E(2,arguments);var a=H(e),n=L(s);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),l=new Date(a.getTime());l.setMonth(a.getMonth()+n+1,0);var o=l.getDate();return r>=o?l:(a.setFullYear(l.getFullYear(),l.getMonth(),r),a)}function Je(e,s){if(E(2,arguments),!s||He(s)!=="object")return new Date(NaN);var a=s.years?L(s.years):0,n=s.months?L(s.months):0,r=s.weeks?L(s.weeks):0,l=s.days?L(s.days):0,o=s.hours?L(s.hours):0,i=s.minutes?L(s.minutes):0,c=s.seconds?L(s.seconds):0,u=H(e),d=n||a?re(u,n+a*12):u,m=l||r?Q(d,l+r*7):d,f=i+o*60,h=c+f*60,g=h*1e3,b=new Date(m.getTime()+g);return b}function fe(e,s){var a,n,r,l,o,i,c,u;E(1,arguments);var d=et(),m=L((a=(n=(r=(l=s==null?void 0:s.weekStartsOn)!==null&&l!==void 0?l:s==null||(o=s.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=H(e),h=f.getDay(),g=(h<m?7:0)+h-m;return f.setDate(f.getDate()-g),f.setHours(0,0,0,0),f}function ke(e){return E(1,arguments),fe(e,{weekStartsOn:1})}function ha(e){E(1,arguments);var s=H(e),a=s.getFullYear(),n=new Date(0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);var r=ke(n),l=new Date(0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);var o=ke(l);return s.getTime()>=r.getTime()?a+1:s.getTime()>=o.getTime()?a:a-1}function va(e){E(1,arguments);var s=ha(e),a=new Date(0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);var n=ke(a);return n}function Oe(e){E(1,arguments);var s=H(e);return s.setHours(0,0,0,0),s}var xa=864e5;function be(e,s){E(2,arguments);var a=Oe(e),n=Oe(s),r=a.getTime()-Ze(a),l=n.getTime()-Ze(n);return Math.round((r-l)/xa)}function jt(e,s){E(2,arguments);var a=L(s),n=a*7;return Q(e,n)}function pa(e,s){E(2,arguments);var a=L(s);return re(e,a*12)}function ga(e){E(1,arguments);var s;if(e&&typeof e.forEach=="function")s=e;else if(He(e)==="object"&&e!==null)s=Array.prototype.slice.call(e);else return new Date(NaN);var a;return s.forEach(function(n){var r=H(n);(a===void 0||a<r||isNaN(Number(r)))&&(a=r)}),a||new Date(NaN)}function ba(e){E(1,arguments);var s;if(e&&typeof e.forEach=="function")s=e;else if(He(e)==="object"&&e!==null)s=Array.prototype.slice.call(e);else return new Date(NaN);var a;return s.forEach(function(n){var r=H(n);(a===void 0||a>r||isNaN(r.getDate()))&&(a=r)}),a||new Date(NaN)}function Z(e,s){E(2,arguments);var a=Oe(e),n=Oe(s);return a.getTime()===n.getTime()}var ya=6048e5;function ja(e,s,a){E(2,arguments);var n=fe(e,a),r=fe(s,a),l=n.getTime()-Ze(n),o=r.getTime()-Ze(r);return Math.round((l-o)/ya)}function se(e){E(1,arguments);var s=H(e);return s.setDate(1),s.setHours(0,0,0,0),s}function wa(e){E(1,arguments);var s=H(e),a=new Date(0);return a.setFullYear(s.getFullYear(),0,1),a.setHours(0,0,0,0),a}function Wt(e,s){var a,n,r,l,o,i,c,u;E(1,arguments);var d=et(),m=L((a=(n=(r=(l=s==null?void 0:s.weekStartsOn)!==null&&l!==void 0?l:s==null||(o=s.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=H(e),h=f.getDay(),g=(h<m?-7:0)+6-(h-m);return f.setDate(f.getDate()+g),f.setHours(23,59,59,999),f}function Os(e){return E(1,arguments),Wt(e,{weekStartsOn:1})}function Na(e){E(1,arguments);var s=H(e),a=s.getFullYear(),n=s.getMonth(),r=new Date(0);return r.setFullYear(a,n+1,0),r.setHours(0,0,0,0),r.getDate()}var Da=6048e5;function Ca(e){E(1,arguments);var s=H(e),a=ke(s).getTime()-va(s).getTime();return Math.round(a/Da)+1}function ka(e){E(1,arguments);var s=H(e),a=s.getTime();return a}function _a(e){return E(1,arguments),Math.floor(ka(e)/1e3)}function Ma(e,s){var a,n,r,l,o,i,c,u;E(1,arguments);var d=H(e),m=d.getFullYear(),f=et(),h=L((a=(n=(r=(l=s==null?void 0:s.firstWeekContainsDate)!==null&&l!==void 0?l:s==null||(o=s.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&n!==void 0?n:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var b=fe(g,s),w=new Date(0);w.setFullYear(m,0,h),w.setHours(0,0,0,0);var _=fe(w,s);return d.getTime()>=b.getTime()?m+1:d.getTime()>=_.getTime()?m:m-1}function Sa(e,s){var a,n,r,l,o,i,c,u;E(1,arguments);var d=et(),m=L((a=(n=(r=(l=s==null?void 0:s.firstWeekContainsDate)!==null&&l!==void 0?l:s==null||(o=s.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:1),f=Ma(e,s),h=new Date(0);h.setFullYear(f,0,m),h.setHours(0,0,0,0);var g=fe(h,s);return g}var Ta=6048e5;function Oa(e,s){E(1,arguments);var a=H(e),n=fe(a,s).getTime()-Sa(a,s).getTime();return Math.round(n/Ta)+1}function Ia(e){E(1,arguments);var s=H(e),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(0,0,0,0),s}function Aa(e,s){return E(1,arguments),ja(Ia(e),se(e),s)+1}function wt(e,s){E(2,arguments);var a=H(e),n=H(s);return a.getTime()>n.getTime()}function Is(e,s){E(2,arguments);var a=H(e),n=H(s);return a.getTime()<n.getTime()}function Lt(e,s){E(2,arguments);var a=H(e),n=H(s);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function Pa(e,s){E(2,arguments);var a=H(e),n=H(s);return a.getFullYear()===n.getFullYear()}function qe(e,s){E(2,arguments);var a=L(s);return Q(e,-a)}function Ue(e,s){E(2,arguments);var a=H(e),n=L(s),r=a.getFullYear(),l=a.getDate(),o=new Date(0);o.setFullYear(r,n,15),o.setHours(0,0,0,0);var i=Na(o);return a.setMonth(n,Math.min(l,i)),a}function Qe(e,s){if(E(2,arguments),He(s)!=="object"||s===null)throw new RangeError("values parameter must be an object");var a=H(e);return isNaN(a.getTime())?new Date(NaN):(s.year!=null&&a.setFullYear(s.year),s.month!=null&&(a=Ue(a,s.month)),s.date!=null&&a.setDate(L(s.date)),s.hours!=null&&a.setHours(L(s.hours)),s.minutes!=null&&a.setMinutes(L(s.minutes)),s.seconds!=null&&a.setSeconds(L(s.seconds)),s.milliseconds!=null&&a.setMilliseconds(L(s.milliseconds)),a)}function as(e,s){E(2,arguments);var a=H(e),n=L(s);return isNaN(a.getTime())?new Date(NaN):(a.setFullYear(n),a)}function Ea(e,s){E(2,arguments);var a=L(s);return re(e,-a)}function Wa(e,s){if(E(2,arguments),!s||He(s)!=="object")return new Date(NaN);var a=s.years?L(s.years):0,n=s.months?L(s.months):0,r=s.weeks?L(s.weeks):0,l=s.days?L(s.days):0,o=s.hours?L(s.hours):0,i=s.minutes?L(s.minutes):0,c=s.seconds?L(s.seconds):0,u=Ea(e,n+a*12),d=qe(u,l+r*7),m=i+o*60,f=c+m*60,h=f*1e3,g=new Date(d.getTime()-h);return g}var S=function(){return S=Object.assign||function(s){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},S.apply(this,arguments)};function La(e,s){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)s.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}function As(e,s,a){if(a||arguments.length===2)for(var n=0,r=s.length,l;n<r;n++)(l||!(n in s))&&(l||(l=Array.prototype.slice.call(s,0,n)),l[n]=s[n]);return e.concat(l||Array.prototype.slice.call(s))}function Re(e){return e.mode==="multiple"}function $e(e){return e.mode==="range"}function tt(e){return e.mode==="single"}var Fa={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ha(e,s){return F(e,"LLLL y",s)}function Ra(e,s){return F(e,"d",s)}function $a(e,s){return F(e,"LLLL",s)}function Ya(e){return"".concat(e)}function Ba(e,s){return F(e,"cccccc",s)}function Va(e,s){return F(e,"yyyy",s)}var za=Object.freeze({__proto__:null,formatCaption:Ha,formatDay:Ra,formatMonthCaption:$a,formatWeekNumber:Ya,formatWeekdayName:Ba,formatYearCaption:Va}),Ga=function(e,s,a){return F(e,"do MMMM (EEEE)",a)},qa=function(){return"Month: "},Ua=function(){return"Go to next month"},Ka=function(){return"Go to previous month"},Za=function(e,s){return F(e,"cccc",s)},Ja=function(e){return"Week n. ".concat(e)},Qa=function(){return"Year: "},Xa=Object.freeze({__proto__:null,labelDay:Ga,labelMonthDropdown:qa,labelNext:Ua,labelPrevious:Ka,labelWeekNumber:Ja,labelWeekday:Za,labelYearDropdown:Qa});function en(){var e="buttons",s=Fa,a=ta,n={},r={},l=1,o={},i=new Date;return{captionLayout:e,classNames:s,formatters:za,labels:Xa,locale:a,modifiersClassNames:n,modifiers:r,numberOfMonths:l,styles:o,today:i,mode:"default"}}function tn(e){var s=e.fromYear,a=e.toYear,n=e.fromMonth,r=e.toMonth,l=e.fromDate,o=e.toDate;return n?l=se(n):s&&(l=new Date(s,0,1)),r?o=Nt(r):a&&(o=new Date(a,11,31)),{fromDate:l?Oe(l):void 0,toDate:o?Oe(o):void 0}}var Ps=p.createContext(void 0);function sn(e){var s,a=e.initialProps,n=en(),r=tn(a),l=r.fromDate,o=r.toDate,i=(s=a.captionLayout)!==null&&s!==void 0?s:n.captionLayout;i!=="buttons"&&(!l||!o)&&(i="buttons");var c;(tt(a)||Re(a)||$e(a))&&(c=a.onSelect);var u=S(S(S({},n),a),{captionLayout:i,classNames:S(S({},n.classNames),a.classNames),components:S({},a.components),formatters:S(S({},n.formatters),a.formatters),fromDate:l,labels:S(S({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:S(S({},n.modifiers),a.modifiers),modifiersClassNames:S(S({},n.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:S(S({},n.styles),a.styles),toDate:o});return t.jsx(Ps.Provider,{value:u,children:e.children})}function R(){var e=p.useContext(Ps);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Es(e){var s=R(),a=s.locale,n=s.classNames,r=s.styles,l=s.formatters.formatCaption;return t.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:l(e.displayMonth,{locale:a})})}function an(e){return t.jsx("svg",S({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:t.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ws(e){var s,a,n=e.onChange,r=e.value,l=e.children,o=e.caption,i=e.className,c=e.style,u=R(),d=(a=(s=u.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&a!==void 0?a:an;return t.jsxs("div",{className:i,style:c,children:[t.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),t.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:r,onChange:n,children:l}),t.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,t.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function nn(e){var s,a=R(),n=a.fromDate,r=a.toDate,l=a.styles,o=a.locale,i=a.formatters.formatMonthCaption,c=a.classNames,u=a.components,d=a.labels.labelMonthDropdown;if(!n)return t.jsx(t.Fragment,{});if(!r)return t.jsx(t.Fragment,{});var m=[];if(Pa(n,r))for(var f=se(n),h=n.getMonth();h<=r.getMonth();h++)m.push(Ue(f,h));else for(var f=se(new Date),h=0;h<=11;h++)m.push(Ue(f,h));var g=function(w){var _=Number(w.target.value),P=Ue(se(e.displayMonth),_);e.onChange(P)},b=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:Ws;return t.jsx(b,{name:"months","aria-label":d(),className:c.dropdown_month,style:l.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:o}),children:m.map(function(w){return t.jsx("option",{value:w.getMonth(),children:i(w,{locale:o})},w.getMonth())})})}function rn(e){var s,a=e.displayMonth,n=R(),r=n.fromDate,l=n.toDate,o=n.locale,i=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,f=[];if(!r)return t.jsx(t.Fragment,{});if(!l)return t.jsx(t.Fragment,{});for(var h=r.getFullYear(),g=l.getFullYear(),b=h;b<=g;b++)f.push(as(wa(new Date),b));var w=function(P){var O=as(se(a),Number(P.target.value));e.onChange(O)},_=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:Ws;return t.jsx(_,{name:"years","aria-label":m(),className:c.dropdown_year,style:i.dropdown_year,onChange:w,value:a.getFullYear(),caption:d(a,{locale:o}),children:f.map(function(P){return t.jsx("option",{value:P.getFullYear(),children:d(P,{locale:o})},P.getFullYear())})})}function ln(e,s){var a=p.useState(e),n=a[0],r=a[1],l=s===void 0?n:s;return[l,r]}function on(e){var s=e.month,a=e.defaultMonth,n=e.today,r=s||a||n||new Date,l=e.toDate,o=e.fromDate,i=e.numberOfMonths,c=i===void 0?1:i;if(l&&Ee(l,r)<0){var u=-1*(c-1);r=re(l,u)}return o&&Ee(r,o)<0&&(r=o),se(r)}function dn(){var e=R(),s=on(e),a=ln(s,e.month),n=a[0],r=a[1],l=function(o){var i;if(!e.disableNavigation){var c=se(o);r(c),(i=e.onMonthChange)===null||i===void 0||i.call(e,c)}};return[n,l]}function cn(e,s){for(var a=s.reverseMonths,n=s.numberOfMonths,r=se(e),l=se(re(r,n)),o=Ee(l,r),i=[],c=0;c<o;c++){var u=re(r,c);i.push(u)}return a&&(i=i.reverse()),i}function un(e,s){if(!s.disableNavigation){var a=s.toDate,n=s.pagedNavigation,r=s.numberOfMonths,l=r===void 0?1:r,o=n?l:1,i=se(e);if(!a)return re(i,o);var c=Ee(a,e);if(!(c<l))return re(i,o)}}function fn(e,s){if(!s.disableNavigation){var a=s.fromDate,n=s.pagedNavigation,r=s.numberOfMonths,l=r===void 0?1:r,o=n?l:1,i=se(e);if(!a)return re(i,-o);var c=Ee(i,a);if(!(c<=0))return re(i,-o)}}var Ls=p.createContext(void 0);function mn(e){var s=R(),a=dn(),n=a[0],r=a[1],l=cn(n,s),o=un(n,s),i=fn(n,s),c=function(m){return l.some(function(f){return Lt(m,f)})},u=function(m,f){c(m)||(f&&Is(m,f)?r(re(m,1+s.numberOfMonths*-1)):r(m))},d={currentMonth:n,displayMonths:l,goToMonth:r,goToDate:u,previousMonth:i,nextMonth:o,isDateDisplayed:c};return t.jsx(Ls.Provider,{value:d,children:e.children})}function Ye(){var e=p.useContext(Ls);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function ns(e){var s,a=R(),n=a.classNames,r=a.styles,l=a.components,o=Ye().goToMonth,i=function(d){o(re(d,e.displayIndex?-e.displayIndex:0))},c=(s=l==null?void 0:l.CaptionLabel)!==null&&s!==void 0?s:Es,u=t.jsx(c,{id:e.id,displayMonth:e.displayMonth});return t.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[t.jsx("div",{className:n.vhidden,children:u}),t.jsx(nn,{onChange:i,displayMonth:e.displayMonth}),t.jsx(rn,{onChange:i,displayMonth:e.displayMonth})]})}function hn(e){return t.jsx("svg",S({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function vn(e){return t.jsx("svg",S({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Xe=p.forwardRef(function(e,s){var a=R(),n=a.classNames,r=a.styles,l=[n.button_reset,n.button];e.className&&l.push(e.className);var o=l.join(" "),i=S(S({},r.button_reset),r.button);return e.style&&Object.assign(i,e.style),t.jsx("button",S({},e,{ref:s,type:"button",className:o,style:i}))});function xn(e){var s,a,n=R(),r=n.dir,l=n.locale,o=n.classNames,i=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,m=n.components;if(!e.nextMonth&&!e.previousMonth)return t.jsx(t.Fragment,{});var f=u(e.previousMonth,{locale:l}),h=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:l}),b=[o.nav_button,o.nav_button_next].join(" "),w=(s=m==null?void 0:m.IconRight)!==null&&s!==void 0?s:vn,_=(a=m==null?void 0:m.IconLeft)!==null&&a!==void 0?a:hn;return t.jsxs("div",{className:o.nav,style:i.nav,children:[!e.hidePrevious&&t.jsx(Xe,{name:"previous-month","aria-label":f,className:h,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:r==="rtl"?t.jsx(w,{className:o.nav_icon,style:i.nav_icon}):t.jsx(_,{className:o.nav_icon,style:i.nav_icon})}),!e.hideNext&&t.jsx(Xe,{name:"next-month","aria-label":g,className:b,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:r==="rtl"?t.jsx(_,{className:o.nav_icon,style:i.nav_icon}):t.jsx(w,{className:o.nav_icon,style:i.nav_icon})})]})}function rs(e){var s=R().numberOfMonths,a=Ye(),n=a.previousMonth,r=a.nextMonth,l=a.goToMonth,o=a.displayMonths,i=o.findIndex(function(g){return Lt(e.displayMonth,g)}),c=i===0,u=i===o.length-1,d=s>1&&(c||!u),m=s>1&&(u||!c),f=function(){n&&l(n)},h=function(){r&&l(r)};return t.jsx(xn,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:m,nextMonth:r,previousMonth:n,onPreviousClick:f,onNextClick:h})}function pn(e){var s,a=R(),n=a.classNames,r=a.disableNavigation,l=a.styles,o=a.captionLayout,i=a.components,c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:Es,u;return r?u=t.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=t.jsx(ns,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=t.jsxs(t.Fragment,{children:[t.jsx(ns,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),t.jsx(rs,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=t.jsxs(t.Fragment,{children:[t.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(rs,{displayMonth:e.displayMonth,id:e.id})]}),t.jsx("div",{className:n.caption,style:l.caption,children:u})}function gn(e){var s=R(),a=s.footer,n=s.styles,r=s.classNames.tfoot;return a?t.jsx("tfoot",{className:r,style:n.tfoot,children:t.jsx("tr",{children:t.jsx("td",{colSpan:8,children:a})})}):t.jsx(t.Fragment,{})}function bn(e,s,a){for(var n=a?ke(new Date):fe(new Date,{locale:e,weekStartsOn:s}),r=[],l=0;l<7;l++){var o=Q(n,l);r.push(o)}return r}function yn(){var e=R(),s=e.classNames,a=e.styles,n=e.showWeekNumber,r=e.locale,l=e.weekStartsOn,o=e.ISOWeek,i=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=bn(r,l,o);return t.jsxs("tr",{style:a.head_row,className:s.head_row,children:[n&&t.jsx("td",{style:a.head_cell,className:s.head_cell}),u.map(function(d,m){return t.jsx("th",{scope:"col",className:s.head_cell,style:a.head_cell,"aria-label":c(d,{locale:r}),children:i(d,{locale:r})},m)})]})}function jn(){var e,s=R(),a=s.classNames,n=s.styles,r=s.components,l=(e=r==null?void 0:r.HeadRow)!==null&&e!==void 0?e:yn;return t.jsx("thead",{style:n.head,className:a.head,children:t.jsx(l,{})})}function wn(e){var s=R(),a=s.locale,n=s.formatters.formatDay;return t.jsx(t.Fragment,{children:n(e.date,{locale:a})})}var Ft=p.createContext(void 0);function Nn(e){if(!Re(e.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return t.jsx(Ft.Provider,{value:s,children:e.children})}return t.jsx(Dn,{initialProps:e.initialProps,children:e.children})}function Dn(e){var s=e.initialProps,a=e.children,n=s.selected,r=s.min,l=s.max,o=function(u,d,m){var f,h;(f=s.onDayClick)===null||f===void 0||f.call(s,u,d,m);var g=!!(d.selected&&r&&(n==null?void 0:n.length)===r);if(!g){var b=!!(!d.selected&&l&&(n==null?void 0:n.length)===l);if(!b){var w=n?As([],n,!0):[];if(d.selected){var _=w.findIndex(function(P){return Z(u,P)});w.splice(_,1)}else w.push(u);(h=s.onSelect)===null||h===void 0||h.call(s,w,u,d,m)}}},i={disabled:[]};n&&i.disabled.push(function(u){var d=l&&n.length>l-1,m=n.some(function(f){return Z(f,u)});return!!(d&&!m)});var c={selected:n,onDayClick:o,modifiers:i};return t.jsx(Ft.Provider,{value:c,children:a})}function Ht(){var e=p.useContext(Ft);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Cn(e,s){var a=s||{},n=a.from,r=a.to;return n&&r?Z(r,e)&&Z(n,e)?void 0:Z(r,e)?{from:r,to:void 0}:Z(n,e)?void 0:wt(n,e)?{from:e,to:r}:{from:n,to:e}:r?wt(e,r)?{from:r,to:e}:{from:e,to:r}:n?Is(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Rt=p.createContext(void 0);function kn(e){if(!$e(e.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return t.jsx(Rt.Provider,{value:s,children:e.children})}return t.jsx(_n,{initialProps:e.initialProps,children:e.children})}function _n(e){var s=e.initialProps,a=e.children,n=s.selected,r=n||{},l=r.from,o=r.to,i=s.min,c=s.max,u=function(h,g,b){var w,_;(w=s.onDayClick)===null||w===void 0||w.call(s,h,g,b);var P=Cn(h,n);(_=s.onSelect)===null||_===void 0||_.call(s,P,h,g,b)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(d.range_start=[l],o?(d.range_end=[o],Z(l,o)||(d.range_middle=[{after:l,before:o}])):d.range_end=[l]):o&&(d.range_start=[o],d.range_end=[o]),i&&(l&&!o&&d.disabled.push({after:qe(l,i-1),before:Q(l,i-1)}),l&&o&&d.disabled.push({after:l,before:Q(l,i-1)}),!l&&o&&d.disabled.push({after:qe(o,i-1),before:Q(o,i-1)})),c){if(l&&!o&&(d.disabled.push({before:Q(l,-c+1)}),d.disabled.push({after:Q(l,c-1)})),l&&o){var m=be(o,l)+1,f=c-m;d.disabled.push({before:qe(l,f)}),d.disabled.push({after:Q(o,f)})}!l&&o&&(d.disabled.push({before:Q(o,-c+1)}),d.disabled.push({after:Q(o,c-1)}))}return t.jsx(Rt.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:a})}function $t(){var e=p.useContext(Rt);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Ke(e){return Array.isArray(e)?As([],e,!0):e!==void 0?[e]:[]}function Mn(e){var s={};return Object.entries(e).forEach(function(a){var n=a[0],r=a[1];s[n]=Ke(r)}),s}var me;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(me||(me={}));var Sn=me.Selected,ge=me.Disabled,Tn=me.Hidden,On=me.Today,ut=me.RangeEnd,ft=me.RangeMiddle,mt=me.RangeStart,In=me.Outside;function An(e,s,a){var n,r=(n={},n[Sn]=Ke(e.selected),n[ge]=Ke(e.disabled),n[Tn]=Ke(e.hidden),n[On]=[e.today],n[ut]=[],n[ft]=[],n[mt]=[],n[In]=[],n);return e.fromDate&&r[ge].push({before:e.fromDate}),e.toDate&&r[ge].push({after:e.toDate}),Re(e)?r[ge]=r[ge].concat(s.modifiers[ge]):$e(e)&&(r[ge]=r[ge].concat(a.modifiers[ge]),r[mt]=a.modifiers[mt],r[ft]=a.modifiers[ft],r[ut]=a.modifiers[ut]),r}var Fs=p.createContext(void 0);function Pn(e){var s=R(),a=Ht(),n=$t(),r=An(s,a,n),l=Mn(s.modifiers),o=S(S({},r),l);return t.jsx(Fs.Provider,{value:o,children:e.children})}function Hs(){var e=p.useContext(Fs);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function En(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Wn(e){return!!(e&&typeof e=="object"&&"from"in e)}function Ln(e){return!!(e&&typeof e=="object"&&"after"in e)}function Fn(e){return!!(e&&typeof e=="object"&&"before"in e)}function Hn(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Rn(e,s){var a,n=s.from,r=s.to;if(n&&r){var l=be(r,n)<0;l&&(a=[r,n],n=a[0],r=a[1]);var o=be(e,n)>=0&&be(r,e)>=0;return o}return r?Z(r,e):n?Z(n,e):!1}function $n(e){return Ss(e)}function Yn(e){return Array.isArray(e)&&e.every(Ss)}function Bn(e,s){return s.some(function(a){if(typeof a=="boolean")return a;if($n(a))return Z(e,a);if(Yn(a))return a.includes(e);if(Wn(a))return Rn(e,a);if(Hn(a))return a.dayOfWeek.includes(e.getDay());if(En(a)){var n=be(a.before,e),r=be(a.after,e),l=n>0,o=r<0,i=wt(a.before,a.after);return i?o&&l:l||o}return Ln(a)?be(e,a.after)>0:Fn(a)?be(a.before,e)>0:typeof a=="function"?a(e):!1})}function Yt(e,s,a){var n=Object.keys(s).reduce(function(l,o){var i=s[o];return Bn(e,i)&&l.push(o),l},[]),r={};return n.forEach(function(l){return r[l]=!0}),a&&!Lt(e,a)&&(r.outside=!0),r}function Vn(e,s){for(var a=se(e[0]),n=Nt(e[e.length-1]),r,l,o=a;o<=n;){var i=Yt(o,s),c=!i.disabled&&!i.hidden;if(!c){o=Q(o,1);continue}if(i.selected)return o;i.today&&!l&&(l=o),r||(r=o),o=Q(o,1)}return l||r}var zn=365;function Rs(e,s){var a=s.moveBy,n=s.direction,r=s.context,l=s.modifiers,o=s.retry,i=o===void 0?{count:0,lastFocused:e}:o,c=r.weekStartsOn,u=r.fromDate,d=r.toDate,m=r.locale,f={day:Q,week:jt,month:re,year:pa,startOfWeek:function(w){return r.ISOWeek?ke(w):fe(w,{locale:m,weekStartsOn:c})},endOfWeek:function(w){return r.ISOWeek?Os(w):Wt(w,{locale:m,weekStartsOn:c})}},h=f[a](e,n==="after"?1:-1);n==="before"&&u?h=ga([u,h]):n==="after"&&d&&(h=ba([d,h]));var g=!0;if(l){var b=Yt(h,l);g=!b.disabled&&!b.hidden}return g?h:i.count>zn?i.lastFocused:Rs(h,{moveBy:a,direction:n,context:r,modifiers:l,retry:S(S({},i),{count:i.count+1})})}var $s=p.createContext(void 0);function Gn(e){var s=Ye(),a=Hs(),n=p.useState(),r=n[0],l=n[1],o=p.useState(),i=o[0],c=o[1],u=Vn(s.displayMonths,a),d=r??(i&&s.isDateDisplayed(i))?i:u,m=function(){c(r),l(void 0)},f=function(w){l(w)},h=R(),g=function(w,_){if(r){var P=Rs(r,{moveBy:w,direction:_,context:h,modifiers:a});Z(r,P)||(s.goToDate(P,r),f(P))}},b={focusedDay:r,focusTarget:d,blur:m,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return t.jsx($s.Provider,{value:b,children:e.children})}function Bt(){var e=p.useContext($s);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function qn(e,s){var a=Hs(),n=Yt(e,a,s);return n}var Vt=p.createContext(void 0);function Un(e){if(!tt(e.initialProps)){var s={selected:void 0};return t.jsx(Vt.Provider,{value:s,children:e.children})}return t.jsx(Kn,{initialProps:e.initialProps,children:e.children})}function Kn(e){var s=e.initialProps,a=e.children,n=function(l,o,i){var c,u,d;if((c=s.onDayClick)===null||c===void 0||c.call(s,l,o,i),o.selected&&!s.required){(u=s.onSelect)===null||u===void 0||u.call(s,void 0,l,o,i);return}(d=s.onSelect)===null||d===void 0||d.call(s,l,l,o,i)},r={selected:s.selected,onDayClick:n};return t.jsx(Vt.Provider,{value:r,children:a})}function Ys(){var e=p.useContext(Vt);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Zn(e,s){var a=R(),n=Ys(),r=Ht(),l=$t(),o=Bt(),i=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,m=o.blur,f=o.focus,h=o.focusMonthBefore,g=o.focusMonthAfter,b=o.focusYearBefore,w=o.focusYearAfter,_=o.focusStartOfWeek,P=o.focusEndOfWeek,O=function(k){var D,ne,he,de;tt(a)?(D=n.onDayClick)===null||D===void 0||D.call(n,e,s,k):Re(a)?(ne=r.onDayClick)===null||ne===void 0||ne.call(r,e,s,k):$e(a)?(he=l.onDayClick)===null||he===void 0||he.call(l,e,s,k):(de=a.onDayClick)===null||de===void 0||de.call(a,e,s,k)},W=function(k){var D;f(e),(D=a.onDayFocus)===null||D===void 0||D.call(a,e,s,k)},Y=function(k){var D;m(),(D=a.onDayBlur)===null||D===void 0||D.call(a,e,s,k)},ee=function(k){var D;(D=a.onDayMouseEnter)===null||D===void 0||D.call(a,e,s,k)},$=function(k){var D;(D=a.onDayMouseLeave)===null||D===void 0||D.call(a,e,s,k)},v=function(k){var D;(D=a.onDayPointerEnter)===null||D===void 0||D.call(a,e,s,k)},I=function(k){var D;(D=a.onDayPointerLeave)===null||D===void 0||D.call(a,e,s,k)},N=function(k){var D;(D=a.onDayTouchCancel)===null||D===void 0||D.call(a,e,s,k)},y=function(k){var D;(D=a.onDayTouchEnd)===null||D===void 0||D.call(a,e,s,k)},C=function(k){var D;(D=a.onDayTouchMove)===null||D===void 0||D.call(a,e,s,k)},A=function(k){var D;(D=a.onDayTouchStart)===null||D===void 0||D.call(a,e,s,k)},M=function(k){var D;(D=a.onDayKeyUp)===null||D===void 0||D.call(a,e,s,k)},q=function(k){var D;switch(k.key){case"ArrowLeft":k.preventDefault(),k.stopPropagation(),a.dir==="rtl"?i():c();break;case"ArrowRight":k.preventDefault(),k.stopPropagation(),a.dir==="rtl"?c():i();break;case"ArrowDown":k.preventDefault(),k.stopPropagation(),u();break;case"ArrowUp":k.preventDefault(),k.stopPropagation(),d();break;case"PageUp":k.preventDefault(),k.stopPropagation(),k.shiftKey?b():h();break;case"PageDown":k.preventDefault(),k.stopPropagation(),k.shiftKey?w():g();break;case"Home":k.preventDefault(),k.stopPropagation(),_();break;case"End":k.preventDefault(),k.stopPropagation(),P();break}(D=a.onDayKeyDown)===null||D===void 0||D.call(a,e,s,k)},ae={onClick:O,onFocus:W,onBlur:Y,onKeyDown:q,onKeyUp:M,onMouseEnter:ee,onMouseLeave:$,onPointerEnter:v,onPointerLeave:I,onTouchCancel:N,onTouchEnd:y,onTouchMove:C,onTouchStart:A};return ae}function Jn(){var e=R(),s=Ys(),a=Ht(),n=$t(),r=tt(e)?s.selected:Re(e)?a.selected:$e(e)?n.selected:void 0;return r}function Qn(e){return Object.values(me).includes(e)}function Xn(e,s){var a=[e.classNames.day];return Object.keys(s).forEach(function(n){var r=e.modifiersClassNames[n];if(r)a.push(r);else if(Qn(n)){var l=e.classNames["day_".concat(n)];l&&a.push(l)}}),a}function er(e,s){var a=S({},e.styles.day);return Object.keys(s).forEach(function(n){var r;a=S(S({},a),(r=e.modifiersStyles)===null||r===void 0?void 0:r[n])}),a}function tr(e,s,a){var n,r,l,o=R(),i=Bt(),c=qn(e,s),u=Zn(e,c),d=Jn(),m=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var ee;c.outside||i.focusedDay&&m&&Z(i.focusedDay,e)&&((ee=a.current)===null||ee===void 0||ee.focus())},[i.focusedDay,e,a,m,c.outside]);var f=Xn(o,c).join(" "),h=er(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),b=(l=(r=o.components)===null||r===void 0?void 0:r.DayContent)!==null&&l!==void 0?l:wn,w=t.jsx(b,{date:e,displayMonth:s,activeModifiers:c}),_={style:h,className:f,children:w,role:"gridcell"},P=i.focusTarget&&Z(i.focusTarget,e)&&!c.outside,O=i.focusedDay&&Z(i.focusedDay,e),W=S(S(S({},_),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=O||P?0:-1,n)),u),Y={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:W,divProps:_};return Y}function sr(e){var s=p.useRef(null),a=tr(e.date,e.displayMonth,s);return a.isHidden?t.jsx("div",{role:"gridcell"}):a.isButton?t.jsx(Xe,S({name:"day",ref:s},a.buttonProps)):t.jsx("div",S({},a.divProps))}function ar(e){var s=e.number,a=e.dates,n=R(),r=n.onWeekNumberClick,l=n.styles,o=n.classNames,i=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(s),{locale:i});if(!r)return t.jsx("span",{className:o.weeknumber,style:l.weeknumber,children:d});var m=c(Number(s),{locale:i}),f=function(h){r(s,a,h)};return t.jsx(Xe,{name:"week-number","aria-label":m,className:o.weeknumber,style:l.weeknumber,onClick:f,children:d})}function nr(e){var s,a,n=R(),r=n.styles,l=n.classNames,o=n.showWeekNumber,i=n.components,c=(s=i==null?void 0:i.Day)!==null&&s!==void 0?s:sr,u=(a=i==null?void 0:i.WeekNumber)!==null&&a!==void 0?a:ar,d;return o&&(d=t.jsx("td",{className:l.cell,style:r.cell,children:t.jsx(u,{number:e.weekNumber,dates:e.dates})})),t.jsxs("tr",{className:l.row,style:r.row,children:[d,e.dates.map(function(m){return t.jsx("td",{className:l.cell,style:r.cell,role:"presentation",children:t.jsx(c,{displayMonth:e.displayMonth,date:m})},_a(m))})]})}function ls(e,s,a){for(var n=a!=null&&a.ISOWeek?Os(s):Wt(s,a),r=a!=null&&a.ISOWeek?ke(e):fe(e,a),l=be(n,r),o=[],i=0;i<=l;i++)o.push(Q(r,i));var c=o.reduce(function(u,d){var m=a!=null&&a.ISOWeek?Ca(d):Oa(d,a),f=u.find(function(h){return h.weekNumber===m});return f?(f.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function rr(e,s){var a=ls(se(e),Nt(e),s);if(s!=null&&s.useFixedWeeks){var n=Aa(e,s);if(n<6){var r=a[a.length-1],l=r.dates[r.dates.length-1],o=jt(l,6-n),i=ls(jt(l,1),o,s);a.push.apply(a,i)}}return a}function lr(e){var s,a,n,r=R(),l=r.locale,o=r.classNames,i=r.styles,c=r.hideHead,u=r.fixedWeeks,d=r.components,m=r.weekStartsOn,f=r.firstWeekContainsDate,h=r.ISOWeek,g=rr(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:l,weekStartsOn:m,firstWeekContainsDate:f}),b=(s=d==null?void 0:d.Head)!==null&&s!==void 0?s:jn,w=(a=d==null?void 0:d.Row)!==null&&a!==void 0?a:nr,_=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:gn;return t.jsxs("table",{id:e.id,className:o.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&t.jsx(b,{}),t.jsx("tbody",{className:o.tbody,style:i.tbody,children:g.map(function(P){return t.jsx(w,{displayMonth:e.displayMonth,dates:P.dates,weekNumber:P.weekNumber},P.weekNumber)})}),t.jsx(_,{displayMonth:e.displayMonth})]})}function or(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ir=or()?p.useLayoutEffect:p.useEffect,ht=!1,dr=0;function os(){return"react-day-picker-".concat(++dr)}function cr(e){var s,a=e??(ht?os():null),n=p.useState(a),r=n[0],l=n[1];return ir(function(){r===null&&l(os())},[]),p.useEffect(function(){ht===!1&&(ht=!0)},[]),(s=e??r)!==null&&s!==void 0?s:void 0}function ur(e){var s,a,n=R(),r=n.dir,l=n.classNames,o=n.styles,i=n.components,c=Ye().displayMonths,u=cr(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,m=[l.month],f=o.month,h=e.displayIndex===0,g=e.displayIndex===c.length-1,b=!h&&!g;r==="rtl"&&(s=[h,g],g=s[0],h=s[1]),h&&(m.push(l.caption_start),f=S(S({},f),o.caption_start)),g&&(m.push(l.caption_end),f=S(S({},f),o.caption_end)),b&&(m.push(l.caption_between),f=S(S({},f),o.caption_between));var w=(a=i==null?void 0:i.Caption)!==null&&a!==void 0?a:pn;return t.jsxs("div",{className:m.join(" "),style:f,children:[t.jsx(w,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(lr,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function fr(e){var s=R(),a=s.classNames,n=s.styles;return t.jsx("div",{className:a.months,style:n.months,children:e.children})}function mr(e){var s,a,n=e.initialProps,r=R(),l=Bt(),o=Ye(),i=p.useState(!1),c=i[0],u=i[1];p.useEffect(function(){r.initialFocus&&l.focusTarget&&(c||(l.focus(l.focusTarget),u(!0)))},[r.initialFocus,c,l.focus,l.focusTarget,l]);var d=[r.classNames.root,r.className];r.numberOfMonths>1&&d.push(r.classNames.multiple_months),r.showWeekNumber&&d.push(r.classNames.with_weeknumber);var m=S(S({},r.styles.root),r.style),f=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,b){var w;return S(S({},g),(w={},w[b]=n[b],w))},{}),h=(a=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&a!==void 0?a:fr;return t.jsx("div",S({className:d.join(" "),style:m,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:t.jsx(h,{children:o.displayMonths.map(function(g,b){return t.jsx(ur,{displayIndex:b,displayMonth:g},b)})})}))}function hr(e){var s=e.children,a=La(e,["children"]);return t.jsx(sn,{initialProps:a,children:t.jsx(mn,{children:t.jsx(Un,{initialProps:a,children:t.jsx(Nn,{initialProps:a,children:t.jsx(kn,{initialProps:a,children:t.jsx(Pn,{children:t.jsx(Gn,{children:s})})})})})})})}function vr(e){return t.jsx(hr,S({},e,{children:t.jsx(mr,{initialProps:e})}))}function zt({className:e,classNames:s,showOutsideDays:a=!0,...n}){return t.jsx(vr,{locale:ue,showOutsideDays:a,className:ie("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ie(ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ie(ts({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...r})=>t.jsx(Ts,{className:"h-4 w-4"}),IconRight:({...r})=>t.jsx(ms,{className:"h-4 w-4"})},...n})}zt.displayName="Calendar";const xr=()=>{const[e,s]=p.useState(null),[a,n]=p.useState(null),[r,l]=p.useState(null),[o,i]=p.useState(!0),[c,u]=p.useState(null);return p.useEffect(()=>{(async()=>{try{i(!0);const{data:{user:m},error:f}=await ss.auth.getUser();if(f)throw f;if(!m)throw new Error("Non authentifi√©");l(m.email),n(m.id),s(m.id);const{data:h,error:g}=await ss.from("users").select("id, name, email").eq("user_id",m.id).single();if(g)throw g;if(!h)throw new Error("User introuvable dans public.users")}catch(m){We.error("Erreur useSupabaseUser:",{error:m.message}),u(m.message)}finally{i(!1)}})()},[]),{supabaseUserId:e,authUserId:a,userEmail:r,loading:o,error:c}},is=()=>t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M22.56 12.25C22.56 11.45 22.49 10.68 22.36 9.92H12.27V14.4H18.16C17.86 15.86 17.03 17.11 15.82 17.9V20.36H19.34C21.43 18.42 22.56 15.58 22.56 12.25Z",fill:"#4285F4"}),t.jsx("path",{d:"M12.27 23C15.22 23 17.73 22.03 19.34 20.36L15.82 17.9C14.86 18.53 13.66 18.88 12.27 18.88C9.56 18.88 7.23 17.13 6.38 14.71H2.74V17.2C4.43 20.62 8.03 23 12.27 23Z",fill:"#34A853"}),t.jsx("path",{d:"M6.38 14.71C6.15 14.03 6.02 13.29 6.02 12.5C6.02 11.71 6.15 10.97 6.38 10.29V7.8H2.74C1.65 9.94 1 12.12 1 14.5C1 16.88 1.65 19.06 2.74 21.2L6.38 17.81V14.71Z",fill:"#FBBC05"}),t.jsx("path",{d:"M12.27 6.12C13.75 6.12 15.05 6.63 15.98 7.5L19.41 4.08C17.73 2.54 15.22 1.5 12.27 1.5C8.03 1.5 4.43 3.88 2.74 7.29L6.38 9.71C7.23 7.37 9.56 6.12 12.27 6.12Z",fill:"#EA4335"})]}),ds=({className:e})=>t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[t.jsx("line",{x1:"8",y1:"6",x2:"8",y2:"18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("polyline",{points:"12 8 16 12 12 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),cs=Array.from({length:15},(e,s)=>`${8+s}:00`),pr=({event:e,onClose:s,onReport:a,onEdit:n,prospects:r,supabaseUsers:l,updateAppointment:o,deleteAppointment:i,projectsData:c,navigate:u})=>{var P;const[d,m]=p.useState((e==null?void 0:e.status)||"pending");if(p.useEffect(()=>{e&&m(e.status)},[e]),!e)return null;const f=r.find(O=>O.id===e.contactId),h=l.find(O=>O.id===e.assignedUserId||O.user_id===e.assignedUserId)||(f?l.find(O=>O.user_id===f.ownerId):null),g=O=>{m(O),o(e.id,{status:O}),setTimeout(()=>{s(),O==="reporte"&&a(e)},300)},b=()=>{i(e.id),K({title:"‚úÖ RDV supprim√©",description:"Le rendez-vous a √©t√© retir√© de votre agenda."}),s()},w=O=>{if(!f){K({title:"Contact non trouv√©",variant:"destructive"});return}switch(O){case"Appel":f.phone&&(window.location.href=`tel:${f.phone}`);break;case"Mail":f.email&&(window.location.href=`mailto:${f.email}`);break;case"WhatsApp":if(f.phone){let W=f.phone.replace(/\D/g,"");W.startsWith("0")&&(W=`33${W.substring(1)}`);const Y=encodeURIComponent("Bonjour");window.open(`https://wa.me/${W}?text=${Y}`,"_blank")}break;case"GPS":if(f.address){const W=encodeURIComponent(f.address);/Mac|iPod|iPhone|iPad/.test(navigator.platform)?window.location.href=`maps://?q=${W}`:window.open(`https://www.google.com/maps/search/?api=1&query=${W}`,"_blank")}break;default:K({title:`Action: ${O}`,description:"üöß Cette fonctionnalit√© n'est pas encore impl√©ment√©e."})}},_={pending:{color:"bg-blue-500",label:"Qualifier votre activit√©"},effectue:{color:"bg-green-500",label:"Effectu√©"},annule:{color:"bg-red-500",label:"Annul√©"},reporte:{color:"bg-yellow-500",label:"Report√©"}};return t.jsx(Dt,{open:!!e,onOpenChange:O=>!O&&s(),children:t.jsxs(Ct,{className:"sm:max-w-md p-0",children:[t.jsx("button",{onClick:s,className:"absolute right-2 top-2 rounded-full p-2 bg-gray-100 hover:bg-gray-200 transition-colors z-10 group",children:t.jsx(ia,{className:"h-6 w-6 text-gray-600 group-hover:text-gray-900"})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"text-center py-3 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx("p",{className:"text-lg font-semibold text-blue-900",children:Gt(F(e.start,"eeee d MMMM",{locale:ue}))}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[F(e.start,"HH:mm",{locale:ue})," - ",F(e.end,"HH:mm",{locale:ue})]})]}),t.jsx(kt,{className:"p-0 text-left space-y-1",children:t.jsx(_t,{className:"text-xl font-bold text-gray-900",children:e.summary})}),t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-start space-x-3 text-gray-600 flex-1",children:[t.jsx(Et,{className:"h-5 w-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Participants"}),f&&t.jsxs("p",{className:"text-sm",children:[f.name," (Client)"]}),h&&t.jsxs("p",{className:"text-sm",children:[h.name," (Assign√©)"]})]})]}),f&&e.projectId&&u&&t.jsxs(B,{onClick:()=>{s(),u(`/admin/pipeline?prospect=${f.id}&project=${e.projectId}`)},size:"sm",variant:"outline",className:"flex items-center gap-2 text-blue-600 border-blue-600 hover:bg-blue-50",children:[t.jsx(fa,{className:"h-4 w-4"}),"Ouvrir le projet"]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 p-6 space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Actions rapides"}),t.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:[{icon:Fe,label:"Appel"},{icon:ps,label:"Mail"},{icon:gs,label:"WhatsApp"},{icon:It,label:"GPS"}].map(({icon:O,label:W})=>t.jsxs("button",{onClick:()=>w(W),className:"flex flex-col items-center space-y-1 text-gray-600 hover:text-blue-600 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center group-hover:bg-blue-100",children:t.jsx(O,{className:"h-6 w-6"})}),t.jsx("span",{className:"text-xs font-medium",children:W})]},W))})]}),t.jsx("div",{className:`p-4 text-white transition-colors ${_[d].color}`,children:t.jsxs(Mt,{onValueChange:g,value:d,children:[t.jsx(St,{className:"w-full bg-transparent border-none text-white text-lg font-semibold focus:ring-0 focus:ring-offset-0 h-auto p-0 text-center justify-center",iconClassName:"h-8 w-8 opacity-100",children:t.jsx(Tt,{placeholder:"Qualifier votre activit√©"})}),t.jsxs(Ot,{children:[t.jsx(we,{value:"pending",disabled:!0,children:"Qualifier votre activit√©"}),t.jsx(we,{value:"effectue",children:"Effectu√©"}),t.jsx(we,{value:"annule",children:"Annul√©"}),t.jsx(we,{value:"reporte",children:"Report√©"})]})]})}),t.jsxs("div",{className:"border-t border-gray-200 p-6 space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Infos activit√©"}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Projet"}),t.jsx("span",{className:"font-medium text-gray-800",children:((P=c[e.projectId])==null?void 0:P.title)||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"√âtape"}),t.jsx("span",{className:"font-medium text-gray-800",children:e.step||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Note"}),t.jsx("span",{className:"font-medium text-gray-800 text-right",children:e.notes||"Aucune"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Interlocuteur"}),t.jsx("span",{className:"font-medium text-gray-800",children:(f==null?void 0:f.name)||"N/A"})]})]})]}),t.jsxs(Pt,{className:"p-6 bg-gray-50 sm:justify-between",children:[t.jsxs(bs,{children:[t.jsx(ys,{asChild:!0,children:t.jsxs(B,{variant:"ghost",className:"text-red-600 hover:bg-red-50 hover:text-red-700",children:[t.jsx(js,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),t.jsxs(ws,{children:[t.jsxs(Ns,{children:[t.jsx(Ds,{children:"Voulez-vous vraiment supprimer ce RDV ?"}),t.jsx(Cs,{children:"Cette action est irr√©versible. Le rendez-vous sera d√©finitivement supprim√©."})]}),t.jsxs(ks,{children:[t.jsx(_s,{children:"Annuler"}),t.jsx(Ms,{onClick:b,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]}),t.jsx(B,{className:e!=null&&e.status&&e.status!=="pending"?"bg-gray-400 hover:bg-gray-500 text-gray-700":"bg-blue-600 hover:bg-blue-700",onClick:()=>n(e),children:"Modifier l‚Äôactivit√©"})]})]})})},gr=({activity:e,type:s,onClose:a,onEdit:n,prospects:r,supabaseUsers:l,updateCall:o,deleteCall:i,updateTask:c,deleteTask:u,projectsData:d})=>{var y,C;const[m,f]=p.useState((e==null?void 0:e.status)||"pending"),[h,g]=p.useState((e==null?void 0:e.status)==="effectue");if(p.useEffect(()=>{e&&(s==="call"&&f(e.status||"pending"),s==="task"&&g(e.status==="effectue"))},[e,s]),!e)return null;const b=r.find(A=>A.id===e.contactId),w=l.find(A=>A.id===e.assignedUserId||A.user_id===e.assignedUserId)||(b?l.find(A=>A.user_id===b.ownerId):null),_=A=>{f(A),s==="call"&&o(e.id,{status:A}),setTimeout(()=>a(),300)},P=A=>{g(A),s==="task"&&c(e.id,{status:A?"effectue":"pending"}),setTimeout(()=>a(),300)},O=()=>{s==="call"?(i(e.id),K({title:"‚úÖ Appel supprim√©",description:"L'appel a √©t√© retir√© de votre agenda."})):s==="task"&&(u(e.id),K({title:"‚úÖ T√¢che supprim√©e",description:"La t√¢che a √©t√© retir√©e de votre agenda."})),a()},W=A=>{if(!b){K({title:"Contact non trouv√©",variant:"destructive"});return}switch(A){case"Appel":b.phone&&(window.location.href=`tel:${b.phone}`);break;case"Mail":b.email&&(window.location.href=`mailto:${b.email}`);break;case"WhatsApp":if(b.phone){let M=b.phone.replace(/\D/g,"");M.startsWith("0")&&(M=`33${M.substring(1)}`);const q=encodeURIComponent("Bonjour");window.open(`https://wa.me/${M}?text=${q}`,"_blank")}break;case"GPS":if(b.address){const M=encodeURIComponent(b.address);/Mac|iPod|iPhone|iPad/.test(navigator.platform)?window.location.href=`maps://?q=${M}`:window.open(`https://www.google.com/maps/search/?api=1&query=${M}`,"_blank")}break;default:K({title:`Action: ${A}`,description:"üöß Cette fonctionnalit√© n'est pas encore impl√©ment√©e."})}},Y=s==="call",ee=s==="task",$=e.start instanceof Date?e.start:new Date(e.start),v=Y?`Appel: ${e.title||"Sans titre"}`:`T√¢che: ${e.title||"Sans titre"}`,I=`Pr√©vu le ${Gt(F($,"eeee d MMMM '√†' HH:mm",{locale:ue}))}`,N={pending:{color:"bg-blue-500",label:"Qualifier votre activit√©"},effectue:{color:"bg-green-500",label:"Effectu√©"},annule:{color:"bg-red-500",label:"Annul√©"}};return t.jsx(Dt,{open:!!e,onOpenChange:A=>!A&&a(),children:t.jsxs(Ct,{className:"sm:max-w-md p-0 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs(kt,{className:"p-0 text-left space-y-1",children:[t.jsx(_t,{className:"text-2xl font-bold text-gray-900",children:v}),t.jsx(hs,{className:"text-base text-gray-500",children:I})]}),t.jsxs("div",{className:"flex items-start space-x-3 text-gray-600",children:[t.jsx(Et,{className:"h-5 w-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Participants"}),b&&t.jsxs("p",{className:"text-sm",children:[b.name," (Client)"]}),w&&t.jsxs("p",{className:"text-sm",children:[w.name," (Assign√©)"]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 p-6 space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Actions rapides"}),t.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:[{icon:Fe,label:"Appel"},{icon:ps,label:"Mail"},{icon:gs,label:"WhatsApp"},{icon:It,label:"GPS"}].map(({icon:A,label:M})=>t.jsxs("button",{onClick:()=>W(M),className:"flex flex-col items-center space-y-1 text-gray-600 hover:text-blue-600 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center group-hover:bg-blue-100",children:t.jsx(A,{className:"h-6 w-6"})}),t.jsx("span",{className:"text-xs font-medium",children:M})]},M))})]}),Y&&t.jsx("div",{className:`p-4 text-white transition-colors ${N[m].color}`,children:t.jsxs(Mt,{onValueChange:_,value:m,children:[t.jsx(St,{className:"w-full bg-transparent border-none text-white text-lg font-semibold focus:ring-0 focus:ring-offset-0 h-auto p-0 text-center justify-center",iconClassName:"h-8 w-8 opacity-100",children:t.jsx(Tt,{placeholder:"Qualifier votre activit√©"})}),t.jsxs(Ot,{children:[t.jsx(we,{value:"pending",disabled:!0,children:"Qualifier votre activit√©"}),t.jsx(we,{value:"effectue",children:"Effectu√©"}),t.jsx(we,{value:"annule",children:"Annul√©"})]})]})}),ee&&t.jsx("div",{className:"p-6 bg-green-500 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(xs,{id:"task-done",checked:h,onCheckedChange:P,className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors duration-300 ${h?"bg-white border border-gray-300":"bg-gray-500"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full transition-transform duration-300 ${h?"translate-x-6 bg-gray-300":"translate-x-1 bg-white"}`})}),t.jsx(xe,{htmlFor:"task-done",className:"text-lg font-semibold text-white",children:h?"T√¢che effectu√©e":"Marquer comme effectu√©e"})]})}),t.jsxs("div",{className:"border-t border-gray-200 p-6 space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Infos activit√©"}),t.jsxs("div",{className:"space-y-3 text-sm",children:[Y&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Projet"}),t.jsx("span",{className:"font-medium text-gray-800",children:((y=d[e.projectId])==null?void 0:y.title)||"Aucun"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"√âtape"}),t.jsx("span",{className:"font-medium text-gray-800",children:e.step||"Aucune"})]})]}),ee&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Projet"}),t.jsx("span",{className:"font-medium text-gray-800",children:((C=d[e.projectId])==null?void 0:C.title)||"Aucun"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"√âtape"}),t.jsx("span",{className:"font-medium text-gray-800",children:e.step||"Aucune"})]})]}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("span",{className:"text-gray-500",children:"Note"}),t.jsx("p",{className:"font-medium text-gray-800 whitespace-pre-wrap break-words",children:e.notes||"Aucune"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Interlocuteur"}),t.jsx("span",{className:"font-medium text-gray-800",children:(b==null?void 0:b.name)||"N/A"})]})]})]}),t.jsxs(Pt,{className:"p-6 bg-gray-50 sm:justify-between",children:[t.jsxs(bs,{children:[t.jsx(ys,{asChild:!0,children:t.jsxs(B,{variant:"ghost",className:"text-red-600 hover:bg-red-50 hover:text-red-700",children:[t.jsx(js,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),t.jsxs(ws,{children:[t.jsxs(Ns,{children:[t.jsx(Ds,{children:"Voulez-vous vraiment supprimer cette activit√© ?"}),t.jsx(Cs,{children:"Cette action est irr√©versible."})]}),t.jsxs(ks,{children:[t.jsx(_s,{children:"Annuler"}),t.jsx(Ms,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]}),t.jsx(B,{className:s==="call"&&(e!=null&&e.status)&&e.status!=="pending"||s==="task"&&(e==null?void 0:e.status)==="effectue"?"bg-gray-400 hover:bg-gray-500 text-gray-700":"bg-blue-600 hover:bg-blue-700",onClick:()=>n(e,s),children:"Modifier l‚Äôactivit√©"})]})]})})},br=({appointment:e,onAppointmentClick:s,onDrop:a})=>{const[n,r]=p.useState(!1),l=e.start instanceof Date?e.start:new Date(e.start),o=e.end instanceof Date?e.end:new Date(e.end);if(!(l instanceof Date)||Number.isNaN(l.getTime())||!(o instanceof Date)||Number.isNaN(o.getTime()))return We.warn("Rendez-vous ignor√© - date invalide",{appointmentId:e==null?void 0:e.id,appointmentTitle:e==null?void 0:e.title}),null;const i=l.getHours(),c=l.getMinutes(),u=o.getHours(),d=o.getMinutes(),m=((i-8)*60+c)*(60/60)+1,f=((u-i)*60+(d-c))*(60/60),h={effectue:"bg-green-500 text-white",annule:"bg-red-500 text-white",reporte:"bg-yellow-400 text-black"},g={effectue:"Effectu√©",annule:"Annul√©",reporte:"Report√©"},b=_=>{r(!0);const P=JSON.stringify({appointmentId:e.id,originalStart:l,originalEnd:o,duration:u-i+(d-c)/60}),O=_.target.cloneNode(!0);O.style.position="absolute",O.style.top="-1000px",O.style.width=_.target.offsetWidth+"px",O.style.height=_.target.offsetHeight+"px",O.style.transform="none",document.body.appendChild(O);const W=_.target.getBoundingClientRect();_.clientX-W.left-W.width/2,_.clientY-W.top-W.height/2,_.dataTransfer.setDragImage(O,W.width/2,W.height/2),setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},100);try{_.dataTransfer.setData("application/json",P)}catch{}try{_.dataTransfer.setData("text/plain",P)}catch{}_.dataTransfer.effectAllowed="move"},w=()=>{r(!1)};return t.jsxs(Le.div,{style:{top:`${m}px`,height:`${f}px`},className:ie("absolute w-[90%] left-[5%] p-2 rounded-lg border-l-4 cursor-move overflow-hidden select-none",e.color||(e.type==="physical"?"bg-blue-100 border-blue-500 text-blue-800":"bg-purple-100 border-purple-500 text-purple-800"),n&&"opacity-50 scale-95 shadow-lg z-50"),draggable:!0,onDragStart:b,onDragEnd:w,onClick:_=>{_.stopPropagation(),n||s({...e,start:l,end:o})},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},title:"Glissez pour d√©placer le rendez-vous",children:[t.jsx("p",{className:"font-semibold text-sm truncate",children:e.title||e.summary||"RDV"}),t.jsxs("p",{className:"text-xs truncate",children:[F(l,"HH:mm")," - ",F(o,"HH:mm")]}),e.notes&&t.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:e.notes}),g[e.status]&&t.jsx("span",{className:`absolute bottom-1 right-1 text-xs font-bold px-2 py-0.5 rounded-full ${h[e.status]}`,children:g[e.status]})]})},Gt=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",us=({onAddActivity:e,currentDate:s,selectedUserId:a,onSelectActivity:n,onAppointmentClick:r,calls:l,tasks:o,appointments:i,prospects:c,updateTask:u,activeAdminUser:d})=>{const m=l||[],f=o||[],h=i||[],g=c||[],[b,w]=p.useState(!1),[_,P]=p.useState(!1),O=p.useMemo(()=>{if(!d)return[];const v=d.access_rights||d.accessRights,I=d.role==="Global Admin"||d.role==="Admin"?null:[d.user_id,...(v==null?void 0:v.users)||[]];return m.filter(N=>{const y=I?I.includes(N.assignedUserId):!0,C=N.start instanceof Date?N.start:new Date(N.start);return y&&Z(C,s)&&N.assignedUserId===a})},[m,s,a,d]),W=p.useMemo(()=>{if(!d)return[];const v=d.access_rights||d.accessRights,I=d.role==="Global Admin"||d.role==="Admin"?null:[d.user_id,...(v==null?void 0:v.users)||[]],N=new Date(s);return N.setHours(23,59,59,999),m.filter(y=>{const C=I?I.includes(y.assignedUserId):!0,A=y.start instanceof Date?y.start:new Date(y.start);return C&&A>N&&y.assignedUserId===a&&y.status!=="effectue"&&y.status!=="annule"}).sort((y,C)=>{const A=y.start instanceof Date?y.start:new Date(y.start),M=C.start instanceof Date?C.start:new Date(C.start);return A-M})},[m,s,a,d]),Y=p.useMemo(()=>{if(!d)return[];const v=d.access_rights||d.accessRights,I=d.role==="Global Admin"||d.role==="Admin"?null:[d.user_id,...(v==null?void 0:v.users)||[]];return f.filter(N=>{const y=I?I.includes(N.assignedUserId):!0,C=N.start instanceof Date?N.start:new Date(N.start);return y&&Z(C,s)&&N.assignedUserId===a}).sort((N,y)=>N.status==="pending"&&y.status!=="pending"?-1:N.status!=="pending"&&y.status==="pending"?1:0)},[f,s,a,d]),ee=p.useMemo(()=>{if(!d)return[];const v=d.access_rights||d.accessRights,I=d.role==="Global Admin"||d.role==="Admin"?null:[d.user_id,...(v==null?void 0:v.users)||[]],N=new Date(s);return N.setHours(23,59,59,999),f.filter(y=>{const C=I?I.includes(y.assignedUserId):!0,A=y.start instanceof Date?y.start:new Date(y.start);return C&&A>N&&y.assignedUserId===a}).sort((y,C)=>{if(y.status==="pending"&&C.status!=="pending")return-1;if(y.status!=="pending"&&C.status==="pending")return 1;const A=y.start instanceof Date?y.start:new Date(y.start),M=C.start instanceof Date?C.start:new Date(C.start);return A-M})},[f,s,a,d]),$=p.useMemo(()=>{if(!d)return{calls:[],tasks:[],appointments:[]};const v=d.access_rights||d.accessRights,I=d.role==="Global Admin"||d.role==="Admin"?null:[d.user_id,...(v==null?void 0:v.users)||[]],N=new Date,y=m.filter(M=>{const q=I?I.includes(M.assignedUserId):!0,ae=new Date(`${M.date}T${M.time}`);return q&&ae<N&&M.assignedUserId===a&&M.status!=="effectue"&&M.status!=="annule"}),C=f.filter(M=>{const q=I?I.includes(M.assignedUserId):!0,ae=new Date(M.date);return ae.setHours(23,59,59,999),q&&ae<N&&M.assignedUserId===a&&!M.done}),A=h.filter(M=>{const q=I?I.includes(M.assignedUserId):!0,ae=new Date(M.end||M.start);return q&&ae<N&&M.assignedUserId===a&&M.status!=="effectue"&&M.status!=="annule"&&M.status!=="reporte"});return{calls:y,tasks:C,appointments:A}},[m,f,h,a,d]);return t.jsxs("aside",{className:"w-full lg:w-80 h-full p-5 space-y-6 overflow-y-auto no-scrollbar bg-white rounded-3xl shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"pb-4 border-b border-gray-200 mb-4 flex justify-between items-center",children:[t.jsxs("h2",{className:"flex items-center text-xl font-bold text-gray-900",children:[t.jsx("span",{className:"mr-2 text-2xl",children:"üöÄ"})," Activit√© du jour"]}),t.jsx(B,{size:"icon",className:"rounded-full",onClick:()=>e(),children:t.jsx(da,{className:"h-5 w-5"})})]}),($.calls.length>0||$.tasks.length>0||$.appointments.length>0)&&t.jsxs("details",{open:!0,className:"group",children:[t.jsx("summary",{className:"cursor-pointer",children:t.jsxs("div",{className:"bg-red-500 text-white p-3 rounded-lg flex items-center justify-between shadow-md",children:[t.jsxs("h3",{className:"flex items-center text-base font-semibold",children:[t.jsx(vs,{className:"mr-2 h-5 w-5"})," Activit√©s en retard (",$.calls.length+$.tasks.length+$.appointments.length,")"]}),t.jsx(je,{className:"h-5 w-5 transition-transform duration-200 group-open:rotate-180"})]})}),t.jsxs("div",{className:"space-y-2 pt-3 pl-2",children:[$.appointments.map(v=>{const I=g.find(C=>C.id===v.contactId),N=v.start instanceof Date?v.start:new Date(v.start);if(!N||isNaN(N.getTime()))return We.warn("AgendaSidebar - RDV ignor√© date invalide",{appointmentId:v==null?void 0:v.id}),null;const y={...v,start:N,end:v.end instanceof Date?v.end:new Date(v.end)};return t.jsx("div",{onClick:()=>r&&r(y),className:"bg-white rounded-lg p-3 shadow-sm cursor-pointer hover:bg-gray-50 border-l-4 border-red-500",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[t.jsx(At,{className:"mr-2 h-4 w-4 text-red-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"font-medium text-sm text-gray-800 truncate",children:v.summary||v.title||"RDV"}),I&&t.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["avec ",I.name]}),v.notes&&t.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.notes})]})]}),t.jsxs("div",{className:"flex flex-col items-end ml-2",children:[t.jsx("span",{className:"text-xs font-semibold text-red-700 bg-red-100 px-2 py-1 rounded-full whitespace-nowrap",children:F(N,"dd/MM")}),t.jsx("span",{className:"text-xs text-gray-500 mt-1",children:F(N,"HH:mm")})]})]})},`overdue-appointment-${v.id}`)}),$.calls.map(v=>{const I=v.start instanceof Date?v.start:new Date(v.start),N=F(I,"HH:mm"),y=F(I,"dd/MM");return t.jsxs("div",{onClick:()=>n("call",v),className:"bg-white rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-gray-50 border-l-4 border-red-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Fe,{className:"mr-2 h-4 w-4 text-red-500"}),t.jsx("p",{className:"font-medium text-sm text-gray-800",children:v.title||"Appel"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-xs font-semibold text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[y," ",N]})})]},`overdue-call-${v.id}`)}),$.tasks.map(v=>{const I=v.start instanceof Date?v.start:new Date(v.start),N=F(I,"dd/MM");return t.jsxs("div",{onClick:()=>n("task",v),className:"bg-white rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-gray-50 border-l-4 border-red-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Te,{className:"mr-2 h-4 w-4 text-red-500"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:v.title||"T√¢che"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("span",{className:"text-xs font-semibold text-red-700 bg-red-100 px-2 py-1 rounded-full",children:N})})]},`overdue-task-${v.id}`)})]})]}),t.jsxs("details",{open:!0,className:"group",children:[t.jsx("summary",{className:"cursor-pointer",children:t.jsxs("div",{className:"bg-yellow-500 text-white p-3 rounded-lg flex items-center justify-between shadow-md",children:[t.jsxs("h3",{className:"flex items-center text-base font-semibold",children:[t.jsx(Fe,{className:"mr-2 h-5 w-5"})," Appels",$.calls.length>0&&t.jsxs("span",{className:"ml-2 text-xs font-bold bg-red-500 text-white px-2 py-1 rounded-full",children:[$.calls.length," en retard"]})]}),t.jsx(je,{className:"h-5 w-5 transition-transform duration-200 group-open:rotate-180"})]})}),t.jsxs("div",{className:"space-y-2 pt-3 pl-2",children:[O.length>0?O.map(v=>{const I=v.start instanceof Date?v.start:new Date(v.start),N=F(I,"HH:mm");return t.jsxs("div",{onClick:()=>n("call",v),className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-yellow-200",children:[t.jsx("p",{className:`font-medium text-sm ${v.status==="effectue"||v.status==="annule"?"line-through text-gray-400":""}`,children:v.title||"Appel"}),t.jsx("span",{className:"text-xs font-semibold text-yellow-700 bg-yellow-200 px-2 py-1 rounded-full",children:N})]},v.id)}):t.jsx("p",{className:"text-sm text-gray-500 px-2",children:"Aucun appel aujourd'hui."}),W.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>w(!b),className:"w-full flex items-center justify-between text-sm text-yellow-600 hover:text-yellow-800 font-medium px-2 py-2 hover:bg-yellow-50 rounded transition-colors",children:[t.jsxs("span",{children:["Appels √† venir (",W.length,")"]}),t.jsx(je,{className:`h-4 w-4 transition-transform ${b?"rotate-180":""}`})]}),b&&t.jsx("div",{className:"space-y-2 border-l-2 border-yellow-200 pl-3 ml-2",children:W.map(v=>{const I=v.start instanceof Date?v.start:new Date(v.start),N=F(I,"HH:mm"),y=F(I,"EEE dd MMM",{locale:ue});return t.jsxs("div",{onClick:()=>n("call",v),className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-yellow-200",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-sm truncate",children:v.title||"Appel"}),t.jsx("p",{className:"text-xs text-gray-500",children:y})]}),t.jsx("span",{className:"text-xs font-semibold text-yellow-700 bg-yellow-200 px-2 py-1 rounded-full ml-2",children:N})]},v.id)})})]})]})]}),t.jsxs("details",{open:!0,className:"group",children:[t.jsx("summary",{className:"cursor-pointer",children:t.jsxs("div",{className:"bg-green-500 text-white p-3 rounded-lg flex items-center justify-between shadow-md",children:[t.jsxs("h3",{className:"flex items-center text-base font-semibold",children:[t.jsx(Te,{className:"mr-2 h-5 w-5"})," T√¢ches",$.tasks.length>0&&t.jsxs("span",{className:"ml-2 text-xs font-bold bg-red-500 text-white px-2 py-1 rounded-full",children:[$.tasks.length," en retard"]})]}),t.jsx(je,{className:"h-5 w-5 transition-transform duration-200 group-open:rotate-180"})]})}),t.jsxs("div",{className:"space-y-2 pt-3 pl-2",children:[Y.length>0?Y.map(v=>{const I=v.status==="effectue",N=g.find(y=>y.id===v.contactId);return t.jsxs("div",{onClick:()=>n("task",v),className:"bg-green-100 border-l-4 border-green-500 text-green-800 rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-green-200",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium ${I?"line-through text-gray-500":""} truncate`,children:v.title||"T√¢che"}),N&&t.jsxs("p",{className:"text-xs text-green-600 font-medium mt-1",children:["üë§ ",N.name]})]}),I&&t.jsx(Te,{className:"h-5 w-5 text-green-600 ml-2 flex-shrink-0"})]},v.id)}):t.jsx("p",{className:"text-sm text-gray-500 px-2",children:"Aucune t√¢che aujourd'hui."}),ee.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>P(!_),className:"w-full flex items-center justify-between text-sm text-green-600 hover:text-green-800 font-medium px-2 py-2 hover:bg-green-50 rounded transition-colors",children:[t.jsxs("span",{children:["T√¢ches √† venir (",ee.length,")"]}),t.jsx(je,{className:`h-4 w-4 transition-transform ${_?"rotate-180":""}`})]}),_&&t.jsx("div",{className:"space-y-2 border-l-2 border-green-200 pl-3 ml-2",children:ee.map(v=>{const I=v.start instanceof Date?v.start:new Date(v.start),N=F(I,"EEE dd MMM",{locale:ue}),y=v.status==="effectue",C=g.find(A=>A.id===v.contactId);return t.jsxs("div",{onClick:()=>n("task",v),className:"bg-green-100 border-l-4 border-green-500 text-green-800 rounded-lg p-3 flex items-center justify-between shadow-sm cursor-pointer hover:bg-green-200",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium ${y?"line-through text-gray-500":""} truncate`,children:v.title||"T√¢che"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("p",{className:"text-xs text-gray-500",children:N}),C&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-400",children:"‚Ä¢"}),t.jsxs("p",{className:"text-xs text-green-600 font-medium truncate",children:["üë§ ",C.name]})]})]})]}),y&&t.jsx(Te,{className:"h-5 w-5 text-green-600 ml-2 flex-shrink-0"})]},v.id)})})]})]})]})]})},Bs=({open:e,onOpenChange:s,initialData:a,defaultAssignedUserId:n,addAppointment:r,addCall:l,addTask:o,updateAppointment:i,updateCall:c,updateTask:u,prospects:d,users:m,projectsData:f})=>{var Me;const[h,g]=p.useState(null),[b,w]=p.useState(""),{projectStepsStatus:_}=ua(h==null?void 0:h.id),P=d||[],O=m||[],W=r,Y=l,ee=o,$=i,v=c,I=u,[N,y]=p.useState(""),[C,A]=p.useState("physical"),[M,q]=p.useState(new Date),[ae,k]=p.useState("14:30"),[D,ne]=p.useState(""),[he,de]=p.useState(!1),[Be,Ne]=p.useState(!1),[Ve,De]=p.useState(!1),[V,Ce]=p.useState(n||null),[le,_e]=p.useState(!1),ve=p.useMemo(()=>!O||!Array.isArray(O)?[]:O.map(j=>({value:j.user_id,label:j.name})),[O]);p.useEffect(()=>{var j;if(a){_e(!!a.id);const X=P.find(z=>z.id===a.contactId);X&&g(X),w(a.projectId||""),y(a.step||""),ne(a.notes||a.description||a.details||a.text||""),de(a.share||!1);const U=a.start||a.date;if(U){const z=U instanceof Date?U:new Date(U);q(z),k(F(z,"HH:mm"))}Ce(a.assignedUserId||n||null);const J=a.type||((j=a.color)!=null&&j.includes("blue")?"physical":"virtual");A(J)}else _e(!1),ze()},[a,P,n]),p.useEffect(()=>{n&&!V&&!a&&Ce(n)},[n,V,a]),p.useEffect(()=>{var j,X,U;if(h&&b){const J=_==null?void 0:_[b];if(J&&Array.isArray(J)&&J.length>0){const z=J.find(Se=>Se.status==="in_progress");if(z)y(z.name);else{const Se=J.find(st=>st.status!=="completed");y(Se?Se.name:((j=J[J.length-1])==null?void 0:j.name)||"")}}else{const z=(X=f==null?void 0:f[b])==null?void 0:X.steps;z&&z.length>0?y(((U=z[0])==null?void 0:U.name)||""):y("")}}},[h,b,_,f]);const ze=()=>{g(null),w(""),y(""),A("physical"),q(new Date),k("14:30"),ne(""),de(!1),Ce(n||null),_e(!1)},ye=()=>{s(!1)},oe=()=>{if(!h||C!=="task"&&!b||!V){K({title:"Champs requis",description:"Veuillez s√©lectionner un contact, un projet et un utilisateur.",variant:"destructive"});return}if((C==="physical"||C==="virtual"||C==="call")&&!N){K({title:"Champs requis",description:"Veuillez s√©lectionner une √©tape.",variant:"destructive"});return}const[j,X]=ae.split(":").map(Number),U=Qe(M,{hours:j,minutes:X,seconds:0,milliseconds:0});if(C==="call"){const J=Je(U,{minutes:30}),z={title:`üìû Appel avec ${h.name}`,startTime:U.toISOString(),endTime:J.toISOString(),contactId:h.id,projectId:b,step:N,assignedUserId:V,type:"call",status:le?a.status:"pending",notes:D,location:null};le?(v(a.id,z),K({title:"‚úÖ Appel modifi√© !",description:"Les changements ont √©t√© enregistr√©s."})):(Y(z),K({title:"‚úÖ Appel ajout√© !",description:`Appel avec ${h.name} planifi√©.`}))}else if(C==="task"){const J=Qe(U,{hours:23,minutes:59,seconds:59}),z={title:D||`‚úÖ T√¢che pour ${h.name}`,startTime:U.toISOString(),endTime:J.toISOString(),contactId:h.id,projectId:b,step:N,assignedUserId:V,type:"task",status:le&&a.done?"effectue":"pending",notes:D,location:null};le?(I(a.id,z),K({title:"‚úÖ T√¢che modifi√©e !",description:"Les changements ont √©t√© enregistr√©s."})):(ee(z),K({title:"‚úÖ T√¢che ajout√©e !",description:`T√¢che planifi√©e pour ${h.name}.`}))}else{const J=Je(U,{hours:1}),z={title:`${C==="physical"?"üìç":"üé•"} RDV avec ${h.name}`,startTime:U.toISOString(),endTime:J.toISOString(),contactId:h.id,projectId:b,step:N,assignedUserId:V,type:C,status:le?a.status:"pending",share:he,notes:D,location:C==="physical"?"√Ä d√©finir":"Visio"};le?($(a.id,z),K({title:"‚úÖ RDV Modifi√© !",description:"Le RDV a √©t√© mis √† jour."})):(W(z),K({title:"‚úÖ RDV Ajout√© !",description:`RDV le ${F(U,"dd/MM/yy √† HH:mm")}.`})),he&&K({title:"‚úÖ RDV partag√© avec le client.",description:`Plac√© sous l'√©tape: ${N}.`})}ye()},pe=C==="physical"||C==="virtual";return t.jsx(Dt,{open:e,onOpenChange:ye,children:t.jsxs(Ct,{className:"sm:max-w-[480px] p-0",children:[t.jsxs(kt,{children:[t.jsx(_t,{children:le?"Modifier l'activit√©":"Ajouter une activit√©"}),t.jsx(hs,{children:le?"Mettez √† jour les d√©tails de l'activit√©.":"Planifiez un nouveau rendez-vous et int√©grez-le au projet d'un client."})]}),t.jsxs("div",{className:"overflow-y-auto px-6 py-4 grid gap-6 flex-1",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{children:"√âtape 1 : S√©lectionner un Contact"}),t.jsxs(Ie,{open:Be,onOpenChange:Ne,children:[t.jsx(Ae,{asChild:!0,children:t.jsxs(B,{variant:"outline",role:"combobox","aria-expanded":Be,className:"w-full justify-between",children:[h?h.name:"S√©lectionner un contact...",t.jsx(je,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Pe,{className:"w-[420px] p-0",children:t.jsxs(vt,{children:[t.jsx(xt,{placeholder:"Rechercher un contact..."}),t.jsxs(pt,{children:[t.jsx(gt,{children:"Aucun contact trouv√©."}),t.jsx(bt,{children:P.map(j=>t.jsx(yt,{value:j.name,onSelect:()=>{g(j),(!a||!le)&&(w(""),y("")),Ne(!1)},children:j.name},j.id))})]})]})})]})]}),h&&t.jsxs(t.Fragment,{children:[t.jsxs(Le.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"space-y-2",children:[t.jsx(xe,{children:"√âtape 2 : S√©lectionner le Projet"}),t.jsxs(Mt,{value:b,onValueChange:j=>{w(j),y("")},children:[t.jsx(St,{children:t.jsx(Tt,{placeholder:"S√©lectionner un projet"})}),t.jsx(Ot,{children:h.tags.map(j=>{var X;return t.jsx(we,{value:j,children:((X=f[j])==null?void 0:X.title)||j},j)})})]})]}),b&&t.jsxs(Le.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{children:"√âtape 3 : √âtape du projet"}),t.jsxs("div",{className:"flex items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:[t.jsx("span",{children:pe||C==="call"||C==="task"?N||"S√©lectionnez une √©tape":"Non applicable"}),(pe||C==="call"||C==="task")&&t.jsx(vs,{className:"h-4 w-4 text-gray-400"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{children:"√âtape 4 : Cr√©er l'activit√©"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs(B,{variant:C==="physical"?"default":"outline",onClick:()=>A("physical"),className:C==="physical"?"bg-blue-500 hover:bg-blue-600 text-white":"text-blue-500 border-blue-500",children:[t.jsx(It,{className:"mr-2 h-4 w-4"}),"RDV Physique"]}),t.jsxs(B,{variant:C==="virtual"?"default":"outline",onClick:()=>A("virtual"),className:C==="virtual"?"bg-purple-500 hover:bg-purple-600 text-white":"text-purple-500 border-purple-500",children:[t.jsx(ca,{className:"mr-2 h-4 w-4"}),"RDV Virtuel"]}),t.jsxs(B,{variant:C==="call"?"default":"outline",onClick:()=>A("call"),className:C==="call"?"bg-yellow-500 hover:bg-yellow-600 text-white":"text-yellow-500 border-yellow-500",children:[t.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Appel"]}),t.jsxs(B,{variant:C==="task"?"default":"outline",onClick:()=>A("task"),className:C==="task"?"bg-green-500 hover:bg-green-600 text-white":"text-green-500 border-green-500",children:[t.jsx(ma,{className:"mr-2 h-4 w-4"}),"T√¢che"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{htmlFor:"date",children:"Date"}),t.jsxs(Ie,{children:[t.jsx(Ae,{asChild:!0,children:t.jsxs(B,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[t.jsx(At,{className:"mr-2 h-4 w-4"}),M?F(M,"PPP",{locale:ue}):t.jsx("span",{children:"Choisir une date"})]})}),t.jsx(Pe,{className:"w-auto p-0",children:t.jsx(zt,{mode:"single",selected:M,onSelect:q,initialFocus:!0})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{htmlFor:"time",children:"Heure"}),t.jsx(sa,{id:"time",type:"time",value:ae,onChange:j=>k(j.target.value)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{children:"Assign√© √†"}),t.jsxs(Ie,{open:Ve,onOpenChange:De,children:[t.jsx(Ae,{asChild:!0,children:t.jsxs(B,{variant:"outline",role:"combobox","aria-expanded":Ve,className:"w-full justify-between",children:[V?(Me=O.find(j=>j.user_id===V))==null?void 0:Me.name:"S√©lectionner un utilisateur...",t.jsx(je,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Pe,{className:"w-[420px] p-0",children:t.jsxs(vt,{children:[t.jsx(xt,{placeholder:"Rechercher un utilisateur..."}),t.jsxs(pt,{children:[t.jsx(gt,{children:"Aucun utilisateur trouv√©."}),t.jsx(bt,{children:ve.map(j=>t.jsxs(yt,{value:j.value,onSelect:X=>{Ce(X),De(!1)},children:[t.jsx(Te,{className:ie("mr-2 h-4 w-4",V===j.value?"opacity-100":"opacity-0")}),j.label]},j.value))})]})]})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{htmlFor:"details",children:"D√©tails"}),t.jsx(aa,{id:"details",placeholder:C==="task"?"Description de la t√¢che...":"Ajouter des d√©tails...",value:D,onChange:j=>ne(j.target.value)})]}),pe&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(xs,{id:"share-client",checked:he,onCheckedChange:de}),t.jsx(xe,{htmlFor:"share-client",children:"Partager avec le client"})]})]})]})]}),t.jsxs(Pt,{children:[t.jsx(na,{asChild:!0,children:t.jsx(B,{variant:"ghost",children:"Annuler"})}),t.jsx(B,{onClick:oe,disabled:!h||!b||!V,className:"bg-green-600 hover:bg-green-700",children:"Valider"})]})]})})},yr=()=>{var Jt;const{activeAdminUser:e,projectsData:s={},appointments:a,calls:n,tasks:r,agendaLoading:l,addAppointment:o,updateAppointment:i,deleteAppointment:c,addCall:u,updateCall:d,deleteCall:m,addTask:f,updateTask:h,deleteTask:g,prospects:b,prospectsLoading:w}=ra(),_=la(),{supabaseUserId:P,authUserId:O,loading:W}=xr(),{users:Y,loading:ee}=oa(),$=a,v=n,I=r,N=b,y=o,C=i,A=p.useMemo(()=>new Date,[]),[M,q]=p.useState(A),[ae,k]=p.useState(!1),[D,ne]=p.useState(null),[he,de]=p.useState({type:null,data:null}),[Be,Ne]=p.useState(!1),[Ve,De]=p.useState(null),[V,Ce]=p.useState(P||null),[le,_e]=p.useState(!1),[ve,ze]=p.useState(!1),[ye,oe]=p.useState(null),[pe,Me]=p.useState(null),[j,X]=p.useState(null),U=p.useMemo(()=>$.map(x=>{const T=(x==null?void 0:x.start)instanceof Date?x.start:new Date(x==null?void 0:x.start),G=(x==null?void 0:x.end)instanceof Date?x.end:new Date(x==null?void 0:x.end);return!(T instanceof Date)||Number.isNaN(T.getTime())||!(G instanceof Date)||Number.isNaN(G.getTime())?(We.warn("Rendez-vous ignor√© - dates invalides",{appointmentId:x==null?void 0:x.id}),null):{...x,start:T,end:G}}).filter(Boolean),[$]),J=p.useMemo(()=>!e||Y.length===0?[]:Y,[e,Y]),z=p.useMemo(()=>J.map(x=>({value:x.user_id,label:x.name})),[J]);p.useEffect(()=>{P&&!V&&Ce(P)},[P,V]);const Se=fe(M,{weekStartsOn:1}),st=Array.from({length:5},(x,T)=>Q(Se,T)),Vs=()=>q(Wa(M,{weeks:1})),zs=()=>q(Je(M,{weeks:1})),Gs=()=>q(A),qs=()=>{K({title:"Connexion √† Google Agenda üöÄ",description:"Simulation: Authentification r√©ussie, votre agenda est synchronis√© !"}),k(!0)},Us=x=>{const{id:T,...G}=x;De({...G,start:new Date}),Ne(!0)},qt=(x,T)=>{ne(null),de({type:null,data:null}),De({...x,type:T||x.type}),Ne(!0)},at=x=>{De(x?{start:x}:{start:new Date}),Ne(!0)},Ut=(x,T)=>{de({type:x,data:T})},Ks=x=>{x||De(null),Ne(x)},Kt=(x,T)=>{const[G]=T.split(":"),te=Qe(x,{hours:parseInt(G,10),minutes:0,seconds:0,milliseconds:0});Me(null),oe(null),at(te)},Ge=(x,T,G)=>{x.preventDefault();try{x.dataTransfer.dropEffect="move"}catch{}X({day:T.toString(),hour:G})},Zt=x=>{x.currentTarget.contains(x.relatedTarget)||X(null)},nt=(x,T,G)=>{x.preventDefault(),X(null);try{let te=x.dataTransfer.getData("application/json");te||(te=x.dataTransfer.getData("text/plain"));const rt=JSON.parse(te),{appointmentId:lt,duration:Qt}=rt,Xt=x.currentTarget.getBoundingClientRect(),Js=Xt.height,Qs=x.clientY-Xt.top;let es=Math.max(0,Math.min(59,Math.round(Qs/Js*60)));j&&j.day===T.toString()&&j.hour===G&&(es=0);const[Xs]=G.split(":"),ot=Qe(T,{hours:parseInt(Xs,10),minutes:es,seconds:0,milliseconds:0});let it=Math.floor(Qt),dt=Math.round((Qt-it)*60);dt>=60&&(it+=1,dt-=60);const ea=Je(ot,{hours:it,minutes:dt}),ce=U.find(ct=>ct.id===lt);if(ce){C(ce.id,{status:"reporte"});const ct={title:ce.title,startTime:ot.toISOString(),endTime:ea.toISOString(),contactId:ce.contactId,assignedUserId:ce.assignedUserId,projectId:ce.projectId,step:ce.step,type:ce.type,status:"pending",share:ce.share,notes:ce.notes,location:ce.location};y(ct),K({title:"üìÖ RDV replanifi√©",description:`Original marqu√© comme report√©. Nouveau : ${F(ot,"EEEE d MMMM √† HH:mm",{locale:ue})}`})}}catch(te){We.error("Erreur lors du drop:",te),K({title:"Erreur",description:"Impossible de d√©placer le rendez-vous",variant:"destructive"})}},Zs=p.useMemo(()=>{if(!e)return[];const x=e.access_rights||e.accessRights,T=e.role==="Global Admin"||e.role==="Admin"?null:[e.user_id,...(x==null?void 0:x.users)||[]];return U.filter(G=>{const te=T?T.includes(G.assignedUserId):!0,rt=V?G.assignedUserId===V:!1,lt=G.type==="physical"||G.type==="virtual";return te&&rt&&lt})},[U,V,e]);return l?t.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 text-lg",children:"Chargement de l'agenda..."})]})}):t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-[calc(100vh-100px)]",children:[t.jsxs("div",{className:"flex flex-col flex-1 min-w-0 bg-white rounded-3xl shadow-lg border border-gray-100",children:[t.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(Ie,{children:[t.jsx(Ae,{asChild:!0,children:t.jsxs(B,{variant:"outline",className:"w-auto md:w-[240px] justify-start text-left font-normal",children:[t.jsx(At,{className:"mr-2 h-4 w-4"}),t.jsx("span",{className:"truncate",children:Gt(F(M,"MMMM yyyy",{locale:ue}))})]})}),t.jsx(Pe,{className:"w-auto p-0",align:"start",children:t.jsx(zt,{mode:"single",selected:M,onSelect:x=>x&&q(x),initialFocus:!0})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(B,{variant:"ghost",size:"icon",onClick:Vs,className:"h-10 w-10",children:t.jsx(Ts,{className:"h-5 w-5"})}),t.jsx(B,{variant:"outline",onClick:Gs,className:"hidden sm:inline-flex",children:"Aujourd'hui"}),t.jsx(B,{variant:"ghost",size:"icon",onClick:zs,className:"h-10 w-10",children:t.jsx(ms,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(Ie,{open:le,onOpenChange:_e,children:[t.jsx(Ae,{asChild:!0,children:t.jsxs(B,{variant:"outline",role:"combobox","aria-expanded":le,className:"w-[180px] justify-between",children:[t.jsx(Et,{className:"mr-2 h-4 w-4"}),V&&((Jt=Y.find(x=>x.user_id===V))==null?void 0:Jt.name)||"Utilisateur",t.jsx(je,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Pe,{className:"w-[200px] p-0",children:t.jsxs(vt,{children:[t.jsx(xt,{placeholder:"Rechercher..."}),t.jsxs(pt,{children:[t.jsx(gt,{children:"Aucun utilisateur"}),t.jsx(bt,{children:z.map(x=>t.jsxs(yt,{value:x.label,onSelect:()=>{Ce(x.value),_e(!1)},children:[t.jsx(Te,{className:ie("mr-2 h-4 w-4",V===x.value?"opacity-100":"opacity-0")}),x.label]},x.value))})]})]})})]}),ae?t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600 font-medium",children:[t.jsx(is,{}),t.jsx("span",{children:"Synchronis√©"})]}):t.jsxs(B,{onClick:qs,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",children:[t.jsx(is,{}),t.jsx("span",{className:"ml-2 hidden sm:inline",children:"Connecter Google Agenda"})]})]})]}),t.jsx("div",{className:"flex flex-1 overflow-hidden rounded-b-3xl",children:t.jsxs("div",{className:"flex flex-1 overflow-auto no-scrollbar",children:[t.jsx("div",{className:"w-16 text-right pr-2 relative bg-[#f6f9ff] border-r border-gray-100 select-none",children:t.jsxs("div",{className:"absolute top-[112px] right-0 w-full",children:[t.jsx("div",{className:ie("h-[60px] -translate-y-1/2 cursor-pointer pr-2 flex items-center justify-end text-xs transition-colors",ye===0&&"bg-blue-50",pe===0&&"bg-blue-100"),onMouseEnter:()=>oe(0),onMouseLeave:()=>oe(null),onClick:()=>Me(0),"aria-label":"08:00",role:"button"}),cs.slice(1).map((x,T)=>t.jsx("div",{className:ie("h-[60px] -translate-y-1/2 cursor-pointer pr-2 flex items-center justify-end text-xs transition-colors",ye===T+1&&"bg-blue-50",pe===T+1&&"bg-blue-100 font-medium text-blue-700"),onMouseEnter:()=>oe(T+1),onMouseLeave:()=>oe(null),onClick:()=>Me(T+1),role:"button","aria-label":x,children:t.jsx("span",{className:ie("text-gray-400",(ye===T+1||pe===T+1)&&"text-blue-600 font-medium"),children:x})},x))]})}),t.jsx("div",{className:"grid grid-cols-5 flex-1 pr-4 bg-white",onMouseLeave:()=>oe(null),children:st.map(x=>t.jsxs("div",{className:"relative border-l border-gray-200",children:[t.jsxs("div",{className:"sticky top-0 bg-white z-10 p-2 text-center border-b border-gray-200",children:[t.jsx("p",{className:`text-xs font-medium ${Z(x,A)?"text-blue-600":"text-gray-500"}`,children:F(x,"eee",{locale:ue}).toUpperCase()}),t.jsx("div",{className:"flex justify-center items-center h-10",children:t.jsx("p",{className:`text-2xl font-bold ${Z(x,A)?"text-blue-600 bg-blue-100 rounded-full w-10 h-10 flex items-center justify-center":"text-gray-800"}`,children:F(x,"d")})})]}),t.jsxs("div",{className:"relative h-full",children:[t.jsx("div",{className:ie("h-[60px] cursor-pointer transition-colors relative",ye===0&&"bg-blue-50",pe===0&&"bg-blue-100",(j==null?void 0:j.day)===x.toString()&&(j==null?void 0:j.hour)==="08:00"&&"bg-green-100 border-2 border-green-400 border-dashed"),onMouseEnter:()=>oe(0),onMouseLeave:()=>oe(null),onClick:()=>Kt(x,"08:00"),onDragEnter:T=>Ge(T,x,"08:00"),onDragOver:T=>Ge(T,x,"08:00"),onDragLeave:Zt,onDrop:T=>nt(T,x,"08:00"),children:(j==null?void 0:j.day)===x.toString()&&(j==null?void 0:j.hour)==="08:00"&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:t.jsx("span",{className:"text-green-600 font-medium text-sm bg-green-50 px-2 py-1 rounded shadow",children:"D√©poser ici"})})}),cs.slice(1).map((T,G)=>t.jsx("div",{className:ie("h-[60px] border-t border-gray-200 cursor-pointer transition-colors relative",ye===G+1&&"bg-blue-50",pe===G+1&&"bg-blue-100",(j==null?void 0:j.day)===x.toString()&&(j==null?void 0:j.hour)===T&&"bg-green-100 border-2 border-green-400 border-dashed"),onMouseEnter:()=>oe(G+1),onMouseLeave:()=>oe(null),onClick:()=>Kt(x,T),onDragEnter:te=>Ge(te,x,T),onDragOver:te=>Ge(te,x,T),onDragLeave:Zt,onDrop:te=>nt(te,x,T),children:(j==null?void 0:j.day)===x.toString()&&(j==null?void 0:j.hour)===T&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:t.jsx("span",{className:"text-green-600 font-medium text-sm bg-green-50 px-2 py-1 rounded shadow",children:"D√©poser ici"})})},G)),Zs.filter(T=>Z(T.start,x)).map(T=>t.jsx(br,{appointment:T,onAppointmentClick:ne,onDrop:nt},T.id))]})]},x.toString()))})]})})]}),t.jsx("div",{className:"block lg:hidden border-t border-gray-200",children:t.jsx(us,{onAddActivity:at,currentDate:M,selectedUserId:V,onSelectActivity:Ut,onAppointmentClick:ne,calls:v,tasks:I,appointments:$,prospects:N,updateTask:h,activeAdminUser:e})}),t.jsxs(Le.div,{className:"hidden lg:flex lg:flex-shrink-0 relative h-full",initial:!1,animate:{width:ve?0:320,opacity:ve?0:1},transition:{duration:.3,ease:"easeInOut"},style:{overflow:"visible",pointerEvents:ve?"none":"auto"},children:[t.jsx(B,{variant:"default",size:"icon",onClick:()=>ze(!ve),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-6 z-30 w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white shadow-xl rounded-full border-2 border-white flex items-center justify-center p-0",title:ve?"Ouvrir la sidebar":"Fermer la sidebar",children:t.jsx(ds,{className:ie("h-6 w-6 text-white transition-transform duration-200",ve?"rotate-180":"")})}),!ve&&t.jsx(us,{onAddActivity:at,currentDate:M,selectedUserId:V,onSelectActivity:Ut,onAppointmentClick:ne,calls:v,tasks:I,appointments:$,prospects:N,updateTask:h,activeAdminUser:e})]}),ve&&t.jsx(Le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"fixed right-6 top-1/2 -translate-y-1/2 z-30 lg:block hidden",children:t.jsx(B,{variant:"default",size:"icon",onClick:()=>ze(!1),className:"w-12 h-12 bg-blue-600 hover:bg-blue-700 shadow-xl rounded-full border-2 border-white",title:"Ouvrir la sidebar",children:t.jsx(ds,{className:"h-6 w-6 text-white transition-transform duration-200 rotate-180"})})}),t.jsx(pr,{event:D,onClose:()=>ne(null),onReport:Us,onEdit:qt,prospects:N,supabaseUsers:Y,updateAppointment:C,deleteAppointment:c,projectsData:s,navigate:_}),t.jsx(gr,{activity:he.data,type:he.type,onClose:()=>de({type:null,data:null}),onEdit:qt,prospects:N,supabaseUsers:Y,updateCall:d,deleteCall:m,updateTask:h,deleteTask:g,projectsData:s}),t.jsx(Bs,{open:Be,onOpenChange:Ks,initialData:Ve,defaultAssignedUserId:V,addAppointment:y,addCall:u,addTask:f,updateAppointment:C,updateCall:d,updateTask:h,prospects:N,users:Y,projectsData:s})]})},kr=Object.freeze(Object.defineProperty({__proto__:null,AddActivityModal:Bs,default:yr},Symbol.toStringTag,{value:"Module"}));export{Bs as A,ma as C,kr as a,xr as u};
