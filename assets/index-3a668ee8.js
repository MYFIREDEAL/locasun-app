var n$=Object.defineProperty;var s$=(e,t,r)=>t in e?n$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Fs=(e,t,r)=>(s$(e,typeof t!="symbol"?t+"":t,r),r);function $S(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const o$="modulepreload",i$=function(e){return"/"+e},xb={},Lr=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=i$(o),o in xb)return;xb[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let f=s.length-1;f>=0;f--){const d=s[f];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":o$,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var zne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function No(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a$(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var LS={exports:{}},lf={},MS={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),l$=Symbol.for("react.portal"),c$=Symbol.for("react.fragment"),u$=Symbol.for("react.strict_mode"),d$=Symbol.for("react.profiler"),f$=Symbol.for("react.provider"),h$=Symbol.for("react.context"),p$=Symbol.for("react.forward_ref"),m$=Symbol.for("react.suspense"),g$=Symbol.for("react.memo"),v$=Symbol.for("react.lazy"),yb=Symbol.iterator;function x$(e){return e===null||typeof e!="object"?null:(e=yb&&e[yb]||e["@@iterator"],typeof e=="function"?e:null)}var FS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BS=Object.assign,zS={};function ea(e,t,r){this.props=e,this.context=t,this.refs=zS,this.updater=r||FS}ea.prototype.isReactComponent={};ea.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ea.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function US(){}US.prototype=ea.prototype;function Wv(e,t,r){this.props=e,this.context=t,this.refs=zS,this.updater=r||FS}var Hv=Wv.prototype=new US;Hv.constructor=Wv;BS(Hv,ea.prototype);Hv.isPureReactComponent=!0;var bb=Array.isArray,VS=Object.prototype.hasOwnProperty,Gv={current:null},qS={key:!0,ref:!0,__self:!0,__source:!0};function WS(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)VS.call(t,n)&&!qS.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:e,key:o,ref:a,props:s,_owner:Gv.current}}function y$(e,t){return{$$typeof:dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kv(e){return typeof e=="object"&&e!==null&&e.$$typeof===dc}function b$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wb=/\/+/g;function Xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b$(""+e.key):t.toString(36)}function Fu(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case dc:case l$:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Xh(a,0):n,bb(s)?(r="",e!=null&&(r=e.replace(wb,"$&/")+"/"),Fu(s,t,r,"",function(u){return u})):s!=null&&(Kv(s)&&(s=y$(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wb,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",bb(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Xh(o,l);a+=Fu(o,t,r,c,s)}else if(c=x$(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Xh(o,l++),a+=Fu(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Hc(e,t,r){if(e==null)return e;var n=[],s=0;return Fu(e,n,"","",function(o){return t.call(r,o,s++)}),n}function w$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ut={current:null},Bu={transition:null},j$={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:Bu,ReactCurrentOwner:Gv};function HS(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Hc,forEach:function(e,t,r){Hc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Hc(e,function(){t++}),t},toArray:function(e){return Hc(e,function(t){return t})||[]},only:function(e){if(!Kv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=ea;Ne.Fragment=c$;Ne.Profiler=d$;Ne.PureComponent=Wv;Ne.StrictMode=u$;Ne.Suspense=m$;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j$;Ne.act=HS;Ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=BS({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Gv.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)VS.call(t,c)&&!qS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:e.type,key:s,ref:o,props:n,_owner:a}};Ne.createContext=function(e){return e={$$typeof:h$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f$,_context:e},e.Consumer=e};Ne.createElement=WS;Ne.createFactory=function(e){var t=WS.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:p$,render:e}};Ne.isValidElement=Kv;Ne.lazy=function(e){return{$$typeof:v$,_payload:{_status:-1,_result:e},_init:w$}};Ne.memo=function(e,t){return{$$typeof:g$,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Bu.transition;Bu.transition={};try{e()}finally{Bu.transition=t}};Ne.unstable_act=HS;Ne.useCallback=function(e,t){return Ut.current.useCallback(e,t)};Ne.useContext=function(e){return Ut.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Ut.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Ut.current.useEffect(e,t)};Ne.useId=function(){return Ut.current.useId()};Ne.useImperativeHandle=function(e,t,r){return Ut.current.useImperativeHandle(e,t,r)};Ne.useInsertionEffect=function(e,t){return Ut.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Ut.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Ut.current.useMemo(e,t)};Ne.useReducer=function(e,t,r){return Ut.current.useReducer(e,t,r)};Ne.useRef=function(e){return Ut.current.useRef(e)};Ne.useState=function(e){return Ut.current.useState(e)};Ne.useSyncExternalStore=function(e,t,r){return Ut.current.useSyncExternalStore(e,t,r)};Ne.useTransition=function(){return Ut.current.useTransition()};Ne.version="18.3.1";MS.exports=Ne;var p=MS.exports;const J=No(p),fc=$S({__proto__:null,default:J},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _$=p,S$=Symbol.for("react.element"),E$=Symbol.for("react.fragment"),N$=Object.prototype.hasOwnProperty,C$=_$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P$={key:!0,ref:!0,__self:!0,__source:!0};function GS(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)N$.call(t,n)&&!P$.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:S$,type:e,key:o,ref:a,props:s,_owner:C$.current}}lf.Fragment=E$;lf.jsx=GS;lf.jsxs=GS;LS.exports=lf;var i=LS.exports,Dm={},KS={exports:{}},gr={},YS={exports:{}},JS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,R){var D=A.length;A.push(R);e:for(;0<D;){var F=D-1>>>1,q=A[F];if(0<s(q,R))A[F]=R,A[D]=q,D=F;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var R=A[0],D=A.pop();if(D!==R){A[0]=D;e:for(var F=0,q=A.length,W=q>>>1;F<W;){var te=2*(F+1)-1,fe=A[te],le=te+1,ne=A[le];if(0>s(fe,D))le<q&&0>s(ne,fe)?(A[F]=ne,A[le]=D,F=le):(A[F]=fe,A[te]=D,F=te);else if(le<q&&0>s(ne,D))A[F]=ne,A[le]=D,F=le;else break e}}return R}function s(A,R){var D=A.sortIndex-R.sortIndex;return D!==0?D:A.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=A)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function j(A){if(v=!1,w(A),!g)if(r(c)!==null)g=!0,z(_);else{var R=r(u);R!==null&&B(j,R.startTime-A)}}function _(A,R){g=!1,v&&(v=!1,y(N),N=-1),m=!0;var D=h;try{for(w(R),d=r(c);d!==null&&(!(d.expirationTime>R)||A&&!I());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var q=F(d.expirationTime<=R);R=e.unstable_now(),typeof q=="function"?d.callback=q:d===r(c)&&n(c),w(R)}else n(c);d=r(c)}if(d!==null)var W=!0;else{var te=r(u);te!==null&&B(j,te.startTime-R),W=!1}return W}finally{d=null,h=D,m=!1}}var S=!1,E=null,N=-1,P=5,C=-1;function I(){return!(e.unstable_now()-C<P)}function O(){if(E!==null){var A=e.unstable_now();C=A;var R=!0;try{R=E(!0,A)}finally{R?$():(S=!1,E=null)}}else S=!1}var $;if(typeof b=="function")$=function(){b(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,V=L.port2;L.port1.onmessage=O,$=function(){V.postMessage(null)}}else $=function(){x(O,0)};function z(A){E=A,S||(S=!0,$())}function B(A,R){N=x(function(){A(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,z(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var D=h;h=R;try{return A()}finally{h=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=h;h=A;try{return R()}finally{h=D}},e.unstable_scheduleCallback=function(A,R,D){var F=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?F+D:F):D=F,A){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=D+q,A={id:f++,callback:R,priorityLevel:A,startTime:D,expirationTime:q,sortIndex:-1},D>F?(A.sortIndex=D,t(u,A),r(c)===null&&A===r(u)&&(v?(y(N),N=-1):v=!0,B(j,D-F))):(A.sortIndex=q,t(c,A),g||m||(g=!0,z(_))),A},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(A){var R=h;return function(){var D=h;h=R;try{return A.apply(this,arguments)}finally{h=D}}}})(JS);YS.exports=JS;var T$=YS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$=p,hr=T$;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,jl={};function Co(e,t){Di(e,t),Di(e+"Capture",t)}function Di(e,t){for(jl[e]=t,e=0;e<t.length;e++)XS.add(t[e])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$m=Object.prototype.hasOwnProperty,A$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jb={},_b={};function R$(e){return $m.call(_b,e)?!0:$m.call(jb,e)?!1:A$.test(e)?_b[e]=!0:(jb[e]=!0,!1)}function I$(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O$(e,t,r,n){if(t===null||typeof t>"u"||I$(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vt(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yv=/[\-:]([a-z])/g;function Jv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yv,Jv);Et[t]=new Vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yv,Jv);Et[t]=new Vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yv,Jv);Et[t]=new Vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Vt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xv(e,t,r,n){var s=Et.hasOwnProperty(t)?Et[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(O$(t,r,s,n)&&(r=null),n||s===null?R$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Hn=k$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gc=Symbol.for("react.element"),si=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),Qv=Symbol.for("react.strict_mode"),Lm=Symbol.for("react.profiler"),QS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),Zv=Symbol.for("react.forward_ref"),Mm=Symbol.for("react.suspense"),Fm=Symbol.for("react.suspense_list"),ex=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),eE=Symbol.for("react.offscreen"),Sb=Symbol.iterator;function Ea(e){return e===null||typeof e!="object"?null:(e=Sb&&e[Sb]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Object.assign,Qh;function Wa(e){if(Qh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qh=t&&t[1]||""}return`
`+Qh+e}var Zh=!1;function ep(e,t){if(!e||Zh)return"";Zh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Zh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wa(e):""}function D$(e){switch(e.tag){case 5:return Wa(e.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return e=ep(e.type,!1),e;case 11:return e=ep(e.type.render,!1),e;case 1:return e=ep(e.type,!0),e;default:return""}}function Bm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oi:return"Fragment";case si:return"Portal";case Lm:return"Profiler";case Qv:return"StrictMode";case Mm:return"Suspense";case Fm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZS:return(e.displayName||"Context")+".Consumer";case QS:return(e._context.displayName||"Context")+".Provider";case Zv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ex:return t=e.displayName||null,t!==null?t:Bm(e.type)||"Memo";case rs:t=e._payload,e=e._init;try{return Bm(e(t))}catch{}}return null}function $$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bm(t);case 8:return t===Qv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ns(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function L$(e){var t=tE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kc(e){e._valueTracker||(e._valueTracker=L$(e))}function rE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=tE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zm(e,t){var r=t.checked;return nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Eb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ns(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nE(e,t){t=t.checked,t!=null&&Xv(e,"checked",t,!1)}function Um(e,t){nE(e,t);var r=Ns(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vm(e,t.type,Ns(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vm(e,t,r){(t!=="number"||nd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ha=Array.isArray;function wi(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ns(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(Ha(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ns(r)}}function sE(e,t){var r=Ns(t.value),n=Ns(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function oE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?oE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yc,iE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yc=Yc||document.createElement("div"),Yc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _l(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M$=["Webkit","ms","Moz","O"];Object.keys(rl).forEach(function(e){M$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rl[t]=rl[e]})});function aE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rl.hasOwnProperty(e)&&rl[e]?(""+t).trim():t+"px"}function lE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=aE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var F$=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hm(e,t){if(t){if(F$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function Gm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=null;function tx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ym=null,ji=null,_i=null;function Tb(e){if(e=mc(e)){if(typeof Ym!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=hf(t),Ym(e.stateNode,e.type,t))}}function cE(e){ji?_i?_i.push(e):_i=[e]:ji=e}function uE(){if(ji){var e=ji,t=_i;if(_i=ji=null,Tb(e),t)for(e=0;e<t.length;e++)Tb(t[e])}}function dE(e,t){return e(t)}function fE(){}var tp=!1;function hE(e,t,r){if(tp)return e(t,r);tp=!0;try{return dE(e,t,r)}finally{tp=!1,(ji!==null||_i!==null)&&(fE(),uE())}}function Sl(e,t){var r=e.stateNode;if(r===null)return null;var n=hf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var Jm=!1;if(Ln)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){Jm=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{Jm=!1}function B$(e,t,r,n,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var nl=!1,sd=null,od=!1,Xm=null,z$={onError:function(e){nl=!0,sd=e}};function U$(e,t,r,n,s,o,a,l,c){nl=!1,sd=null,B$.apply(z$,arguments)}function V$(e,t,r,n,s,o,a,l,c){if(U$.apply(this,arguments),nl){if(nl){var u=sd;nl=!1,sd=null}else throw Error(ee(198));od||(od=!0,Xm=u)}}function Po(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function pE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kb(e){if(Po(e)!==e)throw Error(ee(188))}function q$(e){var t=e.alternate;if(!t){if(t=Po(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return kb(s),e;if(o===n)return kb(s),t;o=o.sibling}throw Error(ee(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function mE(e){return e=q$(e),e!==null?gE(e):null}function gE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gE(e);if(t!==null)return t;e=e.sibling}return null}var vE=hr.unstable_scheduleCallback,Ab=hr.unstable_cancelCallback,W$=hr.unstable_shouldYield,H$=hr.unstable_requestPaint,it=hr.unstable_now,G$=hr.unstable_getCurrentPriorityLevel,rx=hr.unstable_ImmediatePriority,xE=hr.unstable_UserBlockingPriority,id=hr.unstable_NormalPriority,K$=hr.unstable_LowPriority,yE=hr.unstable_IdlePriority,cf=null,hn=null;function Y$(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(cf,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:Q$,J$=Math.log,X$=Math.LN2;function Q$(e){return e>>>=0,e===0?32:31-(J$(e)/X$|0)|0}var Jc=64,Xc=4194304;function Ga(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ad(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Ga(l):(o&=a,o!==0&&(n=Ga(o)))}else a=r&~s,a!==0?n=Ga(a):o!==0&&(n=Ga(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jr(t),s=1<<r,n|=e[r],t&=~s;return n}function Z$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eL(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Jr(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=Z$(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Qm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bE(){var e=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),e}function rp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jr(t),e[t]=r}function tL(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Jr(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function nx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Jr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var De=0;function wE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jE,sx,_E,SE,EE,Zm=!1,Qc=[],fs=null,hs=null,ps=null,El=new Map,Nl=new Map,os=[],rL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rb(e,t){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":El.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(t.pointerId)}}function Ca(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=mc(t),t!==null&&sx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nL(e,t,r,n,s){switch(t){case"focusin":return fs=Ca(fs,e,t,r,n,s),!0;case"dragenter":return hs=Ca(hs,e,t,r,n,s),!0;case"mouseover":return ps=Ca(ps,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return El.set(o,Ca(El.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Nl.set(o,Ca(Nl.get(o)||null,e,t,r,n,s)),!0}return!1}function NE(e){var t=to(e.target);if(t!==null){var r=Po(t);if(r!==null){if(t=r.tag,t===13){if(t=pE(r),t!==null){e.blockedOn=t,EE(e.priority,function(){_E(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=eg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Km=n,r.target.dispatchEvent(n),Km=null}else return t=mc(r),t!==null&&sx(t),e.blockedOn=r,!1;t.shift()}return!0}function Ib(e,t,r){zu(e)&&r.delete(t)}function sL(){Zm=!1,fs!==null&&zu(fs)&&(fs=null),hs!==null&&zu(hs)&&(hs=null),ps!==null&&zu(ps)&&(ps=null),El.forEach(Ib),Nl.forEach(Ib)}function Pa(e,t){e.blockedOn===t&&(e.blockedOn=null,Zm||(Zm=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,sL)))}function Cl(e){function t(s){return Pa(s,e)}if(0<Qc.length){Pa(Qc[0],e);for(var r=1;r<Qc.length;r++){var n=Qc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(fs!==null&&Pa(fs,e),hs!==null&&Pa(hs,e),ps!==null&&Pa(ps,e),El.forEach(t),Nl.forEach(t),r=0;r<os.length;r++)n=os[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<os.length&&(r=os[0],r.blockedOn===null);)NE(r),r.blockedOn===null&&os.shift()}var Si=Hn.ReactCurrentBatchConfig,ld=!0;function oL(e,t,r,n){var s=De,o=Si.transition;Si.transition=null;try{De=1,ox(e,t,r,n)}finally{De=s,Si.transition=o}}function iL(e,t,r,n){var s=De,o=Si.transition;Si.transition=null;try{De=4,ox(e,t,r,n)}finally{De=s,Si.transition=o}}function ox(e,t,r,n){if(ld){var s=eg(e,t,r,n);if(s===null)fp(e,t,n,cd,r),Rb(e,n);else if(nL(s,e,t,r,n))n.stopPropagation();else if(Rb(e,n),t&4&&-1<rL.indexOf(e)){for(;s!==null;){var o=mc(s);if(o!==null&&jE(o),o=eg(e,t,r,n),o===null&&fp(e,t,n,cd,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else fp(e,t,n,null,r)}}var cd=null;function eg(e,t,r,n){if(cd=null,e=tx(n),e=to(e),e!==null)if(t=Po(e),t===null)e=null;else if(r=t.tag,r===13){if(e=pE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cd=e,null}function CE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G$()){case rx:return 1;case xE:return 4;case id:case K$:return 16;case yE:return 536870912;default:return 16}default:return 16}}var ls=null,ix=null,Uu=null;function PE(){if(Uu)return Uu;var e,t=ix,r=t.length,n,s="value"in ls?ls.value:ls.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return Uu=s.slice(e,1<n?1-n:void 0)}function Vu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zc(){return!0}function Ob(){return!1}function vr(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zc:Ob,this.isPropagationStopped=Ob,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),t}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ax=vr(ta),pc=nt({},ta,{view:0,detail:0}),aL=vr(pc),np,sp,Ta,uf=nt({},pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ta&&(Ta&&e.type==="mousemove"?(np=e.screenX-Ta.screenX,sp=e.screenY-Ta.screenY):sp=np=0,Ta=e),np)},movementY:function(e){return"movementY"in e?e.movementY:sp}}),Db=vr(uf),lL=nt({},uf,{dataTransfer:0}),cL=vr(lL),uL=nt({},pc,{relatedTarget:0}),op=vr(uL),dL=nt({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),fL=vr(dL),hL=nt({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pL=vr(hL),mL=nt({},ta,{data:0}),$b=vr(mL),gL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xL[e])?!!t[e]:!1}function lx(){return yL}var bL=nt({},pc,{key:function(e){if(e.key){var t=gL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lx,charCode:function(e){return e.type==="keypress"?Vu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wL=vr(bL),jL=nt({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lb=vr(jL),_L=nt({},pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lx}),SL=vr(_L),EL=nt({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),NL=vr(EL),CL=nt({},uf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PL=vr(CL),TL=[9,13,27,32],cx=Ln&&"CompositionEvent"in window,sl=null;Ln&&"documentMode"in document&&(sl=document.documentMode);var kL=Ln&&"TextEvent"in window&&!sl,TE=Ln&&(!cx||sl&&8<sl&&11>=sl),Mb=String.fromCharCode(32),Fb=!1;function kE(e,t){switch(e){case"keyup":return TL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function AL(e,t){switch(e){case"compositionend":return AE(t);case"keypress":return t.which!==32?null:(Fb=!0,Mb);case"textInput":return e=t.data,e===Mb&&Fb?null:e;default:return null}}function RL(e,t){if(ii)return e==="compositionend"||!cx&&kE(e,t)?(e=PE(),Uu=ix=ls=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TE&&t.locale!=="ko"?null:t.data;default:return null}}var IL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IL[e.type]:t==="textarea"}function RE(e,t,r,n){cE(n),t=ud(t,"onChange"),0<t.length&&(r=new ax("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ol=null,Pl=null;function OL(e){VE(e,0)}function df(e){var t=ci(e);if(rE(t))return e}function DL(e,t){if(e==="change")return t}var IE=!1;if(Ln){var ip;if(Ln){var ap="oninput"in document;if(!ap){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),ap=typeof zb.oninput=="function"}ip=ap}else ip=!1;IE=ip&&(!document.documentMode||9<document.documentMode)}function Ub(){ol&&(ol.detachEvent("onpropertychange",OE),Pl=ol=null)}function OE(e){if(e.propertyName==="value"&&df(Pl)){var t=[];RE(t,Pl,e,tx(e)),hE(OL,t)}}function $L(e,t,r){e==="focusin"?(Ub(),ol=t,Pl=r,ol.attachEvent("onpropertychange",OE)):e==="focusout"&&Ub()}function LL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return df(Pl)}function ML(e,t){if(e==="click")return df(t)}function FL(e,t){if(e==="input"||e==="change")return df(t)}function BL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qr=typeof Object.is=="function"?Object.is:BL;function Tl(e,t){if(Qr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!$m.call(t,s)||!Qr(e[s],t[s]))return!1}return!0}function Vb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qb(e,t){var r=Vb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vb(r)}}function DE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $E(){for(var e=window,t=nd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=nd(e.document)}return t}function ux(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zL(e){var t=$E(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&DE(r.ownerDocument.documentElement,r)){if(n!==null&&ux(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=qb(r,o);var a=qb(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var UL=Ln&&"documentMode"in document&&11>=document.documentMode,ai=null,tg=null,il=null,rg=!1;function Wb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rg||ai==null||ai!==nd(n)||(n=ai,"selectionStart"in n&&ux(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),il&&Tl(il,n)||(il=n,n=ud(tg,"onSelect"),0<n.length&&(t=new ax("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ai)))}function eu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var li={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},lp={},LE={};Ln&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function ff(e){if(lp[e])return lp[e];if(!li[e])return e;var t=li[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in LE)return lp[e]=t[r];return e}var ME=ff("animationend"),FE=ff("animationiteration"),BE=ff("animationstart"),zE=ff("transitionend"),UE=new Map,Hb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){UE.set(e,t),Co(t,[e])}for(var cp=0;cp<Hb.length;cp++){var up=Hb[cp],VL=up.toLowerCase(),qL=up[0].toUpperCase()+up.slice(1);Is(VL,"on"+qL)}Is(ME,"onAnimationEnd");Is(FE,"onAnimationIteration");Is(BE,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(zE,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ka));function Gb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,V$(n,t,void 0,e),e.currentTarget=null}function VE(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Gb(s,l,u),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Gb(s,l,u),o=c}}}if(od)throw e=Xm,od=!1,Xm=null,e}function Ge(e,t){var r=t[ag];r===void 0&&(r=t[ag]=new Set);var n=e+"__bubble";r.has(n)||(qE(t,e,2,!1),r.add(n))}function dp(e,t,r){var n=0;t&&(n|=4),qE(r,e,n,t)}var tu="_reactListening"+Math.random().toString(36).slice(2);function kl(e){if(!e[tu]){e[tu]=!0,XS.forEach(function(r){r!=="selectionchange"&&(WL.has(r)||dp(r,!1,e),dp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tu]||(t[tu]=!0,dp("selectionchange",!1,t))}}function qE(e,t,r,n){switch(CE(t)){case 1:var s=oL;break;case 4:s=iL;break;default:s=ox}r=s.bind(null,t,r,e),s=void 0,!Jm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function fp(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=to(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}hE(function(){var u=o,f=tx(r),d=[];e:{var h=UE.get(e);if(h!==void 0){var m=ax,g=e;switch(e){case"keypress":if(Vu(r)===0)break e;case"keydown":case"keyup":m=wL;break;case"focusin":g="focus",m=op;break;case"focusout":g="blur",m=op;break;case"beforeblur":case"afterblur":m=op;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SL;break;case ME:case FE:case BE:m=fL;break;case zE:m=NL;break;case"scroll":m=aL;break;case"wheel":m=PL;break;case"copy":case"cut":case"paste":m=pL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Lb}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,y!==null&&(j=Sl(b,y),j!=null&&v.push(Al(b,j,w)))),x)break;b=b.return}0<v.length&&(h=new m(h,g,null,r,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==Km&&(g=r.relatedTarget||r.fromElement)&&(to(g)||g[Mn]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?to(g):null,g!==null&&(x=Po(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=Db,j="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=Lb,j="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:ci(m),w=g==null?h:ci(g),h=new v(j,b+"leave",m,r,f),h.target=x,h.relatedTarget=w,j=null,to(f)===u&&(v=new v(y,b+"enter",g,r,f),v.target=w,v.relatedTarget=x,j=v),x=j,m&&g)t:{for(v=m,y=g,b=0,w=v;w;w=zo(w))b++;for(w=0,j=y;j;j=zo(j))w++;for(;0<b-w;)v=zo(v),b--;for(;0<w-b;)y=zo(y),w--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=zo(v),y=zo(y)}v=null}else v=null;m!==null&&Kb(d,h,m,v,!1),g!==null&&x!==null&&Kb(d,x,g,v,!0)}}e:{if(h=u?ci(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var _=DL;else if(Bb(h))if(IE)_=FL;else{_=LL;var S=$L}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=ML);if(_&&(_=_(e,u))){RE(d,_,r,f);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Vm(h,"number",h.value)}switch(S=u?ci(u):window,e){case"focusin":(Bb(S)||S.contentEditable==="true")&&(ai=S,tg=u,il=null);break;case"focusout":il=tg=ai=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Wb(d,r,f);break;case"selectionchange":if(UL)break;case"keydown":case"keyup":Wb(d,r,f)}var E;if(cx)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ii?kE(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(TE&&r.locale!=="ko"&&(ii||N!=="onCompositionStart"?N==="onCompositionEnd"&&ii&&(E=PE()):(ls=f,ix="value"in ls?ls.value:ls.textContent,ii=!0)),S=ud(u,N),0<S.length&&(N=new $b(N,e,null,r,f),d.push({event:N,listeners:S}),E?N.data=E:(E=AE(r),E!==null&&(N.data=E)))),(E=kL?AL(e,r):RL(e,r))&&(u=ud(u,"onBeforeInput"),0<u.length&&(f=new $b("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=E))}VE(d,t)})}function Al(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ud(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sl(e,r),o!=null&&n.unshift(Al(e,o,s)),o=Sl(e,t),o!=null&&n.push(Al(e,o,s))),e=e.return}return n}function zo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kb(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Sl(r,o),c!=null&&a.unshift(Al(r,c,l))):s||(c=Sl(r,o),c!=null&&a.push(Al(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var HL=/\r\n?/g,GL=/\u0000|\uFFFD/g;function Yb(e){return(typeof e=="string"?e:""+e).replace(HL,`
`).replace(GL,"")}function ru(e,t,r){if(t=Yb(t),Yb(e)!==t&&r)throw Error(ee(425))}function dd(){}var ng=null,sg=null;function og(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ig=typeof setTimeout=="function"?setTimeout:void 0,KL=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,YL=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(e){return Jb.resolve(null).then(e).catch(JL)}:ig;function JL(e){setTimeout(function(){throw e})}function hp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Cl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Cl(t)}function ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ra=Math.random().toString(36).slice(2),un="__reactFiber$"+ra,Rl="__reactProps$"+ra,Mn="__reactContainer$"+ra,ag="__reactEvents$"+ra,XL="__reactListeners$"+ra,QL="__reactHandles$"+ra;function to(e){var t=e[un];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mn]||r[un]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xb(e);e!==null;){if(r=e[un])return r;e=Xb(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[un]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function hf(e){return e[Rl]||null}var lg=[],ui=-1;function Os(e){return{current:e}}function Ke(e){0>ui||(e.current=lg[ui],lg[ui]=null,ui--)}function ze(e,t){ui++,lg[ui]=e.current,e.current=t}var Cs={},Rt=Os(Cs),Xt=Os(!1),po=Cs;function $i(e,t){var r=e.type.contextTypes;if(!r)return Cs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(e){return e=e.childContextTypes,e!=null}function fd(){Ke(Xt),Ke(Rt)}function Qb(e,t,r){if(Rt.current!==Cs)throw Error(ee(168));ze(Rt,t),ze(Xt,r)}function WE(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ee(108,$$(e)||"Unknown",s));return nt({},r,n)}function hd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,po=Rt.current,ze(Rt,e),ze(Xt,Xt.current),!0}function Zb(e,t,r){var n=e.stateNode;if(!n)throw Error(ee(169));r?(e=WE(e,t,po),n.__reactInternalMemoizedMergedChildContext=e,Ke(Xt),Ke(Rt),ze(Rt,e)):Ke(Xt),ze(Xt,r)}var Cn=null,pf=!1,pp=!1;function HE(e){Cn===null?Cn=[e]:Cn.push(e)}function ZL(e){pf=!0,HE(e)}function Ds(){if(!pp&&Cn!==null){pp=!0;var e=0,t=De;try{var r=Cn;for(De=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Cn=null,pf=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(e+1)),vE(rx,Ds),s}finally{De=t,pp=!1}}return null}var di=[],fi=0,pd=null,md=0,Nr=[],Cr=0,mo=null,Pn=1,Tn="";function qs(e,t){di[fi++]=md,di[fi++]=pd,pd=e,md=t}function GE(e,t,r){Nr[Cr++]=Pn,Nr[Cr++]=Tn,Nr[Cr++]=mo,mo=e;var n=Pn;e=Tn;var s=32-Jr(n)-1;n&=~(1<<s),r+=1;var o=32-Jr(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Pn=1<<32-Jr(t)+s|r<<s|n,Tn=o+e}else Pn=1<<o|r<<s|n,Tn=e}function dx(e){e.return!==null&&(qs(e,1),GE(e,1,0))}function fx(e){for(;e===pd;)pd=di[--fi],di[fi]=null,md=di[--fi],di[fi]=null;for(;e===mo;)mo=Nr[--Cr],Nr[Cr]=null,Tn=Nr[--Cr],Nr[Cr]=null,Pn=Nr[--Cr],Nr[Cr]=null}var cr=null,ar=null,Xe=!1,Gr=null;function KE(e,t){var r=Pr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ew(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cr=e,ar=ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cr=e,ar=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mo!==null?{id:Pn,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Pr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,cr=e,ar=null,!0):!1;default:return!1}}function cg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ug(e){if(Xe){var t=ar;if(t){var r=t;if(!ew(e,t)){if(cg(e))throw Error(ee(418));t=ms(r.nextSibling);var n=cr;t&&ew(e,t)?KE(n,r):(e.flags=e.flags&-4097|2,Xe=!1,cr=e)}}else{if(cg(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Xe=!1,cr=e}}}function tw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cr=e}function nu(e){if(e!==cr)return!1;if(!Xe)return tw(e),Xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!og(e.type,e.memoizedProps)),t&&(t=ar)){if(cg(e))throw YE(),Error(ee(418));for(;t;)KE(e,t),t=ms(t.nextSibling)}if(tw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ar=ms(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ar=null}}else ar=cr?ms(e.stateNode.nextSibling):null;return!0}function YE(){for(var e=ar;e;)e=ms(e.nextSibling)}function Li(){ar=cr=null,Xe=!1}function hx(e){Gr===null?Gr=[e]:Gr.push(e)}var eM=Hn.ReactCurrentBatchConfig;function ka(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function su(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rw(e){var t=e._init;return t(e._payload)}function JE(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=ys(y,b),y.index=0,y.sibling=null,y}function o(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,j){return b===null||b.tag!==6?(b=wp(w,y.mode,j),b.return=y,b):(b=s(b,w),b.return=y,b)}function c(y,b,w,j){var _=w.type;return _===oi?f(y,b,w.props.children,j,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rs&&rw(_)===b.type)?(j=s(b,w.props),j.ref=ka(y,b,w),j.return=y,j):(j=Ju(w.type,w.key,w.props,null,y.mode,j),j.ref=ka(y,b,w),j.return=y,j)}function u(y,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=jp(w,y.mode,j),b.return=y,b):(b=s(b,w.children||[]),b.return=y,b)}function f(y,b,w,j,_){return b===null||b.tag!==7?(b=co(w,y.mode,j,_),b.return=y,b):(b=s(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=wp(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gc:return w=Ju(b.type,b.key,b.props,null,y.mode,w),w.ref=ka(y,null,b),w.return=y,w;case si:return b=jp(b,y.mode,w),b.return=y,b;case rs:var j=b._init;return d(y,j(b._payload),w)}if(Ha(b)||Ea(b))return b=co(b,y.mode,w,null),b.return=y,b;su(y,b)}return null}function h(y,b,w,j){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(y,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gc:return w.key===_?c(y,b,w,j):null;case si:return w.key===_?u(y,b,w,j):null;case rs:return _=w._init,h(y,b,_(w._payload),j)}if(Ha(w)||Ea(w))return _!==null?null:f(y,b,w,j,null);su(y,w)}return null}function m(y,b,w,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(w)||null,l(b,y,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Gc:return y=y.get(j.key===null?w:j.key)||null,c(b,y,j,_);case si:return y=y.get(j.key===null?w:j.key)||null,u(b,y,j,_);case rs:var S=j._init;return m(y,b,w,S(j._payload),_)}if(Ha(j)||Ea(j))return y=y.get(w)||null,f(b,y,j,_,null);su(b,j)}return null}function g(y,b,w,j){for(var _=null,S=null,E=b,N=b=0,P=null;E!==null&&N<w.length;N++){E.index>N?(P=E,E=null):P=E.sibling;var C=h(y,E,w[N],j);if(C===null){E===null&&(E=P);break}e&&E&&C.alternate===null&&t(y,E),b=o(C,b,N),S===null?_=C:S.sibling=C,S=C,E=P}if(N===w.length)return r(y,E),Xe&&qs(y,N),_;if(E===null){for(;N<w.length;N++)E=d(y,w[N],j),E!==null&&(b=o(E,b,N),S===null?_=E:S.sibling=E,S=E);return Xe&&qs(y,N),_}for(E=n(y,E);N<w.length;N++)P=m(E,y,N,w[N],j),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?N:P.key),b=o(P,b,N),S===null?_=P:S.sibling=P,S=P);return e&&E.forEach(function(I){return t(y,I)}),Xe&&qs(y,N),_}function v(y,b,w,j){var _=Ea(w);if(typeof _!="function")throw Error(ee(150));if(w=_.call(w),w==null)throw Error(ee(151));for(var S=_=null,E=b,N=b=0,P=null,C=w.next();E!==null&&!C.done;N++,C=w.next()){E.index>N?(P=E,E=null):P=E.sibling;var I=h(y,E,C.value,j);if(I===null){E===null&&(E=P);break}e&&E&&I.alternate===null&&t(y,E),b=o(I,b,N),S===null?_=I:S.sibling=I,S=I,E=P}if(C.done)return r(y,E),Xe&&qs(y,N),_;if(E===null){for(;!C.done;N++,C=w.next())C=d(y,C.value,j),C!==null&&(b=o(C,b,N),S===null?_=C:S.sibling=C,S=C);return Xe&&qs(y,N),_}for(E=n(y,E);!C.done;N++,C=w.next())C=m(E,y,N,C.value,j),C!==null&&(e&&C.alternate!==null&&E.delete(C.key===null?N:C.key),b=o(C,b,N),S===null?_=C:S.sibling=C,S=C);return e&&E.forEach(function(O){return t(y,O)}),Xe&&qs(y,N),_}function x(y,b,w,j){if(typeof w=="object"&&w!==null&&w.type===oi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Gc:e:{for(var _=w.key,S=b;S!==null;){if(S.key===_){if(_=w.type,_===oi){if(S.tag===7){r(y,S.sibling),b=s(S,w.props.children),b.return=y,y=b;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rs&&rw(_)===S.type){r(y,S.sibling),b=s(S,w.props),b.ref=ka(y,S,w),b.return=y,y=b;break e}r(y,S);break}else t(y,S);S=S.sibling}w.type===oi?(b=co(w.props.children,y.mode,j,w.key),b.return=y,y=b):(j=Ju(w.type,w.key,w.props,null,y.mode,j),j.ref=ka(y,b,w),j.return=y,y=j)}return a(y);case si:e:{for(S=w.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=s(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else t(y,b);b=b.sibling}b=jp(w,y.mode,j),b.return=y,y=b}return a(y);case rs:return S=w._init,x(y,b,S(w._payload),j)}if(Ha(w))return g(y,b,w,j);if(Ea(w))return v(y,b,w,j);su(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=s(b,w),b.return=y,y=b):(r(y,b),b=wp(w,y.mode,j),b.return=y,y=b),a(y)):r(y,b)}return x}var Mi=JE(!0),XE=JE(!1),gd=Os(null),vd=null,hi=null,px=null;function mx(){px=hi=vd=null}function gx(e){var t=gd.current;Ke(gd),e._currentValue=t}function dg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){vd=e,px=hi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jt=!0),e.firstContext=null)}function Or(e){var t=e._currentValue;if(px!==e)if(e={context:e,memoizedValue:t,next:null},hi===null){if(vd===null)throw Error(ee(308));hi=e,vd.dependencies={lanes:0,firstContext:e}}else hi=hi.next=e;return t}var ro=null;function vx(e){ro===null?ro=[e]:ro.push(e)}function QE(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,vx(t)):(r.next=s.next,s.next=r),t.interleaved=r,Fn(e,n)}function Fn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ns=!1;function xx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ie&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Fn(e,r)}return s=n.interleaved,s===null?(t.next=t,vx(n)):(t.next=s.next,s.next=t),n.interleaved=t,Fn(e,r)}function qu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nx(e,r)}}function nw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function xd(e,t,r,n){var s=e.updateQueue;ns=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;a=0,f=u=c=null,l=o;do{var h=l.lane,m=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=nt({},d,h);break e;case 2:ns=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);vo|=a,e.lanes=a,e.memoizedState=d}}function sw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ee(191,s));s.call(n)}}}var gc={},pn=Os(gc),Il=Os(gc),Ol=Os(gc);function no(e){if(e===gc)throw Error(ee(174));return e}function yx(e,t){switch(ze(Ol,t),ze(Il,e),ze(pn,gc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wm(t,e)}Ke(pn),ze(pn,t)}function Fi(){Ke(pn),Ke(Il),Ke(Ol)}function eN(e){no(Ol.current);var t=no(pn.current),r=Wm(t,e.type);t!==r&&(ze(Il,e),ze(pn,r))}function bx(e){Il.current===e&&(Ke(pn),Ke(Il))}var et=Os(0);function yd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mp=[];function wx(){for(var e=0;e<mp.length;e++)mp[e]._workInProgressVersionPrimary=null;mp.length=0}var Wu=Hn.ReactCurrentDispatcher,gp=Hn.ReactCurrentBatchConfig,go=0,rt=null,ht=null,gt=null,bd=!1,al=!1,Dl=0,tM=0;function Ct(){throw Error(ee(321))}function jx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qr(e[r],t[r]))return!1;return!0}function _x(e,t,r,n,s,o){if(go=o,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wu.current=e===null||e.memoizedState===null?oM:iM,e=r(n,s),al){o=0;do{if(al=!1,Dl=0,25<=o)throw Error(ee(301));o+=1,gt=ht=null,t.updateQueue=null,Wu.current=aM,e=r(n,s)}while(al)}if(Wu.current=wd,t=ht!==null&&ht.next!==null,go=0,gt=ht=rt=null,bd=!1,t)throw Error(ee(300));return e}function Sx(){var e=Dl!==0;return Dl=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?rt.memoizedState=gt=e:gt=gt.next=e,gt}function Dr(){if(ht===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=gt===null?rt.memoizedState:gt.next;if(t!==null)gt=t,ht=e;else{if(e===null)throw Error(ee(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?rt.memoizedState=gt=e:gt=gt.next=e}return gt}function $l(e,t){return typeof t=="function"?t(e):t}function vp(e){var t=Dr(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=ht,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((go&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=n):c=c.next=d,rt.lanes|=f,vo|=f}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=l,Qr(n,t.memoizedState)||(Jt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,rt.lanes|=o,vo|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xp(e){var t=Dr(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Qr(o,t.memoizedState)||(Jt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function tN(){}function rN(e,t){var r=rt,n=Dr(),s=t(),o=!Qr(n.memoizedState,s);if(o&&(n.memoizedState=s,Jt=!0),n=n.queue,Ex(oN.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Ll(9,sN.bind(null,r,n,s,t),void 0,null),xt===null)throw Error(ee(349));go&30||nN(r,t,s)}return s}function nN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sN(e,t,r,n){t.value=r,t.getSnapshot=n,iN(t)&&aN(e)}function oN(e,t,r){return r(function(){iN(t)&&aN(e)})}function iN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qr(e,r)}catch{return!0}}function aN(e){var t=Fn(e,1);t!==null&&Xr(t,e,1,-1)}function ow(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:e},t.queue=e,e=e.dispatch=sM.bind(null,rt,e),[t.memoizedState,e]}function Ll(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function lN(){return Dr().memoizedState}function Hu(e,t,r,n){var s=cn();rt.flags|=e,s.memoizedState=Ll(1|t,r,void 0,n===void 0?null:n)}function mf(e,t,r,n){var s=Dr();n=n===void 0?null:n;var o=void 0;if(ht!==null){var a=ht.memoizedState;if(o=a.destroy,n!==null&&jx(n,a.deps)){s.memoizedState=Ll(t,r,o,n);return}}rt.flags|=e,s.memoizedState=Ll(1|t,r,o,n)}function iw(e,t){return Hu(8390656,8,e,t)}function Ex(e,t){return mf(2048,8,e,t)}function cN(e,t){return mf(4,2,e,t)}function uN(e,t){return mf(4,4,e,t)}function dN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fN(e,t,r){return r=r!=null?r.concat([e]):null,mf(4,4,dN.bind(null,t,e),r)}function Nx(){}function hN(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function pN(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function mN(e,t,r){return go&21?(Qr(r,t)||(r=bE(),rt.lanes|=r,vo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jt=!0),e.memoizedState=r)}function rM(e,t){var r=De;De=r!==0&&4>r?r:4,e(!0);var n=gp.transition;gp.transition={};try{e(!1),t()}finally{De=r,gp.transition=n}}function gN(){return Dr().memoizedState}function nM(e,t,r){var n=xs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vN(e))xN(t,r);else if(r=QE(e,t,r,n),r!==null){var s=zt();Xr(r,e,n,s),yN(r,t,n)}}function sM(e,t,r){var n=xs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vN(e))xN(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Qr(l,a)){var c=t.interleaved;c===null?(s.next=s,vx(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=QE(e,t,s,n),r!==null&&(s=zt(),Xr(r,e,n,s),yN(r,t,n))}}function vN(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function xN(e,t){al=bd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function yN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nx(e,r)}}var wd={readContext:Or,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},oM={readContext:Or,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Or,useEffect:iw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Hu(4194308,4,dN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Hu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hu(4,2,e,t)},useMemo:function(e,t){var r=cn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=cn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=nM.bind(null,rt,e),[n.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:ow,useDebugValue:Nx,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=ow(!1),t=e[0];return e=rM.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=rt,s=cn();if(Xe){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),xt===null)throw Error(ee(349));go&30||nN(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,iw(oN.bind(null,n,o,e),[e]),n.flags|=2048,Ll(9,sN.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=cn(),t=xt.identifierPrefix;if(Xe){var r=Tn,n=Pn;r=(n&~(1<<32-Jr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Dl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=tM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iM={readContext:Or,useCallback:hN,useContext:Or,useEffect:Ex,useImperativeHandle:fN,useInsertionEffect:cN,useLayoutEffect:uN,useMemo:pN,useReducer:vp,useRef:lN,useState:function(){return vp($l)},useDebugValue:Nx,useDeferredValue:function(e){var t=Dr();return mN(t,ht.memoizedState,e)},useTransition:function(){var e=vp($l)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:tN,useSyncExternalStore:rN,useId:gN,unstable_isNewReconciler:!1},aM={readContext:Or,useCallback:hN,useContext:Or,useEffect:Ex,useImperativeHandle:fN,useInsertionEffect:cN,useLayoutEffect:uN,useMemo:pN,useReducer:xp,useRef:lN,useState:function(){return xp($l)},useDebugValue:Nx,useDeferredValue:function(e){var t=Dr();return ht===null?t.memoizedState=e:mN(t,ht.memoizedState,e)},useTransition:function(){var e=xp($l)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:tN,useSyncExternalStore:rN,useId:gN,unstable_isNewReconciler:!1};function qr(e,t){if(e&&e.defaultProps){t=nt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:nt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gf={isMounted:function(e){return(e=e._reactInternals)?Po(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=zt(),s=xs(e),o=An(n,s);o.payload=t,r!=null&&(o.callback=r),t=gs(e,o,s),t!==null&&(Xr(t,e,s,n),qu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=zt(),s=xs(e),o=An(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=gs(e,o,s),t!==null&&(Xr(t,e,s,n),qu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zt(),n=xs(e),s=An(r,n);s.tag=2,t!=null&&(s.callback=t),t=gs(e,s,n),t!==null&&(Xr(t,e,n,r),qu(t,e,n))}};function aw(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!Tl(r,n)||!Tl(s,o):!0}function bN(e,t,r){var n=!1,s=Cs,o=t.contextType;return typeof o=="object"&&o!==null?o=Or(o):(s=Qt(t)?po:Rt.current,n=t.contextTypes,o=(n=n!=null)?$i(e,s):Cs),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function lw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gf.enqueueReplaceState(t,t.state,null)}function hg(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},xx(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Or(o):(o=Qt(t)?po:Rt.current,s.context=$i(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(fg(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&gf.enqueueReplaceState(s,s.state,null),xd(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Bi(e,t){try{var r="",n=t;do r+=D$(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function yp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function pg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lM=typeof WeakMap=="function"?WeakMap:Map;function wN(e,t,r){r=An(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_d||(_d=!0,Sg=n),pg(e,t)},r}function jN(e,t,r){r=An(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){pg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){pg(e,t),typeof n!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function cw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=jM.bind(null,e,t,r),t.then(e,e))}function uw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dw(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=An(-1,1),t.tag=2,gs(r,t,1))),r.lanes|=1),e)}var cM=Hn.ReactCurrentOwner,Jt=!1;function Lt(e,t,r,n){t.child=e===null?XE(t,null,r,n):Mi(t,e.child,r,n)}function fw(e,t,r,n,s){r=r.render;var o=t.ref;return Ei(t,s),n=_x(e,t,r,n,o,s),r=Sx(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Xe&&r&&dx(t),t.flags|=1,Lt(e,t,n,s),t.child)}function hw(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Ox(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,_N(e,t,o,n,s)):(e=Ju(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Tl,r(a,n)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=ys(o,n),e.ref=t.ref,e.return=t,t.child=e}function _N(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(Tl(o,n)&&e.ref===t.ref)if(Jt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(Jt=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return mg(e,t,r,n,s)}function SN(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(mi,nr),nr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(mi,nr),nr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ze(mi,nr),nr|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ze(mi,nr),nr|=n;return Lt(e,t,s,r),t.child}function EN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mg(e,t,r,n,s){var o=Qt(r)?po:Rt.current;return o=$i(t,o),Ei(t,s),r=_x(e,t,r,n,o,s),n=Sx(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Xe&&n&&dx(t),t.flags|=1,Lt(e,t,r,s),t.child)}function pw(e,t,r,n,s){if(Qt(r)){var o=!0;hd(t)}else o=!1;if(Ei(t,s),t.stateNode===null)Gu(e,t),bN(t,r,n),hg(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Or(u):(u=Qt(r)?po:Rt.current,u=$i(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&lw(t,a,n,u),ns=!1;var h=t.memoizedState;a.state=h,xd(t,n,a,s),c=t.memoizedState,l!==n||h!==c||Xt.current||ns?(typeof f=="function"&&(fg(t,r,f,n),c=t.memoizedState),(l=ns||aw(t,r,l,n,h,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,ZE(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:qr(t.type,l),a.props=u,d=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=Qt(r)?po:Rt.current,c=$i(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||h!==c)&&lw(t,a,n,c),ns=!1,h=t.memoizedState,a.state=h,xd(t,n,a,s);var g=t.memoizedState;l!==d||h!==g||Xt.current||ns?(typeof m=="function"&&(fg(t,r,m,n),g=t.memoizedState),(u=ns||aw(t,r,u,n,h,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return gg(e,t,r,n,o,s)}function gg(e,t,r,n,s,o){EN(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Zb(t,r,!1),Bn(e,t,o);n=t.stateNode,cM.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Mi(t,e.child,null,o),t.child=Mi(t,null,l,o)):Lt(e,t,l,o),t.memoizedState=n.state,s&&Zb(t,r,!0),t.child}function NN(e){var t=e.stateNode;t.pendingContext?Qb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qb(e,t.context,!1),yx(e,t.containerInfo)}function mw(e,t,r,n,s){return Li(),hx(s),t.flags|=256,Lt(e,t,r,n),t.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function xg(e){return{baseLanes:e,cachePool:null,transitions:null}}function CN(e,t,r){var n=t.pendingProps,s=et.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(et,s&1),e===null)return ug(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=yf(a,n,0,null),e=co(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=xg(r),t.memoizedState=vg,e):Cx(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uM(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ys(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ys(l,o):(o=co(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?xg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=vg,n}return o=e.child,e=o.sibling,n=ys(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Cx(e,t){return t=yf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ou(e,t,r,n){return n!==null&&hx(n),Mi(t,e.child,null,r),e=Cx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uM(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=yp(Error(ee(422))),ou(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=yf({mode:"visible",children:n.children},s,0,null),o=co(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Mi(t,e.child,null,a),t.child.memoizedState=xg(a),t.memoizedState=vg,o);if(!(t.mode&1))return ou(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(ee(419)),n=yp(o,n,void 0),ou(e,t,a,n)}if(l=(a&e.childLanes)!==0,Jt||l){if(n=xt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Fn(e,s),Xr(n,e,s,-1))}return Ix(),n=yp(Error(ee(421))),ou(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_M.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ar=ms(s.nextSibling),cr=t,Xe=!0,Gr=null,e!==null&&(Nr[Cr++]=Pn,Nr[Cr++]=Tn,Nr[Cr++]=mo,Pn=e.id,Tn=e.overflow,mo=t),t=Cx(t,n.children),t.flags|=4096,t)}function gw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),dg(e.return,t,r)}function bp(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function PN(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Lt(e,t,n.children,r),n=et.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gw(e,r,t);else if(e.tag===19)gw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ze(et,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&yd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),bp(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}bp(t,!0,r,null,o);break;case"together":bp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=ys(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ys(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dM(e,t,r){switch(t.tag){case 3:NN(t),Li();break;case 5:eN(t);break;case 1:Qt(t.type)&&hd(t);break;case 4:yx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ze(gd,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ze(et,et.current&1),t.flags|=128,null):r&t.child.childLanes?CN(e,t,r):(ze(et,et.current&1),e=Bn(e,t,r),e!==null?e.sibling:null);ze(et,et.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return PN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(et,et.current),n)break;return null;case 22:case 23:return t.lanes=0,SN(e,t,r)}return Bn(e,t,r)}var TN,yg,kN,AN;TN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yg=function(){};kN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,no(pn.current);var o=null;switch(r){case"input":s=zm(e,s),n=zm(e,n),o=[];break;case"select":s=nt({},s,{value:void 0}),n=nt({},n,{value:void 0}),o=[];break;case"textarea":s=qm(e,s),n=qm(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=dd)}Hm(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ge("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};AN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Aa(e,t){if(!Xe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function fM(e,t,r){var n=t.pendingProps;switch(fx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Qt(t.type)&&fd(),Pt(t),null;case 3:return n=t.stateNode,Fi(),Ke(Xt),Ke(Rt),wx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(nu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gr!==null&&(Cg(Gr),Gr=null))),yg(e,t),Pt(t),null;case 5:bx(t);var s=no(Ol.current);if(r=t.type,e!==null&&t.stateNode!=null)kN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ee(166));return Pt(t),null}if(e=no(pn.current),nu(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[un]=t,n[Rl]=o,e=(t.mode&1)!==0,r){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(s=0;s<Ka.length;s++)Ge(Ka[s],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":Eb(n,o),Ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ge("invalid",n);break;case"textarea":Cb(n,o),Ge("invalid",n)}Hm(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&ru(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ru(n.textContent,l,e),s=["children",""+l]):jl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",n)}switch(r){case"input":Kc(n),Nb(n,o,!0);break;case"textarea":Kc(n),Pb(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=dd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=oE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[un]=t,e[Rl]=n,TN(e,t,!1,!1),t.stateNode=e;e:{switch(a=Gm(r,n),r){case"dialog":Ge("cancel",e),Ge("close",e),s=n;break;case"iframe":case"object":case"embed":Ge("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ka.length;s++)Ge(Ka[s],e);s=n;break;case"source":Ge("error",e),s=n;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),s=n;break;case"details":Ge("toggle",e),s=n;break;case"input":Eb(e,n),s=zm(e,n),Ge("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=nt({},n,{value:void 0}),Ge("invalid",e);break;case"textarea":Cb(e,n),s=qm(e,n),Ge("invalid",e);break;default:s=n}Hm(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?lE(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&iE(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_l(e,c):typeof c=="number"&&_l(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(jl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ge("scroll",e):c!=null&&Xv(e,o,c,a))}switch(r){case"input":Kc(e),Nb(e,n,!1);break;case"textarea":Kc(e),Pb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ns(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?wi(e,!!n.multiple,o,!1):n.defaultValue!=null&&wi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=dd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pt(t),null;case 6:if(e&&t.stateNode!=null)AN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ee(166));if(r=no(Ol.current),no(pn.current),nu(t)){if(n=t.stateNode,r=t.memoizedProps,n[un]=t,(o=n.nodeValue!==r)&&(e=cr,e!==null))switch(e.tag){case 3:ru(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ru(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[un]=t,t.stateNode=n}return Pt(t),null;case 13:if(Ke(et),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&ar!==null&&t.mode&1&&!(t.flags&128))YE(),Li(),t.flags|=98560,o=!1;else if(o=nu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ee(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[un]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pt(t),o=!1}else Gr!==null&&(Cg(Gr),Gr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?pt===0&&(pt=3):Ix())),t.updateQueue!==null&&(t.flags|=4),Pt(t),null);case 4:return Fi(),yg(e,t),e===null&&kl(t.stateNode.containerInfo),Pt(t),null;case 10:return gx(t.type._context),Pt(t),null;case 17:return Qt(t.type)&&fd(),Pt(t),null;case 19:if(Ke(et),o=t.memoizedState,o===null)return Pt(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Aa(o,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=yd(e),a!==null){for(t.flags|=128,Aa(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ze(et,et.current&1|2),t.child}e=e.sibling}o.tail!==null&&it()>zi&&(t.flags|=128,n=!0,Aa(o,!1),t.lanes=4194304)}else{if(!n)if(e=yd(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Aa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Pt(t),null}else 2*it()-o.renderingStartTime>zi&&r!==1073741824&&(t.flags|=128,n=!0,Aa(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=it(),t.sibling=null,r=et.current,ze(et,n?r&1|2:r&1),t):(Pt(t),null);case 22:case 23:return Rx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nr&1073741824&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function hM(e,t){switch(fx(t),t.tag){case 1:return Qt(t.type)&&fd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fi(),Ke(Xt),Ke(Rt),wx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bx(t),null;case 13:if(Ke(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(et),null;case 4:return Fi(),null;case 10:return gx(t.type._context),null;case 22:case 23:return Rx(),null;case 24:return null;default:return null}}var iu=!1,At=!1,pM=typeof WeakSet=="function"?WeakSet:Set,de=null;function pi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){st(e,t,n)}else r.current=null}function bg(e,t,r){try{r()}catch(n){st(e,t,n)}}var vw=!1;function mM(e,t){if(ng=ld,e=$E(),ux(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===r&&++u===s&&(l=a),h===o&&++f===n&&(c=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(sg={focusedElem:e,selectionRange:r},ld=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:qr(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(j){st(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return g=vw,vw=!1,g}function ll(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&bg(t,r,o)}s=s.next}while(s!==n)}}function vf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function RN(e){var t=e.alternate;t!==null&&(e.alternate=null,RN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Rl],delete t[ag],delete t[XL],delete t[QL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IN(e){return e.tag===5||e.tag===3||e.tag===4}function xw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=dd));else if(n!==4&&(e=e.child,e!==null))for(jg(e,t,r),e=e.sibling;e!==null;)jg(e,t,r),e=e.sibling}function _g(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_g(e,t,r),e=e.sibling;e!==null;)_g(e,t,r),e=e.sibling}var jt=null,Hr=!1;function Jn(e,t,r){for(r=r.child;r!==null;)ON(e,t,r),r=r.sibling}function ON(e,t,r){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(cf,r)}catch{}switch(r.tag){case 5:At||pi(r,t);case 6:var n=jt,s=Hr;jt=null,Jn(e,t,r),jt=n,Hr=s,jt!==null&&(Hr?(e=jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jt.removeChild(r.stateNode));break;case 18:jt!==null&&(Hr?(e=jt,r=r.stateNode,e.nodeType===8?hp(e.parentNode,r):e.nodeType===1&&hp(e,r),Cl(e)):hp(jt,r.stateNode));break;case 4:n=jt,s=Hr,jt=r.stateNode.containerInfo,Hr=!0,Jn(e,t,r),jt=n,Hr=s;break;case 0:case 11:case 14:case 15:if(!At&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&bg(r,t,a),s=s.next}while(s!==n)}Jn(e,t,r);break;case 1:if(!At&&(pi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){st(r,t,l)}Jn(e,t,r);break;case 21:Jn(e,t,r);break;case 22:r.mode&1?(At=(n=At)||r.memoizedState!==null,Jn(e,t,r),At=n):Jn(e,t,r);break;default:Jn(e,t,r)}}function yw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new pM),t.forEach(function(n){var s=SM.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Br(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Hr=!1;break e;case 3:jt=l.stateNode.containerInfo,Hr=!0;break e;case 4:jt=l.stateNode.containerInfo,Hr=!0;break e}l=l.return}if(jt===null)throw Error(ee(160));ON(o,a,s),jt=null,Hr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){st(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)DN(t,e),t=t.sibling}function DN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Br(t,e),ln(e),n&4){try{ll(3,e,e.return),vf(3,e)}catch(v){st(e,e.return,v)}try{ll(5,e,e.return)}catch(v){st(e,e.return,v)}}break;case 1:Br(t,e),ln(e),n&512&&r!==null&&pi(r,r.return);break;case 5:if(Br(t,e),ln(e),n&512&&r!==null&&pi(r,r.return),e.flags&32){var s=e.stateNode;try{_l(s,"")}catch(v){st(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&nE(s,o),Gm(l,a);var u=Gm(l,o);for(a=0;a<c.length;a+=2){var f=c[a],d=c[a+1];f==="style"?lE(s,d):f==="dangerouslySetInnerHTML"?iE(s,d):f==="children"?_l(s,d):Xv(s,f,d,u)}switch(l){case"input":Um(s,o);break;case"textarea":sE(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?wi(s,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?wi(s,!!o.multiple,o.defaultValue,!0):wi(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rl]=o}catch(v){st(e,e.return,v)}}break;case 6:if(Br(t,e),ln(e),n&4){if(e.stateNode===null)throw Error(ee(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){st(e,e.return,v)}}break;case 3:if(Br(t,e),ln(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cl(t.containerInfo)}catch(v){st(e,e.return,v)}break;case 4:Br(t,e),ln(e);break;case 13:Br(t,e),ln(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(kx=it())),n&4&&yw(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(At=(u=At)||f,Br(t,e),At=u):Br(t,e),ln(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(de=e,f=e.child;f!==null;){for(d=de=f;de!==null;){switch(h=de,m=h.child,h.tag){case 0:case 11:case 14:case 15:ll(4,h,h.return);break;case 1:pi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){st(n,r,v)}}break;case 5:pi(h,h.return);break;case 22:if(h.memoizedState!==null){ww(d);continue}}m!==null?(m.return=h,de=m):ww(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=aE("display",a))}catch(v){st(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){st(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Br(t,e),ln(e),n&4&&yw(e);break;case 21:break;default:Br(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(IN(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_l(s,""),n.flags&=-33);var o=xw(e);_g(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=xw(e);jg(e,l,a);break;default:throw Error(ee(161))}}catch(c){st(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gM(e,t,r){de=e,$N(e)}function $N(e,t,r){for(var n=(e.mode&1)!==0;de!==null;){var s=de,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||iu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||At;l=iu;var u=At;if(iu=a,(At=c)&&!u)for(de=s;de!==null;)a=de,c=a.child,a.tag===22&&a.memoizedState!==null?jw(s):c!==null?(c.return=a,de=c):jw(s);for(;o!==null;)de=o,$N(o),o=o.sibling;de=s,iu=l,At=u}bw(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,de=o):bw(e)}}function bw(e){for(;de!==null;){var t=de;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:At||vf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!At)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&sw(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sw(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Cl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}At||t.flags&512&&wg(t)}catch(h){st(t,t.return,h)}}if(t===e){de=null;break}if(r=t.sibling,r!==null){r.return=t.return,de=r;break}de=t.return}}function ww(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var r=t.sibling;if(r!==null){r.return=t.return,de=r;break}de=t.return}}function jw(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vf(4,t)}catch(c){st(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){st(t,s,c)}}var o=t.return;try{wg(t)}catch(c){st(t,o,c)}break;case 5:var a=t.return;try{wg(t)}catch(c){st(t,a,c)}}}catch(c){st(t,t.return,c)}if(t===e){de=null;break}var l=t.sibling;if(l!==null){l.return=t.return,de=l;break}de=t.return}}var vM=Math.ceil,jd=Hn.ReactCurrentDispatcher,Px=Hn.ReactCurrentOwner,kr=Hn.ReactCurrentBatchConfig,Ie=0,xt=null,ct=null,St=0,nr=0,mi=Os(0),pt=0,Ml=null,vo=0,xf=0,Tx=0,cl=null,Gt=null,kx=0,zi=1/0,_n=null,_d=!1,Sg=null,vs=null,au=!1,cs=null,Sd=0,ul=0,Eg=null,Ku=-1,Yu=0;function zt(){return Ie&6?it():Ku!==-1?Ku:Ku=it()}function xs(e){return e.mode&1?Ie&2&&St!==0?St&-St:eM.transition!==null?(Yu===0&&(Yu=bE()),Yu):(e=De,e!==0||(e=window.event,e=e===void 0?16:CE(e.type)),e):1}function Xr(e,t,r,n){if(50<ul)throw ul=0,Eg=null,Error(ee(185));hc(e,r,n),(!(Ie&2)||e!==xt)&&(e===xt&&(!(Ie&2)&&(xf|=r),pt===4&&is(e,St)),Zt(e,n),r===1&&Ie===0&&!(t.mode&1)&&(zi=it()+500,pf&&Ds()))}function Zt(e,t){var r=e.callbackNode;eL(e,t);var n=ad(e,e===xt?St:0);if(n===0)r!==null&&Ab(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ab(r),t===1)e.tag===0?ZL(_w.bind(null,e)):HE(_w.bind(null,e)),YL(function(){!(Ie&6)&&Ds()}),r=null;else{switch(wE(n)){case 1:r=rx;break;case 4:r=xE;break;case 16:r=id;break;case 536870912:r=yE;break;default:r=id}r=qN(r,LN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function LN(e,t){if(Ku=-1,Yu=0,Ie&6)throw Error(ee(327));var r=e.callbackNode;if(Ni()&&e.callbackNode!==r)return null;var n=ad(e,e===xt?St:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ed(e,n);else{t=n;var s=Ie;Ie|=2;var o=FN();(xt!==e||St!==t)&&(_n=null,zi=it()+500,lo(e,t));do try{bM();break}catch(l){MN(e,l)}while(1);mx(),jd.current=o,Ie=s,ct!==null?t=0:(xt=null,St=0,t=pt)}if(t!==0){if(t===2&&(s=Qm(e),s!==0&&(n=s,t=Ng(e,s))),t===1)throw r=Ml,lo(e,0),is(e,n),Zt(e,it()),r;if(t===6)is(e,n);else{if(s=e.current.alternate,!(n&30)&&!xM(s)&&(t=Ed(e,n),t===2&&(o=Qm(e),o!==0&&(n=o,t=Ng(e,o))),t===1))throw r=Ml,lo(e,0),is(e,n),Zt(e,it()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ee(345));case 2:Ws(e,Gt,_n);break;case 3:if(is(e,n),(n&130023424)===n&&(t=kx+500-it(),10<t)){if(ad(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){zt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ig(Ws.bind(null,e,Gt,_n),t);break}Ws(e,Gt,_n);break;case 4:if(is(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Jr(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=it()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vM(n/1960))-n,10<n){e.timeoutHandle=ig(Ws.bind(null,e,Gt,_n),n);break}Ws(e,Gt,_n);break;case 5:Ws(e,Gt,_n);break;default:throw Error(ee(329))}}}return Zt(e,it()),e.callbackNode===r?LN.bind(null,e):null}function Ng(e,t){var r=cl;return e.current.memoizedState.isDehydrated&&(lo(e,t).flags|=256),e=Ed(e,t),e!==2&&(t=Gt,Gt=r,t!==null&&Cg(t)),e}function Cg(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function xM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Qr(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function is(e,t){for(t&=~Tx,t&=~xf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jr(t),n=1<<r;e[r]=-1,t&=~n}}function _w(e){if(Ie&6)throw Error(ee(327));Ni();var t=ad(e,0);if(!(t&1))return Zt(e,it()),null;var r=Ed(e,t);if(e.tag!==0&&r===2){var n=Qm(e);n!==0&&(t=n,r=Ng(e,n))}if(r===1)throw r=Ml,lo(e,0),is(e,t),Zt(e,it()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ws(e,Gt,_n),Zt(e,it()),null}function Ax(e,t){var r=Ie;Ie|=1;try{return e(t)}finally{Ie=r,Ie===0&&(zi=it()+500,pf&&Ds())}}function xo(e){cs!==null&&cs.tag===0&&!(Ie&6)&&Ni();var t=Ie;Ie|=1;var r=kr.transition,n=De;try{if(kr.transition=null,De=1,e)return e()}finally{De=n,kr.transition=r,Ie=t,!(Ie&6)&&Ds()}}function Rx(){nr=mi.current,Ke(mi)}function lo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,KL(r)),ct!==null)for(r=ct.return;r!==null;){var n=r;switch(fx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fd();break;case 3:Fi(),Ke(Xt),Ke(Rt),wx();break;case 5:bx(n);break;case 4:Fi();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:gx(n.type._context);break;case 22:case 23:Rx()}r=r.return}if(xt=e,ct=e=ys(e.current,null),St=nr=t,pt=0,Ml=null,Tx=xf=vo=0,Gt=cl=null,ro!==null){for(t=0;t<ro.length;t++)if(r=ro[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}ro=null}return e}function MN(e,t){do{var r=ct;try{if(mx(),Wu.current=wd,bd){for(var n=rt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bd=!1}if(go=0,gt=ht=rt=null,al=!1,Dl=0,Px.current=null,r===null||r.return===null){pt=1,Ml=t,ct=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=uw(a);if(m!==null){m.flags&=-257,dw(m,a,l,o,t),m.mode&1&&cw(o,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){cw(o,u,t),Ix();break e}c=Error(ee(426))}}else if(Xe&&l.mode&1){var x=uw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),dw(x,a,l,o,t),hx(Bi(c,l));break e}}o=c=Bi(c,l),pt!==4&&(pt=2),cl===null?cl=[o]:cl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=wN(o,c,t);nw(o,y);break e;case 1:l=c;var b=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vs===null||!vs.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=jN(o,l,t);nw(o,j);break e}}o=o.return}while(o!==null)}zN(r)}catch(_){t=_,ct===r&&r!==null&&(ct=r=r.return);continue}break}while(1)}function FN(){var e=jd.current;return jd.current=wd,e===null?wd:e}function Ix(){(pt===0||pt===3||pt===2)&&(pt=4),xt===null||!(vo&268435455)&&!(xf&268435455)||is(xt,St)}function Ed(e,t){var r=Ie;Ie|=2;var n=FN();(xt!==e||St!==t)&&(_n=null,lo(e,t));do try{yM();break}catch(s){MN(e,s)}while(1);if(mx(),Ie=r,jd.current=n,ct!==null)throw Error(ee(261));return xt=null,St=0,pt}function yM(){for(;ct!==null;)BN(ct)}function bM(){for(;ct!==null&&!W$();)BN(ct)}function BN(e){var t=VN(e.alternate,e,nr);e.memoizedProps=e.pendingProps,t===null?zN(e):ct=t,Px.current=null}function zN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hM(r,t),r!==null){r.flags&=32767,ct=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ct=null;return}}else if(r=fM(r,t,nr),r!==null){ct=r;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);pt===0&&(pt=5)}function Ws(e,t,r){var n=De,s=kr.transition;try{kr.transition=null,De=1,wM(e,t,r,n)}finally{kr.transition=s,De=n}return null}function wM(e,t,r,n){do Ni();while(cs!==null);if(Ie&6)throw Error(ee(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(tL(e,o),e===xt&&(ct=xt=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||au||(au=!0,qN(id,function(){return Ni(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=kr.transition,kr.transition=null;var a=De;De=1;var l=Ie;Ie|=4,Px.current=null,mM(e,r),DN(r,e),zL(sg),ld=!!ng,sg=ng=null,e.current=r,gM(r),H$(),Ie=l,De=a,kr.transition=o}else e.current=r;if(au&&(au=!1,cs=e,Sd=s),o=e.pendingLanes,o===0&&(vs=null),Y$(r.stateNode),Zt(e,it()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(_d)throw _d=!1,e=Sg,Sg=null,e;return Sd&1&&e.tag!==0&&Ni(),o=e.pendingLanes,o&1?e===Eg?ul++:(ul=0,Eg=e):ul=0,Ds(),null}function Ni(){if(cs!==null){var e=wE(Sd),t=kr.transition,r=De;try{if(kr.transition=null,De=16>e?16:e,cs===null)var n=!1;else{if(e=cs,cs=null,Sd=0,Ie&6)throw Error(ee(331));var s=Ie;for(Ie|=4,de=e.current;de!==null;){var o=de,a=o.child;if(de.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(de=u;de!==null;){var f=de;switch(f.tag){case 0:case 11:case 15:ll(8,f,o)}var d=f.child;if(d!==null)d.return=f,de=d;else for(;de!==null;){f=de;var h=f.sibling,m=f.return;if(RN(f),f===u){de=null;break}if(h!==null){h.return=m,de=h;break}de=m}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}de=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,de=a;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ll(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var b=e.current;for(de=b;de!==null;){a=de;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,de=w;else e:for(a=b;de!==null;){if(l=de,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vf(9,l)}}catch(_){st(l,l.return,_)}if(l===a){de=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,de=j;break e}de=l.return}}if(Ie=s,Ds(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(cf,e)}catch{}n=!0}return n}finally{De=r,kr.transition=t}}return!1}function Sw(e,t,r){t=Bi(r,t),t=wN(e,t,1),e=gs(e,t,1),t=zt(),e!==null&&(hc(e,1,t),Zt(e,t))}function st(e,t,r){if(e.tag===3)Sw(e,e,r);else for(;t!==null;){if(t.tag===3){Sw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vs===null||!vs.has(n))){e=Bi(r,e),e=jN(t,e,1),t=gs(t,e,1),e=zt(),t!==null&&(hc(t,1,e),Zt(t,e));break}}t=t.return}}function jM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=zt(),e.pingedLanes|=e.suspendedLanes&r,xt===e&&(St&r)===r&&(pt===4||pt===3&&(St&130023424)===St&&500>it()-kx?lo(e,0):Tx|=r),Zt(e,t)}function UN(e,t){t===0&&(e.mode&1?(t=Xc,Xc<<=1,!(Xc&130023424)&&(Xc=4194304)):t=1);var r=zt();e=Fn(e,t),e!==null&&(hc(e,t,r),Zt(e,r))}function _M(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),UN(e,r)}function SM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(t),UN(e,r)}var VN;VN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Jt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Jt=!1,dM(e,t,r);Jt=!!(e.flags&131072)}else Jt=!1,Xe&&t.flags&1048576&&GE(t,md,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Gu(e,t),e=t.pendingProps;var s=$i(t,Rt.current);Ei(t,r),s=_x(null,t,n,e,s,r);var o=Sx();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qt(n)?(o=!0,hd(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xx(t),s.updater=gf,t.stateNode=s,s._reactInternals=t,hg(t,n,e,r),t=gg(null,t,n,!0,o,r)):(t.tag=0,Xe&&o&&dx(t),Lt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=NM(n),e=qr(n,e),s){case 0:t=mg(null,t,n,e,r);break e;case 1:t=pw(null,t,n,e,r);break e;case 11:t=fw(null,t,n,e,r);break e;case 14:t=hw(null,t,n,qr(n.type,e),r);break e}throw Error(ee(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qr(n,s),mg(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qr(n,s),pw(e,t,n,s,r);case 3:e:{if(NN(t),e===null)throw Error(ee(387));n=t.pendingProps,o=t.memoizedState,s=o.element,ZE(e,t),xd(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Bi(Error(ee(423)),t),t=mw(e,t,n,r,s);break e}else if(n!==s){s=Bi(Error(ee(424)),t),t=mw(e,t,n,r,s);break e}else for(ar=ms(t.stateNode.containerInfo.firstChild),cr=t,Xe=!0,Gr=null,r=XE(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Li(),n===s){t=Bn(e,t,r);break e}Lt(e,t,n,r)}t=t.child}return t;case 5:return eN(t),e===null&&ug(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,og(n,s)?a=null:o!==null&&og(n,o)&&(t.flags|=32),EN(e,t),Lt(e,t,a,r),t.child;case 6:return e===null&&ug(t),null;case 13:return CN(e,t,r);case 4:return yx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Mi(t,null,n,r):Lt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qr(n,s),fw(e,t,n,s,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ze(gd,n._currentValue),n._currentValue=a,o!==null)if(Qr(o.value,a)){if(o.children===s.children&&!Xt.current){t=Bn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=An(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),dg(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),dg(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Lt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ei(t,r),s=Or(s),n=n(s),t.flags|=1,Lt(e,t,n,r),t.child;case 14:return n=t.type,s=qr(n,t.pendingProps),s=qr(n.type,s),hw(e,t,n,s,r);case 15:return _N(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qr(n,s),Gu(e,t),t.tag=1,Qt(n)?(e=!0,hd(t)):e=!1,Ei(t,r),bN(t,n,s),hg(t,n,s,r),gg(null,t,n,!0,e,r);case 19:return PN(e,t,r);case 22:return SN(e,t,r)}throw Error(ee(156,t.tag))};function qN(e,t){return vE(e,t)}function EM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,r,n){return new EM(e,t,r,n)}function Ox(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NM(e){if(typeof e=="function")return Ox(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zv)return 11;if(e===ex)return 14}return 2}function ys(e,t){var r=e.alternate;return r===null?(r=Pr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ju(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")Ox(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case oi:return co(r.children,s,o,t);case Qv:a=8,s|=8;break;case Lm:return e=Pr(12,r,t,s|2),e.elementType=Lm,e.lanes=o,e;case Mm:return e=Pr(13,r,t,s),e.elementType=Mm,e.lanes=o,e;case Fm:return e=Pr(19,r,t,s),e.elementType=Fm,e.lanes=o,e;case eE:return yf(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case QS:a=10;break e;case ZS:a=9;break e;case Zv:a=11;break e;case ex:a=14;break e;case rs:a=16,n=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Pr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function co(e,t,r,n){return e=Pr(7,e,n,t),e.lanes=r,e}function yf(e,t,r,n){return e=Pr(22,e,n,t),e.elementType=eE,e.lanes=r,e.stateNode={isHidden:!1},e}function wp(e,t,r){return e=Pr(6,e,null,t),e.lanes=r,e}function jp(e,t,r){return t=Pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CM(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dx(e,t,r,n,s,o,a,l,c){return e=new CM(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Pr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xx(o),e}function PM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function WN(e){if(!e)return Cs;e=e._reactInternals;e:{if(Po(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(Qt(r))return WE(e,r,t)}return t}function HN(e,t,r,n,s,o,a,l,c){return e=Dx(r,n,!0,e,s,o,a,l,c),e.context=WN(null),r=e.current,n=zt(),s=xs(r),o=An(n,s),o.callback=t??null,gs(r,o,s),e.current.lanes=s,hc(e,s,n),Zt(e,n),e}function bf(e,t,r,n){var s=t.current,o=zt(),a=xs(s);return r=WN(r),t.context===null?t.context=r:t.pendingContext=r,t=An(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=gs(s,t,a),e!==null&&(Xr(e,s,a,o),qu(e,s,a)),a}function Nd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ew(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $x(e,t){Ew(e,t),(e=e.alternate)&&Ew(e,t)}function TM(){return null}var GN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lx(e){this._internalRoot=e}wf.prototype.render=Lx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));bf(e,t,null,null)};wf.prototype.unmount=Lx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xo(function(){bf(null,e,null,null)}),t[Mn]=null}};function wf(e){this._internalRoot=e}wf.prototype.unstable_scheduleHydration=function(e){if(e){var t=SE();e={blockedOn:null,target:e,priority:t};for(var r=0;r<os.length&&t!==0&&t<os[r].priority;r++);os.splice(r,0,e),r===0&&NE(e)}};function Mx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function kM(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Nd(a);o.call(u)}}var a=HN(t,n,e,0,null,!1,!1,"",Nw);return e._reactRootContainer=a,e[Mn]=a.current,kl(e.nodeType===8?e.parentNode:e),xo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Nd(c);l.call(u)}}var c=Dx(e,0,!1,null,null,!1,!1,"",Nw);return e._reactRootContainer=c,e[Mn]=c.current,kl(e.nodeType===8?e.parentNode:e),xo(function(){bf(t,c,r,n)}),c}function _f(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Nd(a);l.call(c)}}bf(t,a,e,s)}else a=kM(r,t,e,s,n);return Nd(a)}jE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ga(t.pendingLanes);r!==0&&(nx(t,r|1),Zt(t,it()),!(Ie&6)&&(zi=it()+500,Ds()))}break;case 13:xo(function(){var n=Fn(e,1);if(n!==null){var s=zt();Xr(n,e,1,s)}}),$x(e,1)}};sx=function(e){if(e.tag===13){var t=Fn(e,134217728);if(t!==null){var r=zt();Xr(t,e,134217728,r)}$x(e,134217728)}};_E=function(e){if(e.tag===13){var t=xs(e),r=Fn(e,t);if(r!==null){var n=zt();Xr(r,e,t,n)}$x(e,t)}};SE=function(){return De};EE=function(e,t){var r=De;try{return De=e,t()}finally{De=r}};Ym=function(e,t,r){switch(t){case"input":if(Um(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=hf(n);if(!s)throw Error(ee(90));rE(n),Um(n,s)}}}break;case"textarea":sE(e,r);break;case"select":t=r.value,t!=null&&wi(e,!!r.multiple,t,!1)}};dE=Ax;fE=xo;var AM={usingClientEntryPoint:!1,Events:[mc,ci,hf,cE,uE,Ax]},Ra={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RM={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mE(e),e===null?null:e.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||TM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{cf=lu.inject(RM),hn=lu}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AM;gr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mx(t))throw Error(ee(200));return PM(e,t,null,r)};gr.createRoot=function(e,t){if(!Mx(e))throw Error(ee(299));var r=!1,n="",s=GN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dx(e,1,!1,null,null,r,!1,n,s),e[Mn]=t.current,kl(e.nodeType===8?e.parentNode:e),new Lx(t)};gr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=mE(t),e=e===null?null:e.stateNode,e};gr.flushSync=function(e){return xo(e)};gr.hydrate=function(e,t,r){if(!jf(t))throw Error(ee(200));return _f(null,e,t,!0,r)};gr.hydrateRoot=function(e,t,r){if(!Mx(e))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=GN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=HN(t,null,e,1,r??null,s,!1,o,a),e[Mn]=t.current,kl(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new wf(t)};gr.render=function(e,t,r){if(!jf(t))throw Error(ee(200));return _f(null,e,t,!1,r)};gr.unmountComponentAtNode=function(e){if(!jf(e))throw Error(ee(40));return e._reactRootContainer?(xo(function(){_f(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};gr.unstable_batchedUpdates=Ax;gr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!jf(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return _f(e,t,r,!1,n)};gr.version="18.3.1-next-f1338f8080-20240426";function KN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KN)}catch(e){console.error(e)}}KN(),KS.exports=gr;var xr=KS.exports;const Sf=No(xr);var Cw=xr;Dm.createRoot=Cw.createRoot,Dm.hydrateRoot=Cw.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(this,arguments)}var us;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(us||(us={}));const Pw="popstate";function IM(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:a,hash:l}=n.location;return Pg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Cd(s)}return DM(t,r,null,e)}function ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Fx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OM(){return Math.random().toString(36).substr(2,8)}function Tw(e,t){return{usr:e.state,key:e.key,idx:t}}function Pg(e,t,r,n){return r===void 0&&(r=null),Fl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?na(t):t,{state:r,key:t&&t.key||n||OM()})}function Cd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function na(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function DM(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=us.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(Fl({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=us.Pop;let x=f(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=us.Push;let b=Pg(v.location,x,y);r&&r(b,x),u=f()+1;let w=Tw(b,u),j=v.createHref(b);try{a.pushState(w,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}o&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=us.Replace;let b=Pg(v.location,x,y);r&&r(b,x),u=f();let w=Tw(b,u),j=v.createHref(b);a.replaceState(w,"",j),o&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof x=="string"?x:Cd(x);return ut(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Pw,d),c=x,()=>{s.removeEventListener(Pw,d),c=null}},createHref(x){return t(s,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return a.go(x)}};return v}var kw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kw||(kw={}));function $M(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?na(t):t,s=Bx(n.pathname||"/",r);if(s==null)return null;let o=YN(e);LM(o);let a=null;for(let l=0;a==null&&l<o.length;++l)a=HM(o[l],YM(s));return a}function YN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=bs([n,c.relativePath]),f=r.concat(c);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),YN(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:qM(u,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of JN(o.path))s(o,a,c)}),t}function JN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=JN(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function LM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:WM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const MM=/^:\w+$/,FM=3,BM=2,zM=1,UM=10,VM=-2,Aw=e=>e==="*";function qM(e,t){let r=e.split("/"),n=r.length;return r.some(Aw)&&(n+=VM),t&&(n+=BM),r.filter(s=>!Aw(s)).reduce((s,o)=>s+(MM.test(o)?FM:o===""?zM:UM),n)}function WM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function HM(e,t){let{routesMeta:r}=e,n={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",f=GM({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u);if(!f)return null;Object.assign(n,f.params);let d=l.route;o.push({params:n,pathname:bs([s,f.pathname]),pathnameBase:ZM(bs([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=bs([s,f.pathnameBase]))}return o}function GM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=KM(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{if(f==="*"){let h=l[d]||"";a=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return u[f]=JM(l[d]||"",f),u},{}),pathname:o,pathnameBase:a,pattern:e}}function KM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Fx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,l)=>(n.push(l),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function YM(e){try{return decodeURI(e)}catch(t){return Fx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function JM(e,t){try{return decodeURIComponent(e)}catch(r){return Fx(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Bx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function XM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?na(e):e;return{pathname:r?r.startsWith("/")?r:QM(r,t):t,search:e4(n),hash:t4(s)}}function QM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function _p(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XN(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function QN(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=na(e):(s=Fl({},e),ut(!s.pathname||!s.pathname.includes("?"),_p("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),_p("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),_p("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(n||a==null)l=r;else{let d=t.length-1;if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=XM(s,l),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const bs=e=>e.join("/").replace(/\/\/+/g,"/"),ZM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ZN=["post","put","patch","delete"];new Set(ZN);const n4=["get",...ZN];new Set(n4);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pd.apply(this,arguments)}const zx=p.createContext(null),eC=p.createContext(null),To=p.createContext(null),Ef=p.createContext(null),Gn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),tC=p.createContext(null);function s4(e,t){let{relative:r}=t===void 0?{}:t;vc()||ut(!1);let{basename:n,navigator:s}=p.useContext(To),{hash:o,pathname:a,search:l}=Ux(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:bs([n,a])),s.createHref({pathname:c,search:l,hash:o})}function vc(){return p.useContext(Ef)!=null}function yr(){return vc()||ut(!1),p.useContext(Ef).location}function rC(e){p.useContext(To).static||p.useLayoutEffect(e)}function Oe(){let{isDataRoute:e}=p.useContext(Gn);return e?y4():o4()}function o4(){vc()||ut(!1);let e=p.useContext(zx),{basename:t,navigator:r}=p.useContext(To),{matches:n}=p.useContext(Gn),{pathname:s}=yr(),o=JSON.stringify(XN(n).map(c=>c.pathnameBase)),a=p.useRef(!1);return rC(()=>{a.current=!0}),p.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=QN(c,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:bs([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,o,s,e])}const i4=p.createContext(null);function a4(e){let t=p.useContext(Gn).outlet;return t&&p.createElement(i4.Provider,{value:e},t)}function sa(){let{matches:e}=p.useContext(Gn),t=e[e.length-1];return t?t.params:{}}function Ux(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=p.useContext(Gn),{pathname:s}=yr(),o=JSON.stringify(XN(n).map(a=>a.pathnameBase));return p.useMemo(()=>QN(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function l4(e,t){return c4(e,t)}function c4(e,t,r){vc()||ut(!1);let{navigator:n}=p.useContext(To),{matches:s}=p.useContext(Gn),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=yr(),u;if(t){var f;let v=typeof t=="string"?na(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||ut(!1),u=v}else u=c;let d=u.pathname||"/",h=l==="/"?d:d.slice(l.length)||"/",m=$M(e,{pathname:h}),g=p4(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:bs([l,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:bs([l,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r);return t&&g?p.createElement(Ef.Provider,{value:{location:Pd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:us.Pop}},g):g}function u4(){let e=x4(),t=r4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,o)}const d4=p.createElement(u4,null);class f4 extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?p.createElement(Gn.Provider,{value:this.props.routeContext},p.createElement(tC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h4(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(zx);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Gn.Provider,{value:t},n)}function p4(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let l=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));l>=0||ut(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,c,u)=>{let f=c.route.id?a==null?void 0:a[c.route.id]:null,d=null;r&&(d=c.route.errorElement||d4);let h=t.concat(o.slice(0,u+1)),m=()=>{let g;return f?g=d:c.route.Component?g=p.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=l,p.createElement(h4,{match:c,routeContext:{outlet:l,matches:h,isDataRoute:r!=null},children:g})};return r&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?p.createElement(f4,{location:r.location,revalidation:r.revalidation,component:d,error:f,children:m(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):m()},null)}var nC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nC||{}),Td=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Td||{});function m4(e){let t=p.useContext(zx);return t||ut(!1),t}function g4(e){let t=p.useContext(eC);return t||ut(!1),t}function v4(e){let t=p.useContext(Gn);return t||ut(!1),t}function sC(e){let t=v4(),r=t.matches[t.matches.length-1];return r.route.id||ut(!1),r.route.id}function x4(){var e;let t=p.useContext(tC),r=g4(Td.UseRouteError),n=sC(Td.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function y4(){let{router:e}=m4(nC.UseNavigateStable),t=sC(Td.UseNavigateStable),r=p.useRef(!1);return rC(()=>{r.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Pd({fromRouteId:t},o)))},[e,t])}function Nf(e){return a4(e.context)}function ve(e){ut(!1)}function b4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=us.Pop,navigator:o,static:a=!1}=e;vc()&&ut(!1);let l=t.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);typeof n=="string"&&(n=na(n));let{pathname:u="/",search:f="",hash:d="",state:h=null,key:m="default"}=n,g=p.useMemo(()=>{let v=Bx(u,l);return v==null?null:{location:{pathname:v,search:f,hash:d,state:h,key:m},navigationType:s}},[l,u,f,d,h,m,s]);return g==null?null:p.createElement(To.Provider,{value:c},p.createElement(Ef.Provider,{children:r,value:g}))}function w4(e){let{children:t,location:r}=e;return l4(Tg(t),r)}new Promise(()=>{});function Tg(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let o=[...t,s];if(n.type===p.Fragment){r.push.apply(r,Tg(n.props.children,o));return}n.type!==ve&&ut(!1),!n.props.index||!n.props.children||ut(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Tg(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kd.apply(this,arguments)}function oC(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function j4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _4(e,t){return e.button===0&&(!t||t==="_self")&&!j4(e)}function kg(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function S4(e,t){let r=kg(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}const E4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],N4=["aria-current","caseSensitive","className","end","style","to","children"],C4="startTransition",Rw=fc[C4];function Iw(e){let{basename:t,children:r,future:n,window:s}=e,o=p.useRef();o.current==null&&(o.current=IM({window:s,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},f=p.useCallback(d=>{u&&Rw?Rw(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>a.listen(f),[a,f]),p.createElement(b4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a})}const P4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uo=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:f}=t,d=oC(t,E4),{basename:h}=p.useContext(To),m,g=!1;if(typeof u=="string"&&T4.test(u)&&(m=u,P4))try{let b=new URL(window.location.href),w=u.startsWith("//")?new URL(b.protocol+u):new URL(u),j=Bx(w.pathname,h);w.origin===b.origin&&j!=null?u=j+w.search+w.hash:g=!0}catch{}let v=s4(u,{relative:s}),x=k4(u,{replace:a,state:l,target:c,preventScrollReset:f,relative:s});function y(b){n&&n(b),b.defaultPrevented||x(b)}return p.createElement("a",kd({},d,{href:m||v,onClick:g||o?n:y,ref:r,target:c}))}),Ad=p.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:a=!1,style:l,to:c,children:u}=t,f=oC(t,N4),d=Ux(c,{relative:f.relative}),h=yr(),m=p.useContext(eC),{navigator:g}=p.useContext(To),v=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=h.pathname,y=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(x=x.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase());let b=x===v||!a&&x.startsWith(v)&&x.charAt(v.length)==="/",w=y!=null&&(y===v||!a&&y.startsWith(v)&&y.charAt(v.length)==="/"),j=b?n:void 0,_;typeof o=="function"?_=o({isActive:b,isPending:w}):_=[o,b?"active":null,w?"pending":null].filter(Boolean).join(" ");let S=typeof l=="function"?l({isActive:b,isPending:w}):l;return p.createElement(uo,kd({},f,{"aria-current":j,className:_,ref:r,style:S,to:c}),typeof u=="function"?u({isActive:b,isPending:w}):u)});var Ow;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Ow||(Ow={}));var Dw;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dw||(Dw={}));function k4(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a}=t===void 0?{}:t,l=Oe(),c=yr(),u=Ux(e,{relative:a});return p.useCallback(f=>{if(_4(f,r)){f.preventDefault();let d=n!==void 0?n:Cd(c)===Cd(u);l(e,{replace:d,state:s,preventScrollReset:o,relative:a})}},[c,l,u,n,s,r,e,o,a])}function Cf(e){let t=p.useRef(kg(e)),r=p.useRef(!1),n=yr(),s=p.useMemo(()=>S4(n.search,r.current?null:t.current),[n.search]),o=Oe(),a=p.useCallback((l,c)=>{const u=kg(typeof l=="function"?l(s):l);r.current=!0,o("?"+u,c)},[o,s]);return[s,a]}var iC={exports:{}},A4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",R4=A4,I4=R4;function aC(){}function lC(){}lC.resetWarningCache=aC;var O4=function(){function e(n,s,o,a,l,c){if(c!==I4){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lC,resetWarningCache:aC};return r.PropTypes=r,r};iC.exports=O4();var D4=iC.exports;const Ye=No(D4);function $4(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var cC=p,L4=$4(cC);function $w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M4(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var F4=!!(typeof window<"u"&&window.document&&window.document.createElement);function B4(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(s){return s.displayName||s.name||"Component"}return function(o){if(typeof o!="function")throw new Error("Expected WrappedComponent to be a React component.");var a=[],l;function c(){l=e(a.map(function(f){return f.props})),u.canUseDOM?t(l):r&&(l=r(l))}var u=function(f){M4(d,f);function d(){return f.apply(this,arguments)||this}d.peek=function(){return l},d.rewind=function(){if(d.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,a=[],g};var h=d.prototype;return h.UNSAFE_componentWillMount=function(){a.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var g=a.indexOf(this);a.splice(g,1),c()},h.render=function(){return L4.createElement(o,this.props)},d}(cC.PureComponent);return $w(u,"displayName","SideEffect("+n(o)+")"),$w(u,"canUseDOM",F4),u}}var z4=B4;const U4=No(z4);var V4=typeof Element<"u",q4=typeof Map=="function",W4=typeof Set=="function",H4=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Xu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Xu(e[n],t[n]))return!1;return!0}var o;if(q4&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!Xu(n.value[1],t.get(n.value[0])))return!1;return!0}if(W4&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(H4&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;if(V4&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&e.$$typeof)&&!Xu(e[s[n]],t[s[n]]))return!1;return!0}return e!==e&&t!==t}var G4=function(t,r){try{return Xu(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const K4=No(G4);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Lw=Object.getOwnPropertySymbols,Y4=Object.prototype.hasOwnProperty,J4=Object.prototype.propertyIsEnumerable;function X4(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Q4(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(o){s[o]=o}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Z4=Q4()?Object.assign:function(e,t){for(var r,n=X4(e),s,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var a in r)Y4.call(r,a)&&(n[a]=r[a]);if(Lw){s=Lw(r);for(var l=0;l<s.length;l++)J4.call(r,s[l])&&(n[s[l]]=r[s[l]])}}return n};const e5=No(Z4);var fo={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ee={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ee).map(function(e){return Ee[e]});var Je={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Rd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Bl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t5=Object.keys(Rd).reduce(function(e,t){return e[Rd[t]]=t,e},{}),r5=[Ee.NOSCRIPT,Ee.SCRIPT,Ee.STYLE],Kr="data-react-helmet",n5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s5=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o5=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i5=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Mw=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},a5=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Ag=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},l5=function(t){var r=Ci(t,Ee.TITLE),n=Ci(t,Bl.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var s=Ci(t,Bl.DEFAULT_TITLE);return r||s||void 0},c5=function(t){return Ci(t,Bl.ON_CHANGE_CLIENT_STATE)||function(){}},Sp=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,s){return Wt({},n,s)},{})},u5=function(t,r){return r.filter(function(n){return typeof n[Ee.BASE]<"u"}).map(function(n){return n[Ee.BASE]}).reverse().reduce(function(n,s){if(!n.length)for(var o=Object.keys(s),a=0;a<o.length;a++){var l=o[a],c=l.toLowerCase();if(t.indexOf(c)!==-1&&s[c])return n.concat(s)}return n},[])},Ia=function(t,r,n){var s={};return n.filter(function(o){return Array.isArray(o[t])?!0:(typeof o[t]<"u"&&p5("Helmet: "+t+' should be of type "Array". Instead found type "'+n5(o[t])+'"'),!1)}).map(function(o){return o[t]}).reverse().reduce(function(o,a){var l={};a.filter(function(h){for(var m=void 0,g=Object.keys(h),v=0;v<g.length;v++){var x=g[v],y=x.toLowerCase();r.indexOf(y)!==-1&&!(m===Je.REL&&h[m].toLowerCase()==="canonical")&&!(y===Je.REL&&h[y].toLowerCase()==="stylesheet")&&(m=y),r.indexOf(x)!==-1&&(x===Je.INNER_HTML||x===Je.CSS_TEXT||x===Je.ITEM_PROP)&&(m=x)}if(!m||!h[m])return!1;var b=h[m].toLowerCase();return s[m]||(s[m]={}),l[m]||(l[m]={}),s[m][b]?!1:(l[m][b]=!0,!0)}).reverse().forEach(function(h){return o.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var f=c[u],d=e5({},s[f],l[f]);s[f]=d}return o},[]).reverse()},Ci=function(t,r){for(var n=t.length-1;n>=0;n--){var s=t[n];if(s.hasOwnProperty(r))return s[r]}return null},d5=function(t){return{baseTag:u5([Je.HREF,Je.TARGET],t),bodyAttributes:Sp(fo.BODY,t),defer:Ci(t,Bl.DEFER),encode:Ci(t,Bl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Sp(fo.HTML,t),linkTags:Ia(Ee.LINK,[Je.REL,Je.HREF],t),metaTags:Ia(Ee.META,[Je.NAME,Je.CHARSET,Je.HTTPEQUIV,Je.PROPERTY,Je.ITEM_PROP],t),noscriptTags:Ia(Ee.NOSCRIPT,[Je.INNER_HTML],t),onChangeClientState:c5(t),scriptTags:Ia(Ee.SCRIPT,[Je.SRC,Je.INNER_HTML],t),styleTags:Ia(Ee.STYLE,[Je.CSS_TEXT],t),title:l5(t),titleAttributes:Sp(fo.TITLE,t)}},Rg=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){Rg(t)},0)}}(),Fw=function(t){return clearTimeout(t)},f5=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Rg:global.requestAnimationFrame||Rg,h5=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Fw:global.cancelAnimationFrame||Fw,p5=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Oa=null,m5=function(t){Oa&&h5(Oa),t.defer?Oa=f5(function(){Bw(t,function(){Oa=null})}):(Bw(t),Oa=null)},Bw=function(t,r){var n=t.baseTag,s=t.bodyAttributes,o=t.htmlAttributes,a=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,f=t.scriptTags,d=t.styleTags,h=t.title,m=t.titleAttributes;Ig(Ee.BODY,s),Ig(Ee.HTML,o),g5(h,m);var g={baseTag:Uo(Ee.BASE,n),linkTags:Uo(Ee.LINK,a),metaTags:Uo(Ee.META,l),noscriptTags:Uo(Ee.NOSCRIPT,c),scriptTags:Uo(Ee.SCRIPT,f),styleTags:Uo(Ee.STYLE,d)},v={},x={};Object.keys(g).forEach(function(y){var b=g[y],w=b.newTags,j=b.oldTags;w.length&&(v[y]=w),j.length&&(x[y]=g[y].oldTags)}),r&&r(),u(t,v,x)},uC=function(t){return Array.isArray(t)?t.join(""):t},g5=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=uC(t)),Ig(Ee.TITLE,r)},Ig=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var s=n.getAttribute(Kr),o=s?s.split(","):[],a=[].concat(o),l=Object.keys(r),c=0;c<l.length;c++){var u=l[c],f=r[u]||"";n.getAttribute(u)!==f&&n.setAttribute(u,f),o.indexOf(u)===-1&&o.push(u);var d=a.indexOf(u);d!==-1&&a.splice(d,1)}for(var h=a.length-1;h>=0;h--)n.removeAttribute(a[h]);o.length===a.length?n.removeAttribute(Kr):n.getAttribute(Kr)!==l.join(",")&&n.setAttribute(Kr,l.join(","))}},Uo=function(t,r){var n=document.head||document.querySelector(Ee.HEAD),s=n.querySelectorAll(t+"["+Kr+"]"),o=Array.prototype.slice.call(s),a=[],l=void 0;return r&&r.length&&r.forEach(function(c){var u=document.createElement(t);for(var f in c)if(c.hasOwnProperty(f))if(f===Je.INNER_HTML)u.innerHTML=c.innerHTML;else if(f===Je.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var d=typeof c[f]>"u"?"":c[f];u.setAttribute(f,d)}u.setAttribute(Kr,"true"),o.some(function(h,m){return l=m,u.isEqualNode(h)})?o.splice(l,1):a.push(u)}),o.forEach(function(c){return c.parentNode.removeChild(c)}),a.forEach(function(c){return n.appendChild(c)}),{oldTags:o,newTags:a}},dC=function(t){return Object.keys(t).reduce(function(r,n){var s=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+s:s},"")},v5=function(t,r,n,s){var o=dC(n),a=uC(r);return o?"<"+t+" "+Kr+'="true" '+o+">"+Ag(a,s)+"</"+t+">":"<"+t+" "+Kr+'="true">'+Ag(a,s)+"</"+t+">"},x5=function(t,r,n){return r.reduce(function(s,o){var a=Object.keys(o).filter(function(u){return!(u===Je.INNER_HTML||u===Je.CSS_TEXT)}).reduce(function(u,f){var d=typeof o[f]>"u"?f:f+'="'+Ag(o[f],n)+'"';return u?u+" "+d:d},""),l=o.innerHTML||o.cssText||"",c=r5.indexOf(t)===-1;return s+"<"+t+" "+Kr+'="true" '+a+(c?"/>":">"+l+"</"+t+">")},"")},fC=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,s){return n[Rd[s]||s]=t[s],n},r)},y5=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,s){return n[t5[s]||s]=t[s],n},r)},b5=function(t,r,n){var s,o=(s={key:r},s[Kr]=!0,s),a=fC(n,o);return[J.createElement(Ee.TITLE,a,r)]},w5=function(t,r){return r.map(function(n,s){var o,a=(o={key:s},o[Kr]=!0,o);return Object.keys(n).forEach(function(l){var c=Rd[l]||l;if(c===Je.INNER_HTML||c===Je.CSS_TEXT){var u=n.innerHTML||n.cssText;a.dangerouslySetInnerHTML={__html:u}}else a[c]=n[l]}),J.createElement(t,a)})},wn=function(t,r,n){switch(t){case Ee.TITLE:return{toComponent:function(){return b5(t,r.title,r.titleAttributes)},toString:function(){return v5(t,r.title,r.titleAttributes,n)}};case fo.BODY:case fo.HTML:return{toComponent:function(){return fC(r)},toString:function(){return dC(r)}};default:return{toComponent:function(){return w5(t,r)},toString:function(){return x5(t,r,n)}}}},hC=function(t){var r=t.baseTag,n=t.bodyAttributes,s=t.encode,o=t.htmlAttributes,a=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,f=t.styleTags,d=t.title,h=d===void 0?"":d,m=t.titleAttributes;return{base:wn(Ee.BASE,r,s),bodyAttributes:wn(fo.BODY,n,s),htmlAttributes:wn(fo.HTML,o,s),link:wn(Ee.LINK,a,s),meta:wn(Ee.META,l,s),noscript:wn(Ee.NOSCRIPT,c,s),script:wn(Ee.SCRIPT,u,s),style:wn(Ee.STYLE,f,s),title:wn(Ee.TITLE,{title:h,titleAttributes:m},s)}},j5=function(t){var r,n;return n=r=function(s){i5(o,s);function o(){return s5(this,o),a5(this,s.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(l){return!K4(this.props,l)},o.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case Ee.SCRIPT:case Ee.NOSCRIPT:return{innerHTML:c};case Ee.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,f=l.arrayTypeChildren,d=l.newChildProps,h=l.nestedChildren;return Wt({},f,(c={},c[u.type]=[].concat(f[u.type]||[],[Wt({},d,this.mapNestedChildrenToProps(u,h))]),c))},o.prototype.mapObjectTypeChildren=function(l){var c,u,f=l.child,d=l.newProps,h=l.newChildProps,m=l.nestedChildren;switch(f.type){case Ee.TITLE:return Wt({},d,(c={},c[f.type]=m,c.titleAttributes=Wt({},h),c));case Ee.BODY:return Wt({},d,{bodyAttributes:Wt({},h)});case Ee.HTML:return Wt({},d,{htmlAttributes:Wt({},h)})}return Wt({},d,(u={},u[f.type]=Wt({},h),u))},o.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Wt({},c);return Object.keys(l).forEach(function(f){var d;u=Wt({},u,(d={},d[f]=l[f],d))}),u},o.prototype.warnOnInvalidChildren=function(l,c){return!0},o.prototype.mapChildrenToProps=function(l,c){var u=this,f={};return J.Children.forEach(l,function(d){if(!(!d||!d.props)){var h=d.props,m=h.children,g=Mw(h,["children"]),v=y5(g);switch(u.warnOnInvalidChildren(d,m),d.type){case Ee.LINK:case Ee.META:case Ee.NOSCRIPT:case Ee.SCRIPT:case Ee.STYLE:f=u.flattenArrayTypeChildren({child:d,arrayTypeChildren:f,newChildProps:v,nestedChildren:m});break;default:c=u.mapObjectTypeChildren({child:d,newProps:c,newChildProps:v,nestedChildren:m});break}}}),c=this.mapArrayTypeChildrenToProps(f,c),c},o.prototype.render=function(){var l=this.props,c=l.children,u=Mw(l,["children"]),f=Wt({},u);return c&&(f=this.mapChildrenToProps(c,f)),J.createElement(t,f)},o5(o,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),o}(J.Component),r.propTypes={base:Ye.object,bodyAttributes:Ye.object,children:Ye.oneOfType([Ye.arrayOf(Ye.node),Ye.node]),defaultTitle:Ye.string,defer:Ye.bool,encodeSpecialCharacters:Ye.bool,htmlAttributes:Ye.object,link:Ye.arrayOf(Ye.object),meta:Ye.arrayOf(Ye.object),noscript:Ye.arrayOf(Ye.object),onChangeClientState:Ye.func,script:Ye.arrayOf(Ye.object),style:Ye.arrayOf(Ye.object),title:Ye.string,titleAttributes:Ye.object,titleTemplate:Ye.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var s=t.rewind();return s||(s=hC({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},n},_5=function(){return null},S5=U4(d5,m5,hC)(_5),Id=j5(S5);Id.renderStatic=Id.rewind;function pC(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=pC(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mC(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=pC(e))&&(n&&(n+=" "),n+=t);return n}function E5(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=gC(t))&&(n&&(n+=" "),n+=r);return n}function gC(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=gC(e[n]))&&(r&&(r+=" "),r+=t);return r}var Vx="-";function N5(e){var t=P5(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,s=n===void 0?{}:n;function o(l){var c=l.split(Vx);return c[0]===""&&c.length!==1&&c.shift(),vC(c,t)||C5(l)}function a(l,c){var u=r[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:o,getConflictingClassGroupIds:a}}function vC(e,t){var a;if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),s=n?vC(e.slice(1),n):void 0;if(s)return s;if(t.validators.length!==0){var o=e.join(Vx);return(a=t.validators.find(function(l){var c=l.validator;return c(o)}))==null?void 0:a.classGroupId}}var zw=/^\[(.+)\]$/;function C5(e){if(zw.test(e)){var t=zw.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function P5(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},s=k5(Object.entries(e.classGroups),r);return s.forEach(function(o){var a=o[0],l=o[1];Og(l,n,a,t)}),n}function Og(e,t,r,n){e.forEach(function(s){if(typeof s=="string"){var o=s===""?t:Uw(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(T5(s)){Og(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(a){var l=a[0],c=a[1];Og(c,Uw(t,l),r,n)})})}function Uw(e,t){var r=e;return t.split(Vx).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function T5(e){return e.isThemeGetter}function k5(e,t){return t?e.map(function(r){var n=r[0],s=r[1],o=s.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):a});return[n,o]}):e}function A5(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function s(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return s(a,l),l},set:function(a,l){r.has(a)?r.set(a,l):s(a,l)}}}var xC="!";function R5(e){var t=e.separator||":",r=t.length===1,n=t[0],s=t.length;return function(a){for(var l=[],c=0,u=0,f,d=0;d<a.length;d++){var h=a[d];if(c===0){if(h===n&&(r||a.slice(d,d+s)===t)){l.push(a.slice(u,d)),u=d+s;continue}if(h==="/"){f=d;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?a:a.substring(u),g=m.startsWith(xC),v=g?m.substring(1):m,x=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}}}function I5(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var s=n[0]==="[";s?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function O5(e){return{cache:A5(e.cacheSize),splitModifiers:R5(e),...N5(e)}}var D5=/\s+/;function $5(e,t){var r=t.splitModifiers,n=t.getClassGroupId,s=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(D5).map(function(a){var l=r(a),c=l.modifiers,u=l.hasImportantModifier,f=l.baseClassName,d=l.maybePostfixModifierPosition,h=n(d?f.substring(0,d):f),m=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:a};if(h=n(f),!h)return{isTailwindClass:!1,originalClassName:a};m=!1}var g=I5(c).join(":"),v=u?g+xC:g;return{isTailwindClass:!0,modifierId:v,classGroupId:h,originalClassName:a,hasPostfixModifier:m}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,c=a.classGroupId,u=a.hasPostfixModifier,f=l+c;return o.has(f)?!1:(o.add(f),s(c,u).forEach(function(d){return o.add(l+d)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function L5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,o,a=l;function l(u){var f=t[0],d=t.slice(1),h=d.reduce(function(m,g){return g(m)},f());return n=O5(h),s=n.cache.get,o=n.cache.set,a=c,c(u)}function c(u){var f=s(u);if(f)return f;var d=$5(u,n);return o(u,d),d}return function(){return a(E5.apply(null,arguments))}}function He(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var yC=/^\[(?:([a-z-]+):)?(.+)\]$/i,M5=/^\d+\/\d+$/,F5=new Set(["px","full","screen"]),B5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U5=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function zr(e){return so(e)||F5.has(e)||M5.test(e)||Dg(e)}function Dg(e){return ko(e,"length",K5)}function V5(e){return ko(e,"size",bC)}function q5(e){return ko(e,"position",bC)}function W5(e){return ko(e,"url",Y5)}function cu(e){return ko(e,"number",so)}function so(e){return!Number.isNaN(Number(e))}function H5(e){return e.endsWith("%")&&so(e.slice(0,-1))}function Da(e){return Vw(e)||ko(e,"number",Vw)}function Ce(e){return yC.test(e)}function $a(){return!0}function Xn(e){return B5.test(e)}function G5(e){return ko(e,"",J5)}function ko(e,t,r){var n=yC.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function K5(e){return z5.test(e)}function bC(){return!1}function Y5(e){return e.startsWith("url(")}function Vw(e){return Number.isInteger(Number(e))}function J5(e){return U5.test(e)}function X5(){var e=He("colors"),t=He("spacing"),r=He("blur"),n=He("brightness"),s=He("borderColor"),o=He("borderRadius"),a=He("borderSpacing"),l=He("borderWidth"),c=He("contrast"),u=He("grayscale"),f=He("hueRotate"),d=He("invert"),h=He("gap"),m=He("gradientColorStops"),g=He("gradientColorStopPositions"),v=He("inset"),x=He("margin"),y=He("opacity"),b=He("padding"),w=He("saturate"),j=He("scale"),_=He("sepia"),S=He("skew"),E=He("space"),N=He("translate"),P=function(){return["auto","contain","none"]},C=function(){return["auto","hidden","clip","visible","scroll"]},I=function(){return["auto",Ce,t]},O=function(){return[Ce,t]},$=function(){return["",zr]},L=function(){return["auto",so,Ce]},V=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},z=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},A=function(){return["start","end","center","between","around","evenly","stretch"]},R=function(){return["","0",Ce]},D=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},F=function(){return[so,cu]},q=function(){return[so,Ce]};return{cacheSize:500,theme:{colors:[$a],spacing:[zr],blur:["none","",Xn,Ce],brightness:F(),borderColor:[e],borderRadius:["none","","full",Xn,Ce],borderSpacing:O(),borderWidth:$(),contrast:F(),grayscale:R(),hueRotate:q(),invert:R(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[H5,Dg],inset:I(),margin:I(),opacity:F(),padding:O(),saturate:F(),scale:F(),sepia:R(),skew:q(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Xn]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(V(),[Ce])}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Da]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Da]}],"grid-cols":[{"grid-cols":[$a]}],"col-start-end":[{col:["auto",{span:["full",Da]},Ce]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[$a]}],"row-start-end":[{row:["auto",{span:[Da]},Ce]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(A())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(A(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(A(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ce,t]}],"min-w":[{"min-w":["min","max","fit",Ce,zr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Xn]},Xn,Ce]}],h:[{h:[Ce,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ce,zr]}],"max-h":[{"max-h":[Ce,t,"min","max","fit"]}],"font-size":[{text:["base",Xn,Dg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cu]}],"font-family":[{font:[$a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",so,cu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ce,zr]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(z(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",zr]}],"underline-offset":[{"underline-offset":["auto",Ce,zr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(V(),[q5])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",V5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},W5]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(z(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(z())}],"outline-offset":[{"outline-offset":[Ce,zr]}],"outline-w":[{outline:[zr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[zr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Xn,G5]}],"shadow-color":[{shadow:[$a]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Xn,Ce]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Da,Ce]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[zr,cu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Q5=L5(X5);function pe(...e){return Q5(mC(e))}function Z5(e){return e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""}function xe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function qw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pf(...e){return t=>{let r=!1;const n=e.map(s=>{const o=qw(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():qw(e[s],null)}}}}function Fe(...e){return p.useCallback(Pf(...e),e)}function e6(e,t){const r=p.createContext(t),n=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=p.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function rn(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=o+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,t6(s,...t)]}function t6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function yo(e){const t=n6(e),r=p.forwardRef((n,s)=>{const{children:o,...a}=n,l=p.Children.toArray(o),c=l.find(o6);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var r6=yo("Slot");function n6(e){const t=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const a=a6(s),l=i6(o,s.props);return s.type!==p.Fragment&&(l.ref=n?Pf(n,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wC=Symbol("radix.slottable");function s6(e){const t=({children:r})=>i.jsx(i.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=wC,t}function o6(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wC}function i6(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function a6(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function qx(e){const t=e+"CollectionProvider",[r,n]=rn(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:x,children:y}=v,b=J.useRef(null),w=J.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:w,collectionRef:b,children:y})};a.displayName=t;const l=e+"CollectionSlot",c=yo(l),u=J.forwardRef((v,x)=>{const{scope:y,children:b}=v,w=o(l,y),j=Fe(x,w.collectionRef);return i.jsx(c,{ref:j,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=yo(f),m=J.forwardRef((v,x)=>{const{scope:y,children:b,...w}=v,j=J.useRef(null),_=Fe(x,j),S=o(f,y);return J.useEffect(()=>(S.itemMap.set(j,{ref:j,...w}),()=>void S.itemMap.delete(j))),i.jsx(h,{[d]:"",ref:_,children:b})});m.displayName=f;function g(v){const x=o(e+"CollectionConsumer",v);return J.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((S,E)=>w.indexOf(S.ref.current)-w.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},g,n]}var l6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=l6.reduce((e,t)=>{const r=yo(`Primitive.${t}`),n=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Wx(e,t){e&&xr.flushSync(()=>e.dispatchEvent(t))}function pr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function c6(e,t=globalThis==null?void 0:globalThis.document){const r=pr(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var u6="DismissableLayer",$g="dismissableLayer.update",d6="dismissableLayer.pointerDownOutside",f6="dismissableLayer.focusOutside",Ww,jC=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(jC),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Fe(t,E=>d(E)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,_=p6(E=>{const N=E.target,P=[...u.branches].some(C=>C.contains(N));!j||P||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},h),S=m6(E=>{const N=E.target;[...u.branches].some(C=>C.contains(N))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},h);return c6(E=>{b===u.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ww=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),Hw(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Ww)}},[f,h,r,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),Hw())},[f,u]),p.useEffect(()=>{const E=()=>m({});return document.addEventListener($g,E),()=>document.removeEventListener($g,E)},[]),i.jsx(Ae.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:xe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:xe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:xe(e.onPointerDownCapture,_.onPointerDownCapture)})});xc.displayName=u6;var h6="DismissableLayerBranch",_C=p.forwardRef((e,t)=>{const r=p.useContext(jC),n=p.useRef(null),s=Fe(t,n);return p.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(Ae.div,{...e,ref:s})});_C.displayName=h6;function p6(e,t=globalThis==null?void 0:globalThis.document){const r=pr(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){SC(d6,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function m6(e,t=globalThis==null?void 0:globalThis.document){const r=pr(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&SC(f6,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Hw(){const e=new CustomEvent($g);document.dispatchEvent(e)}function SC(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Wx(s,o):s.dispatchEvent(o)}var g6=xc,v6=_C,zn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},x6="Portal",yc=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=p.useState(!1);zn(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?Sf.createPortal(i.jsx(Ae.div,{...n,ref:t}),a):null});yc.displayName=x6;function y6(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Mr=e=>{const{present:t,children:r}=e,n=b6(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=Fe(n.ref,w6(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};Mr.displayName="Presence";function b6(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=y6(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=uu(n.current);o.current=l==="mounted"?u:"none"},[l]),zn(()=>{const u=n.current,f=s.current;if(f!==e){const h=o.current,m=uu(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),zn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=uu(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&v&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(o.current=uu(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function uu(e){return(e==null?void 0:e.animationName)||"none"}function w6(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var j6=fc[" useInsertionEffect ".trim().toString()]||zn;function Ao({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,a]=_6({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,n])}const u=p.useCallback(f=>{var d;if(l){const h=S6(f)?f(e):f;h!==e&&((d=a.current)==null||d.call(a,h))}else o(f)},[l,e,o,a]);return[c,u]}function _6({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),o=p.useRef(t);return j6(()=>{o.current=t},[t]),p.useEffect(()=>{var a;s.current!==r&&((a=o.current)==null||a.call(o,r),s.current=r)},[r,s]),[r,n,o]}function S6(e){return typeof e=="function"}var E6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),N6="VisuallyHidden",Hx=p.forwardRef((e,t)=>i.jsx(Ae.span,{...e,ref:t,style:{...E6,...e.style}}));Hx.displayName=N6;var Gx="ToastProvider",[Kx,C6,P6]=qx("Toast"),[EC,Une]=rn("Toast",[P6]),[T6,Tf]=EC(Gx),NC=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gx}\`. Expected non-empty \`string\`.`),i.jsx(Kx.Provider,{scope:t,children:i.jsx(T6,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};NC.displayName=Gx;var CC="ToastViewport",k6=["F8"],Lg="toast.viewportPause",Mg="toast.viewportResume",PC=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=k6,label:s="Notifications ({hotkey})",...o}=e,a=Tf(CC,r),l=C6(r),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=Fe(t,d,a.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;p.useEffect(()=>{const x=y=>{var w;n.length!==0&&n.every(j=>y[j]||y.code===j)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),p.useEffect(()=>{const x=c.current,y=d.current;if(g&&x&&y){const b=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(Lg);y.dispatchEvent(S),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(Mg);y.dispatchEvent(S),a.isClosePausedRef.current=!1}},j=S=>{!x.contains(S.relatedTarget)&&w()},_=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",j),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,a.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const j=w.ref.current,_=[j,...V6(j)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const y=b=>{var _,S,E;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const N=document.activeElement,P=b.shiftKey;if(b.target===x&&P){(_=u.current)==null||_.focus();return}const O=v({tabbingDirection:P?"backwards":"forwards"}),$=O.findIndex(L=>L===N);Ep(O.slice($+1))?b.preventDefault():P?(S=u.current)==null||S.focus():(E=f.current)==null||E.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(v6,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(Fg,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});Ep(x)}}),i.jsx(Kx.Slot,{scope:r,children:i.jsx(Ae.ol,{tabIndex:-1,...o,ref:h})}),g&&i.jsx(Fg,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});Ep(x)}})]})});PC.displayName=CC;var TC="ToastFocusProxy",Fg=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=Tf(TC,r);return i.jsx(Hx,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});Fg.displayName=TC;var bc="Toast",A6="toast.swipeStart",R6="toast.swipeMove",I6="toast.swipeCancel",O6="toast.swipeEnd",kC=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l,c]=Ao({prop:n,defaultProp:s??!0,onChange:o,caller:bc});return i.jsx(Mr,{present:r||l,children:i.jsx(L6,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:pr(e.onPause),onResume:pr(e.onResume),onSwipeStart:xe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:xe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});kC.displayName=bc;var[D6,$6]=EC(bc,{onClose(){}}),L6=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Tf(bc,r),[x,y]=p.useState(null),b=Fe(t,L=>y(L)),w=p.useRef(null),j=p.useRef(null),_=s||v.duration,S=p.useRef(0),E=p.useRef(_),N=p.useRef(0),{onToastAdd:P,onToastRemove:C}=v,I=pr(()=>{var V;(x==null?void 0:x.contains(document.activeElement))&&((V=v.viewport)==null||V.focus()),a()}),O=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(N.current),S.current=new Date().getTime(),N.current=window.setTimeout(I,L))},[I]);p.useEffect(()=>{const L=v.viewport;if(L){const V=()=>{O(E.current),u==null||u()},z=()=>{const B=new Date().getTime()-S.current;E.current=E.current-B,window.clearTimeout(N.current),c==null||c()};return L.addEventListener(Lg,z),L.addEventListener(Mg,V),()=>{L.removeEventListener(Lg,z),L.removeEventListener(Mg,V)}}},[v.viewport,_,c,u,O]),p.useEffect(()=>{o&&!v.isClosePausedRef.current&&O(_)},[o,_,v.isClosePausedRef,O]),p.useEffect(()=>(P(),()=>C()),[P,C]);const $=p.useMemo(()=>x?LC(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[$&&i.jsx(M6,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:$}),i.jsx(D6,{scope:r,onClose:I,children:xr.createPortal(i.jsx(Kx.ItemSlot,{scope:r,children:i.jsx(g6,{asChild:!0,onEscapeKeyDown:xe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ae.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xe(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:xe(e.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:xe(e.onPointerMove,L=>{if(!w.current)return;const V=L.clientX-w.current.x,z=L.clientY-w.current.y,B=!!j.current,A=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,D=A?R(0,V):0,F=A?0:R(0,z),q=L.pointerType==="touch"?10:2,W={x:D,y:F},te={originalEvent:L,delta:W};B?(j.current=W,du(R6,d,te,{discrete:!1})):Gw(W,v.swipeDirection,q)?(j.current=W,du(A6,f,te,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(V)>q||Math.abs(z)>q)&&(w.current=null)}),onPointerUp:xe(e.onPointerUp,L=>{const V=j.current,z=L.target;if(z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),j.current=null,w.current=null,V){const B=L.currentTarget,A={originalEvent:L,delta:V};Gw(V,v.swipeDirection,v.swipeThreshold)?du(O6,m,A,{discrete:!0}):du(I6,h,A,{discrete:!0}),B.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),M6=e=>{const{__scopeToast:t,children:r,...n}=e,s=Tf(bc,t),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return z6(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(yc,{asChild:!0,children:i.jsx(Hx,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},F6="ToastTitle",AC=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ae.div,{...n,ref:t})});AC.displayName=F6;var B6="ToastDescription",RC=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ae.div,{...n,ref:t})});RC.displayName=B6;var IC="ToastAction",OC=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx($C,{altText:r,asChild:!0,children:i.jsx(Yx,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${IC}\`. Expected non-empty \`string\`.`),null)});OC.displayName=IC;var DC="ToastClose",Yx=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=$6(DC,r);return i.jsx($C,{asChild:!0,children:i.jsx(Ae.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,s.onClose)})})});Yx.displayName=DC;var $C=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function LC(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),U6(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...LC(n))}}),t}function du(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Wx(s,o):s.dispatchEvent(o)}var Gw=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function z6(e=()=>{}){const t=pr(e);zn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function U6(e){return e.nodeType===e.ELEMENT_NODE}function V6(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ep(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var q6=NC,MC=PC,FC=kC,BC=AC,zC=RC,UC=OC,VC=Yx;const Kw=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Yw=mC,kf=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Yw(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],d=o==null?void 0:o[u];if(f===null)return null;const h=Kw(f)||Kw(d);return s[u][h]}),l=r&&Object.entries(r).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...u,d,h]:u},[]);return Yw(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};var W6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const H6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),se=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:l,...c},u)=>p.createElement("svg",{ref:u,...W6,width:s,height:s,stroke:n,strokeWidth:a?Number(o)*24/Number(s):o,className:`lucide lucide-${H6(e)}`,...c},[...t.map(([f,d])=>p.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},Jx=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Xx=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qC=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jw=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),WC=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),zl=se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Bg=se("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),zg=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),G6=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Qx=se("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Af=se("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Zx=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Rn=se("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ui=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Rf=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),K6=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Y6=se("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),J6=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Xw=se("ClipboardSignature",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}],["path",{d:"M8 18h1",key:"13wk12"}]]),X6=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Qw=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Q6=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Z6=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),e3=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),t3=se("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),r3=se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),Ug=se("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Ul=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Vl=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),n3=se("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Zw=se("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v3",key:"am10z3"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"ychnub"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]),dl=se("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ej=se("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),Vg=se("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),s3=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),o3=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),i3=se("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]),HC=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Np=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),tj=se("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),GC=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Me=se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),If=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),a3=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Zr=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ey=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),KC=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),l3=se("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),ty=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),c3=se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),wc=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ar=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Of=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),u3=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),d3=se("Scaling",[["path",{d:"M21 3 9 15",key:"15kdhq"}],["path",{d:"M12 3H3v18h18v-9",key:"8suug0"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}]]),ry=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f3=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),YC=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qg=se("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),JC=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),h3=se("Shovel",[["path",{d:"M2 22v-5l5-5 5 5-5 5z",key:"1fh25c"}],["path",{d:"M9.5 14.5 16 8",key:"1smz5x"}],["path",{d:"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2",key:"1q8uv5"}]]),Wg=se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),In=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p3=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),m3=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),g3=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),fl=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),v3=se("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),jc=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Vi=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),x3=se("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),y3=se("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),XC=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ro=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),QC=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),b3=q6,ZC=J.forwardRef(({className:e,...t},r)=>i.jsx(MC,{ref:r,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ZC.displayName=MC.displayName;const w3=kf("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eP=J.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(FC,{ref:n,className:pe(w3({variant:t}),e),...r}));eP.displayName=FC.displayName;const j3=J.forwardRef(({className:e,...t},r)=>i.jsx(UC,{ref:r,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));j3.displayName=UC.displayName;const tP=J.forwardRef(({className:e,...t},r)=>i.jsx(VC,{ref:r,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Ro,{className:"h-4 w-4"})}));tP.displayName=VC.displayName;const rP=J.forwardRef(({className:e,...t},r)=>i.jsx(BC,{ref:r,className:pe("text-sm font-semibold",e),...t}));rP.displayName=BC.displayName;const nP=J.forwardRef(({className:e,...t},r)=>i.jsx(zC,{ref:r,className:pe("text-sm opacity-90",e),...t}));nP.displayName=zC.displayName;const _3=1;let Cp=0;function S3(){return Cp=(Cp+1)%Number.MAX_VALUE,Cp.toString()}const Dt={state:{toasts:[]},listeners:[],getState:()=>Dt.state,setState:e=>{typeof e=="function"?Dt.state=e(Dt.state):Dt.state={...Dt.state,...e},Dt.listeners.forEach(t=>t(Dt.state))},subscribe:e=>(Dt.listeners.push(e),()=>{Dt.listeners=Dt.listeners.filter(t=>t!==e)})},M=({...e})=>{const t=S3(),r=s=>Dt.setState(o=>({...o,toasts:o.toasts.map(a=>a.id===t?{...a,...s}:a)})),n=()=>Dt.setState(s=>({...s,toasts:s.toasts.filter(o=>o.id!==t)}));return Dt.setState(s=>({...s,toasts:[{...e,id:t,dismiss:n},...s.toasts].slice(0,_3)})),{id:t,dismiss:n,update:r}};function sP(){const[e,t]=p.useState(Dt.getState());return p.useEffect(()=>Dt.subscribe(n=>{t(n)}),[]),p.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const s=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(s)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:M,toasts:e.toasts}}function E3(){const{toasts:e}=sP();return i.jsxs(b3,{children:[e.map(({id:t,title:r,description:n,action:s,...o})=>i.jsxs(eP,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(rP,{children:r}),n&&i.jsx(nP,{children:n})]}),s,i.jsx(tP,{})]},t)),i.jsx(ZC,{})]})}const oP=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Df=p.createContext({}),$f=p.createContext(null),Lf=typeof document<"u",ny=Lf?p.useLayoutEffect:p.useEffect,iP=p.createContext({strict:!1}),sy=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),N3="framerAppearId",aP="data-"+sy(N3);function C3(e,t,r,n){const{visualElement:s}=p.useContext(Df),o=p.useContext(iP),a=p.useContext($f),l=p.useContext(oP).reducedMotion,c=p.useRef();n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;p.useInsertionEffect(()=>{u&&u.update(r,a)});const f=p.useRef(!!(r[aP]&&!window.HandoffComplete));return ny(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),p.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),u}function gi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function P3(e,t,r){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):gi(r)&&(r.current=n))},[t])}function ql(e){return typeof e=="string"||Array.isArray(e)}function Mf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const oy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iy=["initial",...oy];function Ff(e){return Mf(e.animate)||iy.some(t=>ql(e[t]))}function lP(e){return!!(Ff(e)||e.variants)}function T3(e,t){if(Ff(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ql(r)?r:void 0,animate:ql(n)?n:void 0}}return e.inherit!==!1?t:{}}function k3(e){const{initial:t,animate:r}=T3(e,p.useContext(Df));return p.useMemo(()=>({initial:t,animate:r}),[rj(t),rj(r)])}function rj(e){return Array.isArray(e)?e.join(" "):e}const nj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wl={};for(const e in nj)Wl[e]={isEnabled:t=>nj[e].some(r=>!!t[r])};function A3(e){for(const t in e)Wl[t]={...Wl[t],...e[t]}}const ay=p.createContext({}),cP=p.createContext({}),R3=Symbol.for("motionComponentSymbol");function I3({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&A3(e);function o(l,c){let u;const f={...p.useContext(oP),...l,layoutId:O3(l)},{isStatic:d}=f,h=k3(l),m=n(l,d);if(!d&&Lf){h.visualElement=C3(s,m,f,t);const g=p.useContext(cP),v=p.useContext(iP).strict;h.visualElement&&(u=h.visualElement.loadFeatures(f,v,e,g))}return p.createElement(Df.Provider,{value:h},u&&h.visualElement?p.createElement(u,{visualElement:h.visualElement,...f}):null,r(s,l,P3(m,h.visualElement,c),m,d,h.visualElement))}const a=p.forwardRef(o);return a[R3]=s,a}function O3({layoutId:e}){const t=p.useContext(ay).id;return t&&e!==void 0?t+"-"+e:e}function D3(e){function t(n,s={}){return I3(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const $3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ly(e){return typeof e!="string"||e.includes("-")?!1:!!($3.indexOf(e)>-1||/[A-Z]/.test(e))}const Od={};function L3(e){Object.assign(Od,e)}const _c=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Io=new Set(_c);function uP(e,{layout:t,layoutId:r}){return Io.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Od[e]||e==="opacity")}const er=e=>!!(e&&e.getVelocity),M3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F3=_c.length;function B3(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let o="";for(let a=0;a<F3;a++){const l=_c[a];if(e[l]!==void 0){const c=M3[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,n?"":o):r&&n&&(o="none"),o}const dP=e=>t=>typeof t=="string"&&t.startsWith(e),fP=dP("--"),Hg=dP("var(--"),z3=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,U3=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ps=(e,t,r)=>Math.min(Math.max(r,e),t),Oo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hl={...Oo,transform:e=>Ps(0,1,e)},fu={...Oo,default:1},pl=e=>Math.round(e*1e5)/1e5,Bf=/(-)?([\d]*\.?[\d])+/g,hP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,V3=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Sc(e){return typeof e=="string"}const Ec=e=>({test:t=>Sc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zn=Ec("deg"),mn=Ec("%"),we=Ec("px"),q3=Ec("vh"),W3=Ec("vw"),sj={...mn,parse:e=>mn.parse(e)/100,transform:e=>mn.transform(e*100)},oj={...Oo,transform:Math.round},pP={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:Zn,rotateX:Zn,rotateY:Zn,rotateZ:Zn,scale:fu,scaleX:fu,scaleY:fu,scaleZ:fu,skew:Zn,skewX:Zn,skewY:Zn,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:hl,originX:sj,originY:sj,originZ:we,zIndex:oj,fillOpacity:hl,strokeOpacity:hl,numOctaves:oj};function cy(e,t,r,n){const{style:s,vars:o,transform:a,transformOrigin:l}=e;let c=!1,u=!1,f=!0;for(const d in t){const h=t[d];if(fP(d)){o[d]=h;continue}const m=pP[d],g=U3(h,m);if(Io.has(d)){if(c=!0,a[d]=g,!f)continue;h!==(m.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,l[d]=g):s[d]=g}if(t.transform||(c||n?s.transform=B3(e.transform,r,f,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:m=0}=l;s.transformOrigin=`${d} ${h} ${m}`}}const uy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mP(e,t,r){for(const n in t)!er(t[n])&&!uP(n,r)&&(e[n]=t[n])}function H3({transformTemplate:e},t,r){return p.useMemo(()=>{const n=uy();return cy(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function G3(e,t,r){const n=e.style||{},s={};return mP(s,n,e),Object.assign(s,H3(e,t,r)),e.transformValues?e.transformValues(s):s}function K3(e,t,r){const n={},s=G3(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Y3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y3.has(e)}let gP=e=>!Dd(e);function J3(e){e&&(gP=t=>t.startsWith("on")?!Dd(t):e(t))}try{J3(require("@emotion/is-prop-valid").default)}catch{}function X3(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(gP(s)||r===!0&&Dd(s)||!t&&!Dd(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function ij(e,t,r){return typeof e=="string"?e:we.transform(t+r*e)}function Q3(e,t,r){const n=ij(t,e.x,e.width),s=ij(r,e.y,e.height);return`${n} ${s}`}const Z3={offset:"stroke-dashoffset",array:"stroke-dasharray"},eF={offset:"strokeDashoffset",array:"strokeDasharray"};function tF(e,t,r=1,n=0,s=!0){e.pathLength=1;const o=s?Z3:eF;e[o.offset]=we.transform(-n);const a=we.transform(t),l=we.transform(r);e[o.array]=`${a} ${l}`}function dy(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},f,d,h){if(cy(e,u,f,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:v}=e;m.transform&&(v&&(g.transform=m.transform),delete m.transform),v&&(s!==void 0||o!==void 0||g.transform)&&(g.transformOrigin=Q3(v,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),a!==void 0&&tF(m,a,l,c,!1)}const vP=()=>({...uy(),attrs:{}}),fy=e=>typeof e=="string"&&e.toLowerCase()==="svg";function rF(e,t,r,n){const s=p.useMemo(()=>{const o=vP();return dy(o,t,{enableHardwareAcceleration:!1},fy(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};mP(o,e.style,e),s.style={...o,...s.style}}return s}function nF(e=!1){return(r,n,s,{latestValues:o},a)=>{const c=(ly(r)?rF:K3)(n,o,a,r),f={...X3(n,typeof r=="string",e),...c,ref:s},{children:d}=n,h=p.useMemo(()=>er(d)?d.get():d,[d]);return p.createElement(r,{...f,children:h})}}function xP(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const yP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bP(e,t,r,n){xP(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(yP.has(s)?s:sy(s),t.attrs[s])}function hy(e,t){const{style:r}=e,n={};for(const s in r)(er(r[s])||t.style&&er(t.style[s])||uP(s,e))&&(n[s]=r[s]);return n}function wP(e,t){const r=hy(e,t);for(const n in e)if(er(e[n])||er(t[n])){const s=_c.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function py(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function jP(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const $d=e=>Array.isArray(e),sF=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),oF=e=>$d(e)?e[e.length-1]||0:e;function Qu(e){const t=er(e)?e.get():e;return sF(t)?t.toValue():t}function iF({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,o){const a={latestValues:aF(n,s,o,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const _P=e=>(t,r)=>{const n=p.useContext(Df),s=p.useContext($f),o=()=>iF(e,t,n,s);return r?o():jP(o)};function aF(e,t,r,n){const s={},o=n(e,{});for(const h in o)s[h]=Qu(o[h]);let{initial:a,animate:l}=e;const c=Ff(e),u=lP(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let f=r?r.initial===!1:!1;f=f||a===!1;const d=f?l:a;return d&&typeof d!="boolean"&&!Mf(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=py(e,m);if(!g)return;const{transitionEnd:v,transition:x,...y}=g;for(const b in y){let w=y[b];if(Array.isArray(w)){const j=f?w.length-1:0;w=w[j]}w!==null&&(s[b]=w)}for(const b in v)s[b]=v[b]}),s}const ot=e=>e;class aj{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function lF(e){let t=new aj,r=new aj,n=0,s=!1,o=!1;const a=new WeakSet,l={schedule:(c,u=!1,f=!1)=>{const d=f&&s,h=d?t:r;return u&&a.add(c),h.add(c)&&d&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){o=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const f=t.order[u];f(c),a.has(f)&&(l.schedule(f),e())}s=!1,o&&(o=!1,l.process(c))}};return l}const hu=["prepare","read","update","preRender","render","postRender"],cF=40;function uF(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=hu.reduce((d,h)=>(d[h]=lF(()=>r=!0),d),{}),a=d=>o[d].process(s),l=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,cF),1),s.timestamp=d,s.isProcessing=!0,hu.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:hu.reduce((d,h)=>{const m=o[h];return d[h]=(g,v=!1,x=!1)=>(r||c(),m.schedule(g,v,x)),d},{}),cancel:d=>hu.forEach(h=>o[h].cancel(d)),state:s,steps:o}}const{schedule:Ue,cancel:Un,state:kt,steps:Pp}=uF(typeof requestAnimationFrame<"u"?requestAnimationFrame:ot,!0),dF={useVisualState:_P({scrapeMotionValuesFromProps:wP,createRenderState:vP,onMount:(e,t,{renderState:r,latestValues:n})=>{Ue.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ue.render(()=>{dy(r,n,{enableHardwareAcceleration:!1},fy(t.tagName),e.transformTemplate),bP(t,r)})}})},fF={useVisualState:_P({scrapeMotionValuesFromProps:hy,createRenderState:uy})};function hF(e,{forwardMotionProps:t=!1},r,n){return{...ly(e)?dF:fF,preloadedFeatures:r,useRender:nF(t),createVisualElement:n,Component:e}}function kn(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const SP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function zf(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const pF=e=>t=>SP(t)&&e(t,zf(t));function On(e,t,r,n){return kn(e,t,pF(r),n)}const mF=(e,t)=>r=>t(e(r)),ws=(...e)=>e.reduce(mF);function EP(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const lj=EP("dragHorizontal"),cj=EP("dragVertical");function NP(e){let t=!1;if(e==="y")t=cj();else if(e==="x")t=lj();else{const r=lj(),n=cj();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function CP(){const e=NP(!0);return e?(e(),!1):!0}class $s{constructor(t){this.isMounted=!1,this.node=t}update(){}}function uj(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(o,a)=>{if(o.pointerType==="touch"||CP())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ue.update(()=>l[n](o,a))};return On(e.current,r,s,{passive:!e.getProps()[n]})}class gF extends $s{mount(){this.unmount=ws(uj(this.node,!0),uj(this.node,!1))}unmount(){}}class vF extends $s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ws(kn(this.node.current,"focus",()=>this.onFocus()),kn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const PP=(e,t)=>t?e===t?!0:PP(e,t.parentElement):!1;function Tp(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,zf(r))}class xF extends $s{constructor(){super(...arguments),this.removeStartListeners=ot,this.removeEndListeners=ot,this.removeAccessibleListeners=ot,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=On(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f,globalTapTarget:d}=this.node.getProps();Ue.update(()=>{!d&&!PP(this.node.current,l.target)?f&&f(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=On(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=ws(o,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Tp("up",(c,u)=>{const{onTap:f}=this.node.getProps();f&&Ue.update(()=>f(c,u))})};this.removeEndListeners(),this.removeEndListeners=kn(this.node.current,"keyup",a),Tp("down",(l,c)=>{this.startPress(l,c)})},r=kn(this.node.current,"keydown",t),n=()=>{this.isPressing&&Tp("cancel",(o,a)=>this.cancelPress(o,a))},s=kn(this.node.current,"blur",n);this.removeAccessibleListeners=ws(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ue.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!CP()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ue.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=On(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=kn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ws(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Gg=new WeakMap,kp=new WeakMap,yF=e=>{const t=Gg.get(e.target);t&&t(e)},bF=e=>{e.forEach(yF)};function wF({root:e,...t}){const r=e||document;kp.has(r)||kp.set(r,{});const n=kp.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(bF,{root:e,...t})),n[s]}function jF(e,t,r){const n=wF(t);return Gg.set(e,r),n.observe(e),()=>{Gg.delete(e),n.unobserve(e)}}const _F={some:0,all:1};class SF extends $s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:_F[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=u?f:d;h&&h(c)};return jF(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(EF(t,r))&&this.startObserver()}unmount(){}}function EF({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const NF={inView:{Feature:SF},tap:{Feature:xF},focus:{Feature:vF},hover:{Feature:gF}};function TP(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function CF(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function PF(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Uf(e,t,r){const n=e.getProps();return py(n,t,r!==void 0?r:n.custom,CF(e),PF(e))}let TF=ot,my=ot;const js=e=>e*1e3,Dn=e=>e/1e3,kF={current:!1},kP=e=>Array.isArray(e)&&typeof e[0]=="number";function AP(e){return!!(!e||typeof e=="string"&&RP[e]||kP(e)||Array.isArray(e)&&e.every(AP))}const Ya=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,RP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ya([0,.65,.55,1]),circOut:Ya([.55,0,1,.45]),backIn:Ya([.31,.01,.66,-.59]),backOut:Ya([.33,1.53,.69,.99])};function IP(e){if(e)return kP(e)?Ya(e):Array.isArray(e)?e.map(IP):RP[e]}function AF(e,t,r,{delay:n=0,duration:s,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const f=IP(l);return Array.isArray(f)&&(u.easing=f),e.animate(u,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function RF(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const OP=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,IF=1e-7,OF=12;function DF(e,t,r,n,s){let o,a,l=0;do a=t+(r-t)/2,o=OP(a,n,s)-e,o>0?r=a:t=a;while(Math.abs(o)>IF&&++l<OF);return a}function Nc(e,t,r,n){if(e===t&&r===n)return ot;const s=o=>DF(o,0,1,e,r);return o=>o===0||o===1?o:OP(s(o),t,n)}const $F=Nc(.42,0,1,1),LF=Nc(0,0,.58,1),DP=Nc(.42,0,.58,1),MF=e=>Array.isArray(e)&&typeof e[0]!="number",$P=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,LP=e=>t=>1-e(1-t),gy=e=>1-Math.sin(Math.acos(e)),MP=LP(gy),FF=$P(gy),FP=Nc(.33,1.53,.69,.99),vy=LP(FP),BF=$P(vy),zF=e=>(e*=2)<1?.5*vy(e):.5*(2-Math.pow(2,-10*(e-1))),UF={linear:ot,easeIn:$F,easeInOut:DP,easeOut:LF,circIn:gy,circInOut:FF,circOut:MP,backIn:vy,backInOut:BF,backOut:FP,anticipate:zF},dj=e=>{if(Array.isArray(e)){my(e.length===4);const[t,r,n,s]=e;return Nc(t,r,n,s)}else if(typeof e=="string")return UF[e];return e},xy=(e,t)=>r=>!!(Sc(r)&&V3.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),BP=(e,t,r)=>n=>{if(!Sc(n))return n;const[s,o,a,l]=n.match(Bf);return{[e]:parseFloat(s),[t]:parseFloat(o),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},VF=e=>Ps(0,255,e),Ap={...Oo,transform:e=>Math.round(VF(e))},oo={test:xy("rgb","red"),parse:BP("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ap.transform(e)+", "+Ap.transform(t)+", "+Ap.transform(r)+", "+pl(hl.transform(n))+")"};function qF(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Kg={test:xy("#"),parse:qF,transform:oo.transform},vi={test:xy("hsl","hue"),parse:BP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+mn.transform(pl(t))+", "+mn.transform(pl(r))+", "+pl(hl.transform(n))+")"},$t={test:e=>oo.test(e)||Kg.test(e)||vi.test(e),parse:e=>oo.test(e)?oo.parse(e):vi.test(e)?vi.parse(e):Kg.parse(e),transform:e=>Sc(e)?e:e.hasOwnProperty("red")?oo.transform(e):vi.transform(e)},tt=(e,t,r)=>-r*e+r*t+e;function Rp(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function WF({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,o=0,a=0;if(!t)s=o=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Rp(c,l,e+1/3),o=Rp(c,l,e),a=Rp(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const Ip=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},HF=[Kg,oo,vi],GF=e=>HF.find(t=>t.test(e));function fj(e){const t=GF(e);let r=t.parse(e);return t===vi&&(r=WF(r)),r}const zP=(e,t)=>{const r=fj(e),n=fj(t),s={...r};return o=>(s.red=Ip(r.red,n.red,o),s.green=Ip(r.green,n.green,o),s.blue=Ip(r.blue,n.blue,o),s.alpha=tt(r.alpha,n.alpha,o),oo.transform(s))};function KF(e){var t,r;return isNaN(e)&&Sc(e)&&(((t=e.match(Bf))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(hP))===null||r===void 0?void 0:r.length)||0)>0}const UP={regex:z3,countKey:"Vars",token:"${v}",parse:ot},VP={regex:hP,countKey:"Colors",token:"${c}",parse:$t.parse},qP={regex:Bf,countKey:"Numbers",token:"${n}",parse:Oo.parse};function Op(e,{regex:t,countKey:r,token:n,parse:s}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(s)))}function Ld(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Op(r,UP),Op(r,VP),Op(r,qP),r}function WP(e){return Ld(e).values}function HP(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Ld(e),o=t.length;return a=>{let l=s;for(let c=0;c<o;c++)c<n?l=l.replace(UP.token,a[c]):c<n+r?l=l.replace(VP.token,$t.transform(a[c])):l=l.replace(qP.token,pl(a[c]));return l}}const YF=e=>typeof e=="number"?0:e;function JF(e){const t=WP(e);return HP(e)(t.map(YF))}const Ts={test:KF,parse:WP,createTransformer:HP,getAnimatableNone:JF},GP=(e,t)=>r=>`${r>0?t:e}`;function KP(e,t){return typeof e=="number"?r=>tt(e,t,r):$t.test(e)?zP(e,t):e.startsWith("var(")?GP(e,t):JP(e,t)}const YP=(e,t)=>{const r=[...e],n=r.length,s=e.map((o,a)=>KP(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=s[a](o);return r}},XF=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=KP(e[s],t[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}},JP=(e,t)=>{const r=Ts.createTransformer(t),n=Ld(e),s=Ld(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?ws(YP(n.values,s.values),r):GP(e,t)},Hl=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},hj=(e,t)=>r=>tt(e,t,r);function QF(e){return typeof e=="number"?hj:typeof e=="string"?$t.test(e)?zP:JP:Array.isArray(e)?YP:typeof e=="object"?XF:hj}function ZF(e,t,r){const n=[],s=r||QF(e[0]),o=e.length-1;for(let a=0;a<o;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||ot:t;l=ws(c,l)}n.push(l)}return n}function XP(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const o=e.length;if(my(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=ZF(t,n,s),l=a.length,c=u=>{let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const d=Hl(e[f],e[f+1],u);return a[f](d)};return r?u=>c(Ps(e[0],e[o-1],u)):c}function eB(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Hl(0,t,n);e.push(tt(r,1,s))}}function tB(e){const t=[0];return eB(t,e.length-1),t}function rB(e,t){return e.map(r=>r*t)}function nB(e,t){return e.map(()=>t||DP).splice(0,e.length-1)}function Md({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=MF(n)?n.map(dj):dj(n),o={done:!1,value:t[0]},a=rB(r&&r.length===t.length?r:tB(t),e),l=XP(a,t,{ease:Array.isArray(s)?s:nB(t,s)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function QP(e,t){return t?e*(1e3/t):0}const sB=5;function ZP(e,t,r){const n=Math.max(t-sB,0);return QP(r-e(n),t-n)}const Dp=.001,oB=.01,pj=10,iB=.05,aB=1;function lB({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,o;TF(e<=js(pj));let a=1-t;a=Ps(iB,aB,a),e=Ps(oB,pj,Dn(e)),a<1?(s=u=>{const f=u*a,d=f*e,h=f-r,m=Yg(u,a),g=Math.exp(-d);return Dp-h/m*g},o=u=>{const d=u*a*e,h=d*r+r,m=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-d),v=Yg(Math.pow(u,2),a);return(-s(u)+Dp>0?-1:1)*((h-m)*g)/v}):(s=u=>{const f=Math.exp(-u*e),d=(u-r)*e+1;return-Dp+f*d},o=u=>{const f=Math.exp(-u*e),d=(r-u)*(e*e);return f*d});const l=5/e,c=uB(s,o,l);if(e=js(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const cB=12;function uB(e,t,r){let n=r;for(let s=1;s<cB;s++)n=n-e(n)/t(n);return n}function Yg(e,t){return e*Math.sqrt(1-t*t)}const dB=["duration","bounce"],fB=["stiffness","damping","mass"];function mj(e,t){return t.some(r=>e[r]!==void 0)}function hB(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!mj(e,fB)&&mj(e,dB)){const r=lB(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function e2({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],o=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:h}=hB({...n,velocity:-Dn(n.velocity||0)}),m=d||0,g=c/(2*Math.sqrt(l*u)),v=o-s,x=Dn(Math.sqrt(l/u)),y=Math.abs(v)<5;r||(r=y?.01:2),t||(t=y?.005:.5);let b;if(g<1){const w=Yg(x,g);b=j=>{const _=Math.exp(-g*x*j);return o-_*((m+g*x*v)/w*Math.sin(w*j)+v*Math.cos(w*j))}}else if(g===1)b=w=>o-Math.exp(-x*w)*(v+(m+x*v)*w);else{const w=x*Math.sqrt(g*g-1);b=j=>{const _=Math.exp(-g*x*j),S=Math.min(w*j,300);return o-_*((m+g*x*v)*Math.sinh(S)+w*v*Math.cosh(S))/w}}return{calculatedDuration:h&&f||null,next:w=>{const j=b(w);if(h)a.done=w>=f;else{let _=m;w!==0&&(g<1?_=ZP(b,w,j):_=0);const S=Math.abs(_)<=r,E=Math.abs(o-j)<=t;a.done=S&&E}return a.value=a.done?o:j,a}}}function gj({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:f}){const d=e[0],h={done:!1,value:d},m=N=>l!==void 0&&N<l||c!==void 0&&N>c,g=N=>l===void 0?c:c===void 0||Math.abs(l-N)<Math.abs(c-N)?l:c;let v=r*t;const x=d+v,y=a===void 0?x:a(x);y!==x&&(v=y-d);const b=N=>-v*Math.exp(-N/n),w=N=>y+b(N),j=N=>{const P=b(N),C=w(N);h.done=Math.abs(P)<=u,h.value=h.done?y:C};let _,S;const E=N=>{m(h.value)&&(_=N,S=e2({keyframes:[h.value,g(h.value)],velocity:ZP(w,N,h.value),damping:s,stiffness:o,restDelta:u,restSpeed:f}))};return E(0),{calculatedDuration:null,next:N=>{let P=!1;return!S&&_===void 0&&(P=!0,j(N),E(N)),_!==void 0&&N>_?S.next(N-_):(!P&&j(N),h)}}}const pB=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Ue.update(t,!0),stop:()=>Un(t),now:()=>kt.isProcessing?kt.timestamp:performance.now()}},vj=2e4;function xj(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<vj;)t+=r,n=e.next(t);return t>=vj?1/0:t}const mB={decay:gj,inertia:gj,tween:Md,keyframes:Md,spring:e2};function Fd({autoplay:e=!0,delay:t=0,driver:r=pB,keyframes:n,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:f,onUpdate:d,...h}){let m=1,g=!1,v,x;const y=()=>{x=new Promise(F=>{v=F})};y();let b;const w=mB[s]||Md;let j;w!==Md&&typeof n[0]!="number"&&(j=XP([0,100],n,{clamp:!1}),n=[0,100]);const _=w({...h,keyframes:n});let S;l==="mirror"&&(S=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let E="idle",N=null,P=null,C=null;_.calculatedDuration===null&&o&&(_.calculatedDuration=xj(_));const{calculatedDuration:I}=_;let O=1/0,$=1/0;I!==null&&(O=I+a,$=O*(o+1)-a);let L=0;const V=F=>{if(P===null)return;m>0&&(P=Math.min(P,F)),m<0&&(P=Math.min(F-$/m,P)),N!==null?L=N:L=Math.round(F-P)*m;const q=L-t*(m>=0?1:-1),W=m>=0?q<0:q>$;L=Math.max(q,0),E==="finished"&&N===null&&(L=$);let te=L,fe=_;if(o){const Y=Math.min(L,$)/O;let U=Math.floor(Y),Z=Y%1;!Z&&Y>=1&&(Z=1),Z===1&&U--,U=Math.min(U,o+1),!!(U%2)&&(l==="reverse"?(Z=1-Z,a&&(Z-=a/O)):l==="mirror"&&(fe=S)),te=Ps(0,1,Z)*O}const le=W?{done:!1,value:n[0]}:fe.next(te);j&&(le.value=j(le.value));let{done:ne}=le;!W&&I!==null&&(ne=m>=0?L>=$:L<=0);const ue=N===null&&(E==="finished"||E==="running"&&ne);return d&&d(le.value),ue&&A(),le},z=()=>{b&&b.stop(),b=void 0},B=()=>{E="idle",z(),v(),y(),P=C=null},A=()=>{E="finished",f&&f(),z(),v()},R=()=>{if(g)return;b||(b=r(V));const F=b.now();c&&c(),N!==null?P=F-N:(!P||E==="finished")&&(P=F),E==="finished"&&y(),C=P,N=null,E="running",b.start()};e&&R();const D={then(F,q){return x.then(F,q)},get time(){return Dn(L)},set time(F){F=js(F),L=F,N!==null||!b||m===0?N=F:P=b.now()-F/m},get duration(){const F=_.calculatedDuration===null?xj(_):_.calculatedDuration;return Dn(F)},get speed(){return m},set speed(F){F===m||!b||(m=F,D.time=Dn(L))},get state(){return E},play:R,pause:()=>{E="paused",N=L},stop:()=>{g=!0,E!=="idle"&&(E="idle",u&&u(),B())},cancel:()=>{C!==null&&V(C),B()},complete:()=>{E="finished"},sample:F=>(P=0,V(F))};return D}function gB(e){let t;return()=>(t===void 0&&(t=e()),t)}const vB=gB(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xB=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pu=10,yB=2e4,bB=(e,t)=>t.type==="spring"||e==="backgroundColor"||!AP(t.ease);function wB(e,t,{onUpdate:r,onComplete:n,...s}){if(!(vB()&&xB.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const f=()=>{c=new Promise(w=>{l=w})};f();let{keyframes:d,duration:h=300,ease:m,times:g}=s;if(bB(t,s)){const w=Fd({...s,repeat:0,delay:0});let j={done:!1,value:d[0]};const _=[];let S=0;for(;!j.done&&S<yB;)j=w.sample(S),_.push(j.value),S+=pu;g=void 0,d=_,h=S-pu,m="linear"}const v=AF(e.owner.current,t,d,{...s,duration:h,ease:m,times:g}),x=()=>{u=!1,v.cancel()},y=()=>{u=!0,Ue.update(x),l(),f()};return v.onfinish=()=>{u||(e.set(RF(d,s)),n&&n(),y())},{then(w,j){return c.then(w,j)},attachTimeline(w){return v.timeline=w,v.onfinish=null,ot},get time(){return Dn(v.currentTime||0)},set time(w){v.currentTime=js(w)},get speed(){return v.playbackRate},set speed(w){v.playbackRate=w},get duration(){return Dn(h)},play:()=>{a||(v.play(),Un(x))},pause:()=>v.pause(),stop:()=>{if(a=!0,v.playState==="idle")return;const{currentTime:w}=v;if(w){const j=Fd({...s,autoplay:!1});e.setWithVelocity(j.sample(w-pu).value,j.sample(w).value,pu)}y()},complete:()=>{u||v.finish()},cancel:y}}function jB({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:ot,pause:ot,stop:ot,then:o=>(o(),Promise.resolve()),cancel:ot,complete:ot});return t?Fd({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const _B={type:"spring",stiffness:500,damping:25,restSpeed:10},SB=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),EB={type:"keyframes",duration:.8},NB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CB=(e,{keyframes:t})=>t.length>2?EB:Io.has(e)?e.startsWith("scale")?SB(t[1]):_B:NB,Jg=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ts.test(t)||t==="0")&&!t.startsWith("url(")),PB=new Set(["brightness","contrast","saturate","opacity"]);function TB(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Bf)||[];if(!n)return e;const s=r.replace(n,"");let o=PB.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+s+")"}const kB=/([a-z-]*)\(.*?\)/g,Xg={...Ts,getAnimatableNone:e=>{const t=e.match(kB);return t?t.map(TB).join(" "):e}},AB={...pP,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Xg,WebkitFilter:Xg},yy=e=>AB[e];function t2(e,t){let r=yy(e);return r!==Xg&&(r=Ts),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const r2=e=>/^0[^.\s]+$/.test(e);function RB(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||r2(e)}function IB(e,t,r,n){const s=Jg(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),RB(o[u])&&c.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(l=o[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const f=c[u];o[f]=t2(t,l)}return o}function OB({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}function by(e,t){return e[t]||e.default||e}const DB={skipAnimations:!1},wy=(e,t,r,n={})=>s=>{const o=by(n,e)||{},a=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-js(a);const c=IB(t,e,r,o),u=c[0],f=c[c.length-1],d=Jg(e,u),h=Jg(e,f);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(OB(o)||(m={...m,...CB(e,m)}),m.duration&&(m.duration=js(m.duration)),m.repeatDelay&&(m.repeatDelay=js(m.repeatDelay)),!d||!h||kF.current||o.type===!1||DB.skipAnimations)return jB(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=wB(t,e,m);if(g)return g}return Fd(m)};function Bd(e){return!!(er(e)&&e.add)}const n2=e=>/^\-?\d*\.?\d+$/.test(e);function jy(e,t){e.indexOf(t)===-1&&e.push(t)}function _y(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Sy{constructor(){this.subscriptions=[]}add(t){return jy(this.subscriptions,t),()=>_y(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $B=e=>!isNaN(parseFloat(e));class LB{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=kt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ue.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ue.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=$B(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Sy);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?QP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qi(e,t){return new LB(e,t)}const s2=e=>t=>t.test(e),MB={test:e=>e==="auto",parse:e=>e},o2=[Oo,we,mn,Zn,W3,q3,MB],La=e=>o2.find(s2(e)),FB=[...o2,$t,Ts],BB=e=>FB.find(s2(e));function zB(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,qi(r))}function UB(e,t){const r=Uf(e,t);let{transitionEnd:n={},transition:s={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const l=oF(o[a]);zB(e,a,l)}}function VB(e,t,r){var n,s;const o=Object.keys(t).filter(l=>!e.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],u=t[c];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),f!=null&&(typeof f=="string"&&(n2(f)||r2(f))?f=parseFloat(f):!BB(f)&&Ts.test(u)&&(f=t2(c,u)),e.addValue(c,qi(f,{owner:e})),r[c]===void 0&&(r[c]=f),f!==null&&e.setBaseTarget(c,f))}}function qB(e,t){return t?(t[e]||t.default||t).from:void 0}function WB(e,t,r){const n={};for(const s in e){const o=qB(s,t);if(o!==void 0)n[s]=o;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function HB({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function GB(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function i2(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(o=n);const u=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d),m=l[d];if(!h||m===void 0||f&&HB(f,d))continue;const g={delay:r,elapsed:0,...by(o||{},d)};if(window.HandoffAppearAnimations){const y=e.getProps()[aP];if(y){const b=window.HandoffAppearAnimations(y,d,h,Ue);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let v=!g.isHandoff&&!GB(h,m);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(v=!1),h.animation&&(v=!1),v)continue;h.start(wy(d,h,m,e.shouldReduceMotion&&Io.has(d)?{type:!1}:g));const x=h.animation;Bd(c)&&(c.add(d),x.then(()=>c.remove(d))),u.push(x)}return a&&Promise.all(u).then(()=>{a&&UB(e,a)}),u}function Qg(e,t,r={}){const n=Uf(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(i2(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return KB(e,t,u+c,f,d,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function KB(e,t,r=0,n=0,s=1,o){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(YB).forEach((u,f)=>{u.notify("AnimationStart",t),a.push(Qg(u,t,{...o,delay:r+c(f)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function YB(e,t){return e.sortNodePosition(t)}function JB(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(o=>Qg(e,o,r));n=Promise.all(s)}else if(typeof t=="string")n=Qg(e,t,r);else{const s=typeof t=="function"?Uf(e,t,r.custom):t;n=Promise.all(i2(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const XB=[...oy].reverse(),QB=oy.length;function ZB(e){return t=>Promise.all(t.map(({animation:r,options:n})=>JB(e,r,n)))}function e8(e){let t=ZB(e);const r=r8();let n=!0;const s=(c,u)=>{const f=Uf(e,u);if(f){const{transition:d,transitionEnd:h,...m}=f;c={...c,...m,...h}}return c};function o(c){t=c(e)}function a(c,u){const f=e.getProps(),d=e.getVariantContext(!0)||{},h=[],m=new Set;let g={},v=1/0;for(let y=0;y<QB;y++){const b=XB[y],w=r[b],j=f[b]!==void 0?f[b]:d[b],_=ql(j),S=b===u?w.isActive:null;S===!1&&(v=y);let E=j===d[b]&&j!==f[b]&&_;if(E&&n&&e.manuallyAnimateOnMount&&(E=!1),w.protectedKeys={...g},!w.isActive&&S===null||!j&&!w.prevProp||Mf(j)||typeof j=="boolean")continue;let P=t8(w.prevProp,j)||b===u&&w.isActive&&!E&&_||y>v&&_,C=!1;const I=Array.isArray(j)?j:[j];let O=I.reduce(s,{});S===!1&&(O={});const{prevResolvedValues:$={}}=w,L={...$,...O},V=z=>{P=!0,m.has(z)&&(C=!0,m.delete(z)),w.needsAnimating[z]=!0};for(const z in L){const B=O[z],A=$[z];if(g.hasOwnProperty(z))continue;let R=!1;$d(B)&&$d(A)?R=!TP(B,A):R=B!==A,R?B!==void 0?V(z):m.add(z):B!==void 0&&m.has(z)?V(z):w.protectedKeys[z]=!0}w.prevProp=j,w.prevResolvedValues=O,w.isActive&&(g={...g,...O}),n&&e.blockInitialAnimation&&(P=!1),P&&(!E||C)&&h.push(...I.map(z=>({animation:z,options:{type:b,...c}})))}if(m.size){const y={};m.forEach(b=>{const w=e.getBaseTarget(b);w!==void 0&&(y[b]=w)}),h.push({animation:y})}let x=!!h.length;return n&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(h):Promise.resolve()}function l(c,u,f){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=a(f,c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>r}}function t8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!TP(t,e):!1}function Bs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r8(){return{animate:Bs(!0),whileInView:Bs(),whileHover:Bs(),whileTap:Bs(),whileDrag:Bs(),whileFocus:Bs(),exit:Bs()}}class n8 extends $s{constructor(t){super(t),t.animationState||(t.animationState=e8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Mf(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let s8=0;class o8 extends $s{constructor(){super(...arguments),this.id=s8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const i8={animation:{Feature:n8},exit:{Feature:o8}},yj=(e,t)=>Math.abs(e-t);function a8(e,t){const r=yj(e.x,t.x),n=yj(e.y,t.y);return Math.sqrt(r**2+n**2)}class a2{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Lp(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=a8(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=d,{timestamp:v}=kt;this.history.push({...g,timestamp:v});const{onStart:x,onMove:y}=this.handlers;h||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=$p(h,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Lp(d.type==="pointercancel"?this.lastMoveEventInfo:$p(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),g&&g(d,x)},!SP(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=zf(t),l=$p(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=kt;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=r;f&&f(t,Lp(l,this.history)),this.removeListeners=ws(On(this.contextWindow,"pointermove",this.handlePointerMove),On(this.contextWindow,"pointerup",this.handlePointerUp),On(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Un(this.updatePoint)}}function $p(e,t){return t?{point:t(e.point)}:e}function bj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Lp({point:e},t){return{point:e,delta:bj(e,l2(t)),offset:bj(e,l8(t)),velocity:c8(t,.1)}}function l8(e){return e[0]}function l2(e){return e[e.length-1]}function c8(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=l2(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>js(t)));)r--;if(!n)return{x:0,y:0};const o=Dn(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mr(e){return e.max-e.min}function Zg(e,t=0,r=.01){return Math.abs(e-t)<=r}function wj(e,t,r,n=.5){e.origin=n,e.originPoint=tt(t.min,t.max,e.origin),e.scale=mr(r)/mr(t),(Zg(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=tt(r.min,r.max,e.origin)-e.originPoint,(Zg(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ml(e,t,r,n){wj(e.x,t.x,r.x,n?n.originX:void 0),wj(e.y,t.y,r.y,n?n.originY:void 0)}function jj(e,t,r){e.min=r.min+t.min,e.max=e.min+mr(t)}function u8(e,t,r){jj(e.x,t.x,r.x),jj(e.y,t.y,r.y)}function _j(e,t,r){e.min=t.min-r.min,e.max=e.min+mr(t)}function gl(e,t,r){_j(e.x,t.x,r.x),_j(e.y,t.y,r.y)}function d8(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?tt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?tt(r,e,n.max):Math.min(e,r)),e}function Sj(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function f8(e,{top:t,left:r,bottom:n,right:s}){return{x:Sj(e.x,r,s),y:Sj(e.y,t,n)}}function Ej(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function h8(e,t){return{x:Ej(e.x,t.x),y:Ej(e.y,t.y)}}function p8(e,t){let r=.5;const n=mr(e),s=mr(t);return s>n?r=Hl(t.min,t.max-n,e.min):n>s&&(r=Hl(e.min,e.max-s,t.min)),Ps(0,1,r)}function m8(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const ev=.35;function g8(e=ev){return e===!1?e=0:e===!0&&(e=ev),{x:Nj(e,"left","right"),y:Nj(e,"top","bottom")}}function Nj(e,t,r){return{min:Cj(e,t),max:Cj(e,r)}}function Cj(e,t){return typeof e=="number"?e:e[t]||0}const Pj=()=>({translate:0,scale:1,origin:0,originPoint:0}),xi=()=>({x:Pj(),y:Pj()}),Tj=()=>({min:0,max:0}),at=()=>({x:Tj(),y:Tj()});function Sr(e){return[e("x"),e("y")]}function c2({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function v8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function x8(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Mp(e){return e===void 0||e===1}function tv({scale:e,scaleX:t,scaleY:r}){return!Mp(e)||!Mp(t)||!Mp(r)}function Hs(e){return tv(e)||u2(e)||e.z||e.rotate||e.rotateX||e.rotateY}function u2(e){return kj(e.x)||kj(e.y)}function kj(e){return e&&e!=="0%"}function zd(e,t,r){const n=e-r,s=t*n;return r+s}function Aj(e,t,r,n,s){return s!==void 0&&(e=zd(e,s,n)),zd(e,r,n)+t}function rv(e,t=0,r=1,n,s){e.min=Aj(e.min,t,r,n,s),e.max=Aj(e.max,t,r,n,s)}function d2(e,{x:t,y:r}){rv(e.x,t.translate,t.scale,t.originPoint),rv(e.y,r.translate,r.scale,r.originPoint)}function y8(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=r[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&yi(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,d2(e,a)),n&&Hs(o.latestValues)&&yi(e,o.latestValues))}t.x=Rj(t.x),t.y=Rj(t.y)}function Rj(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ss(e,t){e.min=e.min+t,e.max=e.max+t}function Ij(e,t,[r,n,s]){const o=t[s]!==void 0?t[s]:.5,a=tt(e.min,e.max,o);rv(e,t[r],t[n],a,t.scale)}const b8=["x","scaleX","originX"],w8=["y","scaleY","originY"];function yi(e,t){Ij(e.x,t,b8),Ij(e.y,t,w8)}function f2(e,t){return c2(x8(e.getBoundingClientRect(),t))}function j8(e,t,r){const n=f2(e,r),{scroll:s}=t;return s&&(ss(n.x,s.offset.x),ss(n.y,s.offset.y)),n}const h2=({current:e})=>e?e.ownerDocument.defaultView:null,_8=new WeakMap;class S8{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(zf(f,"page").point)},o=(f,d)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=NP(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sr(x=>{let y=this.getAxisMotionValue(x).get()||0;if(mn.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[x];w&&(y=mr(w)*(parseFloat(y)/100))}}this.originPoint[x]=y}),g&&Ue.update(()=>g(f,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=E8(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),v&&v(f,d)},l=(f,d)=>this.stop(f,d),c=()=>Sr(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new a2(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:h2(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ue.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!mu(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=d8(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&gi(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=f8(s.layoutBox,r):this.constraints=!1,this.elastic=g8(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Sr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=m8(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!gi(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=j8(n,s.root,this.visualElement.getTransformPagePoint());let a=h8(s.layout.layoutBox,o);if(r){const l=r(v8(a));this.hasMutatedConstraints=!!l,l&&(a=c2(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Sr(f=>{if(!mu(f,r,this.currentDirection))return;let d=c&&c[f]||{};a&&(d={min:0,max:0});const h=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:n?t[f]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(wy(t,n,0,r))}stopAnimation(){Sr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Sr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Sr(r=>{const{drag:n}=this.getProps();if(!mu(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];o.set(t[r]-tt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!gi(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Sr(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=p8({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Sr(a=>{if(!mu(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(tt(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;_8.set(this.visualElement,this);const t=this.visualElement.current,r=On(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();gi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=kn(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Sr(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=ev,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function mu(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function E8(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class N8 extends $s{constructor(t){super(t),this.removeGroupControls=ot,this.removeListeners=ot,this.controls=new S8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const Oj=e=>(t,r)=>{e&&Ue.update(()=>e(t,r))};class C8 extends $s{constructor(){super(...arguments),this.removePointerDownListener=ot}onPointerDown(t){this.session=new a2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Oj(t),onStart:Oj(r),onMove:n,onEnd:(o,a)=>{delete this.session,s&&Ue.update(()=>s(o,a))}}}mount(){this.removePointerDownListener=On(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P8(){const e=p.useContext($f);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=p.useId();return p.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const Zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dj(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ma={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(we.test(e))e=parseFloat(e);else return e;const r=Dj(e,t.target.x),n=Dj(e,t.target.y);return`${r}% ${n}%`}},T8={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Ts.parse(e);if(s.length>5)return n;const o=Ts.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=tt(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};class k8 extends J.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=t;L3(A8),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Ue.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function p2(e){const[t,r]=P8(),n=p.useContext(ay);return J.createElement(k8,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(cP),isPresent:t,safeToRemove:r})}const A8={borderRadius:{...Ma,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ma,borderTopRightRadius:Ma,borderBottomLeftRadius:Ma,borderBottomRightRadius:Ma,boxShadow:T8},m2=["TopLeft","TopRight","BottomLeft","BottomRight"],R8=m2.length,$j=e=>typeof e=="string"?parseFloat(e):e,Lj=e=>typeof e=="number"||we.test(e);function I8(e,t,r,n,s,o){s?(e.opacity=tt(0,r.opacity!==void 0?r.opacity:1,O8(n)),e.opacityExit=tt(t.opacity!==void 0?t.opacity:1,0,D8(n))):o&&(e.opacity=tt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<R8;a++){const l=`border${m2[a]}Radius`;let c=Mj(t,l),u=Mj(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Lj(c)===Lj(u)?(e[l]=Math.max(tt($j(c),$j(u),n),0),(mn.test(u)||mn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=tt(t.rotate||0,r.rotate||0,n))}function Mj(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const O8=g2(0,.5,MP),D8=g2(.5,.95,ot);function g2(e,t,r){return n=>n<e?0:n>t?1:r(Hl(e,t,n))}function Fj(e,t){e.min=t.min,e.max=t.max}function jr(e,t){Fj(e.x,t.x),Fj(e.y,t.y)}function Bj(e,t,r,n,s){return e-=t,e=zd(e,1/r,n),s!==void 0&&(e=zd(e,1/s,n)),e}function $8(e,t=0,r=1,n=.5,s,o=e,a=e){if(mn.test(t)&&(t=parseFloat(t),t=tt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=tt(o.min,o.max,n);e===o&&(l-=t),e.min=Bj(e.min,t,r,l,s),e.max=Bj(e.max,t,r,l,s)}function zj(e,t,[r,n,s],o,a){$8(e,t[r],t[n],t[s],t.scale,o,a)}const L8=["x","scaleX","originX"],M8=["y","scaleY","originY"];function Uj(e,t,r,n){zj(e.x,t,L8,r?r.x:void 0,n?n.x:void 0),zj(e.y,t,M8,r?r.y:void 0,n?n.y:void 0)}function Vj(e){return e.translate===0&&e.scale===1}function v2(e){return Vj(e.x)&&Vj(e.y)}function F8(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function x2(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function qj(e){return mr(e.x)/mr(e.y)}class B8{constructor(){this.members=[]}add(t){jy(this.members,t),t.scheduleRender()}remove(t){if(_y(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wj(e,t,r){let n="";const s=e.x.translate/t.x,o=e.y.translate/t.y;if((s||o)&&(n=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:f}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),f&&(n+=`rotateY(${f}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const z8=(e,t)=>e.depth-t.depth;class U8{constructor(){this.children=[],this.isDirty=!1}add(t){jy(this.children,t),this.isDirty=!0}remove(t){_y(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(z8),this.isDirty=!1,this.children.forEach(t)}}function V8(e,t){const r=performance.now(),n=({timestamp:s})=>{const o=s-r;o>=t&&(Un(n),e(o-t))};return Ue.read(n,!0),()=>Un(n)}function q8(e){window.MotionDebug&&window.MotionDebug.record(e)}function W8(e){return e instanceof SVGElement&&e.tagName!=="svg"}function H8(e,t,r){const n=er(e)?e:qi(e);return n.start(wy("",n,t,r)),n.animation}const Hj=["","X","Y","Z"],G8={visibility:"hidden"},Gj=1e3;let K8=0;const Gs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function y2({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=K8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gs.totalNodes=Gs.resolvedTargetDeltas=Gs.recalculatedProjection=0,this.nodes.forEach(X8),this.nodes.forEach(rz),this.nodes.forEach(nz),this.nodes.forEach(Q8),q8(Gs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new U8)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Sy),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=W8(a),this.instance=a;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=V8(h,250),Zu.hasAnimatedSinceResize&&(Zu.hasAnimatedSinceResize=!1,this.nodes.forEach(Yj))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||lz,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=f.getProps(),b=!this.targetLayout||!x2(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const j={...by(v,"layout"),onPlay:x,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else h||Yj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Un(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kj);return}this.isUpdating||this.nodes.forEach(ez),this.isUpdating=!1,this.nodes.forEach(tz),this.nodes.forEach(Y8),this.nodes.forEach(J8),this.clearAllSnapshots();const l=performance.now();kt.delta=Ps(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,Pp.update.process(kt),Pp.preRender.process(kt),Pp.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Z8),this.sharedNodes.forEach(oz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!v2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(l||Hs(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),cz(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return at();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(ss(l.x,c.offset.x),ss(l.y,c.offset.y)),l}removeElementScroll(a){const l=at();jr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){jr(l,a);const{scroll:h}=this.root;h&&(ss(l.x,-h.offset.x),ss(l.y,-h.offset.y))}ss(l.x,f.offset.x),ss(l.y,f.offset.y)}}return l}applyTransform(a,l=!1){const c=at();jr(c,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&yi(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Hs(f.latestValues)&&yi(c,f.latestValues)}return Hs(this.latestValues)&&yi(c,this.latestValues),c}removeTransform(a){const l=at();jr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Hs(u.latestValues))continue;tv(u.latestValues)&&u.updateSnapshot();const f=at(),d=u.measurePageBox();jr(f,d),Uj(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Hs(this.latestValues)&&Uj(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),gl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jr(this.target,this.layout.layoutBox),d2(this.target,this.targetDelta)):jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),gl(this.relativeTargetOrigin,this.target,m.target),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tv(this.parent.latestValues)||u2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;jr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;y8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=xi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=xi(),this.projectionDeltaWithTransform=xi());const v=this.projectionTransform;ml(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Wj(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Gs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},d=xi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=at(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,x=this.getStack(),y=!x||x.members.length<=1,b=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(az));this.animationProgress=0;let w;this.mixTargetDelta=j=>{const _=j/1e3;Jj(d.x,a.x,_),Jj(d.y,a.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gl(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iz(this.relativeTarget,this.relativeTargetOrigin,h,_),w&&F8(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=at()),jr(w,this.relativeTarget)),v&&(this.animationValues=f,I8(f,u,this.latestValues,_,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Un(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{Zu.hasAnimatedSinceResize=!0,this.currentAnimation=H8(0,Gj,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&b2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||at();const d=mr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+d;const h=mr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}jr(l,c),yi(l,f),ml(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new B8),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let f=0;f<Hj.length;f++){const d="rotate"+Hj[f];c[d]&&(u[d]=c[d],a.setStaticValue(d,0))}a.render();for(const f in u)a.setStaticValue(f,u[f]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return G8;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Qu(a==null?void 0:a.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Qu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Hs(this.latestValues)&&(v.transform=f?f({},""):"none",this.hasProjected=!1),v}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Wj(this.projectionDeltaWithTransform,this.treeScale,h),f&&(u.transform=f(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Od){if(h[v]===void 0)continue;const{correct:x,applyTo:y}=Od[v],b=u.transform==="none"?h[v]:x(h[v],d);if(y){const w=y.length;for(let j=0;j<w;j++)u[y[j]]=b}else u[v]=b}return this.options.layoutId&&(u.pointerEvents=d===this?Qu(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Kj),this.root.sharedNodes.clear()}}}function Y8(e){e.updateLayout()}function J8(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:o}=e.options,a=r.source!==e.layout.source;o==="size"?Sr(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],m=mr(h);h.min=n[d].min,h.max=h.min+m}):b2(o,r.layoutBox,n)&&Sr(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],m=mr(n[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const l=xi();ml(l,n,r.layoutBox);const c=xi();a?ml(c,e.applyTransform(s,!0),r.measuredBox):ml(c,n,r.layoutBox);const u=!v2(l);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=at();gl(g,r.layoutBox,h.layoutBox);const v=at();gl(v,n,m.layoutBox),x2(g,v)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function X8(e){Gs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Q8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Z8(e){e.clearSnapshot()}function Kj(e){e.clearMeasurements()}function ez(e){e.isLayoutDirty=!1}function tz(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Yj(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rz(e){e.resolveTargetDelta()}function nz(e){e.calcProjection()}function sz(e){e.resetRotation()}function oz(e){e.removeLeadSnapshot()}function Jj(e,t,r){e.translate=tt(t.translate,0,r),e.scale=tt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Xj(e,t,r,n){e.min=tt(t.min,r.min,n),e.max=tt(t.max,r.max,n)}function iz(e,t,r,n){Xj(e.x,t.x,r.x,n),Xj(e.y,t.y,r.y,n)}function az(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const lz={duration:.45,ease:[.4,0,.1,1]},Qj=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Zj=Qj("applewebkit/")&&!Qj("chrome/")?Math.round:ot;function e_(e){e.min=Zj(e.min),e.max=Zj(e.max)}function cz(e){e_(e.x),e_(e.y)}function b2(e,t,r){return e==="position"||e==="preserve-aspect"&&!Zg(qj(t),qj(r),.2)}const uz=y2({attachResizeListener:(e,t)=>kn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fp={current:void 0},w2=y2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Fp.current){const e=new uz({});e.mount(window),e.setOptions({layoutScroll:!0}),Fp.current=e}return Fp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),dz={pan:{Feature:C8},drag:{Feature:N8,ProjectionNode:w2,MeasureLayout:p2}},fz=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function hz(e){const t=fz.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function nv(e,t,r=1){const[n,s]=hz(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return n2(a)?parseFloat(a):a}else return Hg(s)?nv(s,t,r+1):s}function pz(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const o=s.get();if(!Hg(o))return;const a=nv(o,n);a&&s.set(a)});for(const s in t){const o=t[s];if(!Hg(o))continue;const a=nv(o,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=o))}return{target:t,transitionEnd:r}}const mz=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),j2=e=>mz.has(e),gz=e=>Object.keys(e).some(j2),t_=e=>e===Oo||e===we,r_=(e,t)=>parseFloat(e.split(", ")[t]),n_=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return r_(s[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?r_(o[1],e):0}},vz=new Set(["x","y","z"]),xz=_c.filter(e=>!vz.has(e));function yz(e){const t=[];return xz.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Wi={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:n_(4,13),y:n_(5,14)};Wi.translateX=Wi.x;Wi.translateY=Wi.y;const bz=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Wi[u](n,o)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const f=t.getValue(u);f&&f.jump(l[u]),e[u]=Wi[u](c,o)}),e},wz=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(j2);let o=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let f=r[c],d=La(f);const h=t[c];let m;if($d(h)){const g=h.length,v=h[0]===null?1:0;f=h[v],d=La(f);for(let x=v;x<g&&h[x]!==null;x++)m?my(La(h[x])===m):m=La(h[x])}else m=La(h);if(d!==m)if(t_(d)&&t_(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&m===we&&(t[c]=h.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(f===0||h===0)?f===0?u.set(m.transform(f)):t[c]=d.transform(h):(a||(o=yz(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=bz(t,e,l);return o.length&&o.forEach(([f,d])=>{e.getValue(f).set(d)}),e.render(),Lf&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function jz(e,t,r,n){return gz(t)?wz(e,t,r,n):{target:t,transitionEnd:n}}const _z=(e,t,r,n)=>{const s=pz(e,t,n);return t=s.target,n=s.transitionEnd,jz(e,t,r,n)},sv={current:null},_2={current:!1};function Sz(){if(_2.current=!0,!!Lf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sv.current=e.matches;e.addListener(t),t()}else sv.current=!1}function Ez(e,t,r){const{willChange:n}=t;for(const s in t){const o=t[s],a=r[s];if(er(o))e.addValue(s,o),Bd(n)&&n.add(s);else if(er(a))e.addValue(s,qi(o,{owner:e})),Bd(n)&&n.remove(s);else if(a!==o)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(s);e.addValue(s,qi(l!==void 0?l:o,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const s_=new WeakMap,S2=Object.keys(Wl),Nz=S2.length,o_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Cz=iy.length;class Pz{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ue.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=Ff(r),this.isVariantNode=lP(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{});for(const d in f){const h=f[d];l[d]!==void 0&&er(h)&&(h.set(l[d],!1),Bd(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,s_.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),_2.current||Sz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){s_.delete(this.current),this.projection&&this.projection.unmount(),Un(this.notifyUpdate),Un(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Io.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ue.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,o){let a,l;for(let c=0;c<Nz;c++){const u=S2[c],{isEnabled:f,Feature:d,ProjectionNode:h,MeasureLayout:m}=Wl[u];h&&(a=h),f(r)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:f,dragConstraints:d,layoutScroll:h,layoutRoot:m}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!f||d&&gi(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<o_.length;n++){const s=o_[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Ez(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Cz;n++){const s=iy[n],o=this.props[s];(ql(o)||o===!1)&&(r[s]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=qi(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=py(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!er(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Sy),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class E2 extends Pz{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},o){let a=WB(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),o){VB(this,n,a);const l=_z(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function Tz(e){return window.getComputedStyle(e)}class kz extends E2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Io.has(r)){const n=yy(r);return n&&n.default||0}else{const n=Tz(t),s=(fP(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return f2(t,r)}build(t,r,n,s){cy(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return hy(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;er(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){xP(t,r,n,s)}}class Az extends E2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Io.has(r)){const n=yy(r);return n&&n.default||0}return r=yP.has(r)?r:sy(r),t.getAttribute(r)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(t,r){return wP(t,r)}build(t,r,n,s){dy(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){bP(t,r,n,s)}mount(t){this.isSVGTag=fy(t.tagName),super.mount(t)}}const Rz=(e,t)=>ly(e)?new Az(t,{enableHardwareAcceleration:!1}):new kz(t,{enableHardwareAcceleration:!0}),Iz={layout:{ProjectionNode:w2,MeasureLayout:p2}},Oz={...i8,...NF,...dz,...Iz},ie=D3((e,t)=>hF(e,t,Oz,Rz));function N2(){const e=p.useRef(!1);return ny(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Dz(){const e=N2(),[t,r]=p.useState(0),n=p.useCallback(()=>{e.current&&r(t+1)},[t]);return[p.useCallback(()=>Ue.postRender(n),[n]),t]}class $z extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Lz({children:e,isPresent:t}){const r=p.useId(),n=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(t||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.createElement($z,{isPresent:t,childRef:n,sizeRef:s},p.cloneElement(e,{ref:n}))}const Bp=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=jP(Mz),c=p.useId(),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:f=>{l.set(f,!0);for(const d of l.values())if(!d)return;n&&n()},register:f=>(l.set(f,!1),()=>l.delete(f))}),o?void 0:[r]);return p.useMemo(()=>{l.forEach((f,d)=>l.set(d,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=p.createElement(Lz,{isPresent:r},e)),p.createElement($f.Provider,{value:u},e)};function Mz(){return new Map}function Fz(e){return p.useEffect(()=>()=>e(),[])}const Ks=e=>e.key||"";function Bz(e,t){e.forEach(r=>{const n=Ks(r);t.set(n,r)})}function zz(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const bo=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=p.useContext(ay).forceRender||Dz()[0],c=N2(),u=zz(e);let f=u;const d=p.useRef(new Map).current,h=p.useRef(f),m=p.useRef(new Map).current,g=p.useRef(!0);if(ny(()=>{g.current=!1,Bz(u,m),h.current=f}),Fz(()=>{g.current=!0,m.clear(),d.clear()}),g.current)return p.createElement(p.Fragment,null,f.map(b=>p.createElement(Bp,{key:Ks(b),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:a},b)));f=[...f];const v=h.current.map(Ks),x=u.map(Ks),y=v.length;for(let b=0;b<y;b++){const w=v[b];x.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return a==="wait"&&d.size&&(f=[]),d.forEach((b,w)=>{if(x.indexOf(w)!==-1)return;const j=m.get(w);if(!j)return;const _=v.indexOf(w);let S=b;if(!S){const E=()=>{d.delete(w);const N=Array.from(m.keys()).filter(P=>!x.includes(P));if(N.forEach(P=>m.delete(P)),h.current=u.filter(P=>{const C=Ks(P);return C===w||N.includes(C)}),!d.size){if(c.current===!1)return;l(),n&&n()}};S=p.createElement(Bp,{key:Ks(j),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:o,mode:a},j),d.set(w,S)}f.splice(_,0,S)}),f=f.map(b=>{const w=b.key;return d.has(w)?b:p.createElement(Bp,{key:Ks(b),isPresent:!0,presenceAffectsLayout:o,mode:a},b)}),p.createElement(p.Fragment,null,d.size?f:f.map(b=>p.cloneElement(b)))},Ey=kf("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=J.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?r6:"button";return i.jsx(a,{className:pe(Ey({variant:t,size:r,className:e})),ref:o,...s})});H.displayName="Button";var Uz=p.createContext(void 0);function C2(e){const t=p.useContext(Uz);return e||t||"ltr"}var zp=0;function Ny(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??i_()),document.body.insertAdjacentElement("beforeend",e[1]??i_()),zp++,()=>{zp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),zp--}},[])}function i_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Up="focusScope.autoFocusOnMount",Vp="focusScope.autoFocusOnUnmount",a_={bubbles:!1,cancelable:!0},Vz="FocusScope",Vf=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=pr(s),f=pr(o),d=p.useRef(null),h=Fe(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:es(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||es(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&es(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){c_.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(Up,a_);l.addEventListener(Up,u),l.dispatchEvent(y),y.defaultPrevented||(qz(Yz(P2(l)),{select:!0}),document.activeElement===v&&es(l))}return()=>{l.removeEventListener(Up,u),setTimeout(()=>{const y=new CustomEvent(Vp,a_);l.addEventListener(Vp,f),l.dispatchEvent(y),y.defaultPrevented||es(v??document.body,{select:!0}),l.removeEventListener(Vp,f),c_.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,j]=Wz(b);w&&j?!v.shiftKey&&y===j?(v.preventDefault(),r&&es(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),r&&es(j,{select:!0})):y===b&&v.preventDefault()}},[r,n,m.paused]);return i.jsx(Ae.div,{tabIndex:-1,...a,ref:h,onKeyDown:g})});Vf.displayName=Vz;function qz(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(es(n,{select:t}),document.activeElement!==r)return}function Wz(e){const t=P2(e),r=l_(t,e),n=l_(t.reverse(),e);return[r,n]}function P2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function l_(e,t){for(const r of e)if(!Hz(r,{upTo:t}))return r}function Hz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Gz(e){return e instanceof HTMLInputElement&&"select"in e}function es(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Gz(e)&&t&&e.select()}}var c_=Kz();function Kz(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=u_(e,t),e.unshift(t)},remove(t){var r;e=u_(e,t),(r=e[0])==null||r.resume()}}}function u_(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Yz(e){return e.filter(t=>t.tagName!=="A")}var Jz=fc[" useId ".trim().toString()]||(()=>{}),Xz=0;function ho(e){const[t,r]=p.useState(Jz());return zn(()=>{e||r(n=>n??String(Xz++))},[e]),e||(t?`radix-${t}`:"")}const Qz=["top","right","bottom","left"],ks=Math.min,sr=Math.max,Ud=Math.round,gu=Math.floor,gn=e=>({x:e,y:e}),Zz={left:"right",right:"left",bottom:"top",top:"bottom"},eU={start:"end",end:"start"};function ov(e,t,r){return sr(e,ks(t,r))}function Vn(e,t){return typeof e=="function"?e(t):e}function qn(e){return e.split("-")[0]}function oa(e){return e.split("-")[1]}function Cy(e){return e==="x"?"y":"x"}function Py(e){return e==="y"?"height":"width"}const tU=new Set(["top","bottom"]);function dn(e){return tU.has(qn(e))?"y":"x"}function Ty(e){return Cy(dn(e))}function rU(e,t,r){r===void 0&&(r=!1);const n=oa(e),s=Ty(e),o=Py(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Vd(a)),[a,Vd(a)]}function nU(e){const t=Vd(e);return[iv(e),t,iv(t)]}function iv(e){return e.replace(/start|end/g,t=>eU[t])}const d_=["left","right"],f_=["right","left"],sU=["top","bottom"],oU=["bottom","top"];function iU(e,t,r){switch(e){case"top":case"bottom":return r?t?f_:d_:t?d_:f_;case"left":case"right":return t?sU:oU;default:return[]}}function aU(e,t,r,n){const s=oa(e);let o=iU(qn(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(iv)))),o}function Vd(e){return e.replace(/left|right|bottom|top/g,t=>Zz[t])}function lU(e){return{top:0,right:0,bottom:0,left:0,...e}}function T2(e){return typeof e!="number"?lU(e):{top:e,right:e,bottom:e,left:e}}function qd(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function h_(e,t,r){let{reference:n,floating:s}=e;const o=dn(t),a=Ty(t),l=Py(a),c=qn(t),u=o==="y",f=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:f,y:n.y-s.height};break;case"bottom":m={x:f,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-s.width,y:d};break;default:m={x:n.x,y:n.y}}switch(oa(t)){case"start":m[a]-=h*(r&&u?-1:1);break;case"end":m[a]+=h*(r&&u?-1:1);break}return m}const cU=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:d}=h_(u,n,c),h=n,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:w,data:j,reset:_}=await y({x:f,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:e,floating:t}});f=b??f,d=w??d,m={...m,[x]:{...m[x],...j}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:f,y:d}=h_(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:s,middlewareData:m}};async function Gl(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Vn(t,e),g=T2(m),x=l[h?d==="floating"?"reference":"floating":d],y=qd(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=d==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},_=qd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-_.top+g.top)/j.y,bottom:(_.bottom-y.bottom+g.bottom)/j.y,left:(y.left-_.left+g.left)/j.x,right:(_.right-y.right+g.right)/j.x}}const uU=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Vn(e,t)||{};if(u==null)return{};const d=T2(f),h={x:r,y:n},m=Ty(s),g=Py(m),v=await a.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",j=o.reference[g]+o.reference[m]-h[m]-o.floating[g],_=h[m]-o.reference[m],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let E=S?S[w]:0;(!E||!await(a.isElement==null?void 0:a.isElement(S)))&&(E=l.floating[w]||o.floating[g]);const N=j/2-_/2,P=E/2-v[g]/2-1,C=ks(d[y],P),I=ks(d[b],P),O=C,$=E-v[g]-I,L=E/2-v[g]/2+N,V=ov(O,L,$),z=!c.arrow&&oa(s)!=null&&L!==V&&o.reference[g]/2-(L<O?C:I)-v[g]/2<0,B=z?L<O?L-O:L-$:0;return{[m]:h[m]+B,data:{[m]:V,centerOffset:L-V-B,...z&&{alignmentOffset:B}},reset:z}}}),dU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=Vn(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=qn(s),b=dn(l),w=qn(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=h||(w||!v?[Vd(l)]:nU(l)),S=g!=="none";!h&&S&&_.push(...aU(l,v,g,j));const E=[l,..._],N=await Gl(t,x),P=[];let C=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&P.push(N[y]),d){const L=rU(s,a,j);P.push(N[L[0]],N[L[1]])}if(C=[...C,{placement:s,overflows:P}],!P.every(L=>L<=0)){var I,O;const L=(((I=o.flip)==null?void 0:I.index)||0)+1,V=E[L];if(V&&(!(d==="alignment"?b!==dn(V):!1)||C.every(A=>dn(A.placement)===b?A.overflows[0]>0:!0)))return{data:{index:L,overflows:C},reset:{placement:V}};let z=(O=C.filter(B=>B.overflows[0]<=0).sort((B,A)=>B.overflows[1]-A.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(m){case"bestFit":{var $;const B=($=C.filter(A=>{if(S){const R=dn(A.placement);return R===b||R==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(R=>R>0).reduce((R,D)=>R+D,0)]).sort((A,R)=>A[1]-R[1])[0])==null?void 0:$[0];B&&(z=B);break}case"initialPlacement":z=l;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function p_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function m_(e){return Qz.some(t=>e[t]>=0)}const fU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Vn(e,t);switch(n){case"referenceHidden":{const o=await Gl(t,{...s,elementContext:"reference"}),a=p_(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:m_(a)}}}case"escaped":{const o=await Gl(t,{...s,altBoundary:!0}),a=p_(o,r.floating);return{data:{escapedOffsets:a,escaped:m_(a)}}}default:return{}}}}},k2=new Set(["left","top"]);async function hU(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=qn(r),l=oa(r),c=dn(r)==="y",u=k2.has(a)?-1:1,f=o&&c?-1:1,d=Vn(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const pU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await hU(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},mU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=Vn(e,t),u={x:r,y:n},f=await Gl(t,c),d=dn(qn(s)),h=Cy(d);let m=u[h],g=u[d];if(o){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+f[x],w=m-f[y];m=ov(b,m,w)}if(a){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+f[x],w=g-f[y];g=ov(b,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[d]:a}}}}}},gU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Vn(e,t),f={x:r,y:n},d=dn(s),h=Cy(d);let m=f[h],g=f[d];const v=Vn(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",j=o.reference[h]-o.floating[w]+x.mainAxis,_=o.reference[h]+o.reference[w]-x.mainAxis;m<j?m=j:m>_&&(m=_)}if(u){var y,b;const w=h==="y"?"width":"height",j=k2.has(qn(s)),_=o.reference[d]-o.floating[w]+(j&&((y=a.offset)==null?void 0:y[d])||0)+(j?0:x.crossAxis),S=o.reference[d]+o.reference[w]+(j?0:((b=a.offset)==null?void 0:b[d])||0)-(j?x.crossAxis:0);g<_?g=_:g>S&&(g=S)}return{[h]:m,[d]:g}}}},vU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Vn(e,t),f=await Gl(t,u),d=qn(s),h=oa(s),m=dn(s)==="y",{width:g,height:v}=o.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const b=v-f.top-f.bottom,w=g-f.left-f.right,j=ks(v-f[x],b),_=ks(g-f[y],w),S=!t.middlewareData.shift;let E=j,N=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(N=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=b),S&&!h){const C=sr(f.left,0),I=sr(f.right,0),O=sr(f.top,0),$=sr(f.bottom,0);m?N=g-2*(C!==0||I!==0?C+I:sr(f.left,f.right)):E=v-2*(O!==0||$!==0?O+$:sr(f.top,f.bottom))}await c({...t,availableWidth:N,availableHeight:E});const P=await a.getDimensions(l.floating);return g!==P.width||v!==P.height?{reset:{rects:!0}}:{}}}};function qf(){return typeof window<"u"}function ia(e){return A2(e)?(e.nodeName||"").toLowerCase():"#document"}function ur(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xn(e){var t;return(t=(A2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function A2(e){return qf()?e instanceof Node||e instanceof ur(e).Node:!1}function en(e){return qf()?e instanceof Element||e instanceof ur(e).Element:!1}function vn(e){return qf()?e instanceof HTMLElement||e instanceof ur(e).HTMLElement:!1}function g_(e){return!qf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ur(e).ShadowRoot}const xU=new Set(["inline","contents"]);function Cc(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=tn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!xU.has(s)}const yU=new Set(["table","td","th"]);function bU(e){return yU.has(ia(e))}const wU=[":popover-open",":modal"];function Wf(e){return wU.some(t=>{try{return e.matches(t)}catch{return!1}})}const jU=["transform","translate","scale","rotate","perspective"],_U=["transform","translate","scale","rotate","perspective","filter"],SU=["paint","layout","strict","content"];function ky(e){const t=Ay(),r=en(e)?tn(e):e;return jU.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||_U.some(n=>(r.willChange||"").includes(n))||SU.some(n=>(r.contain||"").includes(n))}function EU(e){let t=As(e);for(;vn(t)&&!Hi(t);){if(ky(t))return t;if(Wf(t))return null;t=As(t)}return null}function Ay(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NU=new Set(["html","body","#document"]);function Hi(e){return NU.has(ia(e))}function tn(e){return ur(e).getComputedStyle(e)}function Hf(e){return en(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function As(e){if(ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||g_(e)&&e.host||xn(e);return g_(t)?t.host:t}function R2(e){const t=As(e);return Hi(t)?e.ownerDocument?e.ownerDocument.body:e.body:vn(t)&&Cc(t)?t:R2(t)}function Kl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=R2(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=ur(s);if(o){const l=av(a);return t.concat(a,a.visualViewport||[],Cc(s)?s:[],l&&r?Kl(l):[])}return t.concat(s,Kl(s,[],r))}function av(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function I2(e){const t=tn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=vn(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Ud(r)!==o||Ud(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function Ry(e){return en(e)?e:e.contextElement}function Pi(e){const t=Ry(e);if(!vn(t))return gn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=I2(t);let a=(o?Ud(r.width):r.width)/n,l=(o?Ud(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const CU=gn(0);function O2(e){const t=ur(e);return!Ay()||!t.visualViewport?CU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PU(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ur(e)?!1:t}function wo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Ry(e);let a=gn(1);t&&(n?en(n)&&(a=Pi(n)):a=Pi(e));const l=PU(o,r,n)?O2(o):gn(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,d=s.height/a.y;if(o){const h=ur(o),m=n&&en(n)?ur(n):n;let g=h,v=av(g);for(;v&&n&&m!==g;){const x=Pi(v),y=v.getBoundingClientRect(),b=tn(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,j=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=j,g=ur(v),v=av(g)}}return qd({width:f,height:d,x:c,y:u})}function Gf(e,t){const r=Hf(e).scrollLeft;return t?t.left+r:wo(xn(e)).left+r}function D2(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-Gf(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function TU(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=xn(n),l=t?Wf(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=gn(1);const f=gn(0),d=vn(n);if((d||!d&&!o)&&((ia(n)!=="body"||Cc(a))&&(c=Hf(n)),vn(n))){const m=wo(n);u=Pi(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}const h=a&&!d&&!o?D2(a,c):gn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:r.y*u.y-c.scrollTop*u.y+f.y+h.y}}function kU(e){return Array.from(e.getClientRects())}function AU(e){const t=xn(e),r=Hf(e),n=e.ownerDocument.body,s=sr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=sr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Gf(e);const l=-r.scrollTop;return tn(n).direction==="rtl"&&(a+=sr(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}const v_=25;function RU(e,t){const r=ur(e),n=xn(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const f=Ay();(!f||f&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=Gf(n);if(u<=0){const f=n.ownerDocument,d=f.body,h=getComputedStyle(d),m=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(n.clientWidth-d.clientWidth-m);g<=v_&&(o-=g)}else u<=v_&&(o+=u);return{width:o,height:a,x:l,y:c}}const IU=new Set(["absolute","fixed"]);function OU(e,t){const r=wo(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=vn(e)?Pi(e):gn(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:a,height:l,x:c,y:u}}function x_(e,t,r){let n;if(t==="viewport")n=RU(e,r);else if(t==="document")n=AU(xn(e));else if(en(t))n=OU(t,r);else{const s=O2(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return qd(n)}function $2(e,t){const r=As(e);return r===t||!en(r)||Hi(r)?!1:tn(r).position==="fixed"||$2(r,t)}function DU(e,t){const r=t.get(e);if(r)return r;let n=Kl(e,[],!1).filter(l=>en(l)&&ia(l)!=="body"),s=null;const o=tn(e).position==="fixed";let a=o?As(e):e;for(;en(a)&&!Hi(a);){const l=tn(a),c=ky(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&IU.has(s.position)||Cc(a)&&!c&&$2(e,a))?n=n.filter(f=>f!==a):s=l,a=As(a)}return t.set(e,n),n}function $U(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?Wf(t)?[]:DU(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,f)=>{const d=x_(t,f,s);return u.top=sr(d.top,u.top),u.right=ks(d.right,u.right),u.bottom=ks(d.bottom,u.bottom),u.left=sr(d.left,u.left),u},x_(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LU(e){const{width:t,height:r}=I2(e);return{width:t,height:r}}function MU(e,t,r){const n=vn(t),s=xn(t),o=r==="fixed",a=wo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=gn(0);function u(){c.x=Gf(s)}if(n||!n&&!o)if((ia(t)!=="body"||Cc(s))&&(l=Hf(t)),n){const m=wo(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();o&&!n&&s&&u();const f=s&&!n&&!o?D2(s,l):gn(0),d=a.left+l.scrollLeft-c.x-f.x,h=a.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:a.width,height:a.height}}function qp(e){return tn(e).position==="static"}function y_(e,t){if(!vn(e)||tn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return xn(e)===r&&(r=r.ownerDocument.body),r}function L2(e,t){const r=ur(e);if(Wf(e))return r;if(!vn(e)){let s=As(e);for(;s&&!Hi(s);){if(en(s)&&!qp(s))return s;s=As(s)}return r}let n=y_(e,t);for(;n&&bU(n)&&qp(n);)n=y_(n,t);return n&&Hi(n)&&qp(n)&&!ky(n)?r:n||EU(e)||r}const FU=async function(e){const t=this.getOffsetParent||L2,r=this.getDimensions,n=await r(e.floating);return{reference:MU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BU(e){return tn(e).direction==="rtl"}const zU={convertOffsetParentRelativeRectToViewportRelativeRect:TU,getDocumentElement:xn,getClippingRect:$U,getOffsetParent:L2,getElementRects:FU,getClientRects:kU,getDimensions:LU,getScale:Pi,isElement:en,isRTL:BU};function M2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function UU(e,t){let r=null,n;const s=xn(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=gu(d),v=gu(s.clientWidth-(f+h)),x=gu(s.clientHeight-(d+m)),y=gu(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:sr(0,ks(1,c))||1};let j=!0;function _(S){const E=S[0].intersectionRatio;if(E!==c){if(!j)return a();E?a(!1,E):n=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!M2(u,e.getBoundingClientRect())&&a(),j=!1}try{r=new IntersectionObserver(_,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(_,w)}r.observe(e)}return a(!0),o}function F2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ry(e),f=s||o?[...u?Kl(u):[],...Kl(t)]:[];f.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const d=u&&l?UU(u,r):null;let h=-1,m=null;a&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?wo(e):null;c&&x();function x(){const y=wo(e);v&&!M2(v,y)&&r(),v=y,g=requestAnimationFrame(x)}return r(),()=>{var y;f.forEach(b=>{s&&b.removeEventListener("scroll",r),o&&b.removeEventListener("resize",r)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const VU=pU,qU=mU,WU=dU,HU=vU,GU=fU,b_=uU,KU=gU,YU=(e,t,r)=>{const n=new Map,s={platform:zU,...r},o={...s.platform,_c:n};return cU(e,t,{...s,platform:o})};var JU=typeof document<"u",XU=function(){},ed=JU?p.useLayoutEffect:XU;function Wd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Wd(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Wd(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function B2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function w_(e,t){const r=B2(e);return Math.round(t*r)/r}function Wp(e){const t=p.useRef(e);return ed(()=>{t.current=e}),t}function z2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(n);Wd(h,n)||m(n);const[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useCallback(A=>{A!==S.current&&(S.current=A,v(A))},[]),w=p.useCallback(A=>{A!==E.current&&(E.current=A,y(A))},[]),j=o||g,_=a||x,S=p.useRef(null),E=p.useRef(null),N=p.useRef(f),P=c!=null,C=Wp(c),I=Wp(s),O=Wp(u),$=p.useCallback(()=>{if(!S.current||!E.current)return;const A={placement:t,strategy:r,middleware:h};I.current&&(A.platform=I.current),YU(S.current,E.current,A).then(R=>{const D={...R,isPositioned:O.current!==!1};L.current&&!Wd(N.current,D)&&(N.current=D,xr.flushSync(()=>{d(D)}))})},[h,t,r,I,O]);ed(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(A=>({...A,isPositioned:!1})))},[u]);const L=p.useRef(!1);ed(()=>(L.current=!0,()=>{L.current=!1}),[]),ed(()=>{if(j&&(S.current=j),_&&(E.current=_),j&&_){if(C.current)return C.current(j,_,$);$()}},[j,_,$,C,P]);const V=p.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:w}),[b,w]),z=p.useMemo(()=>({reference:j,floating:_}),[j,_]),B=p.useMemo(()=>{const A={position:r,left:0,top:0};if(!z.floating)return A;const R=w_(z.floating,f.x),D=w_(z.floating,f.y);return l?{...A,transform:"translate("+R+"px, "+D+"px)",...B2(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:D}},[r,l,z.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:$,refs:V,elements:z,floatingStyles:B}),[f,$,V,z,B])}const QU=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?b_({element:n.current,padding:s}).fn(r):{}:n?b_({element:n,padding:s}).fn(r):{}}}},U2=(e,t)=>({...VU(e),options:[e,t]}),V2=(e,t)=>({...qU(e),options:[e,t]}),q2=(e,t)=>({...KU(e),options:[e,t]}),W2=(e,t)=>({...WU(e),options:[e,t]}),H2=(e,t)=>({...HU(e),options:[e,t]}),G2=(e,t)=>({...GU(e),options:[e,t]}),K2=(e,t)=>({...QU(e),options:[e,t]});var ZU="Arrow",Y2=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(Ae.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Y2.displayName=ZU;var eV=Y2;function Iy(e){const[t,r]=p.useState(void 0);return zn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Oy="Popper",[J2,Kf]=rn(Oy),[tV,X2]=J2(Oy),Q2=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return i.jsx(tV,{scope:t,anchor:n,onAnchorChange:s,children:r})};Q2.displayName=Oy;var Z2="PopperAnchor",eT=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=X2(Z2,r),a=p.useRef(null),l=Fe(t,a),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||a.current,u!==c.current&&o.onAnchorChange(c.current)}),n?null:i.jsx(Ae.div,{...s,ref:l})});eT.displayName=Z2;var Dy="PopperContent",[rV,nV]=J2(Dy),tT=p.forwardRef((e,t)=>{var ne,ue,Y,U,Z,ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=X2(Dy,r),[y,b]=p.useState(null),w=Fe(t,_e=>b(_e)),[j,_]=p.useState(null),S=Iy(j),E=(S==null?void 0:S.width)??0,N=(S==null?void 0:S.height)??0,P=n+(o!=="center"?"-"+o:""),C=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},I=Array.isArray(u)?u:[u],O=I.length>0,$={padding:C,boundary:I.filter(oV),altBoundary:O},{refs:L,floatingStyles:V,placement:z,isPositioned:B,middlewareData:A}=z2({strategy:"fixed",placement:P,whileElementsMounted:(..._e)=>F2(..._e,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[U2({mainAxis:s+N,alignmentAxis:a}),c&&V2({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?q2():void 0,...$}),c&&W2({...$}),H2({...$,apply:({elements:_e,rects:Te,availableWidth:dt,availableHeight:on})=>{const{width:bn,height:wa}=Te.reference,Yn=_e.floating.style;Yn.setProperty("--radix-popper-available-width",`${dt}px`),Yn.setProperty("--radix-popper-available-height",`${on}px`),Yn.setProperty("--radix-popper-anchor-width",`${bn}px`),Yn.setProperty("--radix-popper-anchor-height",`${wa}px`)}}),j&&K2({element:j,padding:l}),iV({arrowWidth:E,arrowHeight:N}),h&&G2({strategy:"referenceHidden",...$})]}),[R,D]=sT(z),F=pr(g);zn(()=>{B&&(F==null||F())},[B,F]);const q=(ne=A.arrow)==null?void 0:ne.x,W=(ue=A.arrow)==null?void 0:ue.y,te=((Y=A.arrow)==null?void 0:Y.centerOffset)!==0,[fe,le]=p.useState();return zn(()=>{y&&le(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:B?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(U=A.transformOrigin)==null?void 0:U.x,(Z=A.transformOrigin)==null?void 0:Z.y].join(" "),...((ce=A.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(rV,{scope:r,placedSide:R,onArrowChange:_,arrowX:q,arrowY:W,shouldHideArrow:te,children:i.jsx(Ae.div,{"data-side":R,"data-align":D,...v,ref:w,style:{...v.style,animation:B?void 0:"none"}})})})});tT.displayName=Dy;var rT="PopperArrow",sV={top:"bottom",right:"left",bottom:"top",left:"right"},nT=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=nV(rT,n),a=sV[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(eV,{...s,ref:r,style:{...s.style,display:"block"}})})});nT.displayName=rT;function oV(e){return e!==null}var iV=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:r,rects:n,middlewareData:s}=t,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=sT(r),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,m=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=a?d:`${h}px`,v=`${-c}px`):u==="top"?(g=a?d:`${h}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=a?d:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=a?d:`${m}px`),{data:{x:g,y:v}}}});function sT(e){const[t,r="center"]=e.split("-");return[t,r]}var oT=Q2,$y=eT,iT=tT,aT=nT,Hp="rovingFocusGroup.onEntryFocus",aV={bubbles:!1,cancelable:!0},Pc="RovingFocusGroup",[lv,lT,lV]=qx(Pc),[cV,cT]=rn(Pc,[lV]),[uV,dV]=cV(Pc),uT=p.forwardRef((e,t)=>i.jsx(lv.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(lv.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(fV,{...e,ref:t})})}));uT.displayName=Pc;var fV=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=Fe(t,h),g=C2(o),[v,x]=Ao({prop:a,defaultProp:l??null,onChange:c,caller:Pc}),[y,b]=p.useState(!1),w=pr(u),j=lT(r),_=p.useRef(!1),[S,E]=p.useState(0);return p.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Hp,w),()=>N.removeEventListener(Hp,w)},[w]),i.jsx(uV,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(N=>x(N),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:p.useCallback(()=>E(N=>N-1),[]),children:i.jsx(Ae.div,{tabIndex:y||S===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:xe(e.onMouseDown,()=>{_.current=!0}),onFocus:xe(e.onFocus,N=>{const P=!_.current;if(N.target===N.currentTarget&&P&&!y){const C=new CustomEvent(Hp,aV);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const I=j().filter(z=>z.focusable),O=I.find(z=>z.active),$=I.find(z=>z.id===v),V=[O,$,...I].filter(Boolean).map(z=>z.ref.current);hT(V,f)}}_.current=!1}),onBlur:xe(e.onBlur,()=>b(!1))})})}),dT="RovingFocusGroupItem",fT=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=ho(),u=o||c,f=dV(dT,r),d=f.currentTabStopId===u,h=lT(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),i.jsx(lv.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(Ae.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:xe(e.onMouseDown,x=>{n?f.onItemFocus(u):x.preventDefault()}),onFocus:xe(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:xe(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=mV(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const j=w.indexOf(x.currentTarget);w=f.loop?gV(w,j+1):w.slice(j+1)}setTimeout(()=>hT(w))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:v!=null}):a})})});fT.displayName=dT;var hV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mV(e,t,r){const n=pV(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return hV[n]}function hT(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function gV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var vV=uT,xV=fT,yV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Vo=new WeakMap,vu=new WeakMap,xu={},Gp=0,pT=function(e){return e&&(e.host||pT(e.parentNode))},bV=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=pT(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},wV=function(e,t,r,n){var s=bV(t,Array.isArray(e)?e:[e]);xu[r]||(xu[r]=new WeakMap);var o=xu[r],a=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",v=(Vo.get(h)||0)+1,x=(o.get(h)||0)+1;Vo.set(h,v),o.set(h,x),a.push(h),v===1&&g&&vu.set(h,!0),x===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),l.clear(),Gp++,function(){a.forEach(function(d){var h=Vo.get(d)-1,m=o.get(d)-1;Vo.set(d,h),o.set(d,m),h||(vu.has(d)||d.removeAttribute(n),vu.delete(d)),m||d.removeAttribute(r)}),Gp--,Gp||(Vo=new WeakMap,Vo=new WeakMap,vu=new WeakMap,xu={})}},Tc=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=t||yV(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),wV(n,s,r,"aria-hidden")):function(){return null}},cv=function(e,t){return cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},cv(e,t)};function mT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qe=function(){return Qe=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Qe.apply(this,arguments)};function yn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function gT(e,t,r,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(s<3?a(o):s>3?a(t,r,o):a(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function vT(e,t){return function(r,n){t(r,n,e)}}function xT(e,t,r,n,s,o){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,m=r.length-1;m>=0;m--){var g={};for(var v in n)g[v]=v==="access"?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(y||null))};var x=(0,r[m])(l==="accessor"?{get:f.get,set:f.set}:f[c],g);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=a(x.get))&&(f.get=d),(d=a(x.set))&&(f.set=d),(d=a(x.init))&&s.unshift(d)}else(d=a(x))&&(l==="field"?s.unshift(d):f[c]=d)}u&&Object.defineProperty(u,n.name,f),h=!0}function yT(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function bT(e){return typeof e=="symbol"?e:"".concat(e)}function wT(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function jT(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ge(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function _T(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Yf=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function ST(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Yf(t,e,r)}function Hd(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ly(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,o=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function ET(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ly(arguments[t]));return e}function NT(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n}function kc(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Gi(e){return this instanceof Gi?(this.v=e,this):new Gi(e)}function CT(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(g){return Promise.resolve(g).then(m,d)}}function l(m,g){n[m]&&(s[m]=function(v){return new Promise(function(x,y){o.push([m,v,x,y])>1||c(m,v)})},g&&(s[m]=g(s[m])))}function c(m,g){try{u(n[m](g))}catch(v){h(o[0][3],v)}}function u(m){m.value instanceof Gi?Promise.resolve(m.value.v).then(f,d):h(o[0][2],m)}function f(m){c("next",m)}function d(m){c("throw",m)}function h(m,g){m(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function PT(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,o){t[s]=e[s]?function(a){return(r=!r)?{value:Gi(e[s](a)),done:!1}:o?o(a):a}:o}}function TT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Hd=="function"?Hd(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(l,c){a=e[o](a),s(l,c,a.done,a.value)})}}function s(o,a,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},a)}}function kT(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var jV=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},uv=function(e){return uv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},uv(e)};function AT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=uv(e),n=0;n<r.length;n++)r[n]!=="default"&&Yf(t,e,r[n]);return jV(t,e),t}function RT(e){return e&&e.__esModule?e:{default:e}}function IT(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function OT(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function DT(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function $T(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var _V=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function LT(e){function t(o){e.error=e.hasError?new _V(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(a){return t(a),s()})}else n|=1}catch(a){t(a)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function MT(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,a){return n?t?".jsx":".js":s&&(!o||!a)?r:s+o+"."+a.toLowerCase()+"js"}):e}const SV={__extends:mT,__assign:Qe,__rest:yn,__decorate:gT,__param:vT,__esDecorate:xT,__runInitializers:yT,__propKey:bT,__setFunctionName:wT,__metadata:jT,__awaiter:ge,__generator:_T,__createBinding:Yf,__exportStar:ST,__values:Hd,__read:Ly,__spread:ET,__spreadArrays:NT,__spreadArray:kc,__await:Gi,__asyncGenerator:CT,__asyncDelegator:PT,__asyncValues:TT,__makeTemplateObject:kT,__importStar:AT,__importDefault:RT,__classPrivateFieldGet:IT,__classPrivateFieldSet:OT,__classPrivateFieldIn:DT,__addDisposableResource:$T,__disposeResources:LT,__rewriteRelativeImportExtension:MT},EV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$T,get __assign(){return Qe},__asyncDelegator:PT,__asyncGenerator:CT,__asyncValues:TT,__await:Gi,__awaiter:ge,__classPrivateFieldGet:IT,__classPrivateFieldIn:DT,__classPrivateFieldSet:OT,__createBinding:Yf,__decorate:gT,__disposeResources:LT,__esDecorate:xT,__exportStar:ST,__extends:mT,__generator:_T,__importDefault:RT,__importStar:AT,__makeTemplateObject:kT,__metadata:jT,__param:vT,__propKey:bT,__read:Ly,__rest:yn,__rewriteRelativeImportExtension:MT,__runInitializers:yT,__setFunctionName:wT,__spread:ET,__spreadArray:kc,__spreadArrays:NT,__values:Hd,default:SV},Symbol.toStringTag,{value:"Module"}));var Ti="right-scroll-bar-position",ki="width-before-scroll-bar",NV="with-scroll-bars-hidden",CV="--removed-body-scroll-bar-size";function Kp(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function PV(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var TV=typeof window<"u"?p.useLayoutEffect:p.useEffect,j_=new WeakMap;function My(e,t){var r=PV(t||null,function(n){return e.forEach(function(s){return Kp(s,n)})});return TV(function(){var n=j_.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||Kp(l,null)}),o.forEach(function(l){s.has(l)||Kp(l,a)})}j_.set(r,e)},[e]),r}function kV(e){return e}function AV(e,t){t===void 0&&(t=kV);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),r}}}};return s}function Fy(e){e===void 0&&(e={});var t=AV(null);return t.options=Qe({async:!0,ssr:!1},e),t}var FT=function(e){var t=e.sideCar,r=yn(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Qe({},r))};FT.isSideCarExport=!0;function By(e,t){return e.useMedium(t),FT}var BT=Fy(),Yp=function(){},Jf=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Yp,onWheelCapture:Yp,onTouchMoveCapture:Yp}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,j=yn(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=My([r,t]),E=Qe(Qe({},j),s);return p.createElement(p.Fragment,null,f&&p.createElement(_,{sideCar:BT,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:w}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},E),{ref:S})):p.createElement(b,Qe({},E,{className:c,ref:S}),l))});Jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jf.classNames={fullWidth:ki,zeroRight:Ti};var __,RV=function(){if(__)return __;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function IV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=RV();return t&&e.setAttribute("nonce",t),e}function OV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $V=function(){var e=0,t=null;return{add:function(r){e==0&&(t=IV())&&(OV(t,r),DV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},LV=function(){var e=$V();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Xf=function(){var e=LV(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},MV={left:0,top:0,right:0,gap:0},Jp=function(e){return parseInt(e||"",10)||0},FV=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Jp(r),Jp(n),Jp(s)]},BV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return MV;var t=FV(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},zV=Xf(),Ai="data-scroll-locked",UV=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(NV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ai,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ti,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ki,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ti," .").concat(Ti,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ki," .").concat(ki,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ai,`] {
    `).concat(CV,": ").concat(l,`px;
  }
`)},S_=function(){var e=parseInt(document.body.getAttribute(Ai)||"0",10);return isFinite(e)?e:0},VV=function(){p.useEffect(function(){return document.body.setAttribute(Ai,(S_()+1).toString()),function(){var e=S_()-1;e<=0?document.body.removeAttribute(Ai):document.body.setAttribute(Ai,e.toString())}},[])},zy=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;VV();var o=p.useMemo(function(){return BV(s)},[s]);return p.createElement(zV,{styles:UV(o,!t,s,r?"":"!important")})},dv=!1;if(typeof window<"u")try{var yu=Object.defineProperty({},"passive",{get:function(){return dv=!0,!0}});window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{dv=!1}var qo=dv?{passive:!1}:!1,qV=function(e){return e.tagName==="TEXTAREA"},zT=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!qV(e)&&r[t]==="visible")},WV=function(e){return zT(e,"overflowY")},HV=function(e){return zT(e,"overflowX")},E_=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=UT(e,n);if(s){var o=VT(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},GV=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},KV=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},UT=function(e,t){return e==="v"?WV(t):HV(t)},VT=function(e,t){return e==="v"?GV(t):KV(t)},YV=function(e,t){return e==="h"&&t==="rtl"?-1:1},JV=function(e,t,r,n,s){var o=YV(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{if(!l)break;var m=VT(e,l),g=m[0],v=m[1],x=m[2],y=v-x-o*g;(g||y)&&UT(e,l)&&(d+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&Math.abs(d)<1||!s&&a>d)||!f&&(s&&Math.abs(h)<1||!s&&-a>h))&&(u=!0),u},bu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},N_=function(e){return[e.deltaX,e.deltaY]},C_=function(e){return e&&"current"in e?e.current:e},XV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},QV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ZV=0,Wo=[];function e7(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(ZV++)[0],o=p.useState(Xf)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=kc([e.lockRef.current],(e.shards||[]).map(C_),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var y=bu(v),b=r.current,w="deltaX"in v?v.deltaX:b[0]-y[0],j="deltaY"in v?v.deltaY:b[1]-y[1],_,S=v.target,E=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&E==="h"&&S.type==="range")return!1;var N=E_(E,S);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=E_(E,S)),!N)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var P=n.current||_;return JV(P,x,v,P==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!Wo.length||Wo[Wo.length-1]!==o)){var y="deltaY"in x?N_(x):bu(x),b=t.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&XV(_.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(a.current.shards||[]).map(C_).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b,shadowParent:t7(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=bu(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,N_(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,bu(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return Wo.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,qo),document.addEventListener("touchmove",c,qo),document.addEventListener("touchstart",f,qo),function(){Wo=Wo.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,qo),document.removeEventListener("touchmove",c,qo),document.removeEventListener("touchstart",f,qo)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:QV(s)}):null,m?p.createElement(zy,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function t7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const r7=By(BT,e7);var qT=p.forwardRef(function(e,t){return p.createElement(Jf,Qe({},e,{ref:t,sideCar:r7}))});qT.classNames=Jf.classNames;const Uy=qT;var fv=["Enter"," "],n7=["ArrowDown","PageUp","Home"],WT=["ArrowUp","PageDown","End"],s7=[...n7,...WT],o7={ltr:[...fv,"ArrowRight"],rtl:[...fv,"ArrowLeft"]},i7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ac="Menu",[Yl,a7,l7]=qx(Ac),[Do,HT]=rn(Ac,[l7,Kf,cT]),Qf=Kf(),GT=cT(),[c7,$o]=Do(Ac),[u7,Rc]=Do(Ac),KT=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:o,modal:a=!0}=e,l=Qf(t),[c,u]=p.useState(null),f=p.useRef(!1),d=pr(o),h=C2(s);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(oT,{...l,children:i.jsx(c7,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(u7,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:a,children:n})})})};KT.displayName=Ac;var d7="MenuAnchor",Vy=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Qf(r);return i.jsx($y,{...s,...n,ref:t})});Vy.displayName=d7;var qy="MenuPortal",[f7,YT]=Do(qy,{forceMount:void 0}),JT=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,o=$o(qy,t);return i.jsx(f7,{scope:t,forceMount:r,children:i.jsx(Mr,{present:r||o.open,children:i.jsx(yc,{asChild:!0,container:s,children:n})})})};JT.displayName=qy;var Rr="MenuContent",[h7,Wy]=Do(Rr),XT=p.forwardRef((e,t)=>{const r=YT(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=$o(Rr,e.__scopeMenu),a=Rc(Rr,e.__scopeMenu);return i.jsx(Yl.Provider,{scope:e.__scopeMenu,children:i.jsx(Mr,{present:n||o.open,children:i.jsx(Yl.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(p7,{...s,ref:t}):i.jsx(m7,{...s,ref:t})})})})}),p7=p.forwardRef((e,t)=>{const r=$o(Rr,e.__scopeMenu),n=p.useRef(null),s=Fe(t,n);return p.useEffect(()=>{const o=n.current;if(o)return Tc(o)},[]),i.jsx(Hy,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),m7=p.forwardRef((e,t)=>{const r=$o(Rr,e.__scopeMenu);return i.jsx(Hy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),g7=yo("MenuContent.ScrollLock"),Hy=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=$o(Rr,r),y=Rc(Rr,r),b=Qf(r),w=GT(r),j=a7(r),[_,S]=p.useState(null),E=p.useRef(null),N=Fe(t,E,x.onContentChange),P=p.useRef(0),C=p.useRef(""),I=p.useRef(0),O=p.useRef(null),$=p.useRef("right"),L=p.useRef(0),V=g?Uy:p.Fragment,z=g?{as:g7,allowPinchZoom:!0}:void 0,B=R=>{var ne,ue;const D=C.current+R,F=j().filter(Y=>!Y.disabled),q=document.activeElement,W=(ne=F.find(Y=>Y.ref.current===q))==null?void 0:ne.textValue,te=F.map(Y=>Y.textValue),fe=P7(te,D,W),le=(ue=F.find(Y=>Y.textValue===fe))==null?void 0:ue.ref.current;(function Y(U){C.current=U,window.clearTimeout(P.current),U!==""&&(P.current=window.setTimeout(()=>Y(""),1e3))})(D),le&&setTimeout(()=>le.focus())};p.useEffect(()=>()=>window.clearTimeout(P.current),[]),Ny();const A=p.useCallback(R=>{var F,q;return $.current===((F=O.current)==null?void 0:F.side)&&k7(R,(q=O.current)==null?void 0:q.area)},[]);return i.jsx(h7,{scope:r,searchRef:C,onItemEnter:p.useCallback(R=>{A(R)&&R.preventDefault()},[A]),onItemLeave:p.useCallback(R=>{var D;A(R)||((D=E.current)==null||D.focus(),S(null))},[A]),onTriggerLeave:p.useCallback(R=>{A(R)&&R.preventDefault()},[A]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback(R=>{O.current=R},[]),children:i.jsx(V,{...z,children:i.jsx(Vf,{asChild:!0,trapped:s,onMountAutoFocus:xe(o,R=>{var D;R.preventDefault(),(D=E.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(xc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx(vV,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:xe(c,R=>{y.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(iT,{role:"menu","aria-orientation":"vertical","data-state":hk(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:N,style:{outline:"none",...v.style},onKeyDown:xe(v.onKeyDown,R=>{const F=R.target.closest("[data-radix-menu-content]")===R.currentTarget,q=R.ctrlKey||R.altKey||R.metaKey,W=R.key.length===1;F&&(R.key==="Tab"&&R.preventDefault(),!q&&W&&B(R.key));const te=E.current;if(R.target!==te||!s7.includes(R.key))return;R.preventDefault();const le=j().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);WT.includes(R.key)&&le.reverse(),N7(le)}),onBlur:xe(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(P.current),C.current="")}),onPointerMove:xe(e.onPointerMove,Jl(R=>{const D=R.target,F=L.current!==R.clientX;if(R.currentTarget.contains(D)&&F){const q=R.clientX>L.current?"right":"left";$.current=q,L.current=R.clientX}}))})})})})})})});XT.displayName=Rr;var v7="MenuGroup",Gy=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ae.div,{role:"group",...n,ref:t})});Gy.displayName=v7;var x7="MenuLabel",QT=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ae.div,{...n,ref:t})});QT.displayName=x7;var Gd="MenuItem",P_="menu.itemSelect",Zf=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,o=p.useRef(null),a=Rc(Gd,e.__scopeMenu),l=Wy(Gd,e.__scopeMenu),c=Fe(t,o),u=p.useRef(!1),f=()=>{const d=o.current;if(!r&&d){const h=new CustomEvent(P_,{bubbles:!0,cancelable:!0});d.addEventListener(P_,m=>n==null?void 0:n(m),{once:!0}),Wx(d,h),h.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(ZT,{...s,ref:c,disabled:r,onClick:xe(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:xe(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:xe(e.onKeyDown,d=>{const h=l.searchRef.current!=="";r||h&&d.key===" "||fv.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Zf.displayName=Gd;var ZT=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=e,a=Wy(Gd,r),l=GT(r),c=p.useRef(null),u=Fe(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[o.children]),i.jsx(Yl.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:i.jsx(xV,{asChild:!0,...l,focusable:!n,children:i.jsx(Ae.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:xe(e.onPointerMove,Jl(g=>{n?a.onItemLeave(g):(a.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(e.onPointerLeave,Jl(g=>a.onItemLeave(g))),onFocus:xe(e.onFocus,()=>d(!0)),onBlur:xe(e.onBlur,()=>d(!1))})})})}),y7="MenuCheckboxItem",ek=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(ok,{scope:e.__scopeMenu,checked:r,children:i.jsx(Zf,{role:"menuitemcheckbox","aria-checked":Kd(r)?"mixed":r,...s,ref:t,"data-state":Yy(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(Kd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});ek.displayName=y7;var tk="MenuRadioGroup",[b7,w7]=Do(tk,{value:void 0,onValueChange:()=>{}}),rk=p.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,o=pr(n);return i.jsx(b7,{scope:e.__scopeMenu,value:r,onValueChange:o,children:i.jsx(Gy,{...s,ref:t})})});rk.displayName=tk;var nk="MenuRadioItem",sk=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=w7(nk,e.__scopeMenu),o=r===s.value;return i.jsx(ok,{scope:e.__scopeMenu,checked:o,children:i.jsx(Zf,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":Yy(o),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});sk.displayName=nk;var Ky="MenuItemIndicator",[ok,j7]=Do(Ky,{checked:!1}),ik=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,o=j7(Ky,r);return i.jsx(Mr,{present:n||Kd(o.checked)||o.checked===!0,children:i.jsx(Ae.span,{...s,ref:t,"data-state":Yy(o.checked)})})});ik.displayName=Ky;var _7="MenuSeparator",ak=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});ak.displayName=_7;var S7="MenuArrow",lk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Qf(r);return i.jsx(aT,{...s,...n,ref:t})});lk.displayName=S7;var E7="MenuSub",[qne,ck]=Do(E7),Ja="MenuSubTrigger",uk=p.forwardRef((e,t)=>{const r=$o(Ja,e.__scopeMenu),n=Rc(Ja,e.__scopeMenu),s=ck(Ja,e.__scopeMenu),o=Wy(Ja,e.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(Vy,{asChild:!0,...u,children:i.jsx(ZT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":hk(r.open),...e,ref:Pf(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(e.onPointerMove,Jl(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:xe(e.onPointerLeave,Jl(d=>{var m,g;f();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=r.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,b=h[x?"left":"right"],w=h[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:xe(e.onKeyDown,d=>{var m;const h=o.searchRef.current!=="";e.disabled||h&&d.key===" "||o7[n.dir].includes(d.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),d.preventDefault())})})})});uk.displayName=Ja;var dk="MenuSubContent",fk=p.forwardRef((e,t)=>{const r=YT(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=$o(Rr,e.__scopeMenu),a=Rc(Rr,e.__scopeMenu),l=ck(dk,e.__scopeMenu),c=p.useRef(null),u=Fe(t,c);return i.jsx(Yl.Provider,{scope:e.__scopeMenu,children:i.jsx(Mr,{present:n||o.open,children:i.jsx(Yl.Slot,{scope:e.__scopeMenu,children:i.jsx(Hy,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;a.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:xe(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:xe(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:xe(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=i7[a.dir].includes(f.key);d&&h&&(o.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});fk.displayName=dk;function hk(e){return e?"open":"closed"}function Kd(e){return e==="indeterminate"}function Yy(e){return Kd(e)?"indeterminate":e?"checked":"unchecked"}function N7(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function C7(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function P7(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=C7(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function T7(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o],c=t[a],u=l.x,f=l.y,d=c.x,h=c.y;f>n!=h>n&&r<(d-u)*(n-f)/(h-f)+u&&(s=!s)}return s}function k7(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return T7(r,t)}function Jl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var A7=KT,R7=Vy,I7=JT,O7=XT,D7=Gy,$7=QT,L7=Zf,M7=ek,F7=rk,B7=sk,z7=ik,U7=ak,V7=lk,q7=uk,W7=fk,eh="DropdownMenu",[H7,Wne]=rn(eh,[HT]),qt=HT(),[G7,pk]=H7(eh),mk=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=e,c=qt(t),u=p.useRef(null),[f,d]=Ao({prop:s,defaultProp:o??!1,onChange:a,caller:eh});return i.jsx(G7,{scope:t,triggerId:ho(),triggerRef:u,contentId:ho(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(A7,{...c,open:f,onOpenChange:d,dir:n,modal:l,children:r})})};mk.displayName=eh;var gk="DropdownMenuTrigger",vk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,o=pk(gk,r),a=qt(r);return i.jsx(R7,{asChild:!0,...a,children:i.jsx(Ae.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Pf(t,o.triggerRef),onPointerDown:xe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:xe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});vk.displayName=gk;var K7="DropdownMenuPortal",xk=e=>{const{__scopeDropdownMenu:t,...r}=e,n=qt(t);return i.jsx(I7,{...n,...r})};xk.displayName=K7;var yk="DropdownMenuContent",bk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=pk(yk,r),o=qt(r),a=p.useRef(!1);return i.jsx(O7,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:t,onCloseAutoFocus:xe(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:xe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bk.displayName=yk;var Y7="DropdownMenuGroup",J7=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(D7,{...s,...n,ref:t})});J7.displayName=Y7;var X7="DropdownMenuLabel",wk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx($7,{...s,...n,ref:t})});wk.displayName=X7;var Q7="DropdownMenuItem",jk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(L7,{...s,...n,ref:t})});jk.displayName=Q7;var Z7="DropdownMenuCheckboxItem",_k=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(M7,{...s,...n,ref:t})});_k.displayName=Z7;var e9="DropdownMenuRadioGroup",t9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(F7,{...s,...n,ref:t})});t9.displayName=e9;var r9="DropdownMenuRadioItem",Sk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(B7,{...s,...n,ref:t})});Sk.displayName=r9;var n9="DropdownMenuItemIndicator",Ek=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(z7,{...s,...n,ref:t})});Ek.displayName=n9;var s9="DropdownMenuSeparator",Nk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(U7,{...s,...n,ref:t})});Nk.displayName=s9;var o9="DropdownMenuArrow",i9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(V7,{...s,...n,ref:t})});i9.displayName=o9;var a9="DropdownMenuSubTrigger",Ck=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(q7,{...s,...n,ref:t})});Ck.displayName=a9;var l9="DropdownMenuSubContent",Pk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qt(r);return i.jsx(W7,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pk.displayName=l9;var c9=mk,u9=vk,d9=xk,Tk=bk,kk=wk,Ak=jk,Rk=_k,Ik=Sk,Ok=Ek,Dk=Nk,$k=Ck,Lk=Pk;const Mk=c9,Fk=u9,f9=J.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs($k,{ref:s,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(Rf,{className:"ml-auto h-4 w-4"})]}));f9.displayName=$k.displayName;const h9=J.forwardRef(({className:e,...t},r)=>i.jsx(Lk,{ref:r,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));h9.displayName=Lk.displayName;const Jy=J.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(d9,{children:i.jsx(Tk,{ref:n,sideOffset:t,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Jy.displayName=Tk.displayName;const Xl=J.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(Ak,{ref:n,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Xl.displayName=Ak.displayName;const p9=J.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(Rk,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Ok,{children:i.jsx(Rn,{className:"h-4 w-4"})})}),t]}));p9.displayName=Rk.displayName;const m9=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Ik,{ref:n,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Ok,{children:i.jsx(J6,{className:"h-2 w-2 fill-current"})})}),t]}));m9.displayName=Ik.displayName;const Xy=J.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(kk,{ref:n,className:pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Xy.displayName=kk.displayName;const Qy=J.forwardRef(({className:e,...t},r)=>i.jsx(Dk,{ref:r,className:pe("-mx-1 my-1 h-px bg-muted",e),...t}));Qy.displayName=Dk.displayName;function th(){const[e,t]=p.useState({width:void 0,height:void 0});return p.useEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}const g9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Zy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class v9 extends Zy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class T_ extends Zy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class k_ extends Zy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hv||(hv={}));class x9{constructor(t,{headers:r={},customFetch:n,region:s=hv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=g9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ge(this,arguments,void 0,function*(r,n={}){var s;let o,a;try{const{headers:l,method:c,body:u,signal:f,timeout:d}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let x=f;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),f?(x=a.signal,f.addEventListener("abort",()=>a.abort())):x=a.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:x}).catch(_=>{throw new v9(_)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new T_(y);if(!y.ok)throw new k_(y);let w=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield y.json():w==="application/octet-stream"||w==="application/pdf"?j=yield y.blob():w==="text/event-stream"?j=y:w==="multipart/form-data"?j=yield y.formData():j=yield y.text(),{data:j,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof k_||l instanceof T_?l.context:void 0}}finally{o&&clearTimeout(o)}})}}var Mt={};const aa=a$(EV);var wu={},ju={},_u={},Su={},Eu={},Nu={},A_;function Bk(){if(A_)return Nu;A_=1,Object.defineProperty(Nu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Nu.default=e,Nu}var R_;function zk(){if(R_)return Eu;R_=1,Object.defineProperty(Eu,"__esModule",{value:!0});const t=aa.__importDefault(Bk());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,d,h;let m=null,g=null,v=null,x=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const w=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),j=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&j&&j.length>1&&(v=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,x=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await c.text();try{m=JSON.parse(w),Array.isArray(m)&&c.status===404&&(g=[],m=null,x=200,y="OK")}catch{c.status===404&&w===""?(x=204,y="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,x=200,y="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:v,status:x,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,d;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=c==null?void 0:c.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Eu.default=r,Eu}var I_;function Uk(){if(I_)return Su;I_=1,Object.defineProperty(Su,"__esModule",{value:!0});const t=aa.__importDefault(zk());class r extends t.default{select(s){let o=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const d=[s?"analyze":null,o?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Su.default=r,Su}var O_;function e0(){if(O_)return _u;O_=1,Object.defineProperty(_u,"__esModule",{value:!0});const t=aa.__importDefault(Uk()),r=new RegExp("[,()]");class n extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${f}.${a}`),this}match(o){return Object.entries(o).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(o,a,l){return this.url.searchParams.append(o,`not.${a}.${l}`),this}or(o,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,l){return this.url.searchParams.append(o,`${a}.${l}`),this}}return _u.default=n,_u}var D_;function Vk(){if(D_)return ju;D_=1,Object.defineProperty(ju,"__esModule",{value:!0});const t=aa.__importDefault(e0());class r{constructor(s,{headers:o={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=l}select(s,o){const{head:a=!1,count:l}=o??{},c=a?"HEAD":"GET";let u=!1;const f=(s??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var a;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return ju.default=r,ju}var $_;function y9(){if($_)return wu;$_=1,Object.defineProperty(wu,"__esModule",{value:!0});const e=aa,t=e.__importDefault(Vk()),r=e.__importDefault(e0());class n{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){var f;let d;const h=new URL(`${this.url}/rpc/${o}`);let m;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([v,x])=>x!==void 0).map(([v,x])=>[v,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([v,x])=>{h.searchParams.append(v,x)})):(d="POST",m=a);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:g,schema:this.schemaName,body:m,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return wu.default=n,wu}Object.defineProperty(Mt,"__esModule",{value:!0});var qk=Mt.PostgrestError=eA=Mt.PostgrestBuilder=Qk=Mt.PostgrestTransformBuilder=Jk=Mt.PostgrestFilterBuilder=Kk=Mt.PostgrestQueryBuilder=Hk=Mt.PostgrestClient=void 0;const la=aa,Wk=la.__importDefault(y9());var Hk=Mt.PostgrestClient=Wk.default;const Gk=la.__importDefault(Vk());var Kk=Mt.PostgrestQueryBuilder=Gk.default;const Yk=la.__importDefault(e0());var Jk=Mt.PostgrestFilterBuilder=Yk.default;const Xk=la.__importDefault(Uk());var Qk=Mt.PostgrestTransformBuilder=Xk.default;const Zk=la.__importDefault(zk());var eA=Mt.PostgrestBuilder=Zk.default;const tA=la.__importDefault(Bk());qk=Mt.PostgrestError=tA.default;var rA=Mt.default={PostgrestClient:Wk.default,PostgrestQueryBuilder:Gk.default,PostgrestFilterBuilder:Yk.default,PostgrestTransformBuilder:Xk.default,PostgrestBuilder:Zk.default,PostgrestError:tA.default};const b9=$S({__proto__:null,get PostgrestBuilder(){return eA},get PostgrestClient(){return Hk},get PostgrestError(){return qk},get PostgrestFilterBuilder(){return Jk},get PostgrestQueryBuilder(){return Kk},get PostgrestTransformBuilder(){return Qk},default:rA},[Mt]),{PostgrestClient:w9,PostgrestQueryBuilder:Hne,PostgrestFilterBuilder:Gne,PostgrestTransformBuilder:Kne,PostgrestBuilder:Yne,PostgrestError:Jne}=rA||b9;class j9{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const _9="2.81.0",S9=`realtime-js/${_9}`,nA="1.0.0",E9="2.0.0",L_=nA,pv=1e4,N9=1e3,C9=100;var Qs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qs||(Qs={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var Er;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Er||(Er={}));var mv;(function(e){e.websocket="websocket"})(mv||(mv={}));var Zs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zs||(Zs={}));class P9{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){const{join_ref:r,ref:n,event:s,topic:o,payload:a}=t,l=this.META_LENGTH+r.length+n.length+o.length+s.length,c=new ArrayBuffer(this.HEADER_LENGTH+l);let u=new DataView(c),f=0;u.setUint8(f++,this.KINDS.push),u.setUint8(f++,r.length),u.setUint8(f++,n.length),u.setUint8(f++,o.length),u.setUint8(f++,s.length),Array.from(r,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(n,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(o,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(s,h=>u.setUint8(f++,h.charCodeAt(0)));var d=new Uint8Array(c.byteLength+a.byteLength);return d.set(new Uint8Array(c),0),d.set(new Uint8Array(a),c.byteLength),d.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const{join_ref:s,ref:o,topic:a}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+a.length+l.length,f=new ArrayBuffer(this.HEADER_LENGTH+u);let d=new DataView(f),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,s.length),d.setUint8(h++,o.length),d.setUint8(h++,a.length),d.setUint8(h++,l.length),d.setUint8(h++,this.BINARY_ENCODING),Array.from(s,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(l,g=>d.setUint8(h++,g.charCodeAt(0)));var m=new Uint8Array(f.byteLength+c.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(c),f.byteLength),m.buffer}_encodeJsonUserBroadcastPush(t){var r,n;const{join_ref:s,ref:o,topic:a}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+a.length+l.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,s.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,l.length),m.setUint8(g++,this.JSON_ENCODING),Array.from(s,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(o,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(a,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>m.setUint8(g++,x.charCodeAt(0)));var v=new Uint8Array(h.byteLength+f.byteLength);return v.set(new Uint8Array(h),0),v.set(new Uint8Array(f),h.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,o,a,l,c]=n;return r({join_ref:s,ref:o,topic:a,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,s);case this.KINDS.reply:return this._decodeReply(t,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodePush(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+s));l=l+s;const u=n.decode(t.slice(l,l+o));l=l+o;const f=n.decode(t.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:f,payload:d}}_decodeReply(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+s));c=c+s;const f=n.decode(t.slice(c,c+o));c=c+o;const d=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+l));c=c+l;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:h,response:m};return{join_ref:u,ref:f,topic:d,event:Er.reply,payload:g}}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const f=n.decode(t.slice(c,c+o));c=c+o;const d=n.decode(t.slice(c,c+a));c=c+a;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:f,payload:m};return a>0&&(g.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class sA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Be||(Be={}));const M_=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=T9(a,e,t,s),o),{}):{}},T9=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=r[e];return o&&!n.includes(o)?oA(o,a):gv(a)},oA=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return I9(t,r)}switch(e){case Be.bool:return k9(t);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return A9(t);case Be.json:case Be.jsonb:return R9(t);case Be.timestamp:return O9(t);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return gv(t);default:return gv(t)}},gv=e=>e,k9=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},A9=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R9=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},I9=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const a=e.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>oA(t,l))}return e},O9=e=>typeof e=="string"?e.replace(" ","T"):e,iA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Xp{constructor(t,r,n={},s=pv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var F_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(F_||(F_={}));class vl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vl.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=vl.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vl.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(o,(u,f)=>{a[u]||(c[u]=f)}),this.map(a,(u,f)=>{const d=o[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(B_||(B_={}));var xl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xl||(xl={}));var Sn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Sn||(Sn={}));class t0{constructor(t,r={config:{}},n){var s,o;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xp(this,Er.join,this.params,this.timeout),this.rejoinTimer=new sA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Er.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new vl(this),this.broadcastEndpointURL=iA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[xl.PRESENCE]&&this.bindings[xl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Sn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(Sn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,y=[];for(let b=0;b<x;b++){const w=v[b],{filter:{event:j,schema:_,table:S,filter:E}}=w,N=m&&m[b];if(N&&N.event===j&&N.schema===_&&N.table===S&&N.filter===E)y.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Sn.SUBSCRIBED);return}}).receive("error",m=>{this.state=ft.errored,t==null||t(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ft.joined&&t===xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Er.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Xp(this,Er.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xp(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>C9){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Er;if(n&&[l,c,u,f].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(m=>m.callback(h,n)):(o=this.bindings[a])===null||o===void 0||o.filter(m=>{var g,v,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const j=m.id,_=(g=m.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&t0.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Er.close,{},t)}_onError(t){this._on(Er.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=M_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=M_(t.columns,t.old_record)),r}}const Qp=()=>{},Cu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},D9=[1e3,2e3,5e3,1e4],$9=1e4,L9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class M9{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pv,this.transport=null,this.heartbeatIntervalMs=Cu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qp,this.ref=0,this.reconnectTimer=null,this.vsn=L_,this.logger=Qp,this.conn=null,this.sendBuffer=[],this.serializer=new P9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${mv.websocket}`,this.httpEndpoint=iA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=j9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qs.connecting:return Zs.Connecting;case Qs.open:return Zs.Open;case Qs.closing:return Zs.Closing;default:return Zs.Closed}}isConnected(){return this.connectionState()===Zs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new t0(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(N9,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Cu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:a}=r,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qs.open||this.conn.readyState===Qs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Er.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([L9],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:S9};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Er.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,o,a,l,c,u,f,d,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:pv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Cu.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Qp,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:L_,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>D9[g-1]||$9,this.vsn){case nA:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:(g,v)=>v(JSON.stringify(g)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(g,v)=>v(JSON.parse(g));break;case E9:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class r0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class F9 extends r0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vv extends r0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const n0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),B9=()=>Response,xv=e=>{if(Array.isArray(e))return e.map(r=>xv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=xv(n)}),t},z9=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},U9=(e,t,r)=>ge(void 0,void 0,void 0,function*(){const n=yield B9();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,a=(s==null?void 0:s.statusCode)||o+"";t(new F9(Zp(s),o,a))}).catch(s=>{t(new vv(Zp(s),s))}):t(new vv(Zp(e),e))}),V9=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(z9(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Ic(e,t,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,V9(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>U9(c,l,n))})})}function Ql(e,t,r,n){return ge(this,void 0,void 0,function*(){return Ic(e,"GET",t,r,n)})}function Wr(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Ic(e,"POST",t,n,s,r)})}function yv(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Ic(e,"PUT",t,n,s,r)})}function q9(e,t,r,n){return ge(this,void 0,void 0,function*(){return Ic(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function s0(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Ic(e,"DELETE",t,n,s,r)})}class W9{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ge(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}var aA;class H9{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[aA]="BlobDownloadBuilder",this.promise=null}asStream(){return new W9(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ge(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}aA=Symbol.toStringTag;const G9=H9,K9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},z_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Y9{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=n0(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ge(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},z_),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?yv:Wr)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ge(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:z_.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield yv(this.fetch,l.toString(),c,{headers:f});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ge(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Wr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new r0("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}update(t,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ge(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield Wr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ge(this,void 0,void 0,function*(){try{const s=yield Wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>Ql(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new G9(c,this.shouldThrowOnError)}info(t){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ql(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:xv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}exists(t){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield q9(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n)&&n instanceof vv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ge(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}list(t,r,n){return ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},K9),r),{prefix:t||""});return{data:yield Wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}listV2(t,r){return ge(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Wr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const lA="2.81.0",cA={"X-Client-Info":`storage-js/${lA}`};class J9{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cA),r),this.fetch=n0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ge(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Ql(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}createBucket(t){return ge(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return ge(this,void 0,void 0,function*(){try{return{data:yield yv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class X9{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cA),r),this.fetch=n0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBuckets(t){return ge(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ql(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}}const o0={"X-Client-Info":`storage-js/${lA}`,"Content-Type":"application/json"};class uA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function or(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class em extends uA{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Q9 extends uA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var U_;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(U_||(U_={}));const i0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Z9=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},V_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eq=(e,t,r)=>ge(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,o=e;if(typeof o.json=="function")o.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new em(V_(a),s,l))}).catch(()=>{const a=s+"",l=o.statusText||`HTTP ${s} error`;t(new em(l,s,a))});else{const a=s+"",l=o.statusText||`HTTP ${s} error`;t(new em(l,s,a))}}else t(new Q9(V_(e),e))}),tq=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Z9(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function rq(e,t,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,tq(t,n,s,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>eq(c,l,n))})})}function ir(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return rq(e,"POST",t,n,s,r)})}class nq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},o0),r),this.fetch=i0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield ir(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ge(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}listIndexes(t){return ge(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ge(this,void 0,void 0,function*(){try{return{data:(yield ir(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}}class sq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},o0),r),this.fetch=i0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ir(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getVectors(t){return ge(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ir(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}queryVectors(t){return ge(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ir(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}}class oq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},o0),r),this.fetch=i0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield ir(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listBuckets(){return ge(this,arguments,void 0,function*(t={}){try{return{data:yield ir(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield ir(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}}class iq extends oq{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new aq(this.url,this.headers,t,this.fetch)}}class aq extends nq{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ge(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ge(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ge(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ge(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new lq(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class lq extends sq{constructor(t,r,n,s,o){super(t,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ge(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ge(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ge(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ge(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ge(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class cq extends J9{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Y9(this.url,this.headers,t,this.fetch)}get vectors(){return new iq(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new X9(this.url+"/iceberg",this.headers,this.fetch)}}const uq="2.81.0";let Xa="";typeof Deno<"u"?Xa="deno":typeof document<"u"?Xa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xa="react-native":Xa="node";const dq={"X-Client-Info":`supabase-js-${Xa}/${uq}`},fq={headers:dq},hq={schema:"public"},pq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mq={},gq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),vq=()=>Headers,xq=(e,t,r)=>{const n=gq(r),s=vq();return async(o,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:u}))}};function yq(e){return e.endsWith("/")?e:e+"/"}function bq(e,t){var r,n;const{db:s,auth:o,realtime:a,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function wq(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dA="2.81.0",ti=30*1e3,bv=3,tm=bv*ti,jq="http://localhost:9999",_q="supabase.auth.token",Sq={"X-Client-Info":`gotrue-js/${dA}`},wv="X-Supabase-Api-Version",fA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Eq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nq=10*60*1e3;class Zl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Cq extends Zl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Pq(e){return be(e)&&e.name==="AuthApiError"}class eo extends Zl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ls extends Zl{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ur extends Ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tq(e){return be(e)&&e.name==="AuthSessionMissingError"}class Ho extends Ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pu extends Ls{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Tu extends Ls{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kq(e){return be(e)&&e.name==="AuthImplicitGrantRedirectError"}class q_ extends Ls{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jv extends Ls{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function rm(e){return be(e)&&e.name==="AuthRetryableFetchError"}class W_ extends Ls{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class _v extends Ls{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),H_=` 	
\r=`.split(""),Aq=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<H_.length;t+=1)e[H_[t].charCodeAt(0)]=-2;for(let t=0;t<Yd.length;t+=1)e[Yd[t].charCodeAt(0)]=t;return e})();function G_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yd[n]),t.queuedBits-=6}}function hA(e,t,r){const n=Aq[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function K_(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{Oq(a,n,r)};for(let a=0;a<e.length;a+=1)hA(e.charCodeAt(a),s,o);return t.join("")}function Rq(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Iq(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Rq(n,t)}}function Oq(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ri(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)hA(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Dq(e){const t=[];return Iq(e,r=>t.push(r)),new Uint8Array(t)}function io(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>G_(s,r,n)),G_(null,r,n),t.join("")}function $q(e){return Math.round(Date.now()/1e3)+e}function Lq(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",zs={tested:!1,writable:!1},pA=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zs.tested)return zs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zs.tested=!0,zs.writable=!0}catch{zs.tested=!0,zs.writable=!1}return zs.writable};function Mq(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const mA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Fq=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ri=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Us=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Qn=async(e,t)=>{await e.removeItem(t)};class rh{constructor(){this.promise=new rh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}rh.promiseConstructor=Promise;function nm(e){const t=e.split(".");if(t.length!==3)throw new _v("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Eq.test(t[n]))throw new _v("JWT not in base64url format");return{header:JSON.parse(K_(t[0])),payload:JSON.parse(K_(t[1])),signature:Ri(t[2]),raw:{header:t[0],payload:t[1]}}}async function Bq(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zq(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){n(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function Uq(e){return("0"+e.toString(16)).substr(-2)}function Vq(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Uq).join("")}async function qq(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function Wq(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await qq(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Go(e,t,r=!1){const n=Vq();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ri(e,`${t}-code-verifier`,s);const o=await Wq(n);return[o,n===o?"plain":"s256"]}const Hq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gq(e){const t=e.headers.get(wv);if(!t||!t.match(Hq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kq(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Yq(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ko(e){if(!Jq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sm(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xq(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Y_(e){return JSON.parse(JSON.stringify(e))}const Ys=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qq=[502,503,504];async function J_(e){var t;if(!Fq(e))throw new jv(Ys(e),0);if(Qq.includes(e.status))throw new jv(Ys(e),e.status);let r;try{r=await e.json()}catch(o){throw new eo(Ys(o),o)}let n;const s=Gq(e);if(s&&s.getTime()>=fA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new W_(Ys(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ur}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new W_(Ys(r),e.status,r.weak_password.reasons);throw new Cq(Ys(r),e.status||500,n)}const Zq=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Se(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[wv]||(o[wv]=fA["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await eW(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function eW(e,t,r,n,s,o){const a=Zq(t,n,s,o);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new jv(Ys(c),0)}if(l.ok||await J_(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await J_(c)}}function Vr(e){var t;let r=null;nW(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$q(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function X_(e){const t=Vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function as(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function tW(e){return{data:e,error:null}}function rW(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=yn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Q_(e){return e}function nW(e){return e.access_token&&e.refresh_token&&e.expires_in}const om=["global","local","others"];class sW{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=mA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=om[0]){if(om.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${om.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:as})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=yn(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:rW,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:as})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Q_});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ko(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:as})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ko(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:as})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ko(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:as})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ko(t.userId);try{const{data:r,error:n}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ko(t.userId),Ko(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Q_});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}}function Z_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Yo={debug:!!(globalThis&&pA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class oW extends gA{}async function iW(e,t,r){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new oW(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function aW(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vA(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function lW(e){return parseInt(e,16)}function cW(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function uW(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:f,uri:d,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=vA(e.address),g=f?`${f}://${n}`:n,v=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${m}

${v}`;let y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}y+=b}return`${x}
${y}`}class lt extends Error{constructor({message:t,code:r,cause:n,name:s}){var o;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Jd extends lt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function dW({error:e,options:t}){var r,n,s;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(xA(a)){if(o.rp.id!==a)return new lt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function fW({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(xA(n)){if(r.rpId!==n)return new lt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class hW{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const pW=new hW;function mW(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=yn(e,["challenge","user","excludeCredentials"]),o=Ri(t).buffer,a=Object.assign(Object.assign({},r),{id:Ri(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ri(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function gW(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=yn(e,["challenge","allowCredentials"]),s=Ri(t).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Ri(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function vW(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:io(new Uint8Array(e.response.attestationObject)),clientDataJSON:io(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xW(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:io(new Uint8Array(s.authenticatorData)),clientDataJSON:io(new Uint8Array(s.clientDataJSON)),signature:io(new Uint8Array(s.signature)),userHandle:s.userHandle?io(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function e1(){var e,t;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function yW(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jd("Browser returned unexpected credential type",t)}:{data:null,error:new Jd("Empty credential response",t)}}catch(t){return{data:null,error:dW({error:t,options:e})}}}async function bW(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jd("Browser returned unexpected credential type",t)}:{data:null,error:new Jd("Empty credential response",t)}}catch(t){return{data:null,error:fW({error:t,options:e})}}}const wW={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jW={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Xd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(t(a)){const l=n[o];t(l)?n[o]=Xd(l,a):n[o]=Xd(a)}else n[o]=a}return n}function _W(e,t){return Xd(wW,e,t||{})}function SW(e,t){return Xd(jW,e,t||{})}class EW{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},o){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:l};const c=s??pW.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=_W(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:d}=await yW({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=SW(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:d}=await bW(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new Zl("rpId is required for WebAuthn authentication")};try{if(!e1())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new Zl("rpId is required for WebAuthn registration")};try{if(!e1())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in register",a)}}}}aW();const NW={url:jq,storageKey:_q,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sq,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function t1(e,t,r){return await r()}const Jo={};class ec{get jwks(){var t,r;return(r=(t=Jo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Jo[this.storageKey]=Object.assign(Object.assign({},Jo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Jo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Jo[this.storageKey]=Object.assign(Object.assign({},Jo[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},NW),t);if(this.storageKey=o.storageKey,this.instanceID=(r=ec.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ec.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new sW({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=mA(o.fetch),this.lock=o.lock||t1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Tt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=iW:this.lock=t1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new EW(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:pA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Z_(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Z_(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dA}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Tt()&&(r=Mq(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Tt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),kq(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?this._returnResult({error:r}):this._returnResult({error:new eo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vr}),{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Go(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Vr})}else if("phone"in t){const{phone:f,password:d,options:h}=t;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Vr})}else throw new Pu("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:a,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:X_})}else if("phone"in t){const{phone:o,password:a,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:X_})}else throw new Pu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const o=new Ho;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,o,a,l,c,u,f,d,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:y,options:b}=t;let w;if(Tt())if(typeof x=="object")w=x;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")w=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),_=await w.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=vA(_[0]);let E=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const P=await w.request({method:"eth_chainId"});E=lW(P)}const N={domain:j.host,address:S,statement:y,uri:j.href,version:"1",chainId:E,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=b==null?void 0:b.signInWithEthereum)===null||f===void 0?void 0:f.resources};m=uW(N),g=await w.request({method:"personal_sign",params:[cW(m),S]})}try{const{data:v,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Vr});if(x)throw x;if(!v||!v.session||!v.user){const y=new Ho;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(be(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,o,a,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let j;if(Tt())if(typeof y=="object")j=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:x,error:y}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:io(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Vr});if(y)throw y;if(!x||!x.session||!x.user){const b=new Ho;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(be(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await Us(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:a}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Vr});if(await Qn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const l=new Ho;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const f=new Ho;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Go(this.storage,this.storageKey));const{error:d}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Pu("You must provide either an email or phone number.")}catch(l){if(be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Vr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Go(this.storage,this.storageKey));const l=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:tW});return this._returnResult(l)}catch(o){if(be(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ur;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:a}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:a,error:l}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Pu("You must provide either an email or phone number and a type")}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<tm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Us(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=sm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=Xq(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:as}):await this._useSession(async r=>{var n,s,o;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:as})})}catch(r){if(be(r))return Tq(r)&&(await this._removeSession(),await Qn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Ur;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Go(this.storage,this.storageKey));const{data:u,error:f}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:as});if(f)throw f;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(be(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ur;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:a}=nm(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ur;const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Tt())throw new Tu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Tu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new q_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new q_("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new Tu("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(o);if(x)throw x;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Us(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Pq(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Qn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Lq(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Go(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(be(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var a,l,c,u,f;const{data:d,error:h}=o;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Tt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(be(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:f}=t,d=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vr}),{data:h,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Ho}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(s){if(be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)throw a;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zq(async s=>(s>0&&await Bq(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vr})),(s,o)=>{const a=200*Math.pow(2,s);return o&&rm(o)&&Date.now()+a-n<ti})}catch(n){if(this._debug(r,"error",n),be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Us(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Us(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ri(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:sm()}else if(s&&!s.user&&!s.user){const a=await Us(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Qn(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,s)):s.user=sm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tm;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${tm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),rm(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new rh;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Ur;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),be(o)){const a={data:null,error:o};return rm(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ri(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Y_(s);await ri(this.storage,this.storageKey,o)}else{const s=Y_(r);await ri(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Qn(this.storage,this.storageKey),await Qn(this.storage,this.storageKey+"-code-verifier"),await Qn(this.storage,this.storageKey+"-user"),this.userStorage&&await Qn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ti}ms, refresh threshold is ${bv} ticks`),s<=bv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Go(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vW(t.webauthn.credential_response):xW(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:mW(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:gW(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=nm(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Ur});const a=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Ur});const a=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Nq>s)return n;const{data:o,error:a}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=nm(n);r!=null&&r.allowExpired||Kq(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:o,header:s,signature:a},error:null}}const f=Yq(s.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,a,Dq(`${l}.${c}`)))throw new _v("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}}ec.nextInstanceID={};const CW=ec;class PW extends CW{constructor(t){super(t)}}class TW{constructor(t,r,n){var s,o,a;this.supabaseUrl=t,this.supabaseKey=r;const l=wq(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:hq,realtime:mq,auth:Object.assign(Object.assign({},pq),{storageKey:c}),global:fq},f=bq(n??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=xq(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new w9(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new cq(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new x9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:a,flowType:l,lock:c,debug:u,throwOnError:f},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PW({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:u,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new M9(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kW=(e,t,r)=>new TW(e,t,r);function AW(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}AW()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const RW="https://vvzxvtiyybilkswslqfn.supabase.co",IW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ2enh2dGl5eWJpbGtzd3NscWZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3ODgzNDgsImV4cCI6MjA3ODM2NDM0OH0.e-8gRV1ZP3V_zKor5RrpFhKlxd3BwumVhQe6OntZk1U",k=kW(RW,IW,{auth:{storage:window.localStorage,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit",storageKey:"sb-yscwpxwgnhqbhkqzipag-auth-token"},db:{schema:"public"}}),r1={debug:"#6366f1",info:"#3b82f6",warn:"#f59e0b",error:"#ef4444"},n1=()=>new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),T={debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{console.warn(`%c[${n1()}] WARN`,`color: ${r1.warn}; font-weight: bold`,...e)},error:(...e)=>{console.error(`%c[${n1()}] ERROR`,`color: ${r1.error}; font-weight: bold`,...e)}},yA=p.createContext(null),OW=({children:e})=>{const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(null),u=p.useCallback(async()=>{try{s(!0),a(null);const{data:{session:d}}=await k.auth.getSession();if(!d){T.debug("UsersContext: No active session, skipping fetch"),r([]),s(!1);return}const{data:h,error:m}=await k.rpc("get_accessible_users");if(m)throw T.error("UsersContext RPC error:",m),m;T.debug("UsersContext loaded",{count:(h==null?void 0:h.length)||0}),r(h||[]),c(new Date)}catch(d){T.error(" UsersContext fetch error:",d),a(d.message)}finally{s(!1)}},[]);p.useEffect(()=>{u()},[u]),p.useEffect(()=>{const{data:{subscription:d}}=k.auth.onAuthStateChange(h=>{h==="SIGNED_IN"?u():h==="SIGNED_OUT"&&(r([]),c(null))});return()=>d.unsubscribe()},[u]);const f={users:t,loading:n,error:o,refetch:u,lastFetch:l};return i.jsx(yA.Provider,{value:f,children:e})},a0=()=>{const e=p.useContext(yA);return e||{users:[],loading:!0,error:null,refetch:()=>{},lastFetch:null}};function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function DW(e,t){if(tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $W(e){var t=DW(e,"string");return tc(t)=="symbol"?t:t+""}function LW(e,t,r){return(t=$W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const MW=[{name:"Pipeline",path:"/admin/pipeline",icon:GC,adminOnly:!1},{name:"Agenda",path:"/admin/agenda",icon:Qx,adminOnly:!1},{name:"Contacts",path:"/admin/contacts",icon:Vi,adminOnly:!1},{name:"Charly AI",path:"/admin/charly",icon:zl,adminOnly:!1},{name:"Workflow V2",path:"/admin/workflow-v2-config",icon:Wg,adminOnly:!0},{name:"Configuration IA",path:"/admin/configuration-ia",icon:YC,adminOnly:!0},{name:"Landing Page",path:"/admin/landing-page",icon:s3,adminOnly:!0}],FW=()=>{const{width:e}=th(),t=e<768,[r,n]=p.useState(!1),{notifications:s,markNotificationAsRead:o,activeAdminUser:a,switchActiveAdminUser:l,brandName:c,logoUrl:u}=Ve();a0();const f=Oe();Cf();const d=p.useMemo(()=>{const x=(a==null?void 0:a.role)==="Global Admin"||(a==null?void 0:a.role)==="Admin"||(a==null?void 0:a.role)==="platform_admin";return MW.filter(y=>!y.adminOnly||x)},[a==null?void 0:a.role]),h=s.filter(x=>!x.read),m=J.useMemo(()=>{const x={};return h.forEach(y=>{const b=`${y.prospectId}-${y.projectType}`;x[b]||(x[b]={prospectId:y.prospectId,prospectName:y.prospectName,projectType:y.projectType,projectName:y.projectName,notifications:[],totalCount:0,latestTimestamp:y.timestamp}),x[b].notifications.push(y),x[b].totalCount+=y.count||1,new Date(y.timestamp)>new Date(x[b].latestTimestamp)&&(x[b].latestTimestamp=y.timestamp)}),Object.values(x).sort((y,b)=>new Date(b.latestTimestamp)-new Date(y.latestTimestamp))},[h]),g=x=>{x.notifications.forEach(y=>{o(y.id)}),f(`/admin/pipeline?project=${x.projectType}&prospect=${x.prospectId}`)},v=()=>i.jsx(bo,{children:r&&i.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1),children:i.jsxs(ie.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-4/5 max-w-sm bg-background p-6 shadow-xl",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("span",{className:"font-bold text-xl",children:"Menu Pro"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:i.jsx(Ro,{className:"h-6 w-6"})})]}),i.jsxs("nav",{className:"flex flex-col space-y-2",children:[d.map(x=>i.jsxs(Ad,{to:x.path,onClick:()=>n(!1),className:({isActive:y})=>`flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors ${y?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(x.icon,{className:"h-6 w-6"}),i.jsx("span",{children:x.name})]},x.name)),i.jsx("div",{className:"pt-4 mt-4 border-t",children:i.jsxs(uo,{to:"/admin/parametres",onClick:()=>n(!1),className:"flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors text-gray-600 hover:bg-gray-50",children:[i.jsx(YC,{className:"h-6 w-6"}),i.jsx("span",{children:"Paramtres"})]})})]})]})})});return i.jsx(i.Fragment,{children:i.jsxs(ie.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-background/80 backdrop-blur-md shadow-sm sticky top-0 z-40 border-b border-gray-100",children:[i.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx(uo,{to:"/admin",className:"flex items-center",children:i.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[c||"Admin"," ",i.jsx("span",{className:"font-light text-blue-600",children:"Pro"})]})})}),i.jsx("nav",{className:"hidden md:flex items-center space-x-2 bg-gray-100 p-1 rounded-full",children:d.map(x=>i.jsxs(Ad,{to:x.path,className:({isActive:y})=>`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${y?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[i.jsx(x.icon,{className:"h-4 w-4"}),i.jsx("span",{children:x.name})]},x.name))}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Mk,{children:[i.jsx(Fk,{asChild:!0,children:i.jsxs(H,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-100 relative",children:[i.jsx(WC,{className:"h-5 w-5 text-gray-600"}),m.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:m.reduce((x,y)=>x+y.totalCount,0)})]})}),i.jsxs(Jy,{align:"end",className:"w-80",children:[i.jsx(Xy,{children:"Notifications"}),i.jsx(Qy,{}),m.length>0?m.map((x,y)=>i.jsx(Xl,{onClick:()=>g(x),className:"cursor-pointer",children:i.jsxs("div",{className:"flex items-start space-x-3 py-2 w-full",children:[i.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:i.jsx(ty,{className:"h-4 w-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-800",children:x.totalCount>1?`${x.totalCount} nouveaux messages de ${x.prospectName}`:`Nouveau message de ${x.prospectName}`}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Projet: ",x.projectName]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(x.latestTimestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})},`${x.prospectId}-${x.projectType}-${y}`)):i.jsx(Xl,{disabled:!0,children:i.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Aucune nouvelle notification"})})]})]}),i.jsx(uo,{to:"/admin/profil",children:i.jsx("div",{className:"w-8 h-8 gradient-green rounded-full flex items-center justify-center cursor-pointer",children:i.jsx(jc,{className:"h-4 w-4 text-white"})})}),t&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!0),className:"rounded-full hover:bg-gray-100",children:i.jsx(KC,{className:"h-6 w-6"})})]})]})}),t&&i.jsx(v,{})]})})},BW=()=>{const e=t=>{M({title:` Action rapide "${t}" non implmente.`,description:"Vous pouvez demander son dveloppement ! "})};return i.jsxs("div",{className:"w-full flex-shrink-0 bg-white rounded-3xl shadow-soft flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-20 bg-gradient-to-br from-teal-400 to-green-500 rounded-t-3xl"}),i.jsx("div",{className:"relative pt-6 px-6 flex justify-center",children:i.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-white shadow-lg overflow-hidden flex items-center justify-center",children:i.jsx("img",{className:"w-full h-auto object-contain rounded-full",alt:"Avatar de Charly, conseiller virtuel Evatime",src:"https://horizons-cdn.hostinger.com/43725989-d002-4543-b65c-278701925e7e/4e3f809791e357819f31c585852d3a99.png"})})})]}),i.jsxs("div",{className:"p-4 text-center",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Bonjour "}),i.jsx("p",{className:"text-gray-600 text-xs",children:"Je suis Charly, enchant de vous connaitre !!  Posez-moi une question ou lancez une action."})]}),i.jsxs("div",{className:"px-4 grid grid-cols-2 gap-2",children:[i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("RDV"),children:[i.jsx(Qx,{className:"h-4 w-4 text-blue-500"})," ",i.jsx("span",{children:"RDV"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("Appel"),children:[i.jsx(wc,{className:"h-4 w-4 text-green-500"})," ",i.jsx("span",{children:"Appel"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("SMS"),children:[i.jsx(ty,{className:"h-4 w-4 text-purple-500"})," ",i.jsx("span",{children:"SMS"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("Email"),children:[i.jsx(Zr,{className:"h-4 w-4 text-orange-500"})," ",i.jsx("span",{children:"Email"})]})]}),i.jsx("div",{className:"p-4 mt-auto",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"crire  Charly",className:"w-full px-4 py-2 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),i.jsx(H,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-green-600 h-8 w-8",onClick:()=>M({title:"Le chat n'est pas encore fonctionnel."}),children:i.jsx(f3,{className:"h-5 w-5"})})]})})]})},zW=({isDesktop:e})=>{const[t,r]=p.useState(!1),n=({onClose:s,isMobile:o})=>i.jsxs(ie.div,{initial:o?{opacity:0,y:"100%"}:{opacity:0,x:"20px"},animate:{opacity:1,y:0,x:0},exit:o?{opacity:0,y:"100%"}:{opacity:0,x:"20px"},transition:{duration:.5,ease:[.22,1,.36,1]},className:o?"fixed inset-0 bg-white z-50 flex flex-col":"w-full",children:[i.jsx(BW,{}),o&&i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"rounded-full bg-black/20 text-white hover:bg-black/40",children:i.jsx(Ro,{className:"h-5 w-5"})})})]});return e?i.jsx(n,{onClose:()=>{},isMobile:!1}):i.jsxs(i.Fragment,{children:[i.jsx(ie.div,{className:"fixed bottom-6 right-6 z-40",initial:{scale:0},animate:{scale:1},transition:{delay:.5},children:i.jsx(H,{onClick:()=>r(!0),className:"w-16 h-16 rounded-full gradient-green shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:i.jsx("img",{className:"w-full h-auto object-contain",alt:"Ouvrir le chat avec Charly",src:"https://horizons-cdn.hostinger.com/43725989-d002-4543-b65c-278701925e7e/4e3f809791e357819f31c585852d3a99.png"})})})}),i.jsx(bo,{children:t&&i.jsx(n,{onClose:()=>r(!1),isMobile:!0})})]})},UW=e=>{const[t,r]=p.useState(null),[n,s]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null);return p.useEffect(()=>{if(!e){r(null),s(null),a(null),c(null),f(!1);return}(async()=>{try{f(!0),h(null),r(null),s(null),a(null),c(null),T.info("[useBranding] Chargement branding pour organization:",e);const{data:g,error:v}=await k.rpc("get_organization_settings_for_org",{p_organization_id:e});if(v){T.warn("[useBranding] Erreur lors du chargement (table organization_settings peut ne pas exister):",v),f(!1);return}const x=g||null;if(!x){T.info("[useBranding] Aucun paramtre de branding trouv, utilisation des valeurs par dfaut"),f(!1);return}T.info("[useBranding] Branding charg:",x),r(x.display_name),s(x.logo_url),a(x.primary_color),c(x.secondary_color),f(!1)}catch(g){T.warn("[useBranding] Exception lors du chargement, fallback vers valeurs par dfaut:",g),f(!1)}})()},[e]),{brandName:t,logoUrl:n,primaryColor:o,secondaryColor:l,brandingLoading:u,brandingError:d}},l0=p.createContext(null),nn=()=>{const e=p.useContext(l0);if(!e)throw new Error("useOrganization must be used within OrganizationProvider");return e},VW=({children:e})=>{const[t,r]=p.useState(null),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(!1),[u,f]=p.useState(null),d=p.useRef(!1),[h,m]=p.useState(!1);p.useEffect(()=>{k.auth.getSession().then(({data:{session:_}})=>{var E;const S=((E=_==null?void 0:_.user)==null?void 0:E.id)||null;f(S)});const{data:{subscription:j}}=k.auth.onAuthStateChange((_,S)=>{var N;const E=((N=S==null?void 0:S.user)==null?void 0:N.id)||null;f(P=>E!==P?E:P)});return()=>j.unsubscribe()},[]),p.useEffect(()=>{let _=null,S=!1;const E=(P,C=!1,I=null)=>{S||(_&&(clearTimeout(_),_=null),r(P),c(C),I&&a(I),!d.current&&!I&&(d.current=!0,m(!0)),s(!1))};return(async()=>{var P,C,I;try{s(!0),a(null),c(!1),_=setTimeout(()=>{S||(T.error("[OrganizationContext] Timeout rsolution organisation (10s)"),a("Dlai de connexion dpass. Le serveur ne rpond pas."),s(!1))},1e4);const O=window.location.hostname;T.info("[OrganizationContext] Hostname actuel:",O);let $=null;const{data:L,error:V}=await k.rpc("resolve_organization_from_host",{host:O});if(S)return;if(!V&&L&&($=(L==null?void 0:L.id)||Array.isArray(L)&&((P=L[0])==null?void 0:P.id)||L,$&&typeof $=="string"?T.info("[OrganizationContext] Organization rsolue depuis hostname:",$):$=null),u){T.info("[OrganizationContext] User authentifi, vrification organization_id");const{data:A}=await k.from("users").select("organization_id").eq("user_id",u).maybeSingle();if(S)return;if(A!=null&&A.organization_id){T.info("[OrganizationContext] Organization rsolue depuis user admin:",A.organization_id),E(A.organization_id,!1);return}if($){const{data:q}=await k.from("prospects").select("id, organization_id").eq("user_id",u).eq("organization_id",$).maybeSingle();if(S)return;if(q){T.info("[OrganizationContext] Client dj li  l'org du hostname:",$),E($,!1);return}const{data:{session:W}}=await k.auth.getSession();if(S)return;const te=(C=W==null?void 0:W.user)==null?void 0:C.email;if(te){const{data:fe,error:le}=await k.rpc("link_user_to_prospect_in_org",{p_user_id:u,p_email:te,p_organization_id:$});if(S)return;if(!le&&fe){T.info("[OrganizationContext] Client li au prospect dans l'org du hostname:",$),E($,!1);return}else le&&T.warn("[OrganizationContext] Erreur liaison prospect:",le.message)}}const{data:R}=await k.from("prospects").select("organization_id").eq("user_id",u).limit(1).maybeSingle();if(S)return;if(R!=null&&R.organization_id){T.info("[OrganizationContext] Organization rsolue depuis prospect (user_id):",R.organization_id),E(R.organization_id,!1);return}const{data:{session:D}}=await k.auth.getSession();if(S)return;const F=(I=D==null?void 0:D.user)==null?void 0:I.email;if(F){const{data:q}=await k.from("prospects").select("organization_id").eq("email",F).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(S)return;if(q!=null&&q.organization_id){T.info("[OrganizationContext] Organization rsolue depuis prospect par EMAIL:",q.organization_id),E(q.organization_id,!1);return}}}if($){T.info("[OrganizationContext] Pas de user, utilisation hostname org:",$),E($,!1);return}T.warn("[OrganizationContext] Aucune organisation trouve, fallback vers organisation plateforme");const{data:z,error:B}=await k.from("organizations").select("id").eq("is_platform",!0).limit(1).maybeSingle();if(S)return;if(!B&&z){const A=z.id||(z==null?void 0:z.organization_id)||z;A?(T.info("[OrganizationContext] Fallback vers organisation plateforme:",A),E(A,!0)):(T.warn("[OrganizationContext] Platform organization query returned no id, leaving organizationId null"),E(null,!0))}else T.warn("[OrganizationContext] Impossible de rcuprer l'organisation plateforme, leaving organizationId null",B),E(null,!0)}catch(O){if(_&&clearTimeout(_),S)return;T.error("[OrganizationContext] Exception lors de la rsolution:",O),T.warn("[OrganizationContext] Fallback vers organizationId = null (mode dgrad)"),E(null,!0)}})(),()=>{S=!0,_&&clearTimeout(_)}},[u]);const{brandName:g,logoUrl:v,primaryColor:x,secondaryColor:y,brandingLoading:b,brandingError:w}=UW(t);return p.useEffect(()=>{g&&(document.title=g)},[g]),p.useEffect(()=>{x&&document.documentElement.style.setProperty("--primary",x),y&&document.documentElement.style.setProperty("--secondary",y)},[x,y]),p.useEffect(()=>{},[t,u]),i.jsx(l0.Provider,{value:{organizationId:t,organizationLoading:n,organizationError:o,organizationReady:h,isPlatformOrg:l,brandName:g,logoUrl:v,primaryColor:x,secondaryColor:y,brandingLoading:b,brandingError:w},children:e})};class bA extends p.Component{constructor(r){super(r);Fs(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})});Fs(this,"handleGoBack",()=>{window.history.length>1?window.history.back():window.location.href="/"});Fs(this,"handleGoHome",()=>{window.location.href="/admin/pipeline"});this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(r){const n=`ERR-${Date.now()}-${Math.random().toString(36).slice(2,6).toUpperCase()}`;return{hasError:!0,error:r,errorId:n}}componentDidCatch(r,n){const{name:s="Module"}=this.props,{errorId:o}=this.state;T.error(`[ModuleBoundary] Crash dans "${s}"`,{errorId:o,module:s,message:r==null?void 0:r.message,stack:r==null?void 0:r.stack,componentStack:n==null?void 0:n.componentStack}),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(r,{tags:{module:s,errorId:o},extra:{componentStack:n==null?void 0:n.componentStack}}),this.setState({errorInfo:n})}render(){const{hasError:r,error:n,errorId:s}=this.state,{children:o,name:a="Module"}=this.props;return r?i.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-8",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-red-100 p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Xx,{className:"w-8 h-8 text-red-500"})}),i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:['Module "',a,'" a rencontr une erreur']}),i.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Une erreur inattendue s'est produite. Vous pouvez ressayer ou retourner  l'accueil."}),i.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2 mb-6",children:i.jsx("code",{className:"text-xs text-gray-500 font-mono",children:s})}),!1,i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsxs(H,{variant:"outline",onClick:this.handleGoHome,className:"flex items-center gap-2",children:[i.jsx(HC,{className:"w-4 h-4"}),"Accueil"]}),i.jsxs(H,{onClick:this.handleRetry,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:[i.jsx(Of,{className:"w-4 h-4"}),"Ressayer"]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Si le problme persiste, contactez le support avec le code ci-dessus."})]})}):o}}const qW=()=>{const{width:e}=th(),{activeAdminUser:t,setActiveAdminUser:r,adminReady:n,bootStatus:s,BOOT_STATUS:o}=Ve(),{organizationId:a,organizationLoading:l,organizationError:c}=nn(),u=e<768,f=e>=1024,d=yr(),h=Oe();d.pathname.startsWith("/admin/charly"),d.pathname.startsWith("/admin/agenda"),d.pathname.startsWith("/admin/profil"),d.pathname.startsWith("/admin/pipeline")||d.pathname,d.pathname.startsWith("/admin/contacts");const m=d.pathname.startsWith("/admin/configuration-ia");d.pathname.startsWith("/admin/workflows-charly");const g=d.pathname.startsWith("/admin/landing-page"),v=m||g,x=(t==null?void 0:t.role)==="Global Admin"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="platform_admin";return c?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connexion au serveur impossible"}),i.jsx("p",{className:"text-gray-600 mb-6",children:c}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Ressayer"}),i.jsx("button",{onClick:()=>h("/"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour  l'accueil"})]})]})}):l||!a?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:"Connexion..."})]})}):v&&!x&&!(!n&&!t)?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux administrateurs (Global Admin, Admin)."}),i.jsx("button",{onClick:()=>h("/admin/pipeline"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au Pipeline"})]})}):(p.useEffect(()=>{(async()=>{const{data:{user:w}}=await k.auth.getUser();if(w&&!t){const{data:j}=await k.from("prospects").select("id").eq("user_id",w.id).single();j&&(console.warn(" Client dtect sur espace admin  dconnexion automatique"),await k.auth.signOut(),h("/"))}})()},[t,h]),p.useEffect(()=>{if(!(t!=null&&t.id))return;const b=k.channel(`admin-user-${t.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"users",filter:`id=eq.${t.id}`},w=>{const j={id:w.new.id,userId:w.new.user_id,name:w.new.name,email:w.new.email,role:w.new.role,phone:w.new.phone,avatarUrl:w.new.avatar_url,managerId:w.new.manager_id,accessRights:w.new.access_rights,createdAt:w.new.created_at,updatedAt:w.new.updated_at};r(j)}).subscribe();return()=>{k.removeChannel(b)}},[t==null?void 0:t.id,r]),i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[i.jsx(FW,{}),i.jsxs("div",{className:"flex flex-1 w-full",children:[i.jsx("main",{className:"flex-1 min-w-0 p-4 sm:p-6 lg:p-8",children:i.jsx(bA,{name:"Admin Page",children:i.jsx(Nf,{})})}),m&&f&&i.jsx("aside",{className:"w-[300px] flex-shrink-0 p-6 pr-10 hidden lg:block",children:i.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-sm ring-1 ring-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Configurer Charly"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:"Personnalisez les projets, workflows, formulaires et contrats pour automatiser le suivi de vos clients."}),i.jsx("a",{href:"/admin/projects-management",className:"flex items-center justify-center gap-2 w-full rounded-lg bg-blue-600 px-5 py-3 text-base font-medium text-white transition-colors hover:bg-blue-700",children:" Configurer"})]})})]}),!f&&!u&&i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsx(zW,{isDesktop:!1})})]}))},s1=[{name:"Tableau de bord",path:"/dashboard",icon:GC,end:!0},{name:"Offres & Produits",path:"/dashboard/offres",icon:JC},{name:"Parrainage",path:"/dashboard/parrainage",icon:Ug}],WW=()=>{const{width:e}=th(),t=e<768,[r,n]=p.useState(!1),{companyLogo:s,clientNotifications:o,markClientNotificationAsRead:a,projectsData:l,brandName:c,logoUrl:u}=Ve(),f=Oe(),d=o.filter(x=>!x.read),h=J.useMemo(()=>{const x={};return d.forEach(y=>{const b=`${y.projectType}`;x[b]||(x[b]={projectType:y.projectType,projectName:y.projectName,notifications:[],totalCount:0,latestTimestamp:y.timestamp}),x[b].notifications.push(y),x[b].totalCount+=y.count||1,new Date(y.timestamp)>new Date(x[b].latestTimestamp)&&(x[b].latestTimestamp=y.timestamp)}),Object.values(x).sort((y,b)=>new Date(b.latestTimestamp)-new Date(y.latestTimestamp))},[d]),m=x=>{x.notifications.forEach(y=>{a(y.id)}),f("/dashboard",{state:{openProjectType:x.projectType}})},g=()=>{f("/dashboard/profil")},v=()=>i.jsx(bo,{children:r&&i.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1),children:i.jsxs(ie.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-4/5 max-w-sm bg-background p-6 shadow-xl",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("span",{className:"font-bold text-xl",children:"Menu"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:i.jsx(Ro,{className:"h-6 w-6"})})]}),i.jsx("nav",{className:"flex flex-col space-y-2",children:s1.map(x=>i.jsxs(Ad,{to:x.path,end:x.end,onClick:()=>n(!1),className:({isActive:y})=>`flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors ${y?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(x.icon,{className:"h-6 w-6"}),i.jsx("span",{children:x.name})]},x.name))})]})})});return i.jsxs("header",{className:"bg-background/80 backdrop-blur-md shadow-sm sticky top-0 z-40 border-b border-gray-100",children:[i.jsx("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx(uo,{to:"/dashboard",className:"flex items-center",children:u?i.jsx("img",{src:u,alt:c||"Logo",className:"h-14 w-auto object-contain"}):s&&s.startsWith("data:video/mp4")?i.jsx("video",{src:s,className:"h-14 w-auto object-contain",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",style:{display:"block",background:"transparent"}}):s?i.jsx("img",{src:s,alt:"Logo",className:"h-14 w-auto object-contain"}):i.jsx("div",{className:"w-10 h-10 gradient-green rounded-xl flex items-center justify-center shadow-card",children:i.jsx("span",{className:"text-white font-bold text-lg",children:c?c.charAt(0).toUpperCase():"C"})})})}),!t&&i.jsx("nav",{className:"flex items-center space-x-2 bg-gray-100 p-1 rounded-full",children:s1.map(x=>i.jsxs(Ad,{to:x.path,end:x.end,className:({isActive:y})=>`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${y?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[i.jsx(x.icon,{className:"h-4 w-4"}),i.jsx("span",{children:x.name})]},x.name))}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Mk,{children:[i.jsx(Fk,{asChild:!0,children:i.jsxs(H,{variant:"ghost",size:"icon",className:"relative rounded-full hover:bg-gray-100",children:[i.jsx(WC,{className:"h-5 w-5 text-gray-600"}),h.length>0&&i.jsx("span",{className:"absolute top-1 right-1 h-4 w-4 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:h.reduce((x,y)=>x+y.totalCount,0)})]})}),i.jsxs(Jy,{align:"end",className:"w-80",children:[i.jsx(Xy,{children:"Notifications"}),i.jsx(Qy,{}),h.length>0?h.map((x,y)=>i.jsxs(Xl,{onClick:()=>m(x),className:"cursor-pointer flex flex-col items-start py-3",children:[i.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[i.jsx("span",{className:"font-semibold text-blue-600",children:x.projectName}),i.jsx("span",{className:"text-xs text-gray-400",children:new Date(x.latestTimestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("p",{className:"text-sm text-gray-600",children:x.totalCount>1?`${x.totalCount} nouveaux messages`:x.notifications[0].message})]},`${x.projectType}-${y}`)):i.jsx(Xl,{disabled:!0,className:"text-center py-4",children:"Aucune nouvelle notification"})]})]}),i.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-100",onClick:g,children:i.jsx("div",{className:"w-8 h-8 gradient-blue rounded-full flex items-center justify-center",children:i.jsx(jc,{className:"h-4 w-4 text-white"})})}),t&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!0),className:"rounded-full hover:bg-gray-100",children:i.jsx(KC,{className:"h-6 w-6"})})]})]})}),t&&i.jsx(v,{})]})},o1=()=>{th();const{currentUser:e,setCurrentUser:t,companyLogo:r}=Ve();Oe();const[n,s]=p.useState(!1);return p.useEffect(()=>{(async()=>{if(!(e!=null&&e.email)){s(!0);return}const{data:{session:a}}=await k.auth.getSession();if(!a){const l=`${window.location.origin}/dashboard`,{error:c}=await k.auth.signInWithOtp({email:e.email,options:{shouldCreateUser:!0,emailRedirectTo:l}});c?T.error("Erreur envoi magic link",{error:c.message}):M({title:" Activation requise",description:`Un lien de connexion a t envoy  ${e.email}. Cliquez dessus pour activer toutes les fonctionnalits.`,duration:1e4})}s(!0)})()},[e==null?void 0:e.email]),p.useEffect(()=>{if(!(e!=null&&e.id)||!n)return;const o=k.channel(`prospect-${e.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"prospects",filter:`id=eq.${e.id}`},a=>{const l={id:a.new.id,userId:a.new.user_id,name:a.new.name,email:a.new.email,phone:a.new.phone,company:a.new.company_name,address:a.new.address,tags:a.new.tags||[],status:a.new.status,ownerId:a.new.owner_id,hasAppointment:a.new.has_appointment,affiliateName:a.new.affiliate_name};t(l)}).subscribe();return()=>{k.removeChannel(o)}},[e==null?void 0:e.id,t]),i.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[i.jsx(WW,{}),i.jsx("div",{className:"flex flex-1 max-w-screen-xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-6 md:py-8 pb-24 md:pb-8",children:i.jsx("main",{className:"flex-1 min-w-0",children:i.jsx(bA,{name:"Espace Client",children:i.jsx(Nf,{})})})})]})},HW=()=>{const e=Oe(),[t,r]=p.useState(!0),[n,s]=p.useState(null);return p.useEffect(()=>{(async()=>{try{const{data:{user:a},error:l}=await k.auth.getUser();if(l||!a){e("/platform-login");return}const{data:c,error:u}=await k.from("platform_admins").select("user_id, email").eq("user_id",a.id).maybeSingle();if(u){console.error("[PlatformLayout] Error querying platform_admins:",u),await k.auth.signOut(),e("/platform-login");return}if(!c){console.error("[PlatformLayout] User not in platform_admins"),r(!1),s(null);return}s(c),r(!1)}catch(a){console.error("[PlatformLayout] Error checking access:",a),e("/platform-login")}})()},[e]),t?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:"Vrification des accs plateforme..."})]})}):n?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"EVATIME Platform"})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-gray-600",children:(n==null?void 0:n.name)||(n==null?void 0:n.email)}),i.jsx("span",{className:"text-xs bg-gray-900 text-white px-2 py-1 rounded",children:"Platform Admin"})]})]})})}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsx(Nf,{})})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Votre compte n'est pas autoris  accder  la plateforme EVATIME. Contactez un administrateur si vous pensez que c'est une erreur."}),i.jsx("button",{onClick:async()=>{await k.auth.signOut(),e("/platform-login")},className:"w-full bg-gray-900 text-white py-2 px-4 rounded hover:bg-gray-800 transition-colors",children:"Retour  la connexion"})]})})},GW=()=>{const e=Oe(),[t,r]=p.useState(!0),[n,s]=p.useState(!1);return p.useEffect(()=>{(async()=>{try{const{data:{user:l},error:c}=await k.auth.getUser();if(c||!l){T.debug("PartnerLayout: Pas d'utilisateur authentifi"),e("/partner/login");return}const{data:u,error:f}=await k.from("partners").select("id, active").eq("user_id",l.id).single();if(f||!u){T.warn("PartnerLayout: Utilisateur non-partenaire tente d'accder",{userId:l.id}),await k.auth.signOut(),e("/partner/login");return}if(!u.active){T.warn("PartnerLayout: Partenaire inactif",{partnerId:u.id}),await k.auth.signOut(),e("/partner/login");return}s(!0)}catch(l){T.error("PartnerLayout: Erreur vrification accs",{error:l.message}),e("/partner/login")}finally{r(!1)}})();const{data:{subscription:a}}=k.auth.onAuthStateChange(l=>{l==="SIGNED_OUT"&&e("/partner/login")});return()=>{a==null||a.unsubscribe()}},[e]),t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Me,{className:"w-8 h-8 text-orange-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Vrification de l'accs..."})]})}):n?i.jsx(Nf,{}):null},me=J.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));me.displayName="Input";function wA(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nh="Checkbox",[KW,Xne]=rn(nh),[YW,c0]=KW(nh);function JW(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:o,form:a,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Ao({prop:r,defaultProp:s??!1,onChange:c,caller:nh}),[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useRef(!1),w=g?!!a||!!g.closest("form"):!0,j={checked:h,disabled:o,setChecked:m,control:g,setControl:v,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:_s(s)?!1:s,isFormControl:w,bubbleInput:x,setBubbleInput:y};return i.jsx(YW,{scope:t,...j,children:XW(d)?d(j):n})}var jA="CheckboxTrigger",_A=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:o,value:a,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=c0(jA,e),v=Fe(s,f),x=p.useRef(c);return p.useEffect(()=>{const y=o==null?void 0:o.form;if(y){const b=()=>d(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[o,d]),i.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":_s(c)?"mixed":c,"aria-required":u,"data-state":PA(c),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:v,onKeyDown:xe(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:xe(r,y=>{d(b=>_s(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});_A.displayName=jA;var u0=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(JW,{__scopeCheckbox:r,checked:s,defaultChecked:o,disabled:l,required:a,onCheckedChange:u,name:n,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(_A,{...d,ref:t,__scopeCheckbox:r}),h&&i.jsx(CA,{__scopeCheckbox:r})]})})});u0.displayName=nh;var SA="CheckboxIndicator",EA=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,o=c0(SA,r);return i.jsx(Mr,{present:n||_s(o.checked)||o.checked===!0,children:i.jsx(Ae.span,{"data-state":PA(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});EA.displayName=SA;var NA="CheckboxBubbleInput",CA=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:a,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=c0(NA,e),g=Fe(r,m),v=wA(o),x=Iy(n);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(w,"checked").set,S=!s.current;if(v!==o&&_){const E=new Event("click",{bubbles:S});b.indeterminate=_s(o),_.call(b,_s(o)?!1:o),b.dispatchEvent(E)}},[h,v,o,s]);const y=p.useRef(_s(o)?!1:o);return i.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??y.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CA.displayName=NA;function XW(e){return typeof e=="function"}function _s(e){return e==="indeterminate"}function PA(e){return _s(e)?"indeterminate":e?"checked":"unchecked"}const tr=J.forwardRef(({className:e,...t},r)=>i.jsx(u0,{ref:r,className:pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(EA,{className:pe("flex items-center justify-center text-current"),children:i.jsx(Rn,{className:"h-4 w-4"})})}));tr.displayName=u0.displayName;var QW="Label",TA=p.forwardRef((e,t)=>i.jsx(Ae.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));TA.displayName=QW;var kA=TA;const ZW=kf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=J.forwardRef(({className:e,...t},r)=>i.jsx(kA,{ref:r,className:pe(ZW(),e),...t}));Q.displayName=kA.displayName;const ao=p.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ao.displayName="Textarea";let AA,RA,IA,OA,DA,$A,LA;try{const e=require("@/components/ui/dialog");AA=e.Dialog,RA=e.DialogContent,IA=e.DialogHeader,OA=e.DialogTitle,DA=e.DialogDescription,$A=e.DialogFooter,LA=e.DialogClose}catch{console.warn("Dialog components not available, using fallback")}const eH=({open:e,onOpenChange:t,children:r})=>e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-auto",children:r})}):null,tH=({children:e,className:t})=>i.jsx("div",{className:t,children:e}),rH=({children:e})=>i.jsx("div",{className:"p-6 pb-4",children:e}),nH=({children:e})=>i.jsx("h2",{className:"text-lg font-semibold",children:e}),sH=({children:e})=>i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e}),oH=({children:e})=>i.jsx("div",{className:"flex justify-end gap-2 p-6 pt-4",children:e}),iH=({children:e,asChild:t,...r})=>t?J.cloneElement(e,r):i.jsx("button",{...r,children:e}),aH=({open:e,onOpenChange:t,onAddProspect:r})=>{const{currentUser:n,activeAdminUser:s,projectsData:o={},formContactConfig:a=[]}=Ve(),l=Object.values(o).filter(C=>C.isPublic),c=()=>{const C=a.reduce((I,O)=>(I[O.id]="",I),{});return C.tags=[],C},[u,f]=p.useState(c()),[d,h]=p.useState(!0);p.useEffect(()=>{e&&(f(c()),h(!0))},[e,a]);const m=C=>{const{id:I,value:O}=C.target;f($=>({...$,[I]:O}))},g=C=>{f(I=>{const O=I.tags.includes(C)?I.tags.filter($=>$!==C):[...I.tags,C];return{...I,tags:O}})},v=C=>{if(!C.show_if_conditions||C.show_if_conditions.length===0)return!0;const I=C.condition_operator||"AND",O=C.show_if_conditions.map($=>{const L=u[$.field];return $.equals==="has_value"?L&&L.trim()!=="":L===$.equals});return I==="AND"?O.every($=>$):O.some($=>$)},x=()=>{const C=[];return a.forEach((I,O)=>{if(I.is_repeater&&I.type==="select"&&u[I.id]){const $=parseInt(u[I.id])||0,L=I.repeats_fields||[];for(let V=0;V<$;V++)L.forEach(z=>{const B=a.find(A=>A.id===z);B&&C.push({...B,id:`${z}_repeat_${V}`,name:`${B.name} (${V+1})`,isRepeated:!0,originalId:z,repeatIndex:V})})}}),C},y=[...a,...x()],b=async C=>{C.preventDefault();const I=a.find(L=>L.required);if(I&&!u[I.id]){M({title:"Champs requis",description:`Le champ "${I.name.replace("*","")}" est obligatoire.`,variant:"destructive"});return}if(!u.email){M({title:"Champs requis",description:"L'email est obligatoire.",variant:"destructive"});return}const O=d&&u.email&&u.email.trim()!=="";console.log("[SafeAddProspectModal]  Submit check:",{sendInvitationCheckbox:d,email:u.email,sendInvitationFinal:O});const $={...u,tags:u.tags,hasAppointment:!1,sendInvitation:O};await r($),t(!1)},w=AA||eH,j=RA||tH,_=IA||rH,S=OA||nH,E=DA||sH,N=$A||oH,P=LA||iH;return i.jsx(w,{open:e,onOpenChange:t,children:i.jsxs(j,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs(_,{children:[i.jsx(S,{children:"Ajouter un nouveau prospect"}),i.jsx(E,{children:"Remplissez les informations pour crer un nouveau prospect."})]}),i.jsxs("form",{onSubmit:b,children:[i.jsxs("div",{className:"grid gap-4 py-4 px-6",children:[y.filter(C=>!C.isRepeated||C.isRepeated).map(C=>!C.isRepeated&&!v(C)?null:i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Q,{htmlFor:C.id,className:"text-right",children:C.name}),C.type==="select"?i.jsxs("select",{id:C.id,value:u[C.id]||"",onChange:m,className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",required:C.required,children:[i.jsx("option",{value:"",children:"-- Slectionner --"}),(C.options||[]).map((I,O)=>i.jsx("option",{value:I,children:I},O))]}):C.type==="textarea"?i.jsx(ao,{id:C.id,value:u[C.id]||"",onChange:m,placeholder:C.placeholder,className:"col-span-3",rows:4,required:C.required}):C.type==="file"?i.jsx(me,{id:C.id,type:"file",onChange:I=>{var $;const O=($=I.target.files)==null?void 0:$[0];O&&f(L=>({...L,[C.id]:O}))},className:"col-span-3",required:C.required}):i.jsx(me,{id:C.id,type:C.type,value:u[C.id]||"",onChange:m,placeholder:C.placeholder,className:"col-span-3",required:C.required})]},C.id)),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Q,{htmlFor:"sendInvitation",className:"text-right",children:"Invitation"}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(tr,{id:"sendInvitation",checked:d,onCheckedChange:C=>{console.log("[SafeAddProspectModal] sendInvitation changed to:",C),h(!!C)},disabled:!u.email||u.email.trim()===""}),i.jsxs(Q,{htmlFor:"sendInvitation",className:`font-normal cursor-pointer ${!u.email||u.email.trim()===""?"text-gray-400":""}`,children:["Envoyer une invitation au client",(!u.email||u.email.trim()==="")&&i.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(email requis)"})]})]})]}),l.length>0&&i.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[i.jsx(Q,{className:"text-right pt-2",children:"Projets"}),i.jsx("div",{className:"col-span-3 grid grid-cols-2 gap-2",children:l.map(C=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tr,{id:`tag-${C.type}`,checked:u.tags.includes(C.type),onCheckedChange:()=>g(C.type)}),i.jsx(Q,{htmlFor:`tag-${C.type}`,className:"font-normal",children:C.title})]},C.type))})]})]}),i.jsxs(N,{children:[i.jsx(P,{asChild:!0,children:i.jsx(H,{type:"button",variant:"secondary",onClick:()=>t(!1),children:"Annuler"})}),i.jsx(H,{type:"submit",children:"Crer le prospect"})]})]})]})})};var sh="Dialog",[MA,FA]=rn(sh),[lH,sn]=MA(sh),BA=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Ao({prop:n,defaultProp:s??!1,onChange:o,caller:sh});return i.jsx(lH,{scope:t,triggerRef:l,contentRef:c,contentId:ho(),titleId:ho(),descriptionId:ho(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:a,children:r})};BA.displayName=sh;var zA="DialogTrigger",UA=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=sn(zA,r),o=Fe(t,s.triggerRef);return i.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":h0(s.open),...n,ref:o,onClick:xe(e.onClick,s.onOpenToggle)})});UA.displayName=zA;var d0="DialogPortal",[cH,VA]=MA(d0,{forceMount:void 0}),qA=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=sn(d0,t);return i.jsx(cH,{scope:t,forceMount:r,children:p.Children.map(n,a=>i.jsx(Mr,{present:r||o.open,children:i.jsx(yc,{asChild:!0,container:s,children:a})}))})};qA.displayName=d0;var Qd="DialogOverlay",WA=p.forwardRef((e,t)=>{const r=VA(Qd,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=sn(Qd,e.__scopeDialog);return o.modal?i.jsx(Mr,{present:n||o.open,children:i.jsx(dH,{...s,ref:t})}):null});WA.displayName=Qd;var uH=yo("DialogOverlay.RemoveScroll"),dH=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=sn(Qd,r);return i.jsx(Uy,{as:uH,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ae.div,{"data-state":h0(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),jo="DialogContent",HA=p.forwardRef((e,t)=>{const r=VA(jo,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=sn(jo,e.__scopeDialog);return i.jsx(Mr,{present:n||o.open,children:o.modal?i.jsx(fH,{...s,ref:t}):i.jsx(hH,{...s,ref:t})})});HA.displayName=jo;var fH=p.forwardRef((e,t)=>{const r=sn(jo,e.__scopeDialog),n=p.useRef(null),s=Fe(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return Tc(o)},[]),i.jsx(GA,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault())})}),hH=p.forwardRef((e,t)=>{const r=sn(jo,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(GA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),GA=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=sn(jo,r),c=p.useRef(null),u=Fe(t,c);return Ny(),i.jsxs(i.Fragment,{children:[i.jsx(Vf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(xc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":h0(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(mH,{titleId:l.titleId}),i.jsx(vH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),f0="DialogTitle",KA=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=sn(f0,r);return i.jsx(Ae.h2,{id:s.titleId,...n,ref:t})});KA.displayName=f0;var YA="DialogDescription",JA=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=sn(YA,r);return i.jsx(Ae.p,{id:s.descriptionId,...n,ref:t})});JA.displayName=YA;var XA="DialogClose",QA=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=sn(XA,r);return i.jsx(Ae.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});QA.displayName=XA;function h0(e){return e?"open":"closed"}var ZA="DialogTitleWarning",[pH,eR]=e6(ZA,{contentName:jo,titleName:f0,docsSlug:"dialog"}),mH=({titleId:e})=>{const t=eR(ZA),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},gH="DialogDescriptionWarning",vH=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eR(gH).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tR=BA,rR=UA,nR=qA,p0=WA,m0=HA,g0=KA,v0=JA,oh=QA;const ih=tR,Qne=rR,xH=nR,Zne=oh,sR=J.forwardRef(({className:e,...t},r)=>i.jsx(p0,{ref:r,className:pe("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sR.displayName=p0.displayName;const Oc=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(xH,{children:[i.jsx(sR,{}),i.jsxs(m0,{ref:n,className:pe("fixed left-1/2 top-1/2 z-50 flex w-full max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-h-[90vh]",e),...r,children:[t,i.jsxs(oh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Ro,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oc.displayName=m0.displayName;const Dc=({className:e,...t})=>i.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left p-6",e),...t});Dc.displayName="DialogHeader";const oR=({className:e,...t})=>i.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 p-6 border-t",e),...t});oR.displayName="DialogFooter";const $c=J.forwardRef(({className:e,...t},r)=>i.jsx(g0,{ref:r,className:pe("text-lg font-semibold leading-none tracking-tight",e),...t}));$c.displayName=g0.displayName;const ah=J.forwardRef(({className:e,...t},r)=>i.jsx(v0,{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));ah.displayName=v0.displayName;let iR;iR=aH;const yH={ACC:"bg-blue-100 text-blue-800",Autonomie:"bg-green-100 text-green-800",Centrale:"bg-orange-100 text-orange-800",Investissement:"bg-teal-100 text-teal-800",ProducteurPro:"bg-purple-100 text-purple-800"},bH=({open:e,onOpenChange:t,onAddProspect:r})=>{const{formContactConfig:n=[],projectsData:s={},activeAdminUser:o}=Ve(),[a,l]=p.useState({}),[c,u]=p.useState([]),f=Object.values(s).filter(g=>g.isPublic);p.useEffect(()=>{if(e){const g={};n.forEach(v=>{g[v.id]=""}),l(g),u([])}},[e,n]);const d=g=>{const{id:v,value:x}=g.target;l(y=>({...y,[v]:x}))},h=g=>{u(v=>v.includes(g)?v.filter(y=>y!==g):[...v,g])},m=g=>{if(g.preventDefault(),!a.name||!a.email){M({title:"Champs requis",description:"Le nom et l'email sont obligatoires.",variant:"destructive"});return}const v={id:`prospect-${Date.now()}`,...a,tags:c,hasAppointment:!1,ownerId:(o==null?void 0:o.id)||"user-1"};r(v),M({title:" Prospect ajout !",description:`${v.name} a t ajout  la colonne "Intress".`}),t(!1)};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un nouveau prospect"}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.map(g=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:g.name}),i.jsx(me,{id:g.id,type:g.type,value:a[g.id]||"",onChange:d,placeholder:g.placeholder,required:g.required})]},g.id)),f.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projets"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(g=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tr,{id:`tag-${g.type}`,checked:c.includes(g.type),onCheckedChange:()=>h(g.type)}),i.jsx("label",{htmlFor:`tag-${g.type}`,className:"text-sm",children:g.title})]},g.type))})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),i.jsx(H,{type:"submit",children:"Crer le prospect"})]})]})]})})}):null},wH=()=>{var ue;const e=Ve(),{activeAdminUser:t,projectsData:r={},globalPipelineSteps:n=[],prospects:s,prospectsLoading:o,addProspect:a,updateProspect:l,deleteProspect:c}=e||{},{users:u,loading:f}=a0(),d=p.useMemo(()=>u.reduce((Y,U)=>(Y[U.user_id]=U,Y),{}),[u]),[h,m]=p.useState([]),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState(""),[j,_]=p.useState([]),[S,E]=p.useState(null),[N,P]=p.useState(!1),[C,I]=p.useState(!1),O=p.useRef(null),$=p.useRef(null),L=j.length===0?"Tags":j.length===1?((ue=r[j[0]])==null?void 0:ue.title)||j[0]:`${j.length} tags`,V=Oe();yr(),p.useMemo(()=>(s==null?void 0:s.find(Y=>Y.id===g))||null,[s,g]);const z=p.useMemo(()=>!t||!u?[]:(t.role==="Global Admin"||t.role==="Admin",u),[t,u]),B=p.useMemo(()=>{var Y;return S?((Y=z.find(U=>U.user_id===S))==null?void 0:Y.name)||"Utilisateur inconnu":z.length===1?z[0].name:"Tous les utilisateurs"},[S,z]);p.useEffect(()=>{t&&S===null&&(z.length===1?E(z[0].user_id):z.length>1&&E(null))},[t,S,z]);const A=p.useMemo(()=>{const Y=new Set;s.forEach(ce=>{(ce.tags||[]).forEach(_e=>Y.add(_e))});const U=Array.from(Y),Z=Object.keys(r);return U.length>0?U:Z},[s,r]),R=p.useMemo(()=>s.filter(U=>{var Te,dt;const Z=((Te=U.name)==null?void 0:Te.toLowerCase().includes(b.toLowerCase()))||((dt=U.email)==null?void 0:dt.toLowerCase().includes(b.toLowerCase())),ce=j.length===0||U.tags&&j.some(on=>U.tags.includes(on)),_e=!S||U.ownerId===S;return Z&&ce&&_e}),[s,b,j,S,t]);p.useEffect(()=>{if(!N&&!C)return;const Y=U=>{var _e,Te;const Z=(_e=O.current)==null?void 0:_e.contains(U.target),ce=(Te=$.current)==null?void 0:Te.contains(U.target);Z||P(!1),ce||I(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[N,C]);const D=Y=>{m(Y?R.map(U=>U.id):[])},F=(Y,U)=>{m(U?[...h,Y]:h.filter(Z=>Z!==Y))},q=Y=>{M({title:` L'action "${Y}" n'est pas encore implmente.`,description:"Ceci est une maquette cliquable. La fonctionnalit peut tre demande. "})},W=Y=>{_(U=>U.includes(Y)?U.filter(Z=>Z!==Y):[...U,Y])},te=Y=>{E(Y),I(!1)},fe=Y=>{const U=Y.tags&&Y.tags.length>0?Y.tags[0]:"ACC";V(`/admin/pipeline?project=${U}&prospect=${Y.id}`)},le=async Y=>{var U,Z;try{const ce=((U=n[0])==null?void 0:U.step_id)||((Z=n[0])==null?void 0:Z.id),_e=await a({...Y,status:ce,ownerId:t==null?void 0:t.user_id});if(Y.sendInvitation&&_e.email)try{const Te=`${window.location.origin}/dashboard`;T.info("[Contacts] Envoi Magic Link",{email:_e.email,org:organizationId});const{error:dt}=await k.auth.signInWithOtp({email:_e.email.trim(),options:{shouldCreateUser:!0,emailRedirectTo:Te,data:{organization_id:organizationId}}});dt?(T.error("[Contacts] Erreur Magic Link",dt),M({title:"Contact cr",description:` Invitation non envoye: ${dt.message}`,variant:"warning"})):(T.info("[Contacts] Magic Link envoy",{email:_e.email}),M({title:" Contact cr",description:`Invitation envoye  ${_e.email}`,className:"bg-green-500 text-white"}))}catch(Te){T.error("[Contacts] Exception Magic Link",Te),M({title:"Contact cr",description:` Erreur envoi invitation: ${Te.message}`,variant:"warning"})}y(!1)}catch{M({title:"Erreur",description:"Impossible d'ajouter le contact.",variant:"destructive"})}},ne=iR||bH;return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 rounded-lg shadow-soft",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contacts"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(Vi,{className:"w-4 h-4"}),i.jsxs("span",{children:[R.length," contact",R.length>1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{ref:O,className:"relative inline-block text-left",children:[i.jsxs(H,{type:"button",variant:"outline",className:"flex items-center space-x-2 bg-white",onClick:()=>P(Y=>!Y),children:[i.jsx("span",{children:L}),i.jsx(Ui,{className:"h-4 w-4"})]}),N&&i.jsx("div",{className:"absolute z-50 mt-1 w-44 origin-top-right rounded-md border border-gray-200 bg-white shadow-soft",children:i.jsxs("div",{className:"py-1",children:[A.map(Y=>{var U;return i.jsxs("label",{className:"flex items-center px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:j.includes(Y),onChange:()=>W(Y),className:"mr-3 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:((U=r[Y])==null?void 0:U.title)||Y})]},Y)}),j.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-gray-200 my-1"}),i.jsx("button",{onClick:()=>_([]),className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Effacer la slection"})]})]})})]}),i.jsxs("div",{ref:$,className:"relative inline-block text-left",children:[i.jsxs(H,{type:"button",variant:"outline",className:"flex items-center space-x-2 bg-white",onClick:()=>I(Y=>!Y),disabled:!z.length,children:[i.jsx("span",{children:B}),i.jsx(Ui,{className:"h-4 w-4"})]}),C&&i.jsx("div",{className:"absolute z-50 mt-1 w-52 origin-top-right rounded-md border border-gray-200 bg-white shadow-soft",children:i.jsxs("div",{className:"py-1",children:[z.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm hover:bg-gray-100 ${S?"":"bg-gray-50 font-medium"}`,onClick:()=>te(null),children:"Tous les utilisateurs"}),i.jsx("div",{className:"border-t border-gray-100 my-1"})]}),z.map(Y=>i.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm hover:bg-gray-100 ${S===Y.user_id?"bg-gray-50 font-medium":""}`,onClick:()=>te(Y.user_id),children:Y.name},Y.id))]})})]}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(ry,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(me,{placeholder:"Rechercher...",className:"pl-10 bg-white",value:b,onChange:Y=>w(Y.target.value)})]}),i.jsxs(H,{onClick:()=>y(!0),className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Ar,{className:"mr-2 h-4 w-4"})," Nouveau"]})]})]})}),i.jsx(bo,{children:h.length>0&&i.jsxs(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white p-3 rounded-lg shadow-soft flex flex-col sm:flex-row items-center justify-between",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 sm:mb-0",children:[h.length," contact",h.length>1?"s":""," slectionn",h.length>1?"s":""]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>q("Envoyer SMS"),children:[i.jsx(ty,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"SMS"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>q("Envoyer Email"),children:[i.jsx(Zr,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Email"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>q("Appel par Charly"),children:[i.jsx(zl,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Appel IA"})]})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-soft overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-4",children:i.jsx(tr,{onCheckedChange:D,checked:h.length===R.length&&R.length>0,"aria-label":"Select all contacts"})}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nom"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Tlphone"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden lg:table-cell",children:"Email"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden sm:table-cell",children:"Tags"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Utilisateur"})]})}),i.jsx("tbody",{children:R.map(Y=>{var U;return i.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50 cursor-pointer",onClick:()=>fe(Y),children:[i.jsx("td",{className:"w-4 p-4",onClick:Z=>Z.stopPropagation(),children:i.jsx(tr,{onCheckedChange:Z=>F(Y.id,Z),checked:h.includes(Y.id),"aria-labelledby":`contact-name-${Y.id}`})}),i.jsx("td",{id:`contact-name-${Y.id}`,className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:Y.name}),i.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:Y.phone}),i.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:Y.email}),i.jsx("td",{className:"px-6 py-4 hidden sm:table-cell",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:(Y.tags||[]).map(Z=>{var Te,dt;const ce=((Te=r[Z])==null?void 0:Te.color)||yH[Z]||"bg-gray-100 text-gray-800",_e=((dt=r[Z])==null?void 0:dt.title)||Z;return i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce}`,children:_e},Z)})})}),i.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:((U=d[Y.ownerId])==null?void 0:U.name)||"Non assign"})]},Y.id)})})]})}),i.jsx(ne,{open:x,onOpenChange:y,onAddProspect:le})]})};var aR="AlertDialog",[jH,ese]=rn(aR,[FA]),Kn=FA(),lR=e=>{const{__scopeAlertDialog:t,...r}=e,n=Kn(t);return i.jsx(tR,{...n,...r,modal:!0})};lR.displayName=aR;var _H="AlertDialogTrigger",cR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Kn(r);return i.jsx(rR,{...s,...n,ref:t})});cR.displayName=_H;var SH="AlertDialogPortal",uR=e=>{const{__scopeAlertDialog:t,...r}=e,n=Kn(t);return i.jsx(nR,{...n,...r})};uR.displayName=SH;var EH="AlertDialogOverlay",dR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Kn(r);return i.jsx(p0,{...s,...n,ref:t})});dR.displayName=EH;var Ii="AlertDialogContent",[NH,CH]=jH(Ii),PH=s6("AlertDialogContent"),fR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,o=Kn(r),a=p.useRef(null),l=Fe(t,a),c=p.useRef(null);return i.jsx(pH,{contentName:Ii,titleName:hR,docsSlug:"alert-dialog",children:i.jsx(NH,{scope:r,cancelRef:c,children:i.jsxs(m0,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:xe(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(PH,{children:n}),i.jsx(kH,{contentRef:a})]})})})});fR.displayName=Ii;var hR="AlertDialogTitle",pR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Kn(r);return i.jsx(g0,{...s,...n,ref:t})});pR.displayName=hR;var mR="AlertDialogDescription",gR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Kn(r);return i.jsx(v0,{...s,...n,ref:t})});gR.displayName=mR;var TH="AlertDialogAction",vR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Kn(r);return i.jsx(oh,{...s,...n,ref:t})});vR.displayName=TH;var xR="AlertDialogCancel",yR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=CH(xR,r),o=Kn(r),a=Fe(t,s);return i.jsx(oh,{...o,...n,ref:a})});yR.displayName=xR;var kH=({contentRef:e})=>{const t=`\`${Ii}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ii}\` by passing a \`${mR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ii}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},AH=lR,RH=cR,IH=uR,bR=dR,wR=fR,jR=vR,_R=yR,SR=pR,ER=gR;const Lc=AH,lh=RH,OH=IH,NR=J.forwardRef(({className:e,...t},r)=>i.jsx(bR,{className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));NR.displayName=bR.displayName;const ca=J.forwardRef(({className:e,...t},r)=>i.jsxs(OH,{children:[i.jsx(NR,{}),i.jsx(wR,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));ca.displayName=wR.displayName;const ua=({className:e,...t})=>i.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});ua.displayName="AlertDialogHeader";const da=({className:e,...t})=>i.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});da.displayName="AlertDialogFooter";const fa=J.forwardRef(({className:e,...t},r)=>i.jsx(SR,{ref:r,className:pe("text-lg font-semibold",e),...t}));fa.displayName=SR.displayName;const ha=J.forwardRef(({className:e,...t},r)=>i.jsx(ER,{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));ha.displayName=ER.displayName;const pa=J.forwardRef(({className:e,...t},r)=>i.jsx(jR,{ref:r,className:pe(Ey(),e),...t}));pa.displayName=jR.displayName;const ma=J.forwardRef(({className:e,...t},r)=>i.jsx(_R,{ref:r,className:pe(Ey({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ma.displayName=_R.displayName;function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},je.apply(null,arguments)}function i1(e,[t,r]){return Math.min(r,Math.max(t,e))}function vt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function x0(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[e][c])||l,x=p.useMemo(()=>g,Object.values(g));return p.createElement(v.Provider,{value:x},m)}function f(d,h){const m=(h==null?void 0:h[e][c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,DH(s,...t)]}function DH(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function $H(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function CR(...e){return t=>e.forEach(r=>$H(r,t))}function It(...e){return p.useCallback(CR(...e),e)}const rc=p.forwardRef((e,t)=>{const{children:r,...n}=e,s=p.Children.toArray(r),o=s.find(MH);if(o){const a=o.props.children,l=s.map(c=>c===o?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return p.createElement(Sv,je({},n,{ref:t}),p.isValidElement(a)?p.cloneElement(a,void 0,l):null)}return p.createElement(Sv,je({},n,{ref:t}),r)});rc.displayName="Slot";const Sv=p.forwardRef((e,t)=>{const{children:r,...n}=e;return p.isValidElement(r)?p.cloneElement(r,{...FH(n,r.props),ref:t?CR(t,r.ref):r.ref}):p.Children.count(r)>1?p.Children.only(null):null});Sv.displayName="SlotClone";const LH=({children:e})=>p.createElement(p.Fragment,null,e);function MH(e){return p.isValidElement(e)&&e.type===LH}function FH(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{o(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function BH(e){const t=e+"CollectionProvider",[r,n]=x0(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:g,children:v}=m,x=J.useRef(null),y=J.useRef(new Map).current;return J.createElement(s,{scope:g,itemMap:y,collectionRef:x},v)},l=e+"CollectionSlot",c=J.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=o(l,v),b=It(g,y.collectionRef);return J.createElement(rc,{ref:b},x)}),u=e+"CollectionItemSlot",f="data-radix-collection-item",d=J.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,b=J.useRef(null),w=It(g,b),j=o(u,v);return J.useEffect(()=>(j.itemMap.set(b,{ref:b,...y}),()=>void j.itemMap.delete(b))),J.createElement(rc,{[f]:"",ref:w},x)});function h(m){const g=o(e+"CollectionConsumer",m);return J.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((j,_)=>y.indexOf(j.ref.current)-y.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},h,n]}const zH=p.createContext(void 0);function UH(e){const t=p.useContext(zH);return e||t||"ltr"}const VH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Nt=VH.reduce((e,t)=>{const r=p.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?rc:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,je({},a,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qH(e,t){e&&xr.flushSync(()=>e.dispatchEvent(t))}function Wn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function WH(e,t=globalThis==null?void 0:globalThis.document){const r=Wn(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const Ev="dismissableLayer.update",HH="dismissableLayer.pointerDownOutside",GH="dismissableLayer.focusOutside";let a1;const KH=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),YH=p.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...u}=e,f=p.useContext(KH),[d,h]=p.useState(null),m=(r=d==null?void 0:d.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,g]=p.useState({}),v=It(t,N=>h(N)),x=Array.from(f.layers),[y]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(y),w=d?x.indexOf(d):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,S=JH(N=>{const P=N.target,C=[...f.branches].some(I=>I.contains(P));!_||C||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},m),E=XH(N=>{const P=N.target;[...f.branches].some(I=>I.contains(P))||(a==null||a(N),l==null||l(N),N.defaultPrevented||c==null||c())},m);return WH(N=>{w===f.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},m),p.useEffect(()=>{if(d)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(a1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),l1(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=a1)}},[d,m,n,f]),p.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),l1())},[d,f]),p.useEffect(()=>{const N=()=>g({});return document.addEventListener(Ev,N),()=>document.removeEventListener(Ev,N)},[]),p.createElement(Nt.div,je({},u,{ref:v,style:{pointerEvents:j?_?"auto":"none":void 0,...e.style},onFocusCapture:vt(e.onFocusCapture,E.onFocusCapture),onBlurCapture:vt(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:vt(e.onPointerDownCapture,S.onPointerDownCapture)}))});function JH(e,t=globalThis==null?void 0:globalThis.document){const r=Wn(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let u=function(){PR(HH,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function XH(e,t=globalThis==null?void 0:globalThis.document){const r=Wn(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&PR(GH,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function l1(){const e=new CustomEvent(Ev);document.dispatchEvent(e)}function PR(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?qH(s,o):s.dispatchEvent(o)}let im=0;function QH(){p.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:c1()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:c1()),im++,()=>{im===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),im--}},[])}function c1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const am="focusScope.autoFocusOnMount",lm="focusScope.autoFocusOnUnmount",u1={bubbles:!1,cancelable:!0},ZH=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=Wn(s),f=Wn(o),d=p.useRef(null),h=It(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:ts(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||ts(d.current,{select:!0}))},y=function(w){const j=document.activeElement;for(const _ of w)_.removedNodes.length>0&&(l!=null&&l.contains(j)||ts(l))};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){f1.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(am,u1);l.addEventListener(am,u),l.dispatchEvent(y),y.defaultPrevented||(eG(oG(TR(l)),{select:!0}),document.activeElement===v&&ts(l))}return()=>{l.removeEventListener(am,u),setTimeout(()=>{const y=new CustomEvent(lm,u1);l.addEventListener(lm,f),l.dispatchEvent(y),y.defaultPrevented||ts(v??document.body,{select:!0}),l.removeEventListener(lm,f),f1.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,j]=tG(b);w&&j?!v.shiftKey&&y===j?(v.preventDefault(),r&&ts(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),r&&ts(j,{select:!0})):y===b&&v.preventDefault()}},[r,n,m.paused]);return p.createElement(Nt.div,je({tabIndex:-1},a,{ref:h,onKeyDown:g}))});function eG(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ts(n,{select:t}),document.activeElement!==r)return}function tG(e){const t=TR(e),r=d1(t,e),n=d1(t.reverse(),e);return[r,n]}function TR(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function d1(e,t){for(const r of e)if(!rG(r,{upTo:t}))return r}function rG(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nG(e){return e instanceof HTMLInputElement&&"select"in e}function ts(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&nG(e)&&t&&e.select()}}const f1=sG();function sG(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=h1(e,t),e.unshift(t)},remove(t){var r;e=h1(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function h1(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function oG(e){return e.filter(t=>t.tagName!=="A")}const $r=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},iG=fc["useId".toString()]||(()=>{});let aG=0;function kR(e){const[t,r]=p.useState(iG());return $r(()=>{e||r(n=>n??String(aG++))},[e]),e||(t?`radix-${t}`:"")}function lG(e){const[t,r]=p.useState(void 0);return $r(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const AR="Popper",[RR,IR]=x0(AR),[cG,OR]=RR(AR),uG=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return p.createElement(cG,{scope:t,anchor:n,onAnchorChange:s},r)},dG="PopperAnchor",fG=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=OR(dG,r),a=p.useRef(null),l=It(t,a);return p.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:p.createElement(Nt.div,je({},s,{ref:l}))}),DR="PopperContent",[hG,tse]=RR(DR),pG=p.forwardRef((e,t)=>{var r,n,s,o,a,l,c,u;const{__scopePopper:f,side:d="bottom",sideOffset:h=0,align:m="center",alignOffset:g=0,arrowPadding:v=0,collisionBoundary:x=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:w=!1,avoidCollisions:j=!0,onPlaced:_,...S}=e,E=OR(DR,f),[N,P]=p.useState(null),C=It(t,Te=>P(Te)),[I,O]=p.useState(null),$=lG(I),L=(r=$==null?void 0:$.width)!==null&&r!==void 0?r:0,V=(n=$==null?void 0:$.height)!==null&&n!==void 0?n:0,z=d+(m!=="center"?"-"+m:""),B=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},A=Array.isArray(x)?x:[x],R=A.length>0,D={padding:B,boundary:A.filter(mG),altBoundary:R},{refs:F,floatingStyles:q,placement:W,isPositioned:te,middlewareData:fe}=z2({strategy:"fixed",placement:z,whileElementsMounted:F2,elements:{reference:E.anchor},middleware:[U2({mainAxis:h+V,alignmentAxis:g}),j&&V2({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?q2():void 0,...D}),j&&W2({...D}),H2({...D,apply:({elements:Te,rects:dt,availableWidth:on,availableHeight:bn})=>{const{width:wa,height:Yn}=dt.reference,Bo=Te.floating.style;Bo.setProperty("--radix-popper-available-width",`${on}px`),Bo.setProperty("--radix-popper-available-height",`${bn}px`),Bo.setProperty("--radix-popper-anchor-width",`${wa}px`),Bo.setProperty("--radix-popper-anchor-height",`${Yn}px`)}}),I&&K2({element:I,padding:v}),gG({arrowWidth:L,arrowHeight:V}),w&&G2({strategy:"referenceHidden"})]}),[le,ne]=$R(W),ue=Wn(_);$r(()=>{te&&(ue==null||ue())},[te,ue]);const Y=(s=fe.arrow)===null||s===void 0?void 0:s.x,U=(o=fe.arrow)===null||o===void 0?void 0:o.y,Z=((a=fe.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[ce,_e]=p.useState();return $r(()=>{N&&_e(window.getComputedStyle(N).zIndex)},[N]),p.createElement("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:te?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(l=fe.transformOrigin)===null||l===void 0?void 0:l.x,(c=fe.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},p.createElement(hG,{scope:f,placedSide:le,onArrowChange:O,arrowX:Y,arrowY:U,shouldHideArrow:Z},p.createElement(Nt.div,je({"data-side":le,"data-align":ne},S,{ref:C,style:{...S.style,animation:te?void 0:"none",opacity:(u=fe.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function mG(e){return e!==null}const gG=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,o,a;const{placement:l,rects:c,middlewareData:u}=t,d=((r=u.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=d?0:e.arrowWidth,m=d?0:e.arrowHeight,[g,v]=$R(l),x={start:"0%",center:"50%",end:"100%"}[v],y=((n=(s=u.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,b=((o=(a=u.arrow)===null||a===void 0?void 0:a.y)!==null&&o!==void 0?o:0)+m/2;let w="",j="";return g==="bottom"?(w=d?x:`${y}px`,j=`${-m}px`):g==="top"?(w=d?x:`${y}px`,j=`${c.floating.height+m}px`):g==="right"?(w=`${-m}px`,j=d?x:`${b}px`):g==="left"&&(w=`${c.floating.width+m}px`,j=d?x:`${b}px`),{data:{x:w,y:j}}}});function $R(e){const[t,r="center"]=e.split("-");return[t,r]}const vG=uG,xG=fG,yG=pG,bG=p.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?Sf.createPortal(p.createElement(Nt.div,je({},s,{ref:t})),n):null});function p1({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=wG({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=Wn(r),c=p.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[a,c]}function wG({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,s=p.useRef(n),o=Wn(t);return p.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}function jG(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const _G=p.forwardRef((e,t)=>p.createElement(Nt.span,je({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var LR=Fy(),cm=function(){},ch=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:cm,onWheelCapture:cm,onTouchMoveCapture:cm}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=yn(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,j=My([r,t]),_=Qe(Qe({},b),s);return p.createElement(p.Fragment,null,f&&p.createElement(w,{sideCar:LR,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:r}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},_),{ref:j})):p.createElement(y,Qe({},_,{className:c,ref:j}),l))});ch.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ch.classNames={fullWidth:ki,zeroRight:Ti};var Nv=!1;if(typeof window<"u")try{var ku=Object.defineProperty({},"passive",{get:function(){return Nv=!0,!0}});window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{Nv=!1}var Xo=Nv?{passive:!1}:!1,SG=function(e){return e.tagName==="TEXTAREA"},MR=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SG(e)&&r[t]==="visible")},EG=function(e){return MR(e,"overflowY")},NG=function(e){return MR(e,"overflowX")},m1=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=FR(e,r);if(n){var s=BR(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},CG=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},PG=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},FR=function(e,t){return e==="v"?EG(t):NG(t)},BR=function(e,t){return e==="v"?CG(t):PG(t)},TG=function(e,t){return e==="h"&&t==="rtl"?-1:1},kG=function(e,t,r,n,s){var o=TG(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{var m=BR(e,l),g=m[0],v=m[1],x=m[2],y=v-x-o*g;(g||y)&&FR(e,l)&&(d+=y,h+=g),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&d===0||!s&&a>d)||!f&&(s&&h===0||!s&&-a>h))&&(u=!0),u},Au=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},g1=function(e){return[e.deltaX,e.deltaY]},v1=function(e){return e&&"current"in e?e.current:e},AG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},IG=0,Qo=[];function OG(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(IG++)[0],o=p.useState(function(){return Xf()})[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=kc([e.lockRef.current],(e.shards||[]).map(v1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2)return!a.current.allowPinchZoom;var y=Au(v),b=r.current,w="deltaX"in v?v.deltaX:b[0]-y[0],j="deltaY"in v?v.deltaY:b[1]-y[1],_,S=v.target,E=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&E==="h"&&S.type==="range")return!1;var N=m1(E,S);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=m1(E,S)),!N)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var P=n.current||_;return kG(P,x,v,P==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!Qo.length||Qo[Qo.length-1]!==o)){var y="deltaY"in x?g1(x):Au(x),b=t.current.filter(function(_){return _.name===x.type&&_.target===x.target&&AG(_.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(a.current.shards||[]).map(v1).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=Au(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,g1(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Au(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return Qo.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Xo),document.addEventListener("touchmove",c,Xo),document.addEventListener("touchstart",f,Xo),function(){Qo=Qo.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Xo),document.removeEventListener("touchmove",c,Xo),document.removeEventListener("touchstart",f,Xo)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:RG(s)}):null,m?p.createElement(zy,{gapMode:"margin"}):null)}const DG=By(LR,OG);var zR=p.forwardRef(function(e,t){return p.createElement(ch,Qe({},e,{ref:t,sideCar:DG}))});zR.classNames=ch.classNames;const $G=zR,LG=[" ","Enter","ArrowUp","ArrowDown"],MG=[" ","Enter"],uh="Select",[dh,fh,FG]=BH(uh),[ga,rse]=x0(uh,[FG,IR]),y0=IR(),[BG,Lo]=ga(uh),[zG,UG]=ga(uh),VG=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m}=e,g=y0(t),[v,x]=p.useState(null),[y,b]=p.useState(null),[w,j]=p.useState(!1),_=UH(u),[S=!1,E]=p1({prop:n,defaultProp:s,onChange:o}),[N,P]=p1({prop:a,defaultProp:l,onChange:c}),C=p.useRef(null),I=v?!!v.closest("form"):!0,[O,$]=p.useState(new Set),L=Array.from(O).map(V=>V.props.value).join(";");return p.createElement(vG,g,p.createElement(BG,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:kR(),value:N,onValueChange:P,open:S,onOpenChange:E,dir:_,triggerPointerDownPosRef:C,disabled:h},p.createElement(dh.Provider,{scope:t},p.createElement(zG,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(V=>{$(z=>new Set(z).add(V))},[]),onNativeOptionRemove:p.useCallback(V=>{$(z=>{const B=new Set(z);return B.delete(V),B})},[])},r)),I?p.createElement(WR,{key:L,"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:N,onChange:V=>P(V.target.value),disabled:h},N===void 0?p.createElement("option",{value:""}):null,Array.from(O)):null))},qG="SelectTrigger",WG=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=y0(r),a=Lo(qG,r),l=a.disabled||n,c=It(t,a.onTriggerChange),u=fh(r),[f,d,h]=HR(g=>{const v=u().filter(b=>!b.disabled),x=v.find(b=>b.value===a.value),y=GR(v,g,x);y!==void 0&&a.onValueChange(y.value)}),m=()=>{l||(a.onOpenChange(!0),h())};return p.createElement(xG,je({asChild:!0},o),p.createElement(Nt.button,je({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":a.value===void 0?"":void 0},s,{ref:c,onClick:vt(s.onClick,g=>{g.currentTarget.focus()}),onPointerDown:vt(s.onPointerDown,g=>{const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&(m(),a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)},g.preventDefault())}),onKeyDown:vt(s.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&d(g.key),!(v&&g.key===" ")&&LG.includes(g.key)&&(m(),g.preventDefault())})})))}),HG="SelectValue",GG=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a,...l}=e,c=Lo(HG,r),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,d=It(t,c.onValueNodeChange);return $r(()=>{u(f)},[u,f]),p.createElement(Nt.span,je({},l,{ref:d,style:{pointerEvents:"none"}}),c.value===void 0&&a!==void 0?a:o)}),KG=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return p.createElement(Nt.span,je({"aria-hidden":!0},s,{ref:t}),n||"")}),YG=e=>p.createElement(bG,je({asChild:!0},e)),Ki="SelectContent",JG=p.forwardRef((e,t)=>{const r=Lo(Ki,e.__scopeSelect),[n,s]=p.useState();if($r(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?xr.createPortal(p.createElement(UR,{scope:e.__scopeSelect},p.createElement(dh.Slot,{scope:e.__scopeSelect},p.createElement("div",null,e.children))),o):null}return p.createElement(XG,je({},e,{ref:t}))}),En=10,[UR,Mo]=ga(Ki),XG=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=Lo(Ki,r),[w,j]=p.useState(null),[_,S]=p.useState(null),E=It(t,ne=>j(ne)),[N,P]=p.useState(null),[C,I]=p.useState(null),O=fh(r),[$,L]=p.useState(!1),V=p.useRef(!1);p.useEffect(()=>{if(w)return Tc(w)},[w]),QH();const z=p.useCallback(ne=>{const[ue,...Y]=O().map(ce=>ce.ref.current),[U]=Y.slice(-1),Z=document.activeElement;for(const ce of ne)if(ce===Z||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===ue&&_&&(_.scrollTop=0),ce===U&&_&&(_.scrollTop=_.scrollHeight),ce==null||ce.focus(),document.activeElement!==Z))return},[O,_]),B=p.useCallback(()=>z([N,w]),[z,N,w]);p.useEffect(()=>{$&&B()},[$,B]);const{onOpenChange:A,triggerPointerDownPosRef:R}=b;p.useEffect(()=>{if(w){let ne={x:0,y:0};const ue=U=>{var Z,ce,_e,Te;ne={x:Math.abs(Math.round(U.pageX)-((Z=(ce=R.current)===null||ce===void 0?void 0:ce.x)!==null&&Z!==void 0?Z:0)),y:Math.abs(Math.round(U.pageY)-((_e=(Te=R.current)===null||Te===void 0?void 0:Te.y)!==null&&_e!==void 0?_e:0))}},Y=U=>{ne.x<=10&&ne.y<=10?U.preventDefault():w.contains(U.target)||A(!1),document.removeEventListener("pointermove",ue),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Y,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Y,{capture:!0})}}},[w,A,R]),p.useEffect(()=>{const ne=()=>A(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[A]);const[D,F]=HR(ne=>{const ue=O().filter(Z=>!Z.disabled),Y=ue.find(Z=>Z.ref.current===document.activeElement),U=GR(ue,ne,Y);U&&setTimeout(()=>U.ref.current.focus())}),q=p.useCallback((ne,ue,Y)=>{const U=!V.current&&!Y;(b.value!==void 0&&b.value===ue||U)&&(P(ne),U&&(V.current=!0))},[b.value]),W=p.useCallback(()=>w==null?void 0:w.focus(),[w]),te=p.useCallback((ne,ue,Y)=>{const U=!V.current&&!Y;(b.value!==void 0&&b.value===ue||U)&&I(ne)},[b.value]),fe=n==="popper"?x1:QG,le=fe===x1?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return p.createElement(UR,{scope:r,content:w,viewport:_,onViewportChange:S,itemRefCallback:q,selectedItem:N,onItemLeave:W,itemTextRefCallback:te,focusSelectedItem:B,selectedItemText:C,position:n,isPositioned:$,searchRef:D},p.createElement($G,{as:rc,allowPinchZoom:!0},p.createElement(ZH,{asChild:!0,trapped:b.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:vt(s,ne=>{var ue;(ue=b.trigger)===null||ue===void 0||ue.focus({preventScroll:!0}),ne.preventDefault()})},p.createElement(YH,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>b.onOpenChange(!1)},p.createElement(fe,je({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ne=>ne.preventDefault()},y,le,{onPlaced:()=>L(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:vt(y.onKeyDown,ne=>{const ue=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!ue&&ne.key.length===1&&F(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let U=O().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const Z=ne.target,ce=U.indexOf(Z);U=U.slice(ce+1)}setTimeout(()=>z(U)),ne.preventDefault()}})}))))))}),QG=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=Lo(Ki,r),a=Mo(Ki,r),[l,c]=p.useState(null),[u,f]=p.useState(null),d=It(t,E=>f(E)),h=fh(r),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=a,w=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&v&&x&&y){const E=o.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),C=y.getBoundingClientRect();if(o.dir!=="rtl"){const Z=C.left-N.left,ce=P.left-Z,_e=E.left-ce,Te=E.width+_e,dt=Math.max(Te,N.width),on=window.innerWidth-En,bn=i1(ce,[En,on-dt]);l.style.minWidth=Te+"px",l.style.left=bn+"px"}else{const Z=N.right-C.right,ce=window.innerWidth-P.right-Z,_e=window.innerWidth-E.right-ce,Te=E.width+_e,dt=Math.max(Te,N.width),on=window.innerWidth-En,bn=i1(ce,[En,on-dt]);l.style.minWidth=Te+"px",l.style.right=bn+"px"}const I=h(),O=window.innerHeight-En*2,$=v.scrollHeight,L=window.getComputedStyle(u),V=parseInt(L.borderTopWidth,10),z=parseInt(L.paddingTop,10),B=parseInt(L.borderBottomWidth,10),A=parseInt(L.paddingBottom,10),R=V+z+$+A+B,D=Math.min(x.offsetHeight*5,R),F=window.getComputedStyle(v),q=parseInt(F.paddingTop,10),W=parseInt(F.paddingBottom,10),te=E.top+E.height/2-En,fe=O-te,le=x.offsetHeight/2,ne=x.offsetTop+le,ue=V+z+ne,Y=R-ue;if(ue<=te){const Z=x===I[I.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-v.offsetTop-v.offsetHeight,_e=Math.max(fe,le+(Z?W:0)+ce+B),Te=ue+_e;l.style.height=Te+"px"}else{const Z=x===I[0].ref.current;l.style.top="0px";const _e=Math.max(te,V+v.offsetTop+(Z?q:0)+le)+Y;l.style.height=_e+"px",v.scrollTop=ue-te+v.offsetTop}l.style.margin=`${En}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,o.trigger,o.valueNode,l,u,v,x,y,o.dir,n]);$r(()=>w(),[w]);const[j,_]=p.useState();$r(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const S=p.useCallback(E=>{E&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return p.createElement(ZG,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S},p.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},p.createElement(Nt.div,je({},s,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),x1=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=En,...o}=e,a=y0(r);return p.createElement(yG,je({},a,o,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[ZG,b0]=ga(Ki,{}),y1="SelectViewport",eK=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Mo(y1,r),o=b0(y1,r),a=It(t,s.onViewportChange),l=p.useRef(0);return p.createElement(p.Fragment,null,p.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),p.createElement(dh.Slot,{scope:r},p.createElement(Nt.div,je({"data-radix-select-viewport":"",role:"presentation"},n,{ref:a,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:vt(n.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=o;if(d!=null&&d.current&&f){const h=Math.abs(l.current-u.scrollTop);if(h>0){const m=window.innerHeight-En*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(g,v);if(x<m){const y=x+h,b=Math.min(m,y),w=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})}))))}),tK="SelectGroup",[nse,rK]=ga(tK),nK="SelectLabel",sK=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=rK(nK,r);return p.createElement(Nt.div,je({id:s.id},n,{ref:t}))}),Cv="SelectItem",[oK,VR]=ga(Cv),iK=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=Lo(Cv,r),c=Mo(Cv,r),u=l.value===n,[f,d]=p.useState(o??""),[h,m]=p.useState(!1),g=It(t,y=>{var b;return(b=c.itemRefCallback)===null||b===void 0?void 0:b.call(c,y,n,s)}),v=kR(),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};return p.createElement(oK,{scope:r,value:n,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(y=>{d(b=>{var w;return b||((w=y==null?void 0:y.textContent)!==null&&w!==void 0?w:"").trim()})},[])},p.createElement(dh.ItemSlot,{scope:r,value:n,disabled:s,textValue:f},p.createElement(Nt.div,je({role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},a,{ref:g,onFocus:vt(a.onFocus,()=>m(!0)),onBlur:vt(a.onBlur,()=>m(!1)),onPointerUp:vt(a.onPointerUp,x),onPointerMove:vt(a.onPointerMove,y=>{if(s){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}else y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:vt(a.onPointerLeave,y=>{if(y.currentTarget===document.activeElement){var b;(b=c.onItemLeave)===null||b===void 0||b.call(c)}}),onKeyDown:vt(a.onKeyDown,y=>{var b;((b=c.searchRef)===null||b===void 0?void 0:b.current)!==""&&y.key===" "||(MG.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})}))))}),Ru="SelectItemText",aK=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=Lo(Ru,r),l=Mo(Ru,r),c=VR(Ru,r),u=UG(Ru,r),[f,d]=p.useState(null),h=It(t,y=>d(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)===null||b===void 0?void 0:b.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>p.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return $r(()=>(v(g),()=>x(g)),[v,x,g]),p.createElement(p.Fragment,null,p.createElement(Nt.span,je({id:c.textId},o,{ref:h})),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?xr.createPortal(o.children,a.valueNode):null)}),lK="SelectItemIndicator",cK=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return VR(lK,r).isSelected?p.createElement(Nt.span,je({"aria-hidden":!0},n,{ref:t})):null}),b1="SelectScrollUpButton",uK=p.forwardRef((e,t)=>{const r=Mo(b1,e.__scopeSelect),n=b0(b1,e.__scopeSelect),[s,o]=p.useState(!1),a=It(t,n.onScrollButtonChange);return $r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollTop>0;o(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?p.createElement(qR,je({},e,{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),w1="SelectScrollDownButton",dK=p.forwardRef((e,t)=>{const r=Mo(w1,e.__scopeSelect),n=b0(w1,e.__scopeSelect),[s,o]=p.useState(!1),a=It(t,n.onScrollButtonChange);return $r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<u;o(f)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?p.createElement(qR,je({},e,{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),qR=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=Mo("SelectScrollButton",r),a=p.useRef(null),l=fh(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),$r(()=>{var u;const f=l().find(d=>d.ref.current===document.activeElement);f==null||(u=f.ref.current)===null||u===void 0||u.scrollIntoView({block:"nearest"})},[l]),p.createElement(Nt.div,je({"aria-hidden":!0},s,{ref:t,style:{flexShrink:0,...s.style},onPointerDown:vt(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:vt(s.onPointerMove,()=>{var u;(u=o.onItemLeave)===null||u===void 0||u.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:vt(s.onPointerLeave,()=>{c()})}))}),fK=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return p.createElement(Nt.div,je({"aria-hidden":!0},n,{ref:t}))}),WR=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=p.useRef(null),o=It(t,s),a=jG(r);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&f){const d=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(d)}},[a,r]),p.createElement(_G,{asChild:!0},p.createElement("select",je({},n,{ref:o,defaultValue:r})))});WR.displayName="BubbleSelect";function HR(e){const t=Wn(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function GR(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=hK(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function hK(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const pK=VG,KR=WG,mK=GG,gK=KG,vK=YG,YR=JG,xK=eK,JR=sK,XR=iK,yK=aK,bK=cK,wK=uK,jK=dK,QR=fK,Kt=pK,Yt=mK,Ft=J.forwardRef(({className:e,children:t,iconClassName:r,...n},s)=>i.jsxs(KR,{ref:s,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:[t,i.jsx(gK,{asChild:!0,children:i.jsx(Ui,{className:pe("h-4 w-4 opacity-50",r)})})]}));Ft.displayName=KR.displayName;const Bt=J.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(vK,{children:i.jsxs(YR,{ref:s,className:pe("relative z-50 min-w-[8rem] rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(wK,{className:"hidden",children:i.jsx(K6,{className:"h-4 w-4"})}),i.jsx(xK,{className:pe("p-1 max-h-[300px] overflow-y-auto",r==="popper"&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(jK,{className:"hidden",children:i.jsx(Ui,{className:"h-4 w-4"})})]})}));Bt.displayName=YR.displayName;const _K=J.forwardRef(({className:e,...t},r)=>i.jsx(JR,{ref:r,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));_K.displayName=JR.displayName;const Pe=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(XR,{ref:n,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(bK,{children:i.jsx(Rn,{className:"h-4 w-4"})})}),i.jsx(yK,{children:t})]}));Pe.displayName=XR.displayName;const SK=J.forwardRef(({className:e,...t},r)=>i.jsx(QR,{ref:r,className:pe("-mx-1 my-1 h-px bg-muted",e),...t}));SK.displayName=QR.displayName;function ZR({organizationId:e=null,enabled:t=!0}={}){const[r,n]=p.useState({}),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=h=>{const m={};return h.forEach(g=>{m[g.prompt_id]={id:g.prompt_id,name:g.name,tone:g.tone,projectId:g.project_id,stepsConfig:g.steps_config||{},createdAt:new Date(g.created_at).getTime(),updatedAt:new Date(g.updated_at).getTime()}}),m};return p.useEffect(()=>{if(!t||!e){n({}),o(!1);return}(async()=>{try{o(!0);const{data:g,error:v}=await k.rpc("get_prompts_for_org",{p_organization_id:e});if(v)throw v;const x=c(g||[]);T.debug("Prompts loaded",{count:Object.keys(x).length}),n(x),l(null)}catch(g){T.error(" Error loading prompts:",g),l(g.message)}finally{o(!1)}})();const m=k.channel(`prompts-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"prompts",filter:`organization_id=eq.${e}`},g=>{var v;if(T.debug("Real-time prompts event",{eventType:g.eventType}),!((v=g.new)!=null&&v.organization_id&&g.new.organization_id!==e))if(g.eventType==="INSERT"){const x=g.new;n(y=>({...y,[x.prompt_id]:{id:x.prompt_id,name:x.name,tone:x.tone,projectId:x.project_id,stepsConfig:x.steps_config||{},createdAt:new Date(x.created_at).getTime(),updatedAt:new Date(x.updated_at).getTime()}}))}else if(g.eventType==="UPDATE"){const x=g.new;n(y=>({...y,[x.prompt_id]:{id:x.prompt_id,name:x.name,tone:x.tone,projectId:x.project_id,stepsConfig:x.steps_config||{},createdAt:new Date(x.created_at).getTime(),updatedAt:new Date(x.updated_at).getTime()}}))}else g.eventType==="DELETE"&&n(x=>{const y={...x};return delete y[g.old.prompt_id],y})}).subscribe(g=>{});return()=>{k.removeChannel(m)}},[e,t]),{prompts:r,loading:s,error:a,savePrompt:async(h,m)=>{try{if(!e)throw new Error("organization_id requis pour enregistrer un prompt");const g={prompt_id:h,name:m.name,tone:m.tone,project_id:m.projectId,steps_config:m.stepsConfig||{},organization_id:e},{data:v,error:x}=await k.from("prompts").upsert(g,{onConflict:"prompt_id"}).select().single();if(x)throw x;return T.debug("Prompt saved to Supabase",{promptId:v==null?void 0:v.prompt_id}),v&&n(y=>({...y,[v.prompt_id]:{id:v.prompt_id,name:v.name,tone:v.tone,projectId:v.project_id,stepsConfig:v.steps_config||{},createdAt:new Date(v.created_at).getTime(),updatedAt:new Date(v.updated_at).getTime()}})),{success:!0,data:v}}catch(g){return T.error("Error saving prompt:",g),{success:!1,error:g.message}}},deletePrompt:async h=>{try{const{error:m}=await k.from("prompts").delete().eq("prompt_id",h);if(m)throw m;return n(g=>{const v={...g};return delete v[h],v}),T.debug("Prompt deleted from Supabase",{promptId:h}),{success:!0}}catch(m){return T.error(" Error deleting prompt:",m),{success:!1,error:m.message}}},refresh:async()=>{if(e)try{const{data:h,error:m}=await k.rpc("get_prompts_for_org",{p_organization_id:e});if(m)throw m;const g=c(h||[]);n(g)}catch(h){T.error(" Error refreshing prompts:",h)}}}}function EK(e=null){const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=d=>d.map(h=>({id:h.id,name:h.name,projectType:h.project_type,contentHtml:h.content_html,version:h.version,isActive:h.is_active,createdAt:h.created_at,updatedAt:h.updated_at}));return p.useEffect(()=>{if(!e){r([]),s(!1);return}(async()=>{try{s(!0);const{data:m,error:g}=await k.from("contract_templates").select("*").eq("organization_id",e).order("created_at",{ascending:!1});if(g)throw g;const v=l(m||[]);r(v),a(null)}catch(m){T.error("Erreur chargement contract_templates:",{error:m.message}),a(m.message)}finally{s(!1)}})();const h=k.channel(`contract-templates-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"contract_templates",filter:`organization_id=eq.${e}`},m=>{var g;if(!((g=m.new)!=null&&g.organization_id&&m.new.organization_id!==e))if(m.eventType==="INSERT"){const v={id:m.new.id,name:m.new.name,projectType:m.new.project_type,contentHtml:m.new.content_html,version:m.new.version,isActive:m.new.is_active,createdAt:m.new.created_at,updatedAt:m.new.updated_at};r(x=>[v,...x])}else if(m.eventType==="UPDATE"){const v={id:m.new.id,name:m.new.name,projectType:m.new.project_type,contentHtml:m.new.content_html,version:m.new.version,isActive:m.new.is_active,createdAt:m.new.created_at,updatedAt:m.new.updated_at};r(x=>x.map(y=>y.id===v.id?v:y))}else m.eventType==="DELETE"&&r(v=>v.filter(x=>x.id!==m.old.id))}).subscribe();return()=>{k.removeChannel(h)}},[e]),{templates:t,loading:n,error:o,createTemplate:async d=>{try{if(!e)throw new Error("organization_id requis pour crer un template");const h={name:d.name,project_type:d.projectType||"ACC",content_html:d.contentHtml||"",version:1,is_active:!0,organization_id:e},{data:m,error:g}=await k.from("contract_templates").insert(h).select().single();if(g)throw g;return{success:!0,data:m}}catch(h){return T.error("Erreur cration contract_template:",{error:h.message}),{success:!1,error:h.message}}},updateTemplate:async(d,h)=>{try{const m={name:h.name,project_type:h.projectType,content_html:h.contentHtml},{data:g,error:v}=await k.from("contract_templates").update(m).eq("id",d).select().single();if(v)throw v;return{success:!0,data:g}}catch(m){return T.error("Erreur mise  jour contract_template:",{error:m.message}),{success:!1,error:m.message}}},deactivateTemplate:async d=>{try{const{data:h,error:m}=await k.from("contract_templates").update({is_active:!1}).eq("id",d).select().single();if(m)throw m;return{success:!0,data:h}}catch(h){return T.error("Erreur dsactivation contract_template:",{error:h.message}),{success:!1,error:h.message}}}}}function w0(e=null){const[t,r]=p.useState({}),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=f=>{const d={};return f.forEach(h=>{d[h.form_id]={id:h.form_id,name:h.name,fields:h.fields||[],projectIds:h.project_ids||[],audience:h.audience||"client",createdAt:new Date(h.created_at).getTime(),updatedAt:new Date(h.updated_at).getTime()}}),d};return p.useEffect(()=>{if(!e){r({}),s(!1);return}(async()=>{try{s(!0);const{data:h,error:m}=await k.from("forms").select("*").or(`organization_id.eq.${e},organization_id.is.null`).order("created_at",{ascending:!1});if(m)throw m;const g=l(h||[]);r(g),a(null)}catch(h){T.error("Erreur chargement forms:",{error:h.message}),a(h.message)}finally{s(!1)}})();const d=k.channel(`forms-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"forms",filter:`organization_id=eq.${e}`},h=>{if(h.eventType==="INSERT"){const m=h.new;r(g=>({...g,[m.form_id]:{id:m.form_id,name:m.name,fields:m.fields||[],projectIds:m.project_ids||[],audience:m.audience||"client",createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()}}))}else if(h.eventType==="UPDATE"){const m=h.new;r(g=>({...g,[m.form_id]:{id:m.form_id,name:m.name,fields:m.fields||[],projectIds:m.project_ids||[],audience:m.audience||"client",createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()}}))}else h.eventType==="DELETE"&&r(m=>{const g={...m};return delete g[h.old.form_id],g})}).subscribe();return()=>{k.removeChannel(d)}},[e]),{forms:t,loading:n,error:o,saveForm:async(f,d)=>{if(!e)return{success:!1,error:"organization_id requis"};try{const h={form_id:f,name:d.name,fields:d.fields||[],project_ids:d.projectIds||[],audience:d.audience||"client",organization_id:e},{data:m,error:g}=await k.from("forms").upsert(h,{onConflict:"form_id"}).select().single();if(g)throw g;return{success:!0,data:m}}catch(h){return T.error("Erreur sauvegarde form:",{error:h.message}),{success:!1,error:h.message}}},deleteForm:async f=>{try{const{error:d}=await k.from("forms").delete().eq("form_id",f);if(d)throw d;return{success:!0}}catch(d){return T.error("Erreur suppression form:",{error:d.message}),{success:!1,error:d.message}}}}}const j0=(e,t=!0)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useCallback(async()=>{try{o(!0),l(null);const{data:d,error:h}=await k.from("partners").select("*").order("created_at",{ascending:!1});if(h)throw h;const{data:m,error:g}=await k.from("missions").select("partner_id");if(g)throw g;const v=(m||[]).reduce((y,b)=>(y[b.partner_id]=(y[b.partner_id]||0)+1,y),{}),x=(d||[]).map(y=>({id:y.id,userId:y.user_id,organizationId:y.organization_id,companyName:y.company_name,contactFirstName:y.contact_first_name,contactLastName:y.contact_last_name,contactEmail:y.email,name:y.company_name,email:y.email,phone:y.phone,avatarUrl:y.avatar_url,specialty:y.specialty,active:y.active,isActive:y.active,createdAt:y.created_at,updatedAt:y.updated_at,missionsCount:v[y.id]||0}));n(x)}catch(d){console.error("[useSupabasePartners] Erreur:",d),l(d.message)}finally{o(!1)}},[]),u=p.useCallback(async(d,h)=>{try{const{error:m}=await k.from("partners").update({active:h,updated_at:new Date().toISOString()}).eq("id",d);if(m)throw m;return n(g=>g.map(v=>v.id===d?{...v,active:h}:v)),{success:!0}}catch(m){return console.error("[useSupabasePartners] Erreur toggle:",m),{success:!1,error:m.message}}},[]),f=p.useCallback(async d=>{try{const{data:h,error:m}=await k.from("partners").select("*").eq("id",d).single();if(m)throw m;const{data:g,error:v}=await k.from("missions").select(`
          id,
          title,
          status,
          source,
          project_type,
          step_name,
          due_date,
          completed_at,
          created_at
        `).eq("partner_id",d).order("created_at",{ascending:!1});if(v)throw v;return{partner:{id:h.id,userId:h.user_id,organizationId:h.organization_id,name:h.name,email:h.email,phone:h.phone,avatarUrl:h.avatar_url,specialty:h.specialty,active:h.active,createdAt:h.created_at,updatedAt:h.updated_at},missions:(g||[]).map(x=>({id:x.id,title:x.title,status:x.status,source:x.source,projectType:x.project_type,stepName:x.step_name,dueDate:x.due_date,completedAt:x.completed_at,createdAt:x.created_at}))}}catch(h){return console.error("[useSupabasePartners] Erreur getPartnerWithMissions:",h),{partner:null,missions:[],error:h.message}}},[]);return p.useEffect(()=>{if(!t||!e)return;c();const d=k.channel(`partners-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"partners",filter:`organization_id=eq.${e}`},()=>{c()}).subscribe();return()=>{k.removeChannel(d)}},[c,t,e]),{partners:r,loading:s,error:a,refetch:c,togglePartnerActive:u,getPartnerWithMissions:f}},fn=({activeModule:e})=>{const t=yr(),r=[{id:"workflows",path:"/admin/workflows-charly",label:"Workflows",icon:"",color:"bg-green-600 hover:bg-green-700",activeColor:"bg-green-600"},{id:"projets",path:"/admin/projects-management",label:"Projets",icon:"",color:"bg-blue-600 hover:bg-blue-700",activeColor:"bg-blue-600"},{id:"formulaires",path:"/admin/forms-management",label:"Formulaires",icon:"",color:"bg-teal-600 hover:bg-teal-700",activeColor:"bg-teal-600"},{id:"contrats",path:"/admin/contract-templates",label:"Contrats",icon:"",color:"bg-purple-600 hover:bg-purple-700",activeColor:"bg-purple-600"},{id:"catalogue",path:"/admin/project-display",label:"Catalogue Client",icon:"",color:"bg-indigo-600 hover:bg-indigo-700",activeColor:"bg-indigo-600"},{id:"partenaires",path:"/admin/partners",label:"Partenaires",icon:"",color:"bg-orange-600 hover:bg-orange-700",activeColor:"bg-orange-600"}];return i.jsx("div",{className:"px-6 pt-4 pb-2",children:i.jsx("div",{className:"flex items-center justify-center gap-3",children:r.map(n=>{const s=e===n.id||t.pathname===n.path;return i.jsxs(uo,{to:n.path,className:`
                flex items-center gap-2.5 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200
                ${s?`${n.activeColor} text-white shadow-lg scale-105`:"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800 hover:scale-102"}
              `,children:[i.jsx("span",{className:"text-lg",children:n.icon}),i.jsx("span",{children:n.label})]},n.path)})})})},NK=({action:e,onChange:t,onDelete:r,forms:n,contractTemplates:s,partners:o=[]})=>{const a=(f,d)=>{t({...e,[f]:d})},l=()=>{const f=[...e.checklist||[],{id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:""}];a("checklist",f)},c=(f,d)=>{const h=[...e.checklist||[]];h[f].text=d,a("checklist",h)},u=f=>{const d=[...e.checklist||[]];d.splice(f,1),a("checklist",d)};return i.jsxs("div",{className:"p-4 bg-white rounded-lg border space-y-4",children:[e.order!==void 0&&e.waitForPrevious&&i.jsx("div",{className:"flex items-center gap-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("span",{className:"text-sm text-blue-700",children:[" ",i.jsxs("strong",{children:["Action #",e.order+1]})," - S'enverra automatiquement aprs validation de l'action prcdente"]})}),e.order!==void 0&&!e.waitForPrevious&&i.jsx("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("span",{className:"text-sm text-green-700",children:[" ",i.jsxs("strong",{children:["Action #",e.order+1]})," - S'enverra immdiatement"]})}),i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Type d'action"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{a("hasClientAction",!0),e.type==="partner_task"&&(a("type","none"),a("partnerId",null),a("partnerInstructions",null),a("isBlocking",null))},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.hasClientAction===!0&&e.type!=="partner_task"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au client"})]})}),i.jsx("button",{type:"button",onClick:()=>{a("hasClientAction",!1),e.type==="partner_task"&&(a("type","none"),a("partnerId",null),a("partnerInstructions",null),a("isBlocking",null))},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.hasClientAction===!1&&e.type!=="partner_task"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au commercial"})]})}),i.jsx("button",{type:"button",onClick:()=>{console.log(" Clic sur Associe au partenaire",{action:e,partners:o}),t({...e,type:"partner_task",hasClientAction:null,formId:null,templateId:null,documentType:null})},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.type==="partner_task"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au partenaire"})]})})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:r,className:"ml-2",children:i.jsx(In,{className:"h-4 w-4 text-red-500"})})]}),e.type==="partner_task"?i.jsxs("div",{className:"space-y-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[!o||o.filter(f=>f.isActive).length===0?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Aucun partenaire disponible"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Invitez-en un depuis l'onglet Partenaires."})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Partenaire assign"}),i.jsxs(Kt,{value:e.partnerId||"",onValueChange:f=>a("partnerId",f),children:[i.jsx(Ft,{children:i.jsx(Yt,{placeholder:"Slectionner un partenaire"})}),i.jsx(Bt,{children:o.filter(f=>f.isActive).map(f=>i.jsxs(Pe,{value:f.id,children:[f.companyName," (",f.contactEmail,")"]},f.id))})]}),!e.partnerId&&i.jsx("p",{className:"text-xs text-red-500",children:" Partenaire obligatoire pour sauvegarder"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Instructions pour le partenaire"}),i.jsx(ao,{value:e.partnerInstructions||"",onChange:f=>a("partnerInstructions",f.target.value),placeholder:"Ex: Effectuer la visite technique et remplir le rapport...",className:"min-h-[100px]"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ces instructions seront visibles par le partenaire dans sa vue mobile"})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[i.jsx(tr,{id:`blocking-${e.id}`,checked:e.isBlocking!==!1,onCheckedChange:f=>a("isBlocking",f)}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Q,{htmlFor:`blocking-${e.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Action bloquante"}),i.jsx("p",{className:"text-xs text-gray-500",children:e.isBlocking!==!1?" Le projet ne peut pas avancer tant que le partenaire n'a pas termin":" Le projet peut continuer mme si la mission n'est pas termine"})]})]})]}):e.hasClientAction!==!1?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Message  dire"}),i.jsx(ao,{placeholder:"Ex: Bonjour, merci de complter les informations...",value:e.message,onChange:f=>a("message",f.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Action  associer"}),i.jsxs(Kt,{value:e.type,onValueChange:f=>a("type",f),children:[i.jsx(Ft,{children:i.jsx(Yt,{placeholder:"Choisir une action"})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"none",children:"Aucune"}),i.jsx(Pe,{value:"show_form",children:"Afficher un formulaire"}),i.jsx(Pe,{value:"start_signature",children:"Lancer une signature"}),i.jsx(Pe,{value:"request_document",children:"Demander un document"}),i.jsx(Pe,{value:"open_payment",children:"Ouvrir un paiement"})]})]})]}),i.jsxs(bo,{children:[e.type==="show_form"&&i.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Formulaire  afficher"}),i.jsxs(Kt,{value:e.formId,onValueChange:f=>a("formId",f),children:[i.jsx(Ft,{children:i.jsx(Yt,{placeholder:"Choisir un formulaire"})}),i.jsx(Bt,{children:Object.values(n).filter(f=>f.audience==="client"||!f.audience).map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id))})]})]}),e.type==="request_document"&&i.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Type de document attendu"}),i.jsx("input",{type:"text",value:e.documentType||"",onChange:f=>a("documentType",f.target.value),placeholder:"Ex: Facture EDF, RIB, Titre de proprit...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.type==="start_signature"&&i.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Template de contrat  utiliser"}),i.jsxs(Kt,{value:e.templateId,onValueChange:f=>a("templateId",f),children:[i.jsx(Ft,{children:i.jsx(Yt,{placeholder:"Slectionner un template"})}),i.jsx(Bt,{children:s.filter(f=>f.isActive).map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id))})]}),!e.templateId&&i.jsx("p",{className:"text-xs text-red-500",children:" Template obligatoire pour sauvegarder"})]}),e.type==="start_signature"&&i.jsx(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden border-t pt-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"font-semibold text-gray-700",children:"Formulaire source des donnes"}),i.jsxs(Kt,{value:e.formId||"",onValueChange:f=>a("formId",f),children:[i.jsx(Ft,{className:"w-full",children:i.jsx(Yt,{placeholder:"Slectionner un formulaire"})}),i.jsxs(Bt,{children:[Array.isArray(n)&&n.map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id)),(!Array.isArray(n)||n.length===0)&&i.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500",children:"Aucun formulaire disponible"})]})]}),i.jsx("p",{className:"text-xs text-blue-600",children:" Les donnes du formulaire seront injectes directement dans le contrat"})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Mode de gestion"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>a("managementMode","automatic"),className:`flex-1 p-3 rounded-lg border-2 transition-all ${(e.managementMode||"automatic")==="automatic"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Gr par l'IA"})]})}),i.jsx("button",{type:"button",onClick:()=>a("managementMode","manual"),className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.managementMode==="manual"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Gr par commercial"})]})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(e.managementMode||"automatic")==="automatic"?" Envoy automatiquement par Charly AI":" Le commercial devra envoyer manuellement"}),i.jsx(bo,{children:e.managementMode==="manual"&&i.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pt-3 border-t overflow-hidden space-y-3",children:[i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(tr,{id:`create-task-${e.id}`,checked:e.createTask!==!1,onCheckedChange:f=>a("createTask",f)}),i.jsxs("div",{className:"space-y-1 flex-1",children:[i.jsx(Q,{htmlFor:`create-task-${e.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Crer automatiquement une tche pour le commercial"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Une tche sera envoye au commercial ds que cette tape devient l'tape en cours."})]})]}),e.createTask!==!1&&i.jsxs("div",{className:"space-y-2 ml-6",children:[i.jsx(Q,{className:"text-sm",children:"Titre de la tche"}),i.jsx("input",{type:"text",value:e.taskTitle||"Action requise pour ce client",onChange:f=>a("taskTitle",f.target.value),placeholder:"Action requise pour ce client",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})]}),e.type==="show_form"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Mode de vrification"}),i.jsxs(Kt,{value:e.verificationMode||"human",onValueChange:f=>a("verificationMode",f),children:[i.jsx(Ft,{children:i.jsx(Yt,{placeholder:"Choisir le mode de vrification"})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"none",children:"Pas de vrification (auto-validation)"}),i.jsx(Pe,{value:"ai",children:"IA automatique"}),i.jsx(Pe,{value:"human",children:"Humain (commercial vrifie)"})]})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e.verificationMode==="none"&&" Valid automatiquement ds que le client termine",e.verificationMode==="ai"&&" L'IA analysera et validera automatiquement",(!e.verificationMode||e.verificationMode==="human")&&" Une tche sera cre pour que le commercial vrifie"]}),(!e.verificationMode||e.verificationMode==="human")&&i.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:" Message si valid"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ce message sera envoy automatiquement dans le chat quand le commercial valide le formulaire"}),i.jsx(ao,{value:e.approvalMessage||"Merci ! Votre formulaire a t valid.",onChange:f=>a("approvalMessage",f.target.value),placeholder:"Merci ! Votre formulaire a t valid.",className:"min-h-[60px]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:" Message si rejet"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Message prdfini affich au commercial. Il pourra ajouter sa raison de refus avant d'envoyer dans le chat."}),i.jsx(ao,{value:e.rejectionMessage||"Oups !! Votre formulaire a t rejet pour la raison suivante :",onChange:f=>a("rejectionMessage",f.target.value),placeholder:"Oups !! Votre formulaire a t rejet pour la raison suivante :",className:"min-h-[60px]"})]})]})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Checklist de tches pour le commercial"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Liste des tches  effectuer manuellement pour cette action"}),i.jsx("div",{className:"space-y-2",children:(e.checklist||[]).map((f,d)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:f.text,onChange:h=>c(d,h.target.value),placeholder:"Ex: Vrifier le document",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>u(d),className:"h-8 w-8",children:i.jsx(In,{className:"h-4 w-4 text-red-500"})})]},f.id))}),i.jsxs(H,{variant:"outline",size:"sm",onClick:l,className:"w-full border-dashed",children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"})," Ajouter une tche"]})]})]})},CK=()=>{var B;const{projectsData:e={}}=Ve(),{organizationId:t}=nn(),{forms:r,loading:n}=w0(t),s=p.useMemo(()=>Object.values(r||{}),[r]),{prompts:o,loading:a,savePrompt:l,deletePrompt:c}=ZR({organizationId:t}),{templates:u,loading:f}=EK(t),{partners:d,loading:h}=j0(t),m=p.useMemo(()=>o,[o]),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState({name:"",tone:"",projectId:null,stepsConfig:{}}),[j,_]=p.useState(null);p.useEffect(()=>{w(g?JSON.parse(JSON.stringify(g)):{name:"",tone:"",projectId:null,stepsConfig:{}})},[g]);const S=p.useMemo(()=>Object.values(e||{}).map(A=>({value:A.type,label:A.title})),[e]),E=p.useMemo(()=>{var A;return b.projectId?((A=e==null?void 0:e[b.projectId])==null?void 0:A.steps)||[]:[]},[b.projectId,e]),N=A=>{w(R=>({...R,projectId:A,stepsConfig:{}})),_(null)},P=A=>{_(j===A?null:A)},C=(A,R,D)=>{const F={...b.stepsConfig};F[A]||(F[A]={actions:[],autoCompleteStep:!1}),F[A].actions[R]=D,w(q=>({...q,stepsConfig:F}))},I=A=>{const R={...b.stepsConfig};R[A]||(R[A]={actions:[],autoCompleteStep:!1});const F=(R[A].actions||[]).length;R[A].actions.push({id:`action-${Date.now()}`,message:"",type:"none",hasClientAction:!0,order:F,waitForPrevious:F>0}),w(q=>({...q,stepsConfig:R}))},O=(A,R)=>{const D={...b.stepsConfig};D[A]&&D[A].actions.splice(R,1),w(F=>({...F,stepsConfig:D}))},$=(A,R,D)=>{const F={...b.stepsConfig};F[A]||(F[A]={actions:[],autoCompleteStep:!1}),F[A][R]=D,w(q=>({...q,stepsConfig:F}))},L=async()=>{if(!b.name||!b.tone||!b.projectId){M({title:"Champs manquants",description:"Veuillez remplir le nom, le ton et le projet.",variant:"destructive"});return}y(!0);const A={...b,id:(g==null?void 0:g.id)||`prompt-${Date.now()}`},R=A.id||`prompt-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;try{const D=await l(R,{name:A.name,tone:A.tone,projectId:A.projectId,stepsConfig:A.stepsConfig||{}});D.success?(M({title:" Prompt enregistr !",description:`Le prompt "${A.name}" a t sauvegard dans Supabase.`,className:"bg-green-500 text-white"}),v(null)):M({title:" Erreur",description:`Impossible d'enregistrer le prompt : ${D.error}`,variant:"destructive"})}finally{y(!1)}},V=async A=>{const R=await c(A);R.success?M({title:" Prompt supprim !",description:"Le prompt a t supprim de Supabase.",className:"bg-green-500 text-white"}):M({title:" Erreur",description:`Impossible de supprimer le prompt : ${R.error}`,variant:"destructive"})},z=A=>{v(A)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"workflows"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Workflows Charly"}),i.jsxs(H,{onClick:()=>z(null),className:"bg-indigo-600 hover:bg-indigo-700 w-full",children:[i.jsx(Ar,{className:"mr-2 h-4 w-4"})," Crer un nouveau prompt"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:Object.values(m).length>0?Object.values(m).map(A=>{var R;return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(g==null?void 0:g.id)===A.id?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>z(A),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zl,{className:"h-5 w-5 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:A.name}),i.jsx("p",{className:"text-xs text-gray-500",children:((R=e[A.projectId])==null?void 0:R.title)||"Projet inconnu"})]})]}),i.jsxs(Lc,{children:[i.jsx(lh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:D=>D.stopPropagation(),children:i.jsx(In,{className:"h-4 w-4"})})}),i.jsxs(ca,{children:[i.jsxs(ua,{children:[i.jsxs(fa,{children:['Supprimer "',A.name,'" ?']}),i.jsx(ha,{children:"Cette action est irrversible."})]}),i.jsxs(da,{children:[i.jsx(ma,{children:"Annuler"}),i.jsx(pa,{onClick:()=>V(A.id),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},A.id)}):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(zl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun prompt cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:g?"Modifier le prompt":"Crer un nouveau prompt"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Paramtrez votre prompt pour gnrer des communications personnalises."})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-name",children:"Nom du prompt"}),i.jsx(me,{id:"prompt-name",placeholder:"Ex: Relance aprs RDV",value:b.name,onChange:A=>w(R=>({...R,name:A.target.value}))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-tone",children:"Ton"}),i.jsxs(Kt,{value:b.tone,onValueChange:A=>w(R=>({...R,tone:A})),children:[i.jsx(Ft,{id:"prompt-tone",children:i.jsx(Yt,{placeholder:"Choisir un ton"})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"professionnel",children:"Professionnel"}),i.jsx(Pe,{value:"detendu",children:"Dtendu"}),i.jsx(Pe,{value:"humain",children:"Humain"})]})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-project",children:"Projet"}),i.jsxs(Kt,{value:b.projectId,onValueChange:N,children:[i.jsx(Ft,{id:"prompt-project",children:i.jsx(Yt,{placeholder:"Choisir un projet"})}),i.jsx(Bt,{children:S.map(A=>i.jsx(Pe,{value:A.value,children:A.label},A.value))})]})]})]}),b.projectId&&i.jsxs(ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"pt-4 border-t",children:[i.jsxs("h4",{className:"font-semibold text-gray-700 mb-3",children:['tapes du projet "',(B=e[b.projectId])==null?void 0:B.title,'"']}),i.jsx("div",{className:"space-y-2",children:E.map((A,R)=>{var D,F;return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>P(R),className:"w-full flex items-center justify-between gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-lg",children:A.icon}),i.jsx("span",{className:"text-sm font-medium text-gray-800",children:A.name})]}),j===R?i.jsx(Ui,{className:"h-5 w-5"}):i.jsx(Rf,{className:"h-5 w-5"})]}),i.jsx(bo,{children:j===R&&i.jsx(ie.div,{initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:"0.5rem"},exit:{opacity:0,height:0,marginTop:0},className:"pl-8 bg-gray-50/50 rounded-b-md",children:i.jsxs("div",{className:"p-4 space-y-4",children:[(((D=b.stepsConfig[R])==null?void 0:D.actions)||[]).map((q,W)=>i.jsx(NK,{action:q,onChange:te=>C(R,W,te),onDelete:()=>O(R,W),forms:s||[],contractTemplates:u||[],partners:d||[]},q.id)),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>I(R),className:"w-full border-dashed",children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"})," Ajouter un message + action"]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t mt-4",children:[i.jsx(tr,{id:`form-complete-step-${R}`,checked:((F=b.stepsConfig[R])==null?void 0:F.autoCompleteStep)||!1,onCheckedChange:q=>$(R,"autoCompleteStep",q)}),i.jsx(Q,{htmlFor:`form-complete-step-${R}`,className:"text-sm text-gray-600",children:"Si action valide, passer automatiquement  l'tape suivante"})]})]})})})]},R)})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:()=>v(null),disabled:x,children:"Annuler"}),i.jsx(H,{onClick:L,className:"bg-green-600 hover:bg-green-700",disabled:x,children:x?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le prompt"})]})]})]})})]})]})},Qa=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Qa.displayName="Card";const Za=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:pe("flex flex-col space-y-1.5 p-6",e),...t}));Za.displayName="CardHeader";const el=p.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:pe("text-2xl font-semibold leading-none tracking-tight",e),...t}));el.displayName="CardTitle";const eI=p.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));eI.displayName="CardDescription";const tl=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:pe("p-6 pt-0",e),...t}));tl.displayName="CardContent";const PK=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:pe("flex items-center p-6 pt-0",e),...t}));PK.displayName="CardFooter";var hh="Switch",[TK,sse]=rn(hh),[kK,AK]=TK(hh),tI=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=Fe(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[y,b]=Ao({prop:s,defaultProp:o??!1,onChange:u,caller:hh});return i.jsxs(kK,{scope:r,checked:y,disabled:l,children:[i.jsx(Ae.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":oI(y),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:xe(e.onClick,w=>{b(j=>!j),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(sI,{control:h,bubbles:!v.current,name:n,value:c,checked:y,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});tI.displayName=hh;var rI="SwitchThumb",nI=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=AK(rI,r);return i.jsx(Ae.span,{"data-state":oI(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});nI.displayName=rI;var RK="SwitchBubbleInput",sI=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},o)=>{const a=p.useRef(null),l=Fe(a,o),c=wA(r),u=Iy(t);return p.useEffect(()=>{const f=a.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(f,r),f.dispatchEvent(g)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sI.displayName=RK;function oI(e){return e?"checked":"unchecked"}var iI=tI,IK=nI;const ph=J.forwardRef(({className:e,...t},r)=>i.jsx(iI,{className:pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(IK,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ph.displayName=iI.displayName;const jn=({value:e,onSave:t,placeholder:r="Cliquez pour modifier...",className:n="",inputClassName:s="",multiline:o=!1,as:a="span",disabled:l=!1})=>{const[c,u]=p.useState(!1),[f,d]=p.useState(e||""),[h,m]=p.useState(!1),g=p.useRef(null);p.useEffect(()=>{c||d(e||"")},[e,c]),p.useEffect(()=>{c&&g.current&&(g.current.focus(),o||g.current.select())},[c,o]);const v=()=>{!l&&!c&&u(!0)},x=async()=>{if(f===e){u(!1);return}try{m(!0),await t(f),u(!1)}catch(E){console.error("InlineEditable save error:",E)}finally{m(!1)}},y=()=>{d(e||""),u(!1)},b=E=>{E.key==="Enter"&&!o?(E.preventDefault(),x()):E.key==="Escape"&&y()},w=E=>{var N,P;((P=(N=E.relatedTarget)==null?void 0:N.dataset)==null?void 0:P.action)!=="cancel"&&x()},j=a,_=e||r,S=!e;if(c){const E=o?"textarea":"input";return i.jsxs("div",{className:"inline-flex items-center gap-2 w-full",children:[i.jsx(E,{ref:g,type:"text",value:f,onChange:N=>d(N.target.value),onKeyDown:b,onBlur:w,disabled:h,className:pe("flex-1 px-3 py-2 border border-blue-400 rounded-lg","focus:outline-none focus:ring-2 focus:ring-blue-500","bg-white text-gray-900",o&&"min-h-[80px] resize-y",h&&"opacity-50 cursor-not-allowed",s),placeholder:r,rows:o?3:void 0}),i.jsx("button",{type:"button",onClick:x,disabled:h,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Enregistrer",children:h?i.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):i.jsx(Rn,{className:"w-4 h-4"})}),i.jsx("button",{type:"button","data-action":"cancel",onClick:y,disabled:h,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Annuler",children:i.jsx(Ro,{className:"w-4 h-4"})})]})}return i.jsxs(j,{onClick:v,className:pe("group cursor-pointer inline-flex items-center gap-2","hover:bg-blue-50 rounded-lg px-2 py-1 -mx-2 -my-1","transition-colors duration-150",S&&"text-gray-400 italic",l&&"cursor-not-allowed opacity-50",n),title:l?void 0:"Cliquez pour modifier",children:[i.jsx("span",{children:_}),!l&&i.jsx(c3,{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})},OK=({value:e,onSave:t,className:r="",disabled:n=!1})=>{const[s,o]=p.useState(!1),[a,l]=p.useState(e||""),c=p.useRef(null),u=["","","","","","","","","","","","","","","","","","","","","","","",""];p.useEffect(()=>{s||l(e||"")},[e,s]),p.useEffect(()=>{if(s){const d=h=>{c.current&&!c.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)}},[s]);const f=async d=>{try{await t(d),l(d),o(!1)}catch(h){console.error("InlineEditableIcon save error:",h)}};return s?i.jsxs("div",{className:"relative inline-block",ref:c,children:[i.jsx("button",{type:"button",className:"text-4xl",children:a}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 bg-white rounded-xl shadow-xl border border-gray-200 z-50 grid grid-cols-8 gap-2 min-w-[280px]",children:u.map(d=>i.jsx("button",{type:"button",onClick:()=>f(d),className:"w-8 h-8 flex items-center justify-center text-xl hover:bg-blue-50 hover:scale-125 rounded-lg transition-all duration-150",children:d},d))})]}):i.jsx("button",{type:"button",onClick:()=>!n&&o(!0),disabled:n,className:pe("text-4xl hover:scale-110 transition-transform cursor-pointer",n&&"cursor-not-allowed opacity-50",r),title:n?void 0:"Cliquez pour changer l'icne",children:e||""})},DK=e=>{const[t,r]=p.useState(null),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=p.useRef(!1),c=()=>({hero_title:"",hero_subtitle:"Suivez l'avancement de votre projet en temps rel",hero_cta_text:"Je dmarre mon projet",hero_cta_link:"/inscription",show_how_it_works:!0,how_it_works_title:"Comment a marche ?",how_it_works_subtitle:"",blocks:u()}),u=()=>[{id:1,icon:"1",title:"tude",description:"Analyse de votre projet",tag:""},{id:2,icon:"2",title:"Installation",description:"Ralisation des travaux",tag:""},{id:3,icon:"3",title:"Suivi",description:"Accompagnement continu",tag:""}],f=async()=>{if(!e){s(!1);return}try{s(!0);const{data:y,error:b}=await k.from("organization_settings").select("*").eq("organization_id",e).single();if(b&&b.code!=="PGRST116")throw b;r(y),a(null)}catch(y){T.error("[useLandingPageConfig] Erreur chargement:",{error:y.message}),a(y.message)}finally{s(!1)}};p.useEffect(()=>{f()},[e]),p.useEffect(()=>{if(!e)return;const y=k.channel(`org-settings-landing-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organization_settings",filter:`organization_id=eq.${e}`},b=>{r(w=>JSON.stringify(w)===JSON.stringify(b.new)?w:(l.current=!1,b.new))}).subscribe();return()=>{k.removeChannel(y)}},[e]);const d=()=>{const y=(t==null?void 0:t.landing_page_config)||{},b=c();return{hero_title:y.hero_title||b.hero_title,hero_subtitle:y.hero_subtitle||b.hero_subtitle,hero_cta_text:y.hero_cta_text||b.hero_cta_text,hero_cta_link:y.hero_cta_link||b.hero_cta_link,show_how_it_works:y.show_how_it_works!==void 0?y.show_how_it_works:b.show_how_it_works,how_it_works_title:y.how_it_works_title||b.how_it_works_title,how_it_works_subtitle:y.how_it_works_subtitle||b.how_it_works_subtitle,blocks:y.blocks||b.blocks}},h=async(y,b)=>{if(!e)return T.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const j={...(t==null?void 0:t.landing_page_config)||{},[y]:b},{error:_}=await k.from("organization_settings").update({landing_page_config:j,updated_at:new Date().toISOString()}).eq("organization_id",e);if(_)throw l.current=!1,_;return r(S=>({...S,landing_page_config:j,updated_at:new Date().toISOString()})),!0}catch(w){return T.error("[useLandingPageConfig] Erreur update field:",{error:w.message,field:y}),M({title:"Erreur",description:"Impossible de sauvegarder la modification.",variant:"destructive"}),!1}},m=async(y,b)=>{if(!e)return T.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const w=(t==null?void 0:t.landing_page_config)||{},_=(w.blocks||u()).map(N=>N.id===y?{...N,...b}:N),S={...w,blocks:_},{error:E}=await k.from("organization_settings").update({landing_page_config:S,updated_at:new Date().toISOString()}).eq("organization_id",e);if(E)throw l.current=!1,E;return r(N=>({...N,landing_page_config:S,updated_at:new Date().toISOString()})),!0}catch(w){return T.error("[useLandingPageConfig] Erreur update block:",{error:w.message,blockId:y}),M({title:"Erreur",description:"Impossible de sauvegarder le bloc.",variant:"destructive"}),!1}},g=async y=>{if(!e)return T.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const{error:b}=await k.from("organization_settings").update({landing_page_config:y,updated_at:new Date().toISOString()}).eq("organization_id",e);if(b)throw l.current=!1,b;return r(w=>({...w,landing_page_config:y,updated_at:new Date().toISOString()})),M({title:"Sauvegard !",description:"La configuration de la landing page a t mise  jour.",className:"bg-green-500 text-white"}),!0}catch(b){return T.error("[useLandingPageConfig] Erreur save config:",{error:b.message}),M({title:"Erreur",description:"Impossible de sauvegarder la configuration.",variant:"destructive"}),!1}},v=async()=>g(c()),x=d();return{settings:t,loading:n,error:o,landingConfig:x,getLandingConfig:d,updateLandingField:h,updateLandingBlock:m,saveLandingConfig:g,resetToDefaults:v,refetch:f}},$K=()=>{const{organizationId:e,logoUrl:t,brandName:r}=nn(),{loading:n,getLandingConfig:s,updateLandingField:o,updateLandingBlock:a,resetToDefaults:l}=DK(e),[c,u]=p.useState(!0),[f,d]=p.useState(!1),h=s(),m=h.hero_title||`Bienvenue chez ${r||"votre entreprise"}`,g=h.hero_subtitle||"Suivez l'avancement de votre projet en temps rel",v=async(b,w)=>{await o(b,w)&&M({title:" Sauvegard",description:"Modification enregistre.",className:"bg-green-500 text-white",duration:2e3})},x=async(b,w,j)=>{const _=h.blocks.find(E=>E.id===b);await a(b,{..._,[w]:j})&&M({title:" Sauvegard",description:"Bloc mis  jour.",className:"bg-green-500 text-white",duration:2e3})},y=async()=>{confirm("tes-vous sr de vouloir rinitialiser la landing page aux valeurs par dfaut ?")&&(d(!0),await l(),d(!1),M({title:" Rinitialis",description:"La landing page a t rinitialise.",className:"bg-blue-500 text-white"}))};return n?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement de la configuration..."})]})}):i.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Landing Page"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Personnalisez la page d'accueil publique de votre entreprise. Cliquez sur n'importe quel texte pour le modifier."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(H,{variant:"outline",onClick:()=>u(!c),className:"gap-2",children:[c?i.jsx(Ul,{className:"w-4 h-4"}):i.jsx(Vl,{className:"w-4 h-4"}),c?"Masquer preview":"Afficher preview"]}),i.jsxs(H,{variant:"outline",onClick:y,disabled:f,className:"gap-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[f?i.jsx(Me,{className:"w-4 h-4 animate-spin"}):i.jsx(u3,{className:"w-4 h-4"}),"Rinitialiser"]})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:i.jsxs("p",{className:"text-blue-800 text-sm",children:[" ",i.jsx("strong",{children:"Astuce :"})," Cliquez directement sur les textes pour les modifier. Les modifications sont sauvegardes automatiquement. Le logo utilis est celui configur dans les paramtres de votre organisation."]})}),c&&i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[t?i.jsx("img",{src:t,alt:r||"Logo",className:"h-10 w-auto object-contain"}):i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold",children:(r==null?void 0:r.charAt(0))||"E"})}),i.jsx("span",{className:"font-semibold text-gray-700",children:r||"Votre entreprise"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-4 py-2 rounded-full bg-[#22c55e] text-white text-sm font-medium",children:"Espace Pro"}),i.jsx("span",{className:"px-4 py-2 rounded-full bg-[#0ea5e9] text-white text-sm font-medium",children:"Espace Client"})]})]}),i.jsxs("div",{className:"relative px-8 py-16 bg-gradient-to-b from-white to-green-50/30",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-green-100/50 rounded-full blur-3xl"})}),i.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center space-y-6",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 leading-tight",children:i.jsx(jn,{value:m,onSave:b=>v("hero_title",b),placeholder:`Bienvenue chez ${r||"votre entreprise"}`,className:"text-4xl md:text-5xl font-bold",inputClassName:"text-3xl font-bold text-center"})}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 italic",children:i.jsx(jn,{value:g,onSave:b=>v("hero_subtitle",b),placeholder:"Suivez l'avancement de votre projet en temps rel",className:"text-xl md:text-2xl text-gray-600 italic",inputClassName:"text-xl italic text-center"})}),i.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4",children:[i.jsx("button",{className:"px-8 py-4 bg-[#22c55e] hover:bg-[#16a34a] text-white rounded-full font-semibold text-lg transition-colors",children:i.jsx(jn,{value:h.hero_cta_text,onSave:b=>v("hero_cta_text",b),placeholder:"Texte du bouton...",className:"text-white font-semibold",inputClassName:"text-center"})}),h.show_how_it_works!==!1&&i.jsx("span",{className:"text-[#22c55e] font-medium cursor-pointer hover:text-[#16a34a]",children:i.jsx(jn,{value:h.how_it_works_title,onSave:b=>v("how_it_works_title",b),placeholder:"Comment a marche ?",className:"text-[#22c55e] font-medium",inputClassName:"text-center"})})]}),i.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"Le bouton redirige toujours vers la cration de compte"})]})]}),i.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:'Section "Comment a marche"'}),i.jsx("p",{className:"text-sm text-gray-500",children:"Afficher les 3 blocs explicatifs sur la landing page"})]}),i.jsx(ph,{checked:h.show_how_it_works!==!1,onCheckedChange:b=>v("show_how_it_works",b)})]})}),h.show_how_it_works!==!1&&i.jsx("div",{className:"px-8 py-16 bg-white",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-12",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:i.jsx(jn,{value:h.how_it_works_title,onSave:b=>v("how_it_works_title",b),placeholder:"Titre de la section...",className:"text-3xl font-bold",inputClassName:"text-2xl font-bold text-center"})}),i.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:i.jsx(jn,{value:h.how_it_works_subtitle,onSave:b=>v("how_it_works_subtitle",b),placeholder:"Description de la section...",className:"text-gray-600",inputClassName:"text-center",multiline:!0})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.blocks.map(b=>i.jsxs(Qa,{className:"text-center hover:shadow-lg transition-shadow",children:[i.jsxs(Za,{className:"pb-2",children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsx(OK,{value:b.icon,onSave:w=>x(b.id,"icon",w)})}),i.jsx(el,{className:"text-lg",children:i.jsx(jn,{value:b.title,onSave:w=>x(b.id,"title",w),placeholder:"Titre du bloc...",className:"text-lg font-semibold",inputClassName:"text-center font-semibold"})})]}),i.jsxs(tl,{className:"space-y-3",children:[i.jsx(eI,{children:i.jsx(jn,{value:b.description,onSave:w=>x(b.id,"description",w),placeholder:"Description du bloc...",className:"text-gray-600 text-sm",inputClassName:"text-center text-sm",multiline:!0})}),i.jsx("div",{className:"inline-block px-3 py-1 bg-gray-100 rounded-full text-xs text-gray-600",children:i.jsx(jn,{value:b.tag,onSave:w=>x(b.id,"tag",w),placeholder:"Tag du bloc...",className:"text-xs",inputClassName:"text-xs text-center"})})]})]},b.id))})]})}),i.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 text-center text-sm text-gray-500",children:"Prvisualisation de votre landing page  Les modifications sont sauvegardes en temps rel"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Qa,{children:[i.jsx(Za,{className:"pb-2",children:i.jsx(el,{className:"text-sm font-medium text-gray-600",children:"Hero Section"})}),i.jsxs(tl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2 textes"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Titre + sous-titre + 2 CTAs"})]})]}),i.jsxs(Qa,{children:[i.jsx(Za,{className:"pb-2",children:i.jsx(el,{className:"text-sm font-medium text-gray-600",children:"Comment a marche"})}),i.jsxs(tl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"3 blocs"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Icne + titre + description + tag"})]})]}),i.jsxs(Qa,{children:[i.jsx(Za,{className:"pb-2",children:i.jsx(el,{className:"text-sm font-medium text-gray-600",children:"Branding"})}),i.jsxs(tl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r||"Non dfini"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Logo depuis les paramtres org"})]})]})]})]})};var mh="Popover",[aI,ose]=rn(mh,[Kf]),Mc=Kf(),[LK,Ms]=aI(mh),lI=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,l=Mc(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Ao({prop:n,defaultProp:s??!1,onChange:o,caller:mh});return i.jsx(oT,{...l,children:i.jsx(LK,{scope:t,contentId:ho(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:a,children:r})})};lI.displayName=mh;var cI="PopoverAnchor",MK=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ms(cI,r),o=Mc(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx($y,{...o,...n,ref:t})});MK.displayName=cI;var uI="PopoverTrigger",dI=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ms(uI,r),o=Mc(r),a=Fe(t,s.triggerRef),l=i.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":gI(s.open),...n,ref:a,onClick:xe(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx($y,{asChild:!0,...o,children:l})});dI.displayName=uI;var _0="PopoverPortal",[FK,BK]=aI(_0,{forceMount:void 0}),fI=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=Ms(_0,t);return i.jsx(FK,{scope:t,forceMount:r,children:i.jsx(Mr,{present:r||o.open,children:i.jsx(yc,{asChild:!0,container:s,children:n})})})};fI.displayName=_0;var Yi="PopoverContent",hI=p.forwardRef((e,t)=>{const r=BK(Yi,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=Ms(Yi,e.__scopePopover);return i.jsx(Mr,{present:n||o.open,children:o.modal?i.jsx(UK,{...s,ref:t}):i.jsx(VK,{...s,ref:t})})});hI.displayName=Yi;var zK=yo("PopoverContent.RemoveScroll"),UK=p.forwardRef((e,t)=>{const r=Ms(Yi,e.__scopePopover),n=p.useRef(null),s=Fe(t,n),o=p.useRef(!1);return p.useEffect(()=>{const a=n.current;if(a)return Tc(a)},[]),i.jsx(Uy,{as:zK,allowPinchZoom:!0,children:i.jsx(pI,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),VK=p.forwardRef((e,t)=>{const r=Ms(Yi,e.__scopePopover),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(pI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),pI=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Ms(Yi,r),m=Mc(r);return Ny(),i.jsx(Vf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(xc,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(iT,{"data-state":gI(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mI="PopoverClose",qK=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ms(mI,r);return i.jsx(Ae.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});qK.displayName=mI;var WK="PopoverArrow",HK=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Mc(r);return i.jsx(aT,{...s,...n,ref:t})});HK.displayName=WK;function gI(e){return e?"open":"closed"}var GK=lI,KK=dI,YK=fI,vI=hI;const xI=GK,yI=KK,S0=J.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(YK,{children:i.jsx(vI,{ref:s,align:t,sideOffset:r,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));S0.displayName=vI.displayName;function j1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j1(Object(r),!0).forEach(function(n){LW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ht(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var S1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),um=function(){return Math.random().toString(36).substring(7).split("").join(".")},E1={INIT:"@@redux/INIT"+um(),REPLACE:"@@redux/REPLACE"+um(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+um()}};function JK(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bI(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ht(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ht(1));return r(bI)(e,t)}if(typeof e!="function")throw new Error(Ht(2));var s=e,o=t,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function f(){if(c)throw new Error(Ht(3));return o}function d(v){if(typeof v!="function")throw new Error(Ht(4));if(c)throw new Error(Ht(5));var x=!0;return u(),l.push(v),function(){if(x){if(c)throw new Error(Ht(6));x=!1,u();var b=l.indexOf(v);l.splice(b,1),a=null}}}function h(v){if(!JK(v))throw new Error(Ht(7));if(typeof v.type>"u")throw new Error(Ht(8));if(c)throw new Error(Ht(9));try{c=!0,o=s(o,v)}finally{c=!1}for(var x=a=l,y=0;y<x.length;y++){var b=x[y];b()}return v}function m(v){if(typeof v!="function")throw new Error(Ht(10));s=v,h({type:E1.REPLACE})}function g(){var v,x=d;return v={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ht(11));function w(){b.next&&b.next(f())}w();var j=x(w);return{unsubscribe:j}}},v[S1]=function(){return this},v}return h({type:E1.INIT}),n={dispatch:h,subscribe:d,getState:f,replaceReducer:m},n[S1]=g,n}function N1(e,t){return function(){return t(e.apply(this,arguments))}}function C1(e,t){if(typeof e=="function")return N1(e,t);if(typeof e!="object"||e===null)throw new Error(Ht(16));var r={};for(var n in e){var s=e[n];typeof s=="function"&&(r[n]=N1(s,t))}return r}function wI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function XK(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),o=function(){throw new Error(Ht(15))},a={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(c){return c(a)});return o=wI.apply(void 0,l)(s.dispatch),_1(_1({},s),{},{dispatch:o})}}}var jI={exports:{}},_I={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=p;function QK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ZK=typeof Object.is=="function"?Object.is:QK,eY=Ji.useState,tY=Ji.useEffect,rY=Ji.useLayoutEffect,nY=Ji.useDebugValue;function sY(e,t){var r=t(),n=eY({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return rY(function(){s.value=r,s.getSnapshot=t,dm(s)&&o({inst:s})},[e,r,t]),tY(function(){return dm(s)&&o({inst:s}),e(function(){dm(s)&&o({inst:s})})},[e]),nY(r),r}function dm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ZK(e,r)}catch{return!0}}function oY(e,t){return t()}var iY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oY:sY;_I.useSyncExternalStore=Ji.useSyncExternalStore!==void 0?Ji.useSyncExternalStore:iY;jI.exports=_I;var SI=jI.exports,aY={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=p,lY=SI;function cY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uY=typeof Object.is=="function"?Object.is:cY,dY=lY.useSyncExternalStore,fY=gh.useRef,hY=gh.useEffect,pY=gh.useMemo,mY=gh.useDebugValue;aY.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=fY(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=pY(function(){function c(m){if(!u){if(u=!0,f=m,m=n(m),s!==void 0&&a.hasValue){var g=a.value;if(s(g,m))return d=g}return d=m}if(g=d,uY(f,m))return g;var v=n(m);return s!==void 0&&s(g,v)?(f=m,g):(f=m,d=v)}var u=!1,f,d,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=dY(e,o[0],o[1]);return hY(function(){a.hasValue=!0,a.value=l},[l]),mY(l),l};function gY(e){e()}let EI=gY;const vY=e=>EI=e,xY=()=>EI,P1=Symbol.for("react-redux-context"),T1=typeof globalThis<"u"?globalThis:{};function yY(){var e;if(!p.createContext)return{};const t=(e=T1[P1])!=null?e:T1[P1]=new Map;let r=t.get(p.createContext);return r||(r=p.createContext(null),t.set(p.createContext,r)),r}const NI=yY(),bY=()=>{throw new Error("uSES not initialized!")};function CI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PI={exports:{}},$e={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,E0=wt?Symbol.for("react.element"):60103,N0=wt?Symbol.for("react.portal"):60106,vh=wt?Symbol.for("react.fragment"):60107,xh=wt?Symbol.for("react.strict_mode"):60108,yh=wt?Symbol.for("react.profiler"):60114,bh=wt?Symbol.for("react.provider"):60109,wh=wt?Symbol.for("react.context"):60110,C0=wt?Symbol.for("react.async_mode"):60111,jh=wt?Symbol.for("react.concurrent_mode"):60111,_h=wt?Symbol.for("react.forward_ref"):60112,Sh=wt?Symbol.for("react.suspense"):60113,wY=wt?Symbol.for("react.suspense_list"):60120,Eh=wt?Symbol.for("react.memo"):60115,Nh=wt?Symbol.for("react.lazy"):60116,jY=wt?Symbol.for("react.block"):60121,_Y=wt?Symbol.for("react.fundamental"):60117,SY=wt?Symbol.for("react.responder"):60118,EY=wt?Symbol.for("react.scope"):60119;function br(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case E0:switch(e=e.type,e){case C0:case jh:case vh:case yh:case xh:case Sh:return e;default:switch(e=e&&e.$$typeof,e){case wh:case _h:case Nh:case Eh:case bh:return e;default:return t}}case N0:return t}}}function TI(e){return br(e)===jh}$e.AsyncMode=C0;$e.ConcurrentMode=jh;$e.ContextConsumer=wh;$e.ContextProvider=bh;$e.Element=E0;$e.ForwardRef=_h;$e.Fragment=vh;$e.Lazy=Nh;$e.Memo=Eh;$e.Portal=N0;$e.Profiler=yh;$e.StrictMode=xh;$e.Suspense=Sh;$e.isAsyncMode=function(e){return TI(e)||br(e)===C0};$e.isConcurrentMode=TI;$e.isContextConsumer=function(e){return br(e)===wh};$e.isContextProvider=function(e){return br(e)===bh};$e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===E0};$e.isForwardRef=function(e){return br(e)===_h};$e.isFragment=function(e){return br(e)===vh};$e.isLazy=function(e){return br(e)===Nh};$e.isMemo=function(e){return br(e)===Eh};$e.isPortal=function(e){return br(e)===N0};$e.isProfiler=function(e){return br(e)===yh};$e.isStrictMode=function(e){return br(e)===xh};$e.isSuspense=function(e){return br(e)===Sh};$e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===vh||e===jh||e===yh||e===xh||e===Sh||e===wY||typeof e=="object"&&e!==null&&(e.$$typeof===Nh||e.$$typeof===Eh||e.$$typeof===bh||e.$$typeof===wh||e.$$typeof===_h||e.$$typeof===_Y||e.$$typeof===SY||e.$$typeof===EY||e.$$typeof===jY)};$e.typeOf=br;PI.exports=$e;var NY=PI.exports,P0=NY,CY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},PY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},T0={};T0[P0.ForwardRef]=TY;T0[P0.Memo]=kI;function k1(e){return P0.isMemo(e)?kI:T0[e.$$typeof]||CY}var kY=Object.defineProperty,AY=Object.getOwnPropertyNames,A1=Object.getOwnPropertySymbols,RY=Object.getOwnPropertyDescriptor,IY=Object.getPrototypeOf,R1=Object.prototype;function AI(e,t,r){if(typeof t!="string"){if(R1){var n=IY(t);n&&n!==R1&&AI(e,n,r)}var s=AY(t);A1&&(s=s.concat(A1(t)));for(var o=k1(e),a=k1(t),l=0;l<s.length;++l){var c=s[l];if(!PY[c]&&!(r&&r[c])&&!(a&&a[c])&&!(o&&o[c])){var u=RY(t,c);try{kY(e,c,u)}catch{}}}}return e}var OY=AI;const I1=No(OY);var RI={exports:{}},Le={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=Symbol.for("react.element"),A0=Symbol.for("react.portal"),Ch=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),kh=Symbol.for("react.provider"),Ah=Symbol.for("react.context"),DY=Symbol.for("react.server_context"),Rh=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Oh=Symbol.for("react.suspense_list"),Dh=Symbol.for("react.memo"),$h=Symbol.for("react.lazy"),$Y=Symbol.for("react.offscreen"),II;II=Symbol.for("react.module.reference");function Fr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case k0:switch(e=e.type,e){case Ch:case Th:case Ph:case Ih:case Oh:return e;default:switch(e=e&&e.$$typeof,e){case DY:case Ah:case Rh:case $h:case Dh:case kh:return e;default:return t}}case A0:return t}}}Le.ContextConsumer=Ah;Le.ContextProvider=kh;Le.Element=k0;Le.ForwardRef=Rh;Le.Fragment=Ch;Le.Lazy=$h;Le.Memo=Dh;Le.Portal=A0;Le.Profiler=Th;Le.StrictMode=Ph;Le.Suspense=Ih;Le.SuspenseList=Oh;Le.isAsyncMode=function(){return!1};Le.isConcurrentMode=function(){return!1};Le.isContextConsumer=function(e){return Fr(e)===Ah};Le.isContextProvider=function(e){return Fr(e)===kh};Le.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===k0};Le.isForwardRef=function(e){return Fr(e)===Rh};Le.isFragment=function(e){return Fr(e)===Ch};Le.isLazy=function(e){return Fr(e)===$h};Le.isMemo=function(e){return Fr(e)===Dh};Le.isPortal=function(e){return Fr(e)===A0};Le.isProfiler=function(e){return Fr(e)===Th};Le.isStrictMode=function(e){return Fr(e)===Ph};Le.isSuspense=function(e){return Fr(e)===Ih};Le.isSuspenseList=function(e){return Fr(e)===Oh};Le.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ch||e===Th||e===Ph||e===Ih||e===Oh||e===$Y||typeof e=="object"&&e!==null&&(e.$$typeof===$h||e.$$typeof===Dh||e.$$typeof===kh||e.$$typeof===Ah||e.$$typeof===Rh||e.$$typeof===II||e.getModuleId!==void 0)};Le.typeOf=Fr;RI.exports=Le;var LY=RI.exports;const MY=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function FY(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:a}){let l=!1,c,u,f,d,h;function m(b,w){return c=b,u=w,f=e(c,u),d=t(n,u),h=r(f,d,u),l=!0,h}function g(){return f=e(c,u),t.dependsOnOwnProps&&(d=t(n,u)),h=r(f,d,u),h}function v(){return e.dependsOnOwnProps&&(f=e(c,u)),t.dependsOnOwnProps&&(d=t(n,u)),h=r(f,d,u),h}function x(){const b=e(c,u),w=!a(b,f);return f=b,w&&(h=r(f,d,u)),h}function y(b,w){const j=!o(w,u),_=!s(b,c,w,u);return c=b,u=w,j&&_?g():j?v():_?x():h}return function(w,j){return l?y(w,j):m(w,j)}}function BY(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:s}=t,o=CI(t,MY);const a=r(e,o),l=n(e,o),c=s(e,o);return FY(a,l,c,e,o)}function zY(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function Pv(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function O1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function OI(e,t){return function(n,{displayName:s}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=O1(e);let u=o(l,c);return typeof u=="function"&&(o.mapToProps=u,o.dependsOnOwnProps=O1(u),u=o(l,c)),u},o}}function R0(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function UY(e){return e&&typeof e=="object"?Pv(t=>zY(e,t)):e?typeof e=="function"?OI(e):R0(e,"mapDispatchToProps"):Pv(t=>({dispatch:t}))}function VY(e){return e?typeof e=="function"?OI(e):R0(e,"mapStateToProps"):Pv(()=>({}))}function qY(e,t,r){return je({},r,e,t)}function WY(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,a;return function(c,u,f){const d=e(c,u,f);return o?s(d,a)||(a=d):(o=!0,a=d),a}}}function HY(e){return e?typeof e=="function"?WY(e):R0(e,"mergeProps"):()=>qY}function GY(){const e=xY();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const D1={notify(){},get:()=>[]};function DI(e,t){let r,n=D1,s=0,o=!1;function a(v){f();const x=n.subscribe(v);let y=!1;return()=>{y||(y=!0,x(),d())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return o}function f(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=GY())}function d(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=D1)}function h(){o||(o=!0,f())}function m(){o&&(o=!1,d())}const g={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}const KY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zd=KY?p.useLayoutEffect:p.useEffect;function $1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function fm(e,t){if($1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!$1(e[r[s]],t[r[s]]))return!1;return!0}const YY=["reactReduxForwardedRef"];let $I=bY;const JY=e=>{$I=e},XY=[null,null];function QY(e,t,r){Zd(()=>e(...t),r)}function ZY(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function eJ(e,t,r,n,s,o,a,l,c,u,f){if(!e)return()=>{};let d=!1,h=null;const m=()=>{if(d||!l.current)return;const v=t.getState();let x,y;try{x=n(v,s.current)}catch(b){y=b,h=b}y||(h=null),x===o.current?a.current||u():(o.current=x,c.current=x,a.current=!0,f())};return r.onStateChange=m,r.trySubscribe(),m(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function tJ(e,t){return e===t}function LI(e,t,r,{pure:n,areStatesEqual:s=tJ,areOwnPropsEqual:o=fm,areStatePropsEqual:a=fm,areMergedPropsEqual:l=fm,forwardRef:c=!1,context:u=NI}={}){const f=u,d=VY(e),h=UY(t),m=HY(r),g=!!e;return x=>{const y=x.displayName||x.name||"Component",b=`Connect(${y})`,w={shouldHandleStateChanges:g,displayName:b,wrappedComponentName:y,WrappedComponent:x,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:m,areStatesEqual:s,areStatePropsEqual:a,areOwnPropsEqual:o,areMergedPropsEqual:l};function j(E){const[N,P,C]=p.useMemo(()=>{const{reactReduxForwardedRef:ce}=E,_e=CI(E,YY);return[E.context,ce,_e]},[E]),I=p.useMemo(()=>N&&N.Consumer&&LY.isContextConsumer(p.createElement(N.Consumer,null))?N:f,[N,f]),O=p.useContext(I),$=!!E.store&&!!E.store.getState&&!!E.store.dispatch,L=!!O&&!!O.store,V=$?E.store:O.store,z=L?O.getServerState:V.getState,B=p.useMemo(()=>BY(V.dispatch,w),[V]),[A,R]=p.useMemo(()=>{if(!g)return XY;const ce=DI(V,$?void 0:O.subscription),_e=ce.notifyNestedSubs.bind(ce);return[ce,_e]},[V,$,O]),D=p.useMemo(()=>$?O:je({},O,{subscription:A}),[$,O,A]),F=p.useRef(),q=p.useRef(C),W=p.useRef(),te=p.useRef(!1);p.useRef(!1);const fe=p.useRef(!1),le=p.useRef();Zd(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const ne=p.useMemo(()=>()=>W.current&&C===q.current?W.current:B(V.getState(),C),[V,C]),ue=p.useMemo(()=>_e=>A?eJ(g,V,A,B,q,F,te,fe,W,R,_e):()=>{},[A]);QY(ZY,[q,F,te,C,W,R]);let Y;try{Y=$I(ue,ne,z?()=>B(z(),C):ne)}catch(ce){throw le.current&&(ce.message+=`
The error may be correlated with this previous error:
${le.current.stack}

`),ce}Zd(()=>{le.current=void 0,W.current=void 0,F.current=Y});const U=p.useMemo(()=>p.createElement(x,je({},Y,{ref:P})),[P,x,Y]);return p.useMemo(()=>g?p.createElement(I.Provider,{value:D},U):U,[I,U,D])}const S=p.memo(j);if(S.WrappedComponent=x,S.displayName=j.displayName=b,c){const N=p.forwardRef(function(C,I){return p.createElement(S,je({},C,{reactReduxForwardedRef:I}))});return N.displayName=b,N.WrappedComponent=x,I1(N,x)}return I1(S,x)}}function rJ({store:e,context:t,children:r,serverState:n,stabilityCheck:s="once",noopCheck:o="once"}){const a=p.useMemo(()=>{const u=DI(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:s,noopCheck:o}},[e,n,s,o]),l=p.useMemo(()=>e.getState(),[e]);Zd(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,l]);const c=t||NI;return p.createElement(c.Provider,{value:a},r)}JY(SI.useSyncExternalStore);vY(xr.unstable_batchedUpdates);function nJ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function MI(e,t){var r=p.useState(function(){return{inputs:t,result:e()}})[0],n=p.useRef(!0),s=p.useRef(r),o=n.current||!!(t&&s.current.inputs&&nJ(t,s.current.inputs)),a=o?s.current:{inputs:t,result:e()};return p.useEffect(function(){n.current=!1,s.current=a},[a]),a.result}function sJ(e,t){return MI(function(){return e},t)}var ke=MI,ye=sJ,oJ=!0,hm="Invariant failed";function iJ(e,t){if(!e){if(oJ)throw new Error(hm);var r=typeof t=="function"?t():t,n=r?"".concat(hm,": ").concat(r):hm;throw new Error(n)}}var Yr=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,a=n-o,l=s-r,c={top:r,right:n,bottom:s,left:o,width:a,height:l,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return c},I0=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},L1=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},aJ=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},pm={top:0,right:0,bottom:0,left:0},O0=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?pm:n,o=t.border,a=o===void 0?pm:o,l=t.padding,c=l===void 0?pm:l,u=Yr(I0(r,s)),f=Yr(L1(r,a)),d=Yr(L1(f,c));return{marginBox:u,borderBox:Yr(r),paddingBox:f,contentBox:d,margin:s,border:a,padding:c}},_r=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&iJ(!1),s},lJ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ef=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,a=t.padding,l=aJ(n,r);return O0({borderBox:l,border:s,margin:o,padding:a})},tf=function(t,r){return r===void 0&&(r=lJ()),ef(t,r)},FI=function(t,r){var n={top:_r(r.marginTop),right:_r(r.marginRight),bottom:_r(r.marginBottom),left:_r(r.marginLeft)},s={top:_r(r.paddingTop),right:_r(r.paddingRight),bottom:_r(r.paddingBottom),left:_r(r.paddingLeft)},o={top:_r(r.borderTopWidth),right:_r(r.borderRightWidth),bottom:_r(r.borderBottomWidth),left:_r(r.borderLeftWidth)};return O0({borderBox:t,margin:n,padding:s,border:o})},BI=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return FI(r,n)},M1=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function cJ(e,t){return!!(e===t||M1(e)&&M1(t))}function uJ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!cJ(e[r],t[r]))return!1;return!0}function yt(e,t){t===void 0&&(t=uJ);var r=null;function n(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var a=e.apply(this,s);return r={lastResult:a,lastArgs:s,lastThis:this},a}return n.clear=function(){r=null},n}var dJ=function(t){var r=[],n=null,s=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const nc=dJ;function zI(e,t){}zI.bind(null,"warn");zI.bind(null,"error");function Ss(){}function fJ(e,t){return{...e,...t}}function Tr(e,t,r){const n=t.map(s=>{const o=fJ(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const hJ="Invariant failed";class rf extends Error{}rf.prototype.toString=function(){return this.message};function re(e,t){if(!e)throw new rf(hJ)}let pJ=class extends J.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Ss,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof rf&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Tr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof rf){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const mJ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,nf=e=>e+1,gJ=e=>`
  You have lifted an item in position ${nf(e.source.index)}
`,UI=(e,t)=>{const r=e.droppableId===t.droppableId,n=nf(e.index),s=nf(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},VI=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,vJ=e=>{const t=e.destination;if(t)return UI(e.source,t);const r=e.combine;return r?VI(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},F1=e=>`
  The item has returned to its starting position
  of ${nf(e.index)}
`,xJ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${F1(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${UI(e.source,t)}
    `:r?`
      You have dropped the item.
      ${VI(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${F1(e.source)}
  `},yJ={dragHandleUsageInstructions:mJ,onDragStart:gJ,onDragUpdate:vJ,onDragEnd:xJ};var td=yJ;const bt={x:0,y:0},_t=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),lr=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Es=(e,t)=>e.x===t.x&&e.y===t.y,va=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),_o=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},sc=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),B1=(e,t)=>Math.min(...t.map(r=>sc(e,r))),qI=e=>t=>({x:e(t.x),y:e(t.y)});var bJ=(e,t)=>{const r=Yr({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Fc=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),z1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],wJ={top:0,right:0,bottom:0,left:0},jJ=(e,t)=>t?Fc(e,t.scroll.diff.displacement):e,_J=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,SJ=(e,t)=>t&&t.shouldClipSubject?bJ(t.pageMarginBox,e):Yr(e);var Xi=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=jJ(e.marginBox,n),o=_J(s,r,t),a=SJ(o,n);return{page:e,withPlaceholder:t,active:a}},D0=(e,t)=>{e.frame||re(!1);const r=e.frame,n=lr(t,r.scroll.initial),s=va(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},a=Xi({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:a}};const WI=yt(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),HI=yt(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Lh=yt(e=>Object.values(e)),EJ=yt(e=>Object.values(e));var xa=yt((e,t)=>EJ(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function $0(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Mh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Fh=yt((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),NJ=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!$0(s))return null;function a(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return{...s,at:g}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=Fh(t,n);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const f=u.findIndex(m=>m.descriptor.id===c);f===-1&&re(!1);const d=f-1;if(d<0)return null;const h=u[d];return a(h.descriptor.id)},ya=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const GI={point:bt,value:0},oc={invisible:{},visible:{},all:[]},CJ={displaced:oc,displacedBy:GI,at:null};var PJ=CJ,Ir=(e,t)=>r=>e<=r&&r<=t,KI=e=>{const t=Ir(e.top,e.bottom),r=Ir(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(o&&a)return!0;const c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return c&&u?!0:c&&a||u&&o}},TJ=e=>{const t=Ir(e.top,e.bottom),r=Ir(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const L0={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},YI={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var kJ=e=>t=>{const r=Ir(t.top,t.bottom),n=Ir(t.left,t.right);return s=>e===L0?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const AJ=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:bt;return Fc(e,r)},RJ=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,IJ=(e,t,r)=>r(t)(e),M0=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?AJ(e,t):e;return RJ(o,t,s)&&IJ(o,r,s)},OJ=e=>M0({...e,isVisibleThroughFrameFn:KI}),JI=e=>M0({...e,isVisibleThroughFrameFn:TJ}),DJ=e=>M0({...e,isVisibleThroughFrameFn:kJ(e.destination.axis)}),$J=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function LJ(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Yr(I0(r,n))}function ic({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(l,c){const u=LJ(c,r),f=c.descriptor.id;if(l.all.push(f),!OJ({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const h=$J(f,o,s),m={draggableId:f,shouldAnimate:h};return l.visible[f]=m,l},{all:[],visible:{},invisible:{}})}function MJ(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function U1({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=MJ(e,{inHomeList:t});return{displaced:oc,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function sf({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:a,forceShouldAnimate:l}){const c=ya(e,r);if(a==null)return U1({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const u=t.find(g=>g.descriptor.index===a);if(!u)return U1({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const f=Fh(e,t),d=t.indexOf(u),h=f.slice(d);return{displaced:ic({afterDragging:h,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Rs(e,t){return!!t.effected[e]}var FJ=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,l=r[o].descriptor.index;return Rs(o,s)?e?l:l-1:e?l+1:l},BJ=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<a||o>c?null:o},zJ=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||re(!1),u.type==="REORDER"){const d=BJ({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:o});return d==null?null:sf({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}const f=FJ({isMovingForward:e,destination:s,displaced:a.displaced,draggables:n,combine:u.combine,afterCritical:c});return f==null?null:sf({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:f})},UJ=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return Rs(r,t)?s?bt:va(n.point):s?n.point:bt},VJ=({afterCritical:e,impact:t,draggables:r})=>{const n=Mh(t);n||re(!1);const s=n.draggableId,o=r[s].page.borderBox.center,a=UJ({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return _t(o,a)};const XI=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,qJ=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,F0=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,V1=({axis:e,moveRelativeTo:t,isMoving:r})=>_o(e.line,t.marginBox[e.end]+XI(e,r),F0(e,t.marginBox,r)),q1=({axis:e,moveRelativeTo:t,isMoving:r})=>_o(e.line,t.marginBox[e.start]-qJ(e,r),F0(e,t.marginBox,r)),WJ=({axis:e,moveInto:t,isMoving:r})=>_o(e.line,t.contentBox[e.start]+XI(e,r),F0(e,t.contentBox,r));var HJ=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=xa(n.descriptor.id,r),a=t.page,l=n.axis;if(!o.length)return WJ({axis:l,moveInto:n.page,isMoving:a});const{displaced:c,displacedBy:u}=e,f=c.all[0];if(f){const h=r[f];if(Rs(f,s))return q1({axis:l,moveRelativeTo:h.page,isMoving:a});const m=ef(h.page,u.point);return q1({axis:l,moveRelativeTo:m,isMoving:a})}const d=o[o.length-1];if(d.descriptor.id===t.descriptor.id)return a.borderBox.center;if(Rs(d.descriptor.id,s)){const h=ef(d.page,va(s.displacedBy.point));return V1({axis:l,moveRelativeTo:h,isMoving:a})}return V1({axis:l,moveRelativeTo:d.page,isMoving:a})},Tv=(e,t)=>{const r=e.frame;return r?_t(t,r.scroll.diff.displacement):t};const GJ=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,a=e.at;return!r||!a?o:a.type==="REORDER"?HJ({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):VJ({impact:e,draggables:n,afterCritical:s})};var Bh=e=>{const t=GJ(e),r=e.droppable;return r?Tv(r,t):t},QI=(e,t)=>{const r=lr(t,e.scroll.initial),n=va(r);return{frame:Yr({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function W1(e,t){return e.map(r=>t[r])}function KJ(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var YJ=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=QI(t,_t(t.scroll.current,s)),a=r.frame?D0(r,_t(r.frame.scroll.current,s)):r,l=e.displaced,c=ic({afterDragging:W1(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=ic({afterDragging:W1(l.all,n),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),f={},d={},h=[l,c,u];return l.all.forEach(g=>{const v=KJ(g,h);if(v){d[g]=v;return}f[g]=!0}),{...e,displaced:{all:l.all,invisible:f,visible:d}}},JJ=(e,t)=>_t(e.scroll.diff.displacement,t),B0=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=JJ(r,e),s=lr(n,t.page.borderBox.center);return _t(t.client.borderBox.center,s)},ZI=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const a=lr(r,e.page.borderBox.center),c={target:Fc(e.page.borderBox,a),destination:t,withDroppableDisplacement:s,viewport:n};return o?DJ(c):JI(c)},XJ=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const u=xa(r.descriptor.id,n),f=ya(t,r),d=NJ({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||zJ({isMovingForward:e,isInHomeList:f,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!d)return null;const h=Bh({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:c});if(ZI({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:B0({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:d,scrollJumpRequest:null};const g=lr(h,a),v=YJ({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:l,impact:v,scrollJumpRequest:g}};const Ot=e=>{const t=e.subject.active;return t||re(!1),t};var QJ=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const a=r.axis,l=Ir(o[a.start],o[a.end]),c=Lh(n).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>KI(s.frame)(Ot(f))).filter(f=>{const d=Ot(f);return e?o[a.crossAxisEnd]<d[a.crossAxisEnd]:d[a.crossAxisStart]<o[a.crossAxisStart]}).filter(f=>{const d=Ot(f),h=Ir(d[a.start],d[a.end]);return l(d[a.start])||l(d[a.end])||h(o[a.start])||h(o[a.end])}).sort((f,d)=>{const h=Ot(f)[a.crossAxisStart],m=Ot(d)[a.crossAxisStart];return e?h-m:m-h}).filter((f,d,h)=>Ot(f)[a.crossAxisStart]===Ot(h[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(f=>Ir(Ot(f)[a.start],Ot(f)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((f,d)=>Ot(f)[a.start]-Ot(d)[a.start])[0]:c.sort((f,d)=>{const h=B1(t,z1(Ot(f))),m=B1(t,z1(Ot(d)));return h!==m?h-m:Ot(f)[a.start]-Ot(d)[a.start]})[0]};const H1=(e,t)=>{const r=e.page.borderBox.center;return Rs(e.descriptor.id,t)?lr(r,t.displacedBy.point):r},ZJ=(e,t)=>{const r=e.page.borderBox;return Rs(e.descriptor.id,t)?Fc(r,va(t.displacedBy.point)):r};var eX=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(a=>JI({target:ZJ(a,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=sc(e,Tv(r,H1(a,s))),u=sc(e,Tv(r,H1(l,s)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Bc=yt(function(t,r){const n=r[t.line];return{value:n,point:_o(t.line,n)}});const tX=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return _o(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],c=xa(e.descriptor.id,r).reduce((u,f)=>u+f.client.marginBox[n.size],0)+t[n.line]-s;return c<=0?null:_o(n.line,c)},eO=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),tO=(e,t,r)=>{const n=e.frame;ya(t,e)&&re(!1),e.subject.withPlaceholder&&re(!1);const s=Bc(e.axis,t.displaceBy).point,o=tX(e,s,r),a={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const f=Xi({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:f}}const l=o?_t(n.scroll.max,o):n.scroll.max,c=eO(n,l),u=Xi({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},rX=e=>{const t=e.subject.withPlaceholder;t||re(!1);const r=e.frame;if(!r){const a=Xi({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const n=t.oldFrameMaxScroll;n||re(!1);const s=eO(r,n),o=Xi({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var nX=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:a,afterCritical:l})=>{if(!t){if(r.length)return null;const d={displaced:oc,displacedBy:GI,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=Bh({impact:d,draggable:n,droppable:o,draggables:s,afterCritical:l}),m=ya(n,o)?o:tO(o,n,s);return ZI({draggable:n,destination:m,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],u=(()=>{const d=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?d:d+1})(),f=Bc(o.axis,n.displaceBy);return sf({draggable:n,insideDestination:r,destination:o,viewport:a,displacedBy:f,last:oc,index:u})},sX=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:a,afterCritical:l})=>{const c=QJ({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:a});if(!c)return null;const u=xa(c.descriptor.id,s),f=eX({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),d=nX({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:s,moveRelativeTo:f,insideDestination:u,viewport:a,afterCritical:l});if(!d)return null;const h=Bh({impact:d,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:B0({pageBorderBoxCenter:h,draggable:r,viewport:a}),impact:d,scrollJumpRequest:null}},dr=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const oX=(e,t)=>{const r=dr(e);return r?t[r]:null};var iX=({state:e,type:t})=>{const r=oX(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,a=o.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:d,droppables:h}=e.dimensions;return l?XJ({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,destination:o,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):sX({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,isOver:o,draggables:d,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function Js(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function rO(e){const t=Ir(e.top,e.bottom),r=Ir(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function aX(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function lX({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const a=o.axis,l=_o(o.axis.line,e.center[a.line],o.page.borderBox.center[a.crossAxisLine]);return{id:o.descriptor.id,distance:sc(n,l)}}).sort((o,a)=>a.distance-o.distance);return s[0]?s[0].id:null}function cX({pageBorderBox:e,draggable:t,droppables:r}){const n=Lh(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!aX(e,o))return!1;if(rO(o)(e.center))return!0;const a=s.axis,l=o.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],f=Ir(o[a.crossAxisStart],o[a.crossAxisEnd]),d=f(c),h=f(u);return!d&&!h?!0:d?c<l:u>l});return n.length?n.length===1?n[0].descriptor.id:lX({pageBorderBox:e,draggable:t,candidates:n}):null}const nO=(e,t)=>Yr(Fc(e,t));var uX=(e,t)=>{const r=e.frame;return r?nO(t,r.scroll.diff.value):t};function sO({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function dX({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var fX=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:a})=>{const l=r.axis,c=Bc(r.axis,t.displaceBy),u=c.value,f=e[l.start],d=e[l.end],m=Fh(t,n).find(v=>{const x=v.descriptor.id,y=v.page.borderBox.center[l.line],b=Rs(x,a),w=sO({displaced:s,id:x});return b?w?d<=y:f<y-u:w?d<=y+u:f<y})||null,g=dX({draggable:t,closest:m,inHomeList:ya(t,r)});return sf({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:c,index:g})};const hX=4;var pX=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const a=n.axis,l=Bc(n.axis,e.displaceBy),c=l.value,u=t[a.start],f=t[a.end],h=Fh(e,s).find(g=>{const v=g.descriptor.id,x=g.page.borderBox,b=x[a.size]/hX,w=Rs(v,o),j=sO({displaced:r.displaced,id:v});return w?j?f>x[a.start]+b&&f<x[a.end]-b:u>x[a.start]-c+b&&u<x[a.end]-c-b:j?f>x[a.start]+c+b&&f<x[a.end]+c-b:u>x[a.start]+b&&u<x[a.end]-b});return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},oO=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:a})=>{const l=nO(t.page.borderBox,e),c=cX({pageBorderBox:l,draggable:t,droppables:n});if(!c)return PJ;const u=n[c],f=xa(u.descriptor.id,r),d=uX(u,l);return pX({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:s,destination:u,insideDestination:f,afterCritical:a})||fX({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:u,insideDestination:f,last:s.displaced,viewport:o,afterCritical:a})},z0=(e,t)=>({...e,[t.descriptor.id]:t});const mX=({previousImpact:e,impact:t,droppables:r})=>{const n=dr(e),s=dr(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const a=rX(o);return z0(r,a)};var gX=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=mX({previousImpact:n,impact:s,droppables:r}),a=dr(s);if(!a)return o;const l=r[a];if(ya(e,l)||l.subject.withPlaceholder)return o;const c=tO(l,e,t);return z0(o,c)},yl=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const a=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,u=lr(c,e.initial.client.selection),f={offset:u,selection:c,borderBoxCenter:_t(e.initial.client.borderBoxCenter,u)},d={selection:_t(f.selection,a.scroll.current),borderBoxCenter:_t(f.borderBoxCenter,a.scroll.current),offset:_t(f.offset,a.scroll.diff.value)},h={client:f,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:h};const m=l.draggables[e.critical.draggable.id],g=s||oO({pageOffset:d.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),v=gX({draggable:m,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:h,dimensions:{draggables:l.draggables,droppables:v},impact:g,viewport:a,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function vX(e,t){return e.map(r=>t[r])}var iO=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,a=vX(o.all,r),l=ic({afterDragging:a,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:l}},aO=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const a=Bh({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return B0({pageBorderBoxCenter:a,draggable:t,viewport:s})},lO=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&re(!1);const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:a,droppables:l}=o,c=a[e.critical.draggable.id],u=dr(n);u||re(!1);const f=l[u],d=iO({impact:n,viewport:s,destination:f,draggables:a}),h=aO({impact:d,draggable:c,droppable:f,draggables:a,viewport:s,afterCritical:e.afterCritical});return yl({impact:d,clientSelection:h,state:e,dimensions:o,viewport:s})},xX=e=>({index:e.index,droppableId:e.droppableId}),cO=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=Bc(t.axis,e.displaceBy),o=xa(t.descriptor.id,r),a=o.indexOf(e);a===-1&&re(!1);const l=o.slice(a+1),c=l.reduce((h,m)=>(h[m.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:ic({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:xX(e.descriptor)}},afterCritical:u}},yX=(e,t)=>({draggables:e.draggables,droppables:z0(e.droppables,t)}),bX=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=ef(e.client,t),s=tf(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},wX=e=>{const t=e.frame;return t||re(!1),t},jX=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,a=t[o],c=wX(a).scroll.diff.value,u=_t(n,c);return bX({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},_X=({state:e,published:t})=>{const r=t.modified.map(y=>{const b=e.dimensions.droppables[y.droppableId];return D0(b,y.scroll)}),n={...e.dimensions.droppables,...WI(r)},s=HI(jX({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(y=>{delete o[y]});const a={droppables:n,draggables:o},l=dr(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],f=a.droppables[e.critical.droppable.id],{impact:d,afterCritical:h}=cO({draggable:u,home:f,draggables:o,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:d,g=oO({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:h}),v={...e,phase:"DRAGGING",impact:g,onLiftImpact:d,dimensions:a,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const kv=e=>e.movementMode==="SNAP",mm=(e,t,r)=>{const n=yX(e.dimensions,t);return!kv(e)||r?yl({state:e,dimensions:n}):lO({state:e,dimensions:n})};function gm(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const G1={phase:"IDLE",completed:null,shouldFlush:!1};var SX=(e=G1,t)=>{if(t.type==="FLUSH")return{...G1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&re(!1);const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:a}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:n,borderBoxCenter:l.client.borderBox.center,offset:bt},f={client:u,page:{selection:_t(u.selection,s.scroll.initial),borderBoxCenter:_t(u.selection,s.scroll.initial),offset:_t(u.selection,s.scroll.diff.value)}},d=Lh(o.droppables).every(v=>!v.isFixedOnPage),{impact:h,afterCritical:m}=cO({draggable:l,home:c,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:o,initial:f,current:f,isWindowScrollAllowed:d,impact:h,afterCritical:m,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&re(!1),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||re(!1),_X({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Js(e)||re(!1);const{client:r}=t.payload;return Es(r,e.current.client.selection)?e:yl({state:e,clientSelection:r,impact:kv(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return gm(e);Js(e)||re(!1);const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=D0(s,n);return mm(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Js(e)||re(!1);const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||re(!1),s.isEnabled===n&&re(!1);const o={...s,isEnabled:n};return mm(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Js(e)||re(!1);const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||re(!1),s.isCombineEnabled===n&&re(!1);const o={...s,isCombineEnabled:n};return mm(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Js(e)||re(!1),e.isWindowScrollAllowed||re(!1);const r=t.payload.newScroll;if(Es(e.viewport.scroll.current,r))return gm(e);const n=QI(e.viewport,r);return kv(e)?lO({state:e,viewport:n}):yl({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Js(e))return e;const r=t.payload.maxScroll;if(Es(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&re(!1);const r=iX({state:e,type:t.type});return r?yl({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&re(!1),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||re(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};const EX=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),NX=e=>({type:"LIFT",payload:e}),CX=e=>({type:"INITIAL_PUBLISH",payload:e}),PX=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),TX=()=>({type:"COLLECTION_STARTING",payload:null}),kX=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),AX=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),RX=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),uO=e=>({type:"MOVE",payload:e}),IX=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),OX=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),DX=()=>({type:"MOVE_UP",payload:null}),$X=()=>({type:"MOVE_DOWN",payload:null}),LX=()=>({type:"MOVE_RIGHT",payload:null}),MX=()=>({type:"MOVE_LEFT",payload:null}),U0=()=>({type:"FLUSH",payload:null}),FX=e=>({type:"DROP_ANIMATE",payload:e}),V0=e=>({type:"DROP_COMPLETE",payload:e}),dO=e=>({type:"DROP",payload:e}),BX=e=>({type:"DROP_PENDING",payload:e}),fO=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var zX=e=>({getState:t,dispatch:r})=>n=>s=>{if(s.type!=="LIFT"){n(s);return}const{id:o,clientSelection:a,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&r(V0({completed:c.completed})),t().phase!=="IDLE"&&re(!1),r(U0()),r(EX({draggableId:o,movementMode:l}));const f={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:d,dimensions:h,viewport:m}=e.startPublishing(f);r(CX({critical:d,dimensions:h,clientSelection:a,movementMode:l,viewport:m}))},UX=e=>()=>t=>r=>{r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)};const q0={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ac={opacity:{drop:0,combining:.7},scale:{drop:.75}},hO={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Vs=`${hO.outOfTheWay}s ${q0.outOfTheWay}`,bl={fluid:`opacity ${Vs}`,snap:`transform ${Vs}, opacity ${Vs}`,drop:e=>{const t=`${e}s ${q0.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Vs}`,placeholder:`height ${Vs}, width ${Vs}, margin ${Vs}`},K1=e=>Es(e,bt)?void 0:`translate(${e.x}px, ${e.y}px)`,Av={moveTo:K1,drop:(e,t)=>{const r=K1(e);if(r)return t?`${r} scale(${ac.scale.drop})`:r}},{minDropTime:Rv,maxDropTime:pO}=hO,VX=pO-Rv,Y1=1500,qX=.6;var WX=({current:e,destination:t,reason:r})=>{const n=sc(e,t);if(n<=0)return Rv;if(n>=Y1)return pO;const s=n/Y1,o=Rv+VX*s,a=r==="CANCEL"?o*qX:o;return Number(a.toFixed(2))},HX=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:a}=r,l=dr(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],f=aO({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:c||u,viewport:n});return lr(f,t.client.borderBox.center)},GX=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:iO({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:oc},didDropInsideDroppable:!0};const KX=({getState:e,dispatch:t})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t(BX({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&re(!1),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||re(!1);const l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:f,didDropInsideDroppable:d}=GX({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=d?$0(f):null,m=d?Mh(f):null,g={index:l.draggable.index,droppableId:l.droppable.id},v={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:s.movementMode,destination:h,combine:m},x=HX({impact:f,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:v,impact:f};if(!(!Es(s.current.client.offset,x)||!!v.combine)){t(V0({completed:y}));return}const w=WX({current:s.current.client.offset,destination:x,reason:o});t(FX({newHomeClientOffset:x,dropDuration:w,completed:y}))};var YX=KX,mO=()=>({x:window.pageXOffset,y:window.pageYOffset});function JX(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function XX({onWindowScroll:e}){function t(){e(mO())}const r=nc(t),n=JX(r);let s=Ss;function o(){return s!==Ss}function a(){o()&&re(!1),s=Tr(window,[n])}function l(){o()||re(!1),r.cancel(),s(),s=Ss}return{start:a,stop:l,isActive:o}}const QX=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",ZX=e=>{const t=XX({onWindowScroll:r=>{e.dispatch(IX({newScroll:r}))}});return r=>n=>{!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&QX(n)&&t.stop(),r(n)}};var eQ=ZX,tQ=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},rQ=()=>{const e=[],t=s=>{const o=e.findIndex(l=>l.timerId===s);o===-1&&re(!1);const[a]=e.splice(o,1);a.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),a={timerId:o,callback:s};e.push(a)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const nQ=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,sQ=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,oQ=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},Fa=(e,t)=>{t()},Iu=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function vm(e,t,r,n){if(!e){r(n(t));return}const s=tQ(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var iQ=(e,t)=>{const r=rQ();let n=null;const s=(d,h)=>{n&&re(!1),Fa("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:d,mode:h})})},o=(d,h)=>{n&&re(!1),Fa("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Iu(d,h))})},a=(d,h)=>{n&&re(!1);const m=Iu(d,h);n={mode:h,lastCritical:d,lastLocation:m.source,lastCombine:null},r.add(()=>{Fa("onDragStart",()=>vm(e().onDragStart,m,t,td.onDragStart))})},l=(d,h)=>{const m=$0(h),g=Mh(h);n||re(!1);const v=!oQ(d,n.lastCritical);v&&(n.lastCritical=d);const x=!nQ(n.lastLocation,m);x&&(n.lastLocation=m);const y=!sQ(n.lastCombine,g);if(y&&(n.lastCombine=g),!v&&!x&&!y)return;const b={...Iu(d,n.mode),combine:g,destination:m};r.add(()=>{Fa("onDragUpdate",()=>vm(e().onDragUpdate,b,t,td.onDragUpdate))})},c=()=>{n||re(!1),r.flush()},u=d=>{n||re(!1),n=null,Fa("onDragEnd",()=>vm(e().onDragEnd,d,t,td.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:a,update:l,flush:c,drop:u,abort:()=>{if(!n)return;const d={...Iu(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(d)}}},aQ=(e,t)=>{const r=iQ(e,t);return n=>s=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),s(o),r.start(l,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),o.type==="FLUSH"){r.abort();return}const a=n.getState();a.phase==="DRAGGING"&&r.update(a.critical,a.impact)}};const lQ=e=>t=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&re(!1),e.dispatch(V0({completed:n.completed}))};var cQ=lQ;const uQ=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),s(o),o.type!=="DROP_ANIMATE")return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(fO())}};r=requestAnimationFrame(()=>{r=null,t=Tr(window,[a])})}};var dQ=uQ,fQ=e=>()=>t=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)},hQ=e=>{let t=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const pQ=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var mQ=e=>t=>r=>n=>{if(pQ(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const s=t.getState();s.phase!=="DRAGGING"&&re(!1),e.start(s);return}r(n),e.scroll(t.getState())};const gQ=e=>t=>r=>{if(t(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(dO({reason:n.reason})))};var vQ=gQ;const xQ=wI;var yQ=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>bI(SX,xQ(XK(UX(r),fQ(e),zX(e),YX,cQ,dQ,vQ,mQ(o),eQ,hQ(t),aQ(n,s))));const xm=()=>({additions:{},removals:{},modified:{}});function bQ({registry:e,callbacks:t}){let r=xm(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:u,modified:f}=r,d=Object.keys(c).map(g=>e.draggable.getById(g).getDimension(bt)).sort((g,v)=>g.descriptor.index-v.descriptor.index),h=Object.keys(f).map(g=>{const x=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:x}}),m={additions:d,removals:Object.keys(u),modified:h};r=xm(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;r.additions[u]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:c=>{const u=c.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=xm())}}}var gO=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=lr({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},vO=()=>{const e=document.documentElement;return e||re(!1),e},xO=()=>{const e=vO();return gO({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},wQ=()=>{const e=mO(),t=xO(),r=e.y,n=e.x,s=vO(),o=s.clientWidth,a=s.clientHeight,l=n+o,c=r+a;return{frame:Yr({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:bt,displacement:bt}}}},jQ=({critical:e,scrollOptions:t,registry:r})=>{const n=wQ(),s=n.scroll.current,o=e.droppable,a=r.droppable.getAllByType(o.type).map(f=>f.callbacks.getDimensionAndWatchScroll(s,t)),l=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(s));return{dimensions:{draggables:HI(l),droppables:WI(a)},critical:e,viewport:n}};function J1(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var _Q=(e,t)=>{let r=null;const n=bQ({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,m)=>{e.droppable.exists(h)||re(!1),r&&t.updateDroppableIsEnabled({id:h,isEnabled:m})},o=(h,m)=>{r&&(e.droppable.exists(h)||re(!1),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:m}))},a=(h,m)=>{r&&(e.droppable.exists(h)||re(!1),t.updateDroppableScroll({id:h,newScroll:m}))},l=(h,m)=>{r&&e.droppable.getById(h).callbacks.scroll(m)},c=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(m=>m.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||re(!1);const m=r.critical.draggable;h.type==="ADDITION"&&J1(e,m,h.value)&&n.add(h.value),h.type==="REMOVAL"&&J1(e,m,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:a,startPublishing:h=>{r&&re(!1);const m=e.draggable.getById(h.draggableId),g=e.droppable.getById(m.descriptor.droppableId),v={draggable:m.descriptor,droppable:g.descriptor},x=e.subscribe(u);return r={critical:v,unsubscribe:x},jQ({critical:v,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:c}},yO=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",SQ=e=>{window.scrollBy(e.x,e.y)};const EQ=yt(e=>Lh(e).filter(t=>!(!t.isEnabled||!t.frame))),NQ=(e,t)=>EQ(t).find(n=>(n.frame||re(!1),rO(n.frame.pageMarginBox)(e)))||null;var CQ=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return NQ(e,r)};const lc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var PQ=(e,t,r=()=>lc)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},bO=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},W0=1,TQ=(e,t,r=()=>lc)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return W0;const o=1-bO({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=n.maxPixelScroll*n.ease(o);return Math.ceil(a)},kQ=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,a=t,l=o,u=Date.now()-a;if(u>=o)return e;if(u<s)return W0;const f=bO({startOfRange:s,endOfRange:l,current:u}),d=e*n.ease(f);return Math.ceil(d)},X1=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=TQ(e,t,s);return o===0?0:n?Math.max(kQ(o,r,s),W0):o},Q1=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=PQ(e,n,o);return t[n.end]<t[n.start]?X1({distanceToEdge:t[n.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*X1({distanceToEdge:t[n.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},AQ=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const RQ=qI(e=>e===0?0:e);var wO=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Q1({container:t,distanceToEdges:a,dragStartTime:e,axis:L0,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),c=Q1({container:t,distanceToEdges:a,dragStartTime:e,axis:YI,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),u=RQ({x:c,y:l});if(Es(u,bt))return null;const f=AQ({container:t,subject:r,proposedScroll:u});return f?Es(f,bt)?null:f:null};const IQ=qI(e=>e===0?0:e>0?1:-1),H0=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=_t(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return Es(o,bt)?null:o}})(),jO=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=IQ(r),o=H0({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},G0=(e,t)=>jO({current:e.scroll.current,max:e.scroll.max,change:t}),OQ=(e,t)=>{if(!G0(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return H0({current:n,max:r,change:t})},K0=(e,t)=>{const r=e.frame;return r?jO({current:r.scroll.current,max:r.scroll.max,change:t}):!1},DQ=(e,t)=>{const r=e.frame;return!r||!K0(e,t)?null:H0({current:r.scroll.current,max:r.scroll.max,change:t})};var $Q=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=wO({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return a&&G0(e,a)?a:null},LQ=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=e.frame;if(!a)return null;const l=wO({dragStartTime:n,container:a.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&K0(e,l)?l:null},Z1=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,h=$Q({dragStartTime:t,viewport:d,subject:c,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const u=CQ({center:a,destination:dr(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=LQ({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:o});f&&s(u.descriptor.id,f)},MQ=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>lc})=>{const n=nc(e),s=nc(t);let o=null;const a=u=>{o||re(!1);const{shouldUseTimeDampening:f,dragStartTime:d}=o;Z1({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:u=>{o&&re(!1);const f=Date.now();let d=!1;const h=()=>{d=!0};Z1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:f,shouldUseTimeDampening:d},d&&a(u)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:a}},FQ=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const u=_t(l.current.client.selection,c);e({client:u})},s=(l,c)=>{if(!K0(l,c))return c;const u=DQ(l,c);if(!u)return t(l.descriptor.id,c),null;const f=lr(c,u);return t(l.descriptor.id,f),lr(c,f)},o=(l,c,u)=>{if(!l||!G0(c,u))return u;const f=OQ(c,u);if(!f)return r(u),null;const d=lr(u,f);return r(d),lr(u,d)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=dr(l.impact);u||re(!1);const f=s(l.dimensions.droppables[u],c);if(!f)return;const d=l.viewport,h=o(l.isWindowScrollAllowed,d,f);h&&n(l,h)}},BQ=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=MQ({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=FQ({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:s.start,stop:s.stop}};const Qi="data-rfd",Zi=(()=>{const e=`${Qi}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Iv=(()=>{const e=`${Qi}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),zQ=(()=>{const e=`${Qi}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),eS={contextId:`${Qi}-scroll-container-context-id`},UQ=e=>t=>`[${t}="${e}"]`,Ba=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),VQ="pointer-events: none;";var qQ=e=>{const t=UQ(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Zi.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:VQ,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${bl.outOfTheWay};
    `;return{selector:t(Iv.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(zQ.contextId),styles:{always:"overflow-anchor: none;"}},a=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ba(a,"always"),resting:Ba(a,"resting"),dragging:Ba(a,"dragging"),dropAnimating:Ba(a,"dropAnimating"),userCancel:Ba(a,"userCancel")}};const WQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?p.useLayoutEffect:p.useEffect;var fr=WQ;const ym=()=>{const e=document.querySelector("head");return e||re(!1),e},tS=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function HQ(e,t){const r=ke(()=>qQ(e),[e]),n=p.useRef(null),s=p.useRef(null),o=ye(yt(d=>{const h=s.current;h||re(!1),h.textContent=d}),[]),a=ye(d=>{const h=n.current;h||re(!1),h.textContent=d},[]);fr(()=>{!n.current&&!s.current||re(!1);const d=tS(t),h=tS(t);return n.current=d,s.current=h,d.setAttribute(`${Qi}-always`,e),h.setAttribute(`${Qi}-dynamic`,e),ym().appendChild(d),ym().appendChild(h),a(r.always),o(r.resting),()=>{const m=g=>{const v=g.current;v||re(!1),ym().removeChild(v),g.current=null};m(n),m(s)}},[t,a,o,r.always,r.resting,e]);const l=ye(()=>o(r.dragging),[o,r.dragging]),c=ye(d=>{if(d==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),u=ye(()=>{s.current&&o(r.resting)},[o,r.resting]);return ke(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function _O(e,t){return Array.from(e.querySelectorAll(t))}var SO=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function zh(e){return e instanceof SO(e).HTMLElement}function GQ(e,t){const r=`[${Zi.contextId}="${e}"]`,n=_O(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute(Zi.draggableId)===t);return!s||!zh(s)?null:s}function KQ(e){const t=p.useRef({}),r=p.useRef(null),n=p.useRef(null),s=p.useRef(!1),o=ye(function(h,m){const g={id:h,focus:m};return t.current[h]=g,function(){const x=t.current;x[h]!==g&&delete x[h]}},[]),a=ye(function(h){const m=GQ(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=ye(function(h,m){r.current===h&&(r.current=m)},[]),c=ye(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&a(h)}))},[a]),u=ye(function(h){r.current=null;const m=document.activeElement;m&&m.getAttribute(Zi.draggableId)===h&&(r.current=h)},[]);return fr(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),ke(()=>({register:o,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,u,c,l])}function YQ(){const e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){const m=t.indexOf(d);m!==-1&&t.splice(m,1)}}function n(d){t.length&&t.forEach(h=>h(d))}function s(d){return e.draggables[d]||null}function o(d){const h=s(d);return h||re(!1),h}const a={register:d=>{e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,h)=>{const m=e.draggables[h.descriptor.id];m&&m.uniqueId===d.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,m=s(h);m&&d.uniqueId===m.uniqueId&&(delete e.draggables[h],e.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:o,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(e.draggables).filter(h=>h.descriptor.type===d)};function l(d){return e.droppables[d]||null}function c(d){const h=l(d);return h||re(!1),h}const u={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const h=l(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:l,exists:d=>!!l(d),getAllByType:d=>Object.values(e.droppables).filter(h=>h.descriptor.type===d)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:r,clean:f}}function JQ(){const e=ke(YQ,[]);return p.useEffect(()=>function(){J.version.startsWith("16")||J.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var Y0=J.createContext(null),of=()=>{const e=document.body;return e||re(!1),e};const XQ={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var QQ=XQ;const ZQ=e=>`rfd-announcement-${e}`;function eZ(e){const t=ke(()=>ZQ(e),[e]),r=p.useRef(null);return p.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),je(o.style,QQ),of().appendChild(o),function(){setTimeout(function(){const c=of();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),ye(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}let tZ=0;const EO={separator:"::"};function rZ(e,t=EO){return ke(()=>`${e}${t.separator}${tZ++}`,[t.separator,e])}function nZ(e,t=EO){const r=J.useId();return ke(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var J0="useId"in J?nZ:rZ;function sZ({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function oZ({contextId:e,text:t}){const r=J0("hidden-text",{separator:"-"}),n=ke(()=>sZ({contextId:e,uniqueId:r}),[r,e]);return p.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",of().appendChild(o),function(){const l=of();l.contains(o)&&l.removeChild(o)}},[n,t]),n}var Uh=J.createContext(null);function NO(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),t}function iZ(){let e=null;function t(){return!!e}function r(a){return a===e}function n(a){e&&re(!1);const l={abandon:a};return e=l,l}function s(){e||re(!1),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function cc(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const aZ=9,lZ=13,X0=27,CO=32,cZ=33,uZ=34,dZ=35,fZ=36,hZ=37,pZ=38,mZ=39,gZ=40,vZ={[lZ]:!0,[aZ]:!0};var PO=e=>{vZ[e.keyCode]&&e.preventDefault()};const xZ=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})();var Vh=xZ;const TO=0,rS=5;function yZ(e,t){return Math.abs(t.x-e.x)>=rS||Math.abs(t.y-e.y)>=rS}const nS={type:"IDLE"};function bZ({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:a,clientY:l}=s;if(o!==TO)return;const c={x:a,y:l},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&re(!1);const f=u.point;if(!yZ(f,c))return;s.preventDefault();const d=u.actions.fluidLift(c);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===X0){s.preventDefault(),e();return}PO(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&re(!1),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Vh,fn:e}]}function wZ(e){const t=p.useRef(nS),r=p.useRef(Ss),n=ke(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==TO||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=e.findClosestDraggableId(d);if(!h)return;const m=e.tryGetLock(h,a,{sourceEvent:d});if(!m)return;d.preventDefault();const g={x:d.clientX,y:d.clientY};r.current(),u(m,g)}}),[e]),s=ke(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const d=e.findClosestDraggableId(f);if(!d)return;const h=e.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||e.canGetLock(d)&&f.preventDefault())}}),[e]),o=ye(function(){const d={passive:!1,capture:!0};r.current=Tr(window,[s,n],d)},[s,n]),a=ye(()=>{t.current.type!=="IDLE"&&(t.current=nS,r.current(),o())},[o]),l=ye(()=>{const f=t.current;a(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[a]),c=ye(function(){const d={capture:!0,passive:!1},h=bZ({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});r.current=Tr(window,h,d)},[l,a]),u=ye(function(d,h){t.current.type!=="IDLE"&&re(!1),t.current={type:"PENDING",point:h,actions:d},c()},[c]);fr(function(){return o(),function(){r.current()}},[o])}function jZ(){}const _Z={[uZ]:!0,[cZ]:!0,[fZ]:!0,[dZ]:!0};function SZ(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===X0){s.preventDefault(),r();return}if(s.keyCode===CO){s.preventDefault(),n();return}if(s.keyCode===gZ){s.preventDefault(),e.moveDown();return}if(s.keyCode===pZ){s.preventDefault(),e.moveUp();return}if(s.keyCode===mZ){s.preventDefault(),e.moveRight();return}if(s.keyCode===hZ){s.preventDefault(),e.moveLeft();return}if(_Z[s.keyCode]){s.preventDefault();return}PO(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Vh,fn:r}]}function EZ(e){const t=p.useRef(jZ),r=ke(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==CO)return;const a=e.findClosestDraggableId(o);if(!a)return;const l=e.tryGetLock(a,f,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const u=l.snapLift();t.current();function f(){c||re(!1),c=!1,t.current(),n()}t.current=Tr(window,SZ(u,f),{capture:!0,passive:!1})}}),[e]),n=ye(function(){const o={passive:!1,capture:!0};t.current=Tr(window,[r],o)},[r]);fr(function(){return n(),function(){t.current()}},[n])}const bm={type:"IDLE"},NZ=120,CZ=.15;function PZ({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===X0&&r.preventDefault(),e()}},{eventName:Vh,fn:e}]}function TZ({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:a}=n.touches[0],l={x:o,y:a};n.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&re(!1);const o=n.touches[0];if(!o||!(o.force>=CZ))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:Vh,fn:e}]}function kZ(e){const t=p.useRef(bm),r=p.useRef(Ss),n=ye(function(){return t.current},[]),s=ye(function(m){t.current=m},[]),o=ke(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const v=e.tryGetLock(g,l,{sourceEvent:m});if(!v)return;const x=m.touches[0],{clientX:y,clientY:b}=x,w={x:y,y:b};r.current(),d(v,w)}}),[e]),a=ye(function(){const m={capture:!0,passive:!1};r.current=Tr(window,[o],m)},[o]),l=ye(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(bm),r.current(),a())},[a,s]),c=ye(()=>{const h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=ye(function(){const m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},v=Tr(window,TZ(g),m),x=Tr(window,PZ(g),m);r.current=function(){v(),x()}},[c,n,l]),f=ye(function(){const m=n();m.type!=="PENDING"&&re(!1);const g=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),d=ye(function(m,g){n().type!=="IDLE"&&re(!1);const v=setTimeout(f,NZ);s({type:"PENDING",point:g,actions:m,longPressTimerId:v}),u()},[u,n,s,f]);fr(function(){return a(),function(){r.current();const g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(bm))}},[n,a,s]),fr(function(){return Tr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const AZ=["input","button","textarea","select","option","optgroup","video","audio"];function kO(e,t){if(t==null)return!1;if(AZ.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:kO(e,t.parentElement)}function RZ(e,t){const r=t.target;return zh(r)?kO(e,r):!1}var IZ=e=>Yr(e.getBoundingClientRect()).center;function OZ(e){return e instanceof SO(e).Element}const DZ=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function AO(e,t){return e==null?null:e[DZ](t)?e:AO(e.parentElement,t)}function $Z(e,t){return e.closest?e.closest(t):AO(e,t)}function LZ(e){return`[${Zi.contextId}="${e}"]`}function MZ(e,t){const r=t.target;if(!OZ(r))return null;const n=LZ(e),s=$Z(r,n);return!s||!zh(s)?null:s}function FZ(e,t){const r=MZ(e,t);return r?r.getAttribute(Zi.draggableId):null}function BZ(e,t){const r=`[${Iv.contextId}="${e}"]`,s=_O(document,r).find(o=>o.getAttribute(Iv.id)===t);return!s||!zh(s)?null:s}function zZ(e){e.preventDefault()}function Ou({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function RO({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!yO(t.getState(),n))}function UZ({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:a}){if(!RO({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const c=n.draggable.getById(s),u=BZ(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&RZ(u,a))return null;const f=e.claim(o||Ss);let d="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function m(){return e.isActive(f)}function g(_,S){Ou({expected:_,phase:d,isLockActive:m,shouldWarn:!0})&&r.dispatch(S())}const v=g.bind(null,"DRAGGING");function x(_){function S(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(S(),re(!1)),r.dispatch(NX(_.liftActionArgs)),d="DRAGGING";function E(N,P={shouldBlockNextClick:!1}){if(_.cleanup(),P.shouldBlockNextClick){const C=Tr(window,[{eventName:"click",fn:zZ,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(C)}S(),r.dispatch(dO({reason:N}))}return{isActive:()=>Ou({expected:"DRAGGING",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:h,drop:N=>E("DROP",N),cancel:N=>E("CANCEL",N),..._.actions}}function y(_){const S=nc(N=>{v(()=>uO({client:N}))});return{...x({liftActionArgs:{id:s,clientSelection:_,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function b(){const _={moveUp:()=>v(DX),moveRight:()=>v(LX),moveDown:()=>v($X),moveLeft:()=>v(MX)};return x({liftActionArgs:{id:s,clientSelection:IZ(u),movementMode:"SNAP"},cleanup:Ss,actions:_})}function w(){Ou({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Ou({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:y,snapLift:b,abort:w}}const VZ=[wZ,EZ,kZ];function qZ({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?VZ:[],...n||[]],a=p.useState(()=>iZ())[0],l=ye(function(x,y){cc(x)&&!cc(y)&&a.tryAbandon()},[a]);fr(function(){let x=t.getState();return t.subscribe(()=>{const b=t.getState();l(x,b),x=b})},[a,t,l]),fr(()=>a.tryAbandon,[a.tryAbandon]);const c=ye(v=>RO({lockAPI:a,registry:r,store:t,draggableId:v}),[a,r,t]),u=ye((v,x,y)=>UZ({lockAPI:a,registry:r,contextId:e,store:t,draggableId:v,forceSensorStop:x||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,a,r,t]),f=ye(v=>FZ(e,v),[e]),d=ye(v=>{const x=r.draggable.findById(v);return x?x.options:null},[r.draggable]),h=ye(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(U0()))},[a,t]),m=ye(()=>a.isClaimed(),[a]),g=ke(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:m}),[c,u,f,d,h,m]);for(let v=0;v<o.length;v++)o[v](g)}const WZ=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};J.version.startsWith("16")||J.version.startsWith("17")?r():xr.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),HZ=e=>({...lc,...e.autoScrollerOptions,durationDampening:{...lc.durationDampening,...e.autoScrollerOptions}});function za(e){return e.current||re(!1),e.current}function GZ(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,a=p.useRef(null),l=NO(e),c=ye(()=>WZ(l.current),[l]),u=ye(()=>HZ(l.current),[l]),f=eZ(t),d=oZ({contextId:t,text:o}),h=HQ(t,s),m=ye(C=>{za(a).dispatch(C)},[]),g=ke(()=>C1({publishWhileDragging:PX,updateDroppableScroll:kX,updateDroppableIsEnabled:AX,updateDroppableIsCombineEnabled:RX,collectionStarting:TX},m),[m]),v=JQ(),x=ke(()=>_Q(v,g),[v,g]),y=ke(()=>BQ({scrollWindow:SQ,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:u,...C1({move:uO},m)}),[x.scrollDroppable,m,u]),b=KQ(t),w=ke(()=>yQ({announce:f,autoScroller:y,dimensionMarshal:x,focusMarshal:b,getResponders:c,styleMarshal:h}),[f,y,x,b,c,h]);a.current=w;const j=ye(()=>{const C=za(a);C.getState().phase!=="IDLE"&&C.dispatch(U0())},[]),_=ye(()=>{const C=za(a).getState();return C.phase==="DROP_ANIMATING"?!0:C.phase==="IDLE"?!1:C.isDragging},[]),S=ke(()=>({isDragging:_,tryAbort:j}),[_,j]);r(S);const E=ye(C=>yO(za(a).getState(),C),[]),N=ye(()=>Js(za(a).getState()),[]),P=ke(()=>({marshal:x,focus:b,contextId:t,canLift:E,isMovementAllowed:N,dragHandleUsageInstructionsId:d,registry:v}),[t,x,d,b,E,N,v]);return qZ({contextId:t,store:w,registry:v,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),p.useEffect(()=>j,[j]),J.createElement(Uh.Provider,{value:P},J.createElement(rJ,{context:Y0,store:w},e.children))}let KZ=0;function YZ(){return ke(()=>`${KZ++}`,[])}function JZ(){return J.useId()}var XZ="useId"in J?JZ:YZ;function QZ(e){const t=XZ(),r=e.dragHandleUsageInstructions||td.dragHandleUsageInstructions;return J.createElement(pJ,null,n=>J.createElement(GZ,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const sS={dragging:5e3,dropAnimating:4500},ZZ=(e,t)=>t?bl.drop(t.duration):e?bl.snap:bl.fluid,eee=(e,t)=>{if(e)return t?ac.opacity.drop:ac.opacity.combining},tee=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function ree(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,a=!!s,l=tee(e),c=!!o,u=c?Av.drop(n,a):Av.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:ZZ(l,o),transform:u,opacity:eee(a,c),zIndex:c?sS.dropAnimating:sS.dragging,pointerEvents:"none"}}function nee(e){return{transform:Av.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function see(e){return e.type==="DRAGGING"?ree(e):nee(e)}function oee(e,t,r=bt){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=FI(s,n),a=tf(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:a}}function iee(e){const t=J0("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}=e,c=ke(()=>({canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}),[o,l,a]),u=ye(m=>{const g=s();return g||re(!1),oee(r,g,m)},[r,s]),f=ke(()=>({uniqueId:t,descriptor:r,options:c,getDimension:u}),[r,u,c,t]),d=p.useRef(f),h=p.useRef(!0);fr(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),fr(()=>{if(h.current){h.current=!1;return}const m=d.current;d.current=f,n.draggable.update(f,m)},[f,n.draggable])}var Q0=J.createContext(null);function af(e){const t=p.useContext(e);return t||re(!1),t}function aee(e){e.preventDefault()}const lee=e=>{const t=p.useRef(null),r=ye((S=null)=>{t.current=S},[]),n=ye(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:a}=af(Uh),{type:l,droppableId:c}=af(Q0),u=ke(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:f,draggableId:d,isEnabled:h,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:v,mapped:x,dropAnimationFinished:y}=e;if(!v){const S=ke(()=>({descriptor:u,registry:a,getDraggableRef:n,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:h}),[u,a,n,g,m,h]);iee(S)}const b=ke(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:aee}:null,[s,o,d,h]),w=ye(S=>{x.type==="DRAGGING"&&x.dropping&&S.propertyName==="transform"&&(J.version.startsWith("16")||J.version.startsWith("17")?y():xr.flushSync(y))},[y,x]),j=ke(()=>{const S=see(x),E=x.type==="DRAGGING"&&x.dropping?w:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:S,onTransitionEnd:E},dragHandleProps:b}},[s,b,d,x,w,r]),_=ke(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return J.createElement(J.Fragment,null,f(j,x.snapshot,_))};var cee=lee,IO=(e,t)=>e===t,OO=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const uee=e=>e.combine?e.combine.draggableId:null,dee=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function fee(){const e=yt((s,o)=>({x:s,y:o})),t=yt((s,o,a=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:a,combineWith:l,combineTargetFor:null})),r=yt((s,o,a,l,c=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:o,offset:s,dimension:a,forceShouldAnimate:f,snapshot:t(o,l,c,u,null)}}));return(s,o)=>{if(cc(s)){if(s.critical.draggable.id!==o.draggableId)return null;const a=s.current.client.offset,l=s.dimensions.draggables[o.draggableId],c=dr(s.impact),u=dee(s.impact),f=s.forceShouldAnimate;return r(e(a.x,a.y),s.movementMode,l,o.isClone,c,u,f)}if(s.phase==="DROP_ANIMATING"){const a=s.completed;if(a.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=s.dimensions.draggables[o.draggableId],u=a.result,f=u.mode,d=OO(u),h=uee(u),g={duration:s.dropDuration,curve:q0.drop,moveTo:s.newHomeClientOffset,opacity:h?ac.opacity.drop:null,scale:h?ac.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:g,draggingOver:d,combineWith:h,mode:f,forceShouldAnimate:null,snapshot:t(f,l,d,h,g)}}}return null}}function DO(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const hee={mapped:{type:"SECONDARY",offset:bt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:DO(null)}};function pee(){const e=yt((a,l)=>({x:a,y:l})),t=yt(DO),r=yt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=a=>a?r(bt,a,!0):null,s=(a,l,c,u)=>{const f=c.displaced.visible[a],d=!!(u.inVirtualList&&u.effected[a]),h=Mh(c),m=h&&h.draggableId===a?l:null;if(!f){if(!d)return n(m);if(c.displaced.invisible[a])return null;const x=va(u.displacedBy.point),y=e(x.x,x.y);return r(y,m,!0)}if(d)return n(m);const g=c.displacedBy.point,v=e(g.x,g.y);return r(v,m,f.shouldAnimate)};return(a,l)=>{if(cc(a))return a.critical.draggable.id===l.draggableId?null:s(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const mee=()=>{const e=fee(),t=pee();return(n,s)=>e(n,s)||t(n,s)||hee},gee={dropAnimationFinished:fO},vee=LI(mee,gee,null,{context:Y0,areStatePropsEqual:IO})(cee);var xee=vee;function $O(e){return af(Q0).isUsingCloneFor===e.draggableId&&!e.isClone?null:J.createElement(xee,e)}function yee(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return J.createElement($O,je({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const LO=e=>t=>e===t,bee=LO("scroll"),wee=LO("auto"),oS=(e,t)=>t(e.overflowX)||t(e.overflowY),jee=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return oS(r,bee)||oS(r,wee)},_ee=()=>!1,MO=e=>e==null?null:e===document.body?_ee()?e:null:e===document.documentElement?null:jee(e)?e:MO(e.parentElement);var Ov=e=>({x:e.scrollLeft,y:e.scrollTop});const FO=e=>e?window.getComputedStyle(e).position==="fixed"?!0:FO(e.parentElement):!1;var See=e=>{const t=MO(e),r=FO(e);return{closestScrollable:t,isFixedOnPage:r}},Eee=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:h,client:m}=l,g=gO({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:bt,displacement:bt}}}})(),u=s==="vertical"?L0:YI,f=Xi({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:o,page:a,frame:c,subject:f}};const Nee=(e,t)=>{const r=BI(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,a=s+t.scrollWidth,c=I0({top:n,right:a,bottom:o,left:s},r.border);return O0({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var Cee=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:a,shouldClipSubject:l})=>{const c=r.closestScrollable,u=Nee(e,c),f=tf(u,n),d=(()=>{if(!c)return null;const m=BI(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:tf(m,n),scroll:Ov(c),scrollSize:g,shouldClipSubject:l}})();return Eee({descriptor:t,isEnabled:!o,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:f,closest:d})};const Pee={passive:!1},Tee={passive:!0};var iS=e=>e.shouldPublishImmediately?Pee:Tee;const Du=e=>e&&e.env.closestScrollable||null;function kee(e){const t=p.useRef(null),r=af(Uh),n=J0("droppable"),{registry:s,marshal:o}=r,a=NO(e),l=ke(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=p.useRef(l),u=ke(()=>yt((j,_)=>{t.current||re(!1);const S={x:j,y:_};o.updateDroppableScroll(l.id,S)}),[l.id,o]),f=ye(()=>{const j=t.current;return!j||!j.env.closestScrollable?bt:Ov(j.env.closestScrollable)},[]),d=ye(()=>{const j=f();u(j.x,j.y)},[f,u]),h=ke(()=>nc(d),[d]),m=ye(()=>{const j=t.current,_=Du(j);if(j&&_||re(!1),j.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),g=ye((j,_)=>{t.current&&re(!1);const S=a.current,E=S.getDroppableRef();E||re(!1);const N=See(E),P={ref:E,descriptor:l,env:N,scrollOptions:_};t.current=P;const C=Cee({ref:E,descriptor:l,env:N,windowScroll:j,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),I=N.closestScrollable;return I&&(I.setAttribute(eS.contextId,r.contextId),I.addEventListener("scroll",m,iS(P.scrollOptions))),C},[r.contextId,l,m,a]),v=ye(()=>{const j=t.current,_=Du(j);return j&&_||re(!1),Ov(_)},[]),x=ye(()=>{const j=t.current;j||re(!1);const _=Du(j);t.current=null,_&&(h.cancel(),_.removeAttribute(eS.contextId),_.removeEventListener("scroll",m,iS(j.scrollOptions)))},[m,h]),y=ye(j=>{const _=t.current;_||re(!1);const S=Du(_);S||re(!1),S.scrollTop+=j.y,S.scrollLeft+=j.x},[]),b=ke(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:x,scroll:y}),[x,g,v,y]),w=ke(()=>({uniqueId:n,descriptor:l,callbacks:b}),[b,l,n]);fr(()=>(c.current=w.descriptor,s.droppable.register(w),()=>{t.current&&x(),s.droppable.unregister(w)}),[b,l,x,w,o,s.droppable]),fr(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),fr(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function wm(){}const aS={width:0,height:0,margin:wJ},Aee=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?aS:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Ree=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=Aee({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?bl.placeholder:null}},Iee=e=>{const t=p.useRef(null),r=ye(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:a}=e,[l,c]=p.useState(e.animate==="open");p.useEffect(()=>l?n!=="open"?(r(),c(!1),wm):t.current?wm:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):wm,[n,l,r]);const u=ye(d=>{d.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),f=Ree({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return J.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var Oee=J.memo(Iee);class Dee extends J.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const $ee=e=>{const t=p.useContext(Uh);t||re(!1);const{contextId:r,isMovementAllowed:n}=t,s=p.useRef(null),o=p.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:f,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:m,snapshot:g,useClone:v,updateViewportMaxScroll:x,getContainerForClone:y}=e,b=ye(()=>s.current,[]),w=ye((I=null)=>{s.current=I},[]);ye(()=>o.current,[]);const j=ye((I=null)=>{o.current=I},[]),_=ye(()=>{n()&&x({maxScroll:xO()})},[n,x]);kee({droppableId:l,type:c,mode:u,direction:f,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:d,getDroppableRef:b});const S=ke(()=>J.createElement(Dee,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:I,data:O,animate:$})=>J.createElement(Oee,{placeholder:O,onClose:I,innerRef:j,animate:$,contextId:r,onTransitionEnd:_})),[r,_,e.placeholder,e.shouldAnimatePlaceholder,j]),E=ke(()=>({innerRef:w,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,S,w]),N=v?v.dragging.draggableId:null,P=ke(()=>({droppableId:l,type:c,isUsingCloneFor:N}),[l,N,c]);function C(){if(!v)return null;const{dragging:I,render:O}=v,$=J.createElement($O,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(L,V)=>O(L,V,I));return Sf.createPortal($,y())}return J.createElement(Q0.Provider,{value:P},a(E,g),C())};var Lee=$ee;function Mee(){return document.body||re(!1),document.body}const lS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Mee},BO=e=>{let t={...e},r;for(r in lS)e[r]===void 0&&(t={...t,[r]:lS[r]});return t},jm=(e,t)=>e===t.droppable.type,cS=(e,t)=>t.draggables[e.draggable.id],Fee=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=yt(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=yt((o,a,l,c,u,f)=>{const d=u.descriptor.id;if(u.descriptor.droppableId===o){const g=f?{render:f,dragging:r(u.descriptor)}:null,v={isDraggingOver:l,draggingOverWith:l?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:g}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(o,a)=>{const l=BO(a),c=l.droppableId,u=l.type,f=!l.isDropDisabled,d=l.renderClone;if(cc(o)){const h=o.critical;if(!jm(u,h))return t;const m=cS(h,o.dimensions),g=dr(o.impact)===c;return n(c,f,g,g,m,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!jm(u,h.critical))return t;const m=cS(h.critical,o.dimensions);return n(c,f,OO(h.result)===c,dr(h.impact)===c,m,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!jm(u,h.critical))return t;const m=dr(h.impact)===c,g=!!(h.impact.at&&h.impact.at.type==="COMBINE"),v=h.critical.droppable.id===c;return m?g?e:t:v?e:t}return t}},Bee={updateViewportMaxScroll:OX},zee=LI(Fee,Bee,(e,t,r)=>({...BO(r),...e,...t}),{context:Y0,areStatePropsEqual:IO})(Lee);var Uee=zee;const Vee=["","","","","","","","","","","","","","","","","","","","","","",""],_m=({value:e,onChange:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(me,{value:e,onChange:r=>t(r.target.value),className:"w-16 text-center text-xl"}),i.jsxs(xI,{children:[i.jsx(yI,{asChild:!0,children:i.jsx(H,{type:"button",variant:"outline",size:"sm",className:"h-10 w-10 p-0",title:"Choisir un emoji",children:i.jsx(Ui,{className:"h-4 w-4"})})}),i.jsx(S0,{className:"w-72 p-3",align:"start",children:i.jsx("div",{className:"flex flex-wrap gap-1 max-h-96 overflow-y-auto",children:Vee.map(r=>i.jsx("button",{type:"button",onClick:()=>t(r),className:"w-10 h-10 flex items-center justify-center text-xl hover:bg-gray-100 rounded-md transition-colors",children:r},r))})})]})]}),qee=[{value:"bg-blue-100 text-blue-800",label:"Bleu",preview:"bg-blue-100"},{value:"bg-green-100 text-green-800",label:"Vert",preview:"bg-green-100"},{value:"bg-yellow-100 text-yellow-800",label:"Jaune",preview:"bg-yellow-100"},{value:"bg-red-100 text-red-800",label:"Rouge",preview:"bg-red-100"},{value:"bg-purple-100 text-purple-800",label:"Violet",preview:"bg-purple-100"},{value:"bg-pink-100 text-pink-800",label:"Rose",preview:"bg-pink-100"},{value:"bg-indigo-100 text-indigo-800",label:"Indigo",preview:"bg-indigo-100"},{value:"bg-orange-100 text-orange-800",label:"Orange",preview:"bg-orange-100"},{value:"bg-teal-100 text-teal-800",label:"Turquoise",preview:"bg-teal-100"},{value:"bg-gray-100 text-gray-800",label:"Gris",preview:"bg-gray-100"}],zO=({project:e,onSave:t,onCancel:r,globalPipelineSteps:n=[],isSaving:s=!1})=>{var _;const{organizationReady:o}=nn(),a=()=>{var N;const S=e?JSON.parse(JSON.stringify(e)):{type:"",title:"",clientTitle:"",icon:"",color:"gradient-blue",steps:[],isPublic:!0},E=((N=n&&n[0])==null?void 0:N.id)??null;return S.steps=Array.isArray(S.steps)?S.steps.map(P=>({...P,id:P.id||`step-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,globalStepId:P.globalStepId??E})):[],S},[l,c]=p.useState(null),[u,f]=p.useState(""),[d,h]=p.useState(""),m=p.useMemo(()=>!n||!Array.isArray(n)?[]:n.map(S=>i.jsx(Pe,{value:S.id,children:S.label},S.id)),[n]);p.useEffect(()=>{!o||!n||!Array.isArray(n)||(c(a()),f(""),h(""))},[e,n,o]),p.useEffect(()=>{!o||!n||n.length===0||l!=null&&l.steps&&c(S=>{var I;const E=new Set(n.map(O=>O.id)),N=((I=n[0])==null?void 0:I.id)??null;let P=!1;const C=(S.steps||[]).map(O=>{const L=O.globalStepId&&E.has(O.globalStepId)?O.globalStepId:N??null;return L!==O.globalStepId?(P=!0,{...O,globalStepId:L}):O});return P?{...S,steps:C}:S})},[n,o,(_=l==null?void 0:l.steps)==null?void 0:_.length]);const g=p.useCallback((S,E,N)=>{c(P=>{const C=[...P.steps];return C[S]={...C[S],[E]:N},{...P,steps:C}})},[]),v=p.useCallback(()=>{var N;if(!u.trim())return;const S=((N=n[0])==null?void 0:N.id)??null,E={id:`step-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:u,status:"pending",icon:d,descriptions:{},globalStepId:S};c(P=>({...P,steps:[...P.steps,E]})),f(""),h("")},[u,d,n]),x=p.useCallback(S=>{c(E=>({...E,steps:E.steps.filter((N,P)=>P!==S)}))},[]),y=S=>{if(!S.destination)return;const E=Array.from(l.steps),[N]=E.splice(S.source.index,1);E.splice(S.destination.index,0,N),c(P=>({...P,steps:E}))},b=()=>{typeof document<"u"&&(document.body.style.overflow="hidden")},w=S=>{typeof document<"u"&&(document.body.style.overflow=""),y(S)},j=()=>{const S=e&&e.type,E={...l,type:S?l.type:Z5(l.title)||`project-${Date.now()}`,id:l.id||Date.now()};if(!E.title){M({title:"Titre manquant",description:"Veuillez donner un titre  votre projet.",variant:"destructive"});return}E.clientTitle||(E.clientTitle=E.title),t(E)};return l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Paramtres du Projet"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ph,{id:"isPublic",checked:l.isPublic,onCheckedChange:S=>c(E=>({...E,isPublic:S}))}),i.jsx(Q,{htmlFor:"isPublic",children:"En ligne"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-title",children:"Titre du Projet (Interne)"}),i.jsx(me,{id:"project-title",value:l.title,onChange:S=>c(E=>({...E,title:S.target.value}))})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-client-title",children:"Nom affich au client"}),i.jsx(me,{id:"project-client-title",value:l.clientTitle,onChange:S=>c(E=>({...E,clientTitle:S.target.value}))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-icon",children:"Icne (Emoji)"}),i.jsx(_m,{value:l.icon,onChange:S=>c(E=>({...E,icon:S}))})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-color",children:"Couleur du Badge"}),i.jsxs(Kt,{value:l.color||"bg-blue-100 text-blue-800",onValueChange:S=>c(E=>({...E,color:S})),children:[i.jsx(Ft,{id:"project-color",children:i.jsx(Yt,{placeholder:"Choisir une couleur"})}),i.jsx(Bt,{children:qee.map(S=>i.jsx(Pe,{value:S.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`w-4 h-4 rounded-full ${S.preview} border border-gray-300`}),S.label]})},S.value))})]})]})]}),i.jsx("h3",{className:"text-md font-semibold text-gray-700 pt-4 border-t",children:"tapes de la Timeline"}),i.jsx(QZ,{onDragStart:b,onDragEnd:w,children:i.jsx(Uee,{droppableId:"steps",children:S=>i.jsxs("div",{...S.droppableProps,ref:S.innerRef,className:"space-y-3",children:[l.steps.map((E,N)=>i.jsx(yee,{draggableId:E.id,index:N,children:(P,C)=>{const I=C.isDragging?{...P.draggableProps.style,position:"relative",left:"auto",top:"auto"}:P.draggableProps.style;return i.jsx("div",{ref:P.innerRef,...P.draggableProps,style:I,className:`rounded-xl border border-gray-200 bg-white p-3 shadow-sm transition-all ${C.isDragging?"ring-2 ring-purple-200 shadow-lg":""}`,children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 md:flex-1",children:[i.jsx("div",{...P.dragHandleProps,className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:i.jsx(o3,{className:"h-5 w-5"})}),i.jsx(_m,{value:E.icon,onChange:O=>g(N,"icon",O)}),i.jsx(me,{value:E.name,onChange:O=>g(N,"name",O.target.value),placeholder:"Nom de l'tape",className:"flex-1"})]}),i.jsxs("div",{className:"flex items-center gap-2 md:w-72",children:[i.jsxs(Kt,{value:E.globalStepId??"",onValueChange:O=>g(N,"globalStepId",O||null),children:[i.jsx(Ft,{className:"bg-white",children:i.jsx(Yt,{placeholder:"Associer  une tape globale"})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"",children:"Non assigne"}),m]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x(N),children:i.jsx(In,{className:"h-4 w-4 text-red-500"})})]})]})})}},E.id)),S.placeholder]})})}),i.jsxs("div",{className:"flex items-end gap-2 pt-4 border-t",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{children:"Ajouter une tape"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_m,{value:d,onChange:h}),i.jsx(me,{value:u,onChange:S=>f(S.target.value),placeholder:"Nom de la nouvelle tape",className:"flex-1"})]})]}),i.jsx(H,{onClick:v,children:i.jsx(Ar,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:r,disabled:s,children:"Annuler"}),i.jsx(H,{onClick:j,className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le projet"})]})]}):i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})},Wee=({open:e,onOpenChange:t,onSave:r,globalPipelineSteps:n=[],isSaving:s=!1})=>{const{projectsData:o={}}=Ve(),[a,l]=p.useState(1),[c,u]=p.useState(null),f=g=>{const v=o==null?void 0:o[g];if(!v){M({title:"Modle introuvable",description:"Le modle de projet n'existe plus.",variant:"destructive"});return}const x={...JSON.parse(JSON.stringify(v)),title:`${v.title} (Copie)`,clientTitle:`${v.clientTitle} (Copie)`,type:`${v.type}-copie-${Date.now()}`,isPublic:!0};u(x),l(2)},d=()=>{var v;const g=((v=n[0])==null?void 0:v.id)??null;u({type:"",title:"",clientTitle:"",icon:"",color:"gradient-blue",steps:[{name:"Nouvelle tape",status:"pending",icon:"",descriptions:{},globalStepId:g}],isPublic:!0}),l(2)},h=g=>{r(g),l(1),u(null),t(!1)},m=()=>{l(1),u(null),t(!1)};return i.jsx(ih,{open:e,onOpenChange:g=>{g?t(!0):m()},children:i.jsxs(Oc,{className:"sm:max-w-2xl",children:[i.jsxs(Dc,{children:[i.jsx($c,{children:a===1?"Crer un nouveau projet":"Modifier le projet"}),i.jsx(ah,{children:a===1?"Choisissez un modle de base ou partez de zro.":"Personnalisez le titre, l'icne et les tapes de votre nouveau projet."})]}),a===1&&i.jsxs("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[Object.values(o).map(g=>i.jsxs(ie.button,{onClick:()=>f(g.type),className:"p-4 border rounded-lg hover:shadow-lg hover:border-blue-500 transition-all text-center space-y-2",whileHover:{y:-5},children:[i.jsx("span",{className:"text-4xl",children:g.icon}),i.jsx("p",{className:"font-semibold",children:g.title})]},g.type)),i.jsxs(ie.button,{onClick:d,className:"p-4 border border-dashed rounded-lg hover:shadow-lg hover:border-green-500 transition-all text-center space-y-2 flex flex-col items-center justify-center",whileHover:{y:-5},children:[i.jsx(Ar,{className:"h-10 w-10 text-gray-400 mb-2"}),i.jsx("p",{className:"font-semibold",children:"Partir de zro"})]})]}),a===2&&c&&i.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:i.jsx(zO,{project:c,onSave:h,onCancel:m,globalPipelineSteps:n,isSaving:s})})]})})},Hee=()=>{const{projectsData:e={},setProjectsData:t,deleteProjectTemplate:r,globalPipelineSteps:n=[]}=Ve(),[s,o]=p.useState(!1),[a,l]=p.useState(null),[c,u]=p.useState(!1),f=async g=>{l(null),u(!0);const v={...e||{},[g.type]:g};t(v).then(()=>{M({title:"Projet enregistr !",description:`Le projet "${g.title}" a t sauvegard.`,className:"bg-green-500 text-white"})}).catch(x=>{M({title:"Erreur !",description:"Impossible de sauvegarder le projet. Rechargez la page.",variant:"destructive"})}).finally(()=>{u(!1)})},d=g=>{const v=e==null?void 0:e[g];if(v!=null&&v.isPublic){M({title:"Impossible de supprimer",description:"Dsactivez ce projet avant de le supprimer.",variant:"destructive"});return}h(g)},h=async g=>{try{const v=e==null?void 0:e[g];if(!v||!v.id)throw new Error("Template introuvable ou ID manquant");await r(v.id),M({title:"Projet supprim !",description:`Le projet "${v.title}" a t supprim de la base de donnes.`,className:"bg-green-500 text-white"})}catch(v){T.error("Erreur suppression projet",{error:v.message}),M({title:"Erreur !",description:v.message||"Impossible de supprimer le projet.",variant:"destructive"})}},m=g=>{l(g)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"projets"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Gestion des Projets"}),i.jsxs(H,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 w-full",children:[i.jsx(Ar,{className:"mr-2 h-4 w-4"})," Crer un projet"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:Object.values(e||{}).length>0?Object.values(e||{}).map(g=>i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(a==null?void 0:a.type)===g.type?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>m(g),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:g.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:g.title}),i.jsx("p",{className:"text-xs text-gray-500",children:g.isPublic?" En ligne":" Hors ligne"})]})]}),i.jsxs(Lc,{children:[i.jsx(lh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:v=>v.stopPropagation(),children:i.jsx(In,{className:"h-4 w-4"})})}),i.jsxs(ca,{children:[i.jsxs(ua,{children:[i.jsxs(fa,{children:['Supprimer "',g.title,'" ?']}),i.jsx(ha,{children:"Cette action est irrversible et supprimera ce modle de projet."})]}),i.jsxs(da,{children:[i.jsx(ma,{children:"Annuler"}),i.jsx(pa,{onClick:()=>d(g.type),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},g.type)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(Vg,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun projet cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:a?`Modifier "${a.title}"`:"Slectionnez un projet"}),i.jsx("p",{className:"text-sm text-gray-500",children:a?"Personnalisez les paramtres de votre projet et grez ses tapes.":"Cliquez sur un projet dans la liste pour le modifier."})]}),a?i.jsx(zO,{project:a,onSave:f,onCancel:()=>l(null),globalPipelineSteps:n,isSaving:c}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(Vg,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un projet  modifier"}),i.jsx("p",{className:"text-sm mt-2",children:"ou crez-en un nouveau"})]})]})})]}),i.jsx(Wee,{open:s,onOpenChange:o,onSave:f,globalPipelineSteps:n,isSaving:c})]})};var uS=1,Gee=.9,Kee=.8,Yee=.17,Sm=.1,Em=.999,Jee=.9999,Xee=.99,Qee=/[\\\/_+.#"@\[\(\{&]/,Zee=/[\\\/_+.#"@\[\(\{&]/g,ete=/[\s-]/,UO=/[\s-]/g;function Dv(e,t,r,n,s,o,a){if(o===t.length)return s===e.length?uS:Xee;var l=`${s},${o}`;if(a[l]!==void 0)return a[l];for(var c=n.charAt(o),u=r.indexOf(c,s),f=0,d,h,m,g;u>=0;)d=Dv(e,t,r,n,u+1,o+1,a),d>f&&(u===s?d*=uS:Qee.test(e.charAt(u-1))?(d*=Kee,m=e.slice(s,u-1).match(Zee),m&&s>0&&(d*=Math.pow(Em,m.length))):ete.test(e.charAt(u-1))?(d*=Gee,g=e.slice(s,u-1).match(UO),g&&s>0&&(d*=Math.pow(Em,g.length))):(d*=Yee,s>0&&(d*=Math.pow(Em,u-s))),e.charAt(u)!==t.charAt(o)&&(d*=Jee)),(d<Sm&&r.charAt(u-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(u-1)!==n.charAt(o))&&(h=Dv(e,t,r,n,u+1,o+2,a),h*Sm>d&&(d=h*Sm)),d>f&&(f=d),u=r.indexOf(c,u+1);return a[l]=f,f}function dS(e){return e.toLowerCase().replace(UO," ")}function tte(e,t){return Dv(e,t,dS(e),dS(t),0,0,{})}function Oi(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function rte(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function VO(...e){return t=>e.forEach(r=>rte(r,t))}function zc(...e){return p.useCallback(VO(...e),e)}function nte(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[e][c])||l,x=p.useMemo(()=>g,Object.values(g));return p.createElement(v.Provider,{value:x},m)}function f(d,h){const m=(h==null?void 0:h[e][c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,ste(s,...t)]}function ste(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}const $v=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},ote=fc["useId".toString()]||(()=>{});let ite=0;function Nm(e){const[t,r]=p.useState(ote());return $v(()=>{e||r(n=>n??String(ite++))},[e]),e||(t?`radix-${t}`:"")}function So(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function ate({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=lte({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=So(r),c=p.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[a,c]}function lte({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,s=p.useRef(n),o=So(t);return p.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}const Z0=p.forwardRef((e,t)=>{const{children:r,...n}=e,s=p.Children.toArray(r),o=s.find(ute);if(o){const a=o.props.children,l=s.map(c=>c===o?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return p.createElement(Lv,je({},n,{ref:t}),p.isValidElement(a)?p.cloneElement(a,void 0,l):null)}return p.createElement(Lv,je({},n,{ref:t}),r)});Z0.displayName="Slot";const Lv=p.forwardRef((e,t)=>{const{children:r,...n}=e;return p.isValidElement(r)?p.cloneElement(r,{...dte(n,r.props),ref:VO(t,r.ref)}):p.Children.count(r)>1?p.Children.only(null):null});Lv.displayName="SlotClone";const cte=({children:e})=>p.createElement(p.Fragment,null,e);function ute(e){return p.isValidElement(e)&&e.type===cte}function dte(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?r[n]=(...l)=>{o==null||o(...l),s==null||s(...l)}:n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}const fte=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],qh=fte.reduce((e,t)=>{const r=p.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?Z0:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,je({},a,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hte(e,t){e&&xr.flushSync(()=>e.dispatchEvent(t))}function pte(e){const t=So(e);p.useEffect(()=>{const r=n=>{n.key==="Escape"&&t(n)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t])}const Mv="dismissableLayer.update",mte="dismissableLayer.pointerDownOutside",gte="dismissableLayer.focusOutside";let fS;const vte=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xte=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(vte),[f,d]=p.useState(null),[,h]=p.useState({}),m=zc(t,S=>d(S)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),y=f?g.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,j=yte(S=>{const E=S.target,N=[...u.branches].some(P=>P.contains(E));!w||N||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())}),_=bte(S=>{const E=S.target;[...u.branches].some(P=>P.contains(E))||(o==null||o(S),a==null||a(S),S.defaultPrevented||l==null||l())});return pte(S=>{y===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))}),p.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(fS=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),hS(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=fS)}},[f,r,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),hS())},[f,u]),p.useEffect(()=>{const S=()=>h({});return document.addEventListener(Mv,S),()=>document.removeEventListener(Mv,S)},[]),p.createElement(qh.div,je({},c,{ref:m,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Oi(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Oi(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Oi(e.onPointerDownCapture,j.onPointerDownCapture)}))});function yte(e){const t=So(e),r=p.useRef(!1),n=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){qO(mte,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(document.removeEventListener("click",n.current),n.current=c,document.addEventListener("click",n.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{document.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),document.removeEventListener("pointerdown",s),document.removeEventListener("click",n.current)}},[t]),{onPointerDownCapture:()=>r.current=!0}}function bte(e){const t=So(e),r=p.useRef(!1);return p.useEffect(()=>{const n=s=>{s.target&&!r.current&&qO(gte,t,{originalEvent:s},{discrete:!1})};return document.addEventListener("focusin",n),()=>document.removeEventListener("focusin",n)},[t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hS(){const e=new CustomEvent(Mv);document.dispatchEvent(e)}function qO(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?hte(s,o):s.dispatchEvent(o)}const Cm="focusScope.autoFocusOnMount",Pm="focusScope.autoFocusOnUnmount",pS={bubbles:!1,cancelable:!0},wte=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=So(s),f=So(o),d=p.useRef(null),h=zc(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(y){if(m.paused||!l)return;const b=y.target;l.contains(b)?d.current=b:Xs(d.current,{select:!0})},x=function(y){m.paused||!l||l.contains(y.relatedTarget)||Xs(d.current,{select:!0})};return document.addEventListener("focusin",v),document.addEventListener("focusout",x),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x)}}},[n,l,m.paused]),p.useEffect(()=>{if(l){gS.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(Cm,pS);l.addEventListener(Cm,u),l.dispatchEvent(y),y.defaultPrevented||(jte(Cte(WO(l)),{select:!0}),document.activeElement===v&&Xs(l))}return()=>{l.removeEventListener(Cm,u),setTimeout(()=>{const y=new CustomEvent(Pm,pS);l.addEventListener(Pm,f),l.dispatchEvent(y),y.defaultPrevented||Xs(v??document.body,{select:!0}),l.removeEventListener(Pm,f),gS.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,j]=_te(b);w&&j?!v.shiftKey&&y===j?(v.preventDefault(),r&&Xs(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),r&&Xs(j,{select:!0})):y===b&&v.preventDefault()}},[r,n,m.paused]);return p.createElement(qh.div,je({tabIndex:-1},a,{ref:h,onKeyDown:g}))});function jte(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Xs(n,{select:t}),document.activeElement!==r)return}function _te(e){const t=WO(e),r=mS(t,e),n=mS(t.reverse(),e);return[r,n]}function WO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function mS(e,t){for(const r of e)if(!Ste(r,{upTo:t}))return r}function Ste(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ete(e){return e instanceof HTMLInputElement&&"select"in e}function Xs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Ete(e)&&t&&e.select()}}const gS=Nte();function Nte(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=vS(e,t),e.unshift(t)},remove(t){var r;e=vS(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function vS(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Cte(e){return e.filter(t=>t.tagName!=="A")}const Pte=p.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?Sf.createPortal(p.createElement(qh.div,je({},s,{ref:t})),n):null});function Tte(e,t){return p.useReducer((r,n)=>{const s=t[r][n];return s??r},e)}const Wh=e=>{const{present:t,children:r}=e,n=kte(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=zc(n.ref,s.ref);return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};Wh.displayName="Presence";function kte(e){const[t,r]=p.useState(),n=p.useRef({}),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=Tte(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=$u(n.current);o.current=l==="mounted"?u:"none"},[l]),$v(()=>{const u=n.current,f=s.current;if(f!==e){const h=o.current,m=$u(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),$v(()=>{if(t){const u=d=>{const m=$u(n.current).includes(d.animationName);d.target===t&&m&&xr.flushSync(()=>c("ANIMATION_END"))},f=d=>{d.target===t&&(o.current=$u(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function $u(e){return(e==null?void 0:e.animationName)||"none"}let Tm=0;function Ate(){p.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:xS()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:xS()),Tm++,()=>{Tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Tm--}},[])}function xS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var HO=Fy(),km=function(){},Hh=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:km,onWheelCapture:km,onTouchMoveCapture:km}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=yn(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,j=My([r,t]),_=Qe(Qe({},b),s);return p.createElement(p.Fragment,null,f&&p.createElement(w,{sideCar:HO,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:r}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},_),{ref:j})):p.createElement(y,Qe({},_,{className:c,ref:j}),l))});Hh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hh.classNames={fullWidth:ki,zeroRight:Ti};var Fv=!1;if(typeof window<"u")try{var Lu=Object.defineProperty({},"passive",{get:function(){return Fv=!0,!0}});window.addEventListener("test",Lu,Lu),window.removeEventListener("test",Lu,Lu)}catch{Fv=!1}var Zo=Fv?{passive:!1}:!1,Rte=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},Ite=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},yS=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=GO(e,r);if(n){var s=KO(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},Ote=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Dte=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},GO=function(e,t){return e==="v"?Rte(t):Ite(t)},KO=function(e,t){return e==="v"?Ote(t):Dte(t)},$te=function(e,t){return e==="h"&&t==="rtl"?-1:1},Lte=function(e,t,r,n,s){var o=$te(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{var m=KO(e,l),g=m[0],v=m[1],x=m[2],y=v-x-o*g;(g||y)&&GO(e,l)&&(d+=y,h+=g),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&d===0||!s&&a>d)||!f&&(s&&h===0||!s&&-a>h))&&(u=!0),u},Mu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bS=function(e){return[e.deltaX,e.deltaY]},wS=function(e){return e&&"current"in e?e.current:e},Mte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Fte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Bte=0,ei=[];function zte(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(Bte++)[0],o=p.useState(function(){return Xf()})[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=kc([e.lockRef.current],(e.shards||[]).map(wS),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2)return!a.current.allowPinchZoom;var y=Mu(v),b=r.current,w="deltaX"in v?v.deltaX:b[0]-y[0],j="deltaY"in v?v.deltaY:b[1]-y[1],_,S=v.target,E=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&E==="h"&&S.type==="range")return!1;var N=yS(E,S);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=yS(E,S)),!N)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var P=n.current||_;return Lte(P,x,v,P==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!ei.length||ei[ei.length-1]!==o)){var y="deltaY"in x?bS(x):Mu(x),b=t.current.filter(function(_){return _.name===x.type&&_.target===x.target&&Mte(_.delta,y)})[0];if(b&&b.should){x.preventDefault();return}if(!b){var w=(a.current.shards||[]).map(wS).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=Mu(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,bS(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Mu(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return ei.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Zo),document.addEventListener("touchmove",c,Zo),document.addEventListener("touchstart",f,Zo),function(){ei=ei.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Zo),document.removeEventListener("touchmove",c,Zo),document.removeEventListener("touchstart",f,Zo)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:Fte(s)}):null,m?p.createElement(zy,{gapMode:"margin"}):null)}const Ute=By(HO,zte);var YO=p.forwardRef(function(e,t){return p.createElement(Hh,Qe({},e,{ref:t,sideCar:Ute}))});YO.classNames=Hh.classNames;const Vte=YO,JO="Dialog",[XO,ase]=nte(JO),[qte,Fo]=XO(JO),Wte=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u=!1,f]=ate({prop:n,defaultProp:s,onChange:o});return p.createElement(qte,{scope:t,triggerRef:l,contentRef:c,contentId:Nm(),titleId:Nm(),descriptionId:Nm(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:a},r)},QO="DialogPortal",[Hte,ZO]=XO(QO,{forceMount:void 0}),Gte=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Fo(QO,t);return p.createElement(Hte,{scope:t,forceMount:r},p.Children.map(n,a=>p.createElement(Wh,{present:r||o.open},p.createElement(Pte,{asChild:!0,container:s},a))))},Bv="DialogOverlay",Kte=p.forwardRef((e,t)=>{const r=ZO(Bv,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Fo(Bv,e.__scopeDialog);return o.modal?p.createElement(Wh,{present:n||o.open},p.createElement(Yte,je({},s,{ref:t}))):null}),Yte=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fo(Bv,r);return p.createElement(Vte,{as:Z0,allowPinchZoom:!0,shards:[s.contentRef]},p.createElement(qh.div,je({"data-state":tD(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),uc="DialogContent",Jte=p.forwardRef((e,t)=>{const r=ZO(uc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Fo(uc,e.__scopeDialog);return p.createElement(Wh,{present:n||o.open},o.modal?p.createElement(Xte,je({},s,{ref:t})):p.createElement(Qte,je({},s,{ref:t})))}),Xte=p.forwardRef((e,t)=>{const r=Fo(uc,e.__scopeDialog),n=p.useRef(null),s=zc(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return Tc(o)},[]),p.createElement(eD,je({},e,{ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oi(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Oi(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:Oi(e.onFocusOutside,o=>o.preventDefault())}))}),Qte=p.forwardRef((e,t)=>{const r=Fo(uc,e.__scopeDialog),n=p.useRef(!1);return p.createElement(eD,je({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,s),!s.defaultPrevented){var a;n.current||(a=r.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}n.current=!1},onInteractOutside:s=>{var o,a;(o=e.onInteractOutside)===null||o===void 0||o.call(e,s),s.defaultPrevented||(n.current=!0);const l=s.target;((a=r.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault()}}))}),eD=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=Fo(uc,r),c=p.useRef(null),u=zc(t,c);return Ate(),p.createElement(p.Fragment,null,p.createElement(wte,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o},p.createElement(xte,je({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tD(l.open)},a,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function tD(e){return e?"open":"closed"}const Zte=Wte,ere=Gte,tre=Kte,rre=Jte;var nre='[cmdk-list-sizer=""]',Ua='[cmdk-group=""]',Am='[cmdk-group-items=""]',sre='[cmdk-group-heading=""]',eb='[cmdk-item=""]',jS=`${eb}:not([aria-disabled="true"])`,zv="cmdk-item-select",Nn="data-value",ore=(e,t)=>tte(e,t),rD=p.createContext(void 0),Uc=()=>p.useContext(rD),nD=p.createContext(void 0),tb=()=>p.useContext(nD),sD=p.createContext(void 0),oD=p.forwardRef((e,t)=>{let r=p.useRef(null),n=ni(()=>{var D,F,q;return{search:"",value:(q=(F=e.value)!=null?F:(D=e.defaultValue)==null?void 0:D.toLowerCase())!=null?q:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=ni(()=>new Set),o=ni(()=>new Map),a=ni(()=>new Map),l=ni(()=>new Set),c=iD(e),{label:u,children:f,value:d,onValueChange:h,filter:m,shouldFilter:g,vimBindings:v=!0,...x}=e,y=p.useId(),b=p.useId(),w=p.useId(),j=gre();ba(()=>{if(d!==void 0){let D=d.trim().toLowerCase();n.current.value=D,j(6,I),_.emit()}},[d]);let _=p.useMemo(()=>({subscribe:D=>(l.current.add(D),()=>l.current.delete(D)),snapshot:()=>n.current,setState:(D,F,q)=>{var W,te,fe;if(!Object.is(n.current[D],F)){if(n.current[D]=F,D==="search")C(),N(),j(1,P);else if(D==="value")if(((W=c.current)==null?void 0:W.value)!==void 0){let le=F??"";(fe=(te=c.current).onValueChange)==null||fe.call(te,le);return}else q||j(5,I);_.emit()}},emit:()=>{l.current.forEach(D=>D())}}),[]),S=p.useMemo(()=>({value:(D,F)=>{F!==a.current.get(D)&&(a.current.set(D,F),n.current.filtered.items.set(D,E(F)),j(2,()=>{N(),_.emit()}))},item:(D,F)=>(s.current.add(D),F&&(o.current.has(F)?o.current.get(F).add(D):o.current.set(F,new Set([D]))),j(3,()=>{C(),N(),n.current.value||P(),_.emit()}),()=>{a.current.delete(D),s.current.delete(D),n.current.filtered.items.delete(D);let q=O();j(4,()=>{C(),(q==null?void 0:q.getAttribute("id"))===D&&P(),_.emit()})}),group:D=>(o.current.has(D)||o.current.set(D,new Set),()=>{a.current.delete(D),o.current.delete(D)}),filter:()=>c.current.shouldFilter,label:u||e["aria-label"],commandRef:r,listId:y,inputId:w,labelId:b}),[]);function E(D){var F,q;let W=(q=(F=c.current)==null?void 0:F.filter)!=null?q:ore;return D?W(D,n.current.search):0}function N(){if(!r.current||!n.current.search||c.current.shouldFilter===!1)return;let D=n.current.filtered.items,F=[];n.current.filtered.groups.forEach(W=>{let te=o.current.get(W),fe=0;te.forEach(le=>{let ne=D.get(le);fe=Math.max(ne,fe)}),F.push([W,fe])});let q=r.current.querySelector(nre);$().sort((W,te)=>{var fe,le;let ne=W.getAttribute(Nn),ue=te.getAttribute(Nn);return((fe=D.get(ue))!=null?fe:0)-((le=D.get(ne))!=null?le:0)}).forEach(W=>{let te=W.closest(Am);te?te.appendChild(W.parentElement===te?W:W.closest(`${Am} > *`)):q.appendChild(W.parentElement===q?W:W.closest(`${Am} > *`))}),F.sort((W,te)=>te[1]-W[1]).forEach(W=>{let te=r.current.querySelector(`${Ua}[${Nn}="${W[0]}"]`);te==null||te.parentElement.appendChild(te)})}function P(){let D=$().find(q=>!q.ariaDisabled),F=D==null?void 0:D.getAttribute(Nn);_.setState("value",F||void 0)}function C(){if(!n.current.search||c.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let D=0;for(let F of s.current){let q=a.current.get(F),W=E(q);n.current.filtered.items.set(F,W),W>0&&D++}for(let[F,q]of o.current)for(let W of q)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(F);break}n.current.filtered.count=D}function I(){var D,F,q;let W=O();W&&(((D=W.parentElement)==null?void 0:D.firstChild)===W&&((q=(F=W.closest(Ua))==null?void 0:F.querySelector(sre))==null||q.scrollIntoView({block:"nearest"})),W.scrollIntoView({block:"nearest"}))}function O(){var D;return(D=r.current)==null?void 0:D.querySelector(`${eb}[aria-selected="true"]`)}function $(){return Array.from(r.current.querySelectorAll(jS))}function L(D){let F=$()[D];F&&_.setState("value",F.getAttribute(Nn))}function V(D){var F;let q=O(),W=$(),te=W.findIndex(le=>le===q),fe=W[te+D];(F=c.current)!=null&&F.loop&&(fe=te+D<0?W[W.length-1]:te+D===W.length?W[0]:W[te+D]),fe&&_.setState("value",fe.getAttribute(Nn))}function z(D){let F=O(),q=F==null?void 0:F.closest(Ua),W;for(;q&&!W;)q=D>0?pre(q,Ua):mre(q,Ua),W=q==null?void 0:q.querySelector(jS);W?_.setState("value",W.getAttribute(Nn)):V(D)}let B=()=>L($().length-1),A=D=>{D.preventDefault(),D.metaKey?B():D.altKey?z(1):V(1)},R=D=>{D.preventDefault(),D.metaKey?L(0):D.altKey?z(-1):V(-1)};return p.createElement("div",{ref:Vc([r,t]),...x,"cmdk-root":"",onKeyDown:D=>{var F;if((F=x.onKeyDown)==null||F.call(x,D),!D.defaultPrevented)switch(D.key){case"n":case"j":{v&&D.ctrlKey&&A(D);break}case"ArrowDown":{A(D);break}case"p":case"k":{v&&D.ctrlKey&&R(D);break}case"ArrowUp":{R(D);break}case"Home":{D.preventDefault(),L(0);break}case"End":{D.preventDefault(),B();break}case"Enter":if(!D.nativeEvent.isComposing){D.preventDefault();let q=O();if(q){let W=new Event(zv);q.dispatchEvent(W)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:vre},u),p.createElement(nD.Provider,{value:_},p.createElement(rD.Provider,{value:S},f)))}),ire=p.forwardRef((e,t)=>{var r,n;let s=p.useId(),o=p.useRef(null),a=p.useContext(sD),l=Uc(),c=iD(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:a==null?void 0:a.forceMount;ba(()=>l.item(s,a==null?void 0:a.id),[]);let f=aD(s,o,[e.value,e.children,o]),d=tb(),h=Eo(_=>_.value&&_.value===f.current),m=Eo(_=>u||l.filter()===!1?!0:_.search?_.filtered.items.get(s)>0:!0);p.useEffect(()=>{let _=o.current;if(!(!_||e.disabled))return _.addEventListener(zv,g),()=>_.removeEventListener(zv,g)},[m,e.onSelect,e.disabled]);function g(){var _,S;v(),(S=(_=c.current).onSelect)==null||S.call(_,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:b,forceMount:w,...j}=e;return p.createElement("div",{ref:Vc([o,t]),...j,id:s,"cmdk-item":"",role:"option","aria-disabled":x||void 0,"aria-selected":h||void 0,"data-disabled":x||void 0,"data-selected":h||void 0,onPointerMove:x?void 0:v,onClick:x?void 0:g},e.children)}),are=p.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...o}=e,a=p.useId(),l=p.useRef(null),c=p.useRef(null),u=p.useId(),f=Uc(),d=Eo(g=>s||f.filter()===!1?!0:g.search?g.filtered.groups.has(a):!0);ba(()=>f.group(a),[]),aD(a,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:a,forceMount:s}),[s]),m=p.createElement(sD.Provider,{value:h},n);return p.createElement("div",{ref:Vc([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},r&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},m))}),lre=p.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=p.useRef(null),o=Eo(a=>!a.search);return!r&&!o?null:p.createElement("div",{ref:Vc([s,t]),...n,"cmdk-separator":"",role:"separator"})}),cre=p.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=e.value!=null,o=tb(),a=Eo(f=>f.search),l=Eo(f=>f.value),c=Uc(),u=p.useMemo(()=>{var f;let d=(f=c.commandRef.current)==null?void 0:f.querySelector(`${eb}[${Nn}="${l}"]`);return d==null?void 0:d.getAttribute("id")},[l,c.commandRef]);return p.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),p.createElement("input",{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:s?e.value:a,onChange:f=>{s||o.setState("search",f.target.value),r==null||r(f.target.value)}})}),ure=p.forwardRef((e,t)=>{let{children:r,...n}=e,s=p.useRef(null),o=p.useRef(null),a=Uc();return p.useEffect(()=>{if(o.current&&s.current){let l=o.current,c=s.current,u,f=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let d=l.offsetHeight;c.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return f.observe(l),()=>{cancelAnimationFrame(u),f.unobserve(l)}}},[]),p.createElement("div",{ref:Vc([s,t]),...n,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:a.listId,"aria-labelledby":a.inputId},p.createElement("div",{ref:o,"cmdk-list-sizer":""},r))}),dre=p.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:o,container:a,...l}=e;return p.createElement(Zte,{open:r,onOpenChange:n},p.createElement(ere,{container:a},p.createElement(tre,{"cmdk-overlay":"",className:s}),p.createElement(rre,{"aria-label":e.label,"cmdk-dialog":"",className:o},p.createElement(oD,{ref:t,...l}))))}),fre=p.forwardRef((e,t)=>{let r=p.useRef(!0),n=Eo(s=>s.filtered.count===0);return p.useEffect(()=>{r.current=!1},[]),r.current||!n?null:p.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),hre=p.forwardRef((e,t)=>{let{progress:r,children:n,...s}=e;return p.createElement("div",{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},p.createElement("div",{"aria-hidden":!0},n))}),rr=Object.assign(oD,{List:ure,Item:ire,Input:cre,Group:are,Separator:lre,Dialog:dre,Empty:fre,Loading:hre});function pre(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function mre(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function iD(e){let t=p.useRef(e);return ba(()=>{t.current=e}),t}var ba=typeof window>"u"?p.useEffect:p.useLayoutEffect;function ni(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Vc(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Eo(e){let t=tb(),r=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,r,r)}function aD(e,t,r){let n=p.useRef(),s=Uc();return ba(()=>{var o;let a=(()=>{var l;for(let c of r){if(typeof c=="string")return c.trim().toLowerCase();if(typeof c=="object"&&"current"in c)return c.current?(l=c.current.textContent)==null?void 0:l.trim().toLowerCase():n.current}})();s.value(e,a),(o=t.current)==null||o.setAttribute(Nn,a),n.current=a}),n}var gre=()=>{let[e,t]=p.useState(),r=ni(()=>new Map);return ba(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,s)=>{r.current.set(n,s),t({})}},vre={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lD=J.forwardRef(({className:e,...t},r)=>i.jsx(rr,{ref:r,className:pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));lD.displayName=rr.displayName;const cD=J.forwardRef(({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(ry,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(rr.Input,{ref:r,className:pe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));cD.displayName=rr.Input.displayName;const uD=J.forwardRef(({className:e,...t},r)=>i.jsx(rr.List,{ref:r,className:pe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));uD.displayName=rr.List.displayName;const dD=J.forwardRef((e,t)=>i.jsx(rr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));dD.displayName=rr.Empty.displayName;const fD=J.forwardRef(({className:e,...t},r)=>i.jsx(rr.Group,{ref:r,className:pe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));fD.displayName=rr.Group.displayName;const hD=J.forwardRef(({className:e,...t},r)=>i.jsx(rr.Separator,{ref:r,className:pe("-mx-1 h-px bg-border",e),...t}));hD.displayName=rr.Separator.displayName;const Uv=J.forwardRef(({className:e,...t},r)=>i.jsx(rr.Item,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));Uv.displayName=rr.Item.displayName;const xre=kf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $n({className:e,variant:t,...r}){return i.jsx("div",{className:pe(xre({variant:t}),e),...r})}const yre=({options:e,selected:t,onChange:r,placeholder:n,searchPlaceholder:s,emptyText:o,className:a,showSelectAll:l=!1,selectAllText:c="Tout slectionner"})=>{const[u,f]=p.useState(!1),d=m=>{r(t.filter(g=>g.value!==m.value))},h=()=>{t.length===e.length?r([]):r(e)};return i.jsxs(xI,{open:u,onOpenChange:f,children:[i.jsx(yI,{asChild:!0,children:i.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":u,className:pe("w-full justify-between",a),onClick:()=>f(!u),children:[i.jsx("div",{className:"flex gap-1 flex-wrap",children:t.length>0?t.map(m=>i.jsxs($n,{variant:"secondary",className:"mr-1",onClick:g=>{g.stopPropagation(),d(m)},children:[m.label,i.jsx("span",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:i.jsx(Ro,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},m.value)):i.jsx("span",{children:n})}),i.jsx(Y6,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(S0,{className:"w-[--radix-popover-trigger-width] p-0",children:i.jsxs(lD,{children:[i.jsx(cD,{placeholder:s}),i.jsxs(uD,{children:[i.jsx(dD,{children:o}),i.jsxs(fD,{children:[l&&i.jsxs(i.Fragment,{children:[i.jsxs(Uv,{onSelect:h,children:[i.jsx(Rn,{className:pe("mr-2 h-4 w-4",t.length===e.length?"opacity-100":"opacity-0")}),c]}),i.jsx(hD,{})]}),e.map(m=>i.jsxs(Uv,{onSelect:()=>{const g=t.some(v=>v.value===m.value);r(g?t.filter(v=>v.value!==m.value):[...t,m])},children:[i.jsx(Rn,{className:pe("mr-2 h-4 w-4",t.some(g=>g.value===m.value)?"opacity-100":"opacity-0")}),m.label]},m.value))]})]})]})})]})},bre=({form:e,onSave:t,onCancel:r,isSaving:n=!1})=>{const{projectsData:s}=Ve(),[o,a]=p.useState(e?JSON.parse(JSON.stringify(e)):{name:"",fields:[],projectIds:[]}),[l,c]=p.useState(""),[u,f]=p.useState("text"),d=p.useMemo(()=>Object.values(s).map(y=>({value:y.type,label:y.title})),[s]),h=p.useMemo(()=>(o.projectIds||[]).map(y=>d.find(b=>b.value===y)).filter(Boolean),[o.projectIds,d]);p.useEffect(()=>{e&&a(JSON.parse(JSON.stringify(e)))},[e]);const m=(y,b,w)=>{const j=[...o.fields];j[y]={...j[y],[b]:w},a(_=>({..._,fields:j}))},g=()=>{if(!l.trim())return;const y={id:`field-${Date.now()}`,label:l,type:u,placeholder:""};a(b=>({...b,fields:[...b.fields||[],y]})),c(""),f("text")},v=y=>{const b=(o.fields||[]).filter((w,j)=>j!==y);a(w=>({...w,fields:b}))},x=()=>{if(!o.name.trim()){M({title:"Nom manquant",description:"Veuillez nommer votre formulaire.",variant:"destructive"});return}const y={...o,id:o.id||`form-${Date.now()}`};t(y)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"form-name",children:"Nom du formulaire (Interne)"}),i.jsx(me,{id:"form-name",value:o.name,onChange:y=>a(b=>({...b,name:y.target.value}))})]}),i.jsxs("div",{children:[i.jsx(Q,{children:" qui est destin ce formulaire ?"}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"audience-client",name:"audience",value:"client",checked:(o.audience||"client")==="client",onChange:y=>a(b=>({...b,audience:y.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),i.jsx(Q,{htmlFor:"audience-client",className:"font-normal cursor-pointer",children:"Client"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"audience-internal",name:"audience",value:"internal",checked:o.audience==="internal",onChange:y=>a(b=>({...b,audience:y.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),i.jsx(Q,{htmlFor:"audience-internal",className:"font-normal cursor-pointer",children:"Interne (quipe)"})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(o.audience||"client")==="client"?"Ce formulaire sera envoyable au client via le chat":"Ce formulaire sera visible uniquement dans la fiche prospect (quipe)"})]}),i.jsxs("div",{children:[i.jsx(Q,{children:"Projets associs"}),i.jsx(yre,{options:d,selected:h,onChange:y=>a(b=>({...b,projectIds:y.map(w=>w.value)})),placeholder:"Slectionner des projets...",searchPlaceholder:"Rechercher un projet...",emptyText:"Aucun projet trouv.",className:"mt-1"})]}),i.jsx("h3",{className:"text-md font-semibold text-gray-700 pt-4 border-t",children:"Champs du formulaire"}),i.jsx("div",{className:"space-y-3",children:(o.fields||[]).map((y,b)=>i.jsxs("div",{className:"flex flex-col gap-2 bg-gray-50 p-3 rounded-md",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(me,{value:y.label,onChange:w=>m(b,"label",w.target.value),placeholder:"Nom du champ"}),i.jsxs(Kt,{value:y.type,onValueChange:w=>m(b,"type",w),children:[i.jsx(Ft,{className:"w-[180px]",children:i.jsx(Yt,{})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"text",children:"Texte"}),i.jsx(Pe,{value:"email",children:"Email"}),i.jsx(Pe,{value:"phone",children:"Tlphone"}),i.jsx(Pe,{value:"number",children:"Nombre"}),i.jsx(Pe,{value:"select",children:"Liste droulante"}),i.jsx(Pe,{value:"file",children:"Fichier"})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>v(b),children:i.jsx(In,{className:"h-4 w-4 text-red-500"})})]}),y.type==="select"&&i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-blue-300",children:[i.jsx(Q,{className:"text-xs font-semibold text-blue-700",children:"Options du menu droulant :"}),i.jsx("div",{className:"space-y-1",children:(y.options||[]).map((w,j)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(me,{value:w,onChange:_=>{const S=[...y.options||[]];S[j]=_.target.value,m(b,"options",S)},placeholder:`Option ${j+1}`,className:"flex-1"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>{const _=(y.options||[]).filter((S,E)=>E!==j);m(b,"options",_)},children:i.jsx(In,{className:"h-3 w-3 text-red-500"})})]},j))}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const w=[...y.options||[],""];m(b,"options",w)},className:"text-xs",children:[i.jsx(Ar,{className:"h-3 w-3 mr-1"})," Ajouter une option"]})]}),i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-purple-300",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Q,{className:"text-xs font-semibold text-purple-700",children:"Conditions d'affichage :"}),y.show_if_conditions&&y.show_if_conditions.length>1&&i.jsxs(Kt,{value:y.condition_operator||"AND",onValueChange:w=>m(b,"condition_operator",w),children:[i.jsx(Ft,{className:"w-[100px] h-7 text-xs",children:i.jsx(Yt,{})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"AND",children:"ET (toutes)"}),i.jsx(Pe,{value:"OR",children:"OU (au moins une)"})]})]})]}),(y.show_if_conditions||[]).map((w,j)=>i.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 p-2 rounded",children:[i.jsxs(Kt,{value:`${w.field}::${w.equals}`,onValueChange:_=>{const[S,E]=_.split("::"),N=[...y.show_if_conditions||[]];N[j]={field:S,equals:E},m(b,"show_if_conditions",N)},children:[i.jsx(Ft,{className:"flex-1 h-8 text-xs",children:i.jsx(Yt,{})}),i.jsx(Bt,{children:(o.fields||[]).slice(0,b).filter(_=>_.type==="text"||_.type==="email"||_.type==="phone"||_.type==="select").map(_=>_.type==="select"&&_.options&&_.options.length>0?_.options.map(S=>i.jsxs(Pe,{value:`${_.id}::${S}`,children:['"',_.label,'" = "',S,'"']},`${_.id}::${S}`)):i.jsxs(Pe,{value:`${_.id}::has_value`,children:['"',_.label,'" rempli']},_.id)).flat()})]}),i.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{const _=(y.show_if_conditions||[]).filter((S,E)=>E!==j);m(b,"show_if_conditions",_.length>0?_:void 0)},children:i.jsx(In,{className:"h-3 w-3 text-red-500"})})]},j)),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const w=[...y.show_if_conditions||[],{field:"",equals:""}];m(b,"show_if_conditions",w)},className:"text-xs w-full",children:[i.jsx(Ar,{className:"h-3 w-3 mr-1"})," Ajouter une condition"]}),(!y.show_if_conditions||y.show_if_conditions.length===0)&&i.jsx("p",{className:"text-xs text-gray-500 italic",children:"Toujours visible (aucune condition)"})]}),y.type==="select"&&i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-green-300 mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Q,{className:"text-xs font-semibold text-green-700",children:"Rptition de champs :"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:`repeater-${y.id}`,checked:y.is_repeater||!1,onChange:w=>m(b,"is_repeater",w.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),i.jsx(Q,{htmlFor:`repeater-${y.id}`,className:"text-xs font-normal cursor-pointer",children:"Utiliser comme compteur de rptition"})]})]}),y.is_repeater&&i.jsxs("div",{className:"space-y-2 bg-green-50 p-3 rounded",children:[i.jsx(Q,{className:"text-xs",children:"Champs  rpter :"}),i.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Slectionnez les champs qui doivent tre rpts N fois (o N = valeur choisie dans le menu droulant)"}),i.jsx("div",{className:"space-y-1",children:(o.fields||[]).slice(b+1).map((w,j)=>{const _=(y.repeats_fields||[]).includes(w.id);return i.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded border",children:[i.jsx("input",{type:"checkbox",id:`repeat-${y.id}-${w.id}`,checked:_,onChange:S=>{const E=y.repeats_fields||[],N=S.target.checked?[...E,w.id]:E.filter(P=>P!==w.id);m(b,"repeats_fields",N)},className:"h-4 w-4 text-green-600 focus:ring-green-500"}),i.jsxs(Q,{htmlFor:`repeat-${y.id}-${w.id}`,className:"text-xs font-normal cursor-pointer flex-1",children:[w.label," (",w.type,")"]})]},w.id)})}),(o.fields||[]).slice(b+1).length===0&&i.jsx("p",{className:"text-xs text-orange-600 italic",children:"Ajoutez des champs aprs celui-ci pour pouvoir les rpter"})]}),!y.is_repeater&&i.jsx("p",{className:"text-xs text-gray-500 italic",children:"Activez cette option pour gnrer automatiquement N copies des champs suivants"})]})]},y.id))}),i.jsxs("div",{className:"flex items-end gap-2 pt-4 border-t",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{children:"Ajouter un champ"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(me,{value:l,onChange:y=>c(y.target.value),placeholder:"Nom du nouveau champ"}),i.jsxs(Kt,{value:u,onValueChange:f,children:[i.jsx(Ft,{className:"w-[180px]",children:i.jsx(Yt,{})}),i.jsxs(Bt,{children:[i.jsx(Pe,{value:"text",children:"Texte"}),i.jsx(Pe,{value:"email",children:"Email"}),i.jsx(Pe,{value:"phone",children:"Tlphone"}),i.jsx(Pe,{value:"number",children:"Nombre"}),i.jsx(Pe,{value:"select",children:"Liste droulante"}),i.jsx(Pe,{value:"file",children:"Fichier"})]})]})]})]}),i.jsx(H,{onClick:g,children:i.jsx(Ar,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:r,disabled:n,children:"Annuler"}),i.jsx(H,{onClick:x,className:"bg-green-600 hover:bg-green-700",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le formulaire"})]})]})},wre=()=>{const e=yr();Ve();const{organizationId:t}=nn(),{forms:r,loading:n,saveForm:s,deleteForm:o}=w0(t),a=p.useMemo(()=>r,[r]),[l,c]=p.useState(null),[u,f]=p.useState(!1);p.useEffect(()=>{var v;const g=(v=e.state)==null?void 0:v.prefilledForm;g&&(c(g),M({title:" Formulaire pr-rempli",description:`${g.fields.length} champs dtects depuis le template. Vous pouvez les ajuster avant de sauvegarder.`,className:"bg-blue-500 text-white",duration:5e3}),window.history.replaceState({},document.title))},[e.state]);const d=async g=>{f(!0);const v=g.id||`form-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;try{const x=await s(v,{name:g.name,fields:g.fields||[],projectIds:g.projectIds||[],audience:g.audience||"client"});x.success?(M({title:" Formulaire enregistr !",description:`Le formulaire "${g.name}" a t sauvegard dans Supabase.`,className:"bg-green-500 text-white"}),c(null)):M({title:" Erreur",description:`Impossible d'enregistrer le formulaire : ${x.error}`,variant:"destructive"})}finally{f(!1)}},h=async g=>{const v=await o(g);v.success?M({title:" Formulaire supprim !",description:"Le formulaire a t supprim de Supabase.",className:"bg-green-500 text-white"}):M({title:" Erreur",description:`Impossible de supprimer le formulaire : ${v.error}`,variant:"destructive"})},m=g=>{c(g)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"formulaires"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Gestion des Formulaires"}),i.jsxs(H,{onClick:()=>c({name:"",fields:[],projectIds:[]}),className:"bg-teal-600 hover:bg-teal-700 w-full",children:[i.jsx(Ar,{className:"mr-2 h-4 w-4"})," Crer un formulaire"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:n?i.jsx("div",{className:"text-center text-gray-500 py-8",children:"Chargement..."}):Object.values(a).length>0?Object.values(a).map(g=>i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(l==null?void 0:l.id)===g.id?"bg-teal-50 border-2 border-teal-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>m(g),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(dl,{className:"h-5 w-5 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:g.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[g.audience==="internal"?" Interne":" Client","  ",(g.fields||[]).length," champs"]})]})]}),i.jsxs(Lc,{children:[i.jsx(lh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:v=>v.stopPropagation(),children:i.jsx(In,{className:"h-4 w-4"})})}),i.jsxs(ca,{children:[i.jsxs(ua,{children:[i.jsxs(fa,{children:['Supprimer "',g.name,'" ?']}),i.jsx(ha,{children:"Cette action est irrversible."})]}),i.jsxs(da,{children:[i.jsx(ma,{children:"Annuler"}),i.jsx(pa,{onClick:()=>h(g.id),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},`${g.id}-${g.name}-${g.updatedAt||g.createdAt}`)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(dl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun formulaire cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:l?l.id?`Modifier "${l.name}"`:"Crer un nouveau formulaire":"Slectionnez un formulaire"}),i.jsx("p",{className:"text-sm text-gray-500",children:l?"Configurez les champs, les conditions d'affichage et les projets associs.":"Cliquez sur un formulaire dans la liste pour le modifier."})]}),l?i.jsx(bre,{form:l,onSave:d,onCancel:()=>c(null),isSaving:u}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(dl,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un formulaire  modifier"}),i.jsx("p",{className:"text-sm mt-2",children:"ou crez-en un nouveau"})]})]})})]})]})},jre=()=>{const{projectsData:e={},setProjectsData:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState({coverImage:"",clientDescription:"",ctaText:""}),a=p.useRef(null),l=p.useMemo(()=>Object.values(e).map(h=>({value:h.type,label:h.title,icon:h.icon})),[e]);p.useEffect(()=>{l.length>0&&!r&&n(l[0].value)},[l,r]),p.useEffect(()=>{if(r&&e[r]){const h=e[r];o({coverImage:h.coverImage||"",clientDescription:h.clientDescription||"",ctaText:h.ctaText||""})}},[r,e]);const c=(h,m)=>{o(g=>({...g,[h]:m}))},u=async()=>{if(!r)return;const h={...e[r],...s},m={...e,[r]:h};try{await t(m),M({title:" Modifications enregistres !",description:`L'affichage du projet "${e[r].title}" a t mis  jour.`,className:"bg-green-500 text-white"})}catch{M({title:" Erreur !",description:"Impossible de sauvegarder les modifications.",variant:"destructive"})}},f=h=>{const m=h.target.files[0];if(m){const g=new FileReader;g.onloadend=()=>{c("coverImage",g.result)},g.readAsDataURL(m)}},d=r&&e[r];return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"catalogue"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:" Catalogue Client"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Configurez l'affichage des projets pour vos clients"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:l.length>0?l.map(h=>i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${r===h.value?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>n(h.value),children:[i.jsx("span",{className:"text-2xl",children:h.icon}),i.jsx("span",{className:"font-medium",children:h.label})]},h.value)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(Np,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun projet disponible"}),i.jsx("p",{className:"text-xs mt-1",children:`Crez d'abord des projets dans "Gestion des Projets"`})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:d?`Configuration de "${d.title}"`:"Slectionnez un projet"}),i.jsx("p",{className:"text-sm text-gray-500",children:d?"Personnalisez l'image, la description et le bouton d'action affichs aux clients.":"Cliquez sur un projet dans la liste pour configurer son affichage."})]}),d?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border border-indigo-200",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-3xl",children:d.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:d.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",d.type]})]})]})}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-cover-image",children:"Image de couverture (URL)"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(me,{id:"project-cover-image",placeholder:"https://exemple.com/image.jpg",value:s.coverImage,onChange:h=>c("coverImage",h.target.value)}),i.jsx("input",{type:"file",ref:a,onChange:f,accept:"image/*",className:"hidden"}),i.jsx(H,{variant:"outline",onClick:()=>{var h;return(h=a.current)==null?void 0:h.click()},title:"Uploader une image",children:i.jsx(m3,{className:"h-4 w-4"})})]}),s.coverImage?i.jsx("div",{className:"mt-3 relative w-full aspect-video rounded-lg overflow-hidden bg-gray-100 border",children:i.jsx("img",{src:s.coverImage,alt:"Aperu de la couverture",className:"w-full h-full object-cover",onError:h=>{h.target.src="",h.target.style.display="none",M({title:"Erreur d'image",description:"L'URL de l'image n'est pas valide.",variant:"destructive"})}})}):i.jsx("div",{className:"mt-3 flex items-center justify-center w-full aspect-video rounded-lg bg-gray-100 border-2 border-dashed border-gray-300",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Np,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune image de couverture"})]})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image affiche aux clients sur la page de prsentation du projet"})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-client-description",children:"Description du projet"}),i.jsx(ao,{id:"project-client-description",placeholder:"Courte description visible par le client...",value:s.clientDescription,onChange:h=>c("clientDescription",h.target.value),rows:5,className:"mt-1"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Texte prsent au client pour expliquer le projet"})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-cta-text",children:"Texte du bouton (CTA)"}),i.jsx(me,{id:"project-cta-text",placeholder:"Ex: Ajouter ce projet",value:s.ctaText,onChange:h=>c("ctaText",h.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Texte affich sur le bouton d'action principal"})]}),i.jsx("div",{className:"flex justify-end pt-4 border-t",children:i.jsx(H,{onClick:u,className:"bg-green-600 hover:bg-green-700",children:"Enregistrer les modifications"})})]}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(Np,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un projet  configurer"}),i.jsx("p",{className:"text-sm mt-2",children:'ou crez-en un dans "Gestion des Projets"'})]})]})})]})]})},_re=()=>{const e=Oe(),{activeAdminUser:t}=Ve(),{organizationId:r}=nn(),{partners:n,loading:s,error:o,refetch:a}=j0(r),[l,c]=p.useState(""),[u,f]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""}),v=p.useMemo(()=>(t==null?void 0:t.role)==="Global Admin"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="platform_admin",[t]),x=p.useMemo(()=>{if(!l.trim())return n;const j=l.toLowerCase();return n.filter(_=>{var S,E,N;return((S=_.name)==null?void 0:S.toLowerCase().includes(j))||((E=_.email)==null?void 0:E.toLowerCase().includes(j))||((N=_.specialty)==null?void 0:N.toLowerCase().includes(j))})},[n,l]),y=p.useMemo(()=>({total:n.length,active:n.filter(j=>j.active).length,inactive:n.filter(j=>!j.active).length,totalMissions:n.reduce((j,_)=>j+_.missionsCount,0)}),[n]),b=async()=>{var j,_,S,E,N;if(!m.companyName.trim()||!m.email.trim()){M({title:"Champs requis",description:"Le nom de l'entreprise et l'email sont obligatoires.",variant:"destructive"});return}if(!m.email.includes("@")){M({title:"Email invalide",description:"Veuillez entrer une adresse email valide.",variant:"destructive"});return}h(!0);try{const{data:P,error:C}=await k.functions.invoke("invite-partner",{body:{companyName:m.companyName.trim(),email:m.email.trim().toLowerCase(),contactLastName:((j=m.contactLastName)==null?void 0:j.trim())||null,contactFirstName:((_=m.contactFirstName)==null?void 0:_.trim())||null,phone:((S=m.phone)==null?void 0:S.trim())||null,organizationId:r}});if(C)throw C;if(P!=null&&P.error){M({title:"Erreur",description:P.error,variant:"destructive"});return}T.info("Invitation partenaire envoye",{email:m.email,partnerId:P==null?void 0:P.partnerId}),M({title:" Invitation envoye",description:`${m.companyName} recevra un email avec ses identifiants.`,className:"bg-green-500 text-white"}),g({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""}),f(!1),a()}catch(P){T.error("Erreur invitation partenaire",{error:P.message});let C="Une erreur est survenue lors de l'invitation.";(E=P.message)!=null&&E.includes("already registered")?C="Cet email est dj utilis.":(N=P.message)!=null&&N.includes("rate limit")&&(C="Trop de tentatives, ressayez plus tard."),M({title:"Erreur",description:C,variant:"destructive"})}finally{h(!1)}},w=()=>{f(!1),g({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""})};return v?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Vi,{className:"h-7 w-7 text-orange-600"}),"Partenaires"]}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Grez les partenaires terrain de votre organisation"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",size:"sm",onClick:a,disabled:s,children:[i.jsx(Of,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Actualiser"]}),i.jsxs(H,{size:"sm",onClick:()=>f(!0),className:"bg-orange-600 hover:bg-orange-700",children:[i.jsx(fl,{className:"h-4 w-4 mr-2"}),"Inviter un partenaire"]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.total}),i.jsx("div",{className:"text-sm text-gray-500",children:"Partenaires"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.active}),i.jsx("div",{className:"text-sm text-gray-500",children:"Actifs"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.inactive}),i.jsx("div",{className:"text-sm text-gray-500",children:"Inactifs"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.totalMissions}),i.jsx("div",{className:"text-sm text-gray-500",children:"Missions totales"})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(ry,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(me,{type:"text",placeholder:"Rechercher un partenaire...",value:l,onChange:j=>c(j.target.value),className:"pl-10"})]})]}),s?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Me,{className:"h-8 w-8 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des partenaires..."})]}):o?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Jx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),i.jsxs("p",{className:"text-red-600 font-medium",children:["Erreur: ",o]}),i.jsx(H,{variant:"outline",className:"mt-4",onClick:a,children:"Ressayer"})]})}):x.length===0?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Vi,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"Aucun partenaire trouv":"Aucun partenaire"}),i.jsx("p",{className:"text-gray-500 max-w-sm",children:l?"Modifiez votre recherche pour trouver des partenaires.":"Les partenaires apparatront ici une fois crs via l'invitation."})]})}):i.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Partenaire"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Email"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Spcialit"}),i.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700",children:"Statut"}),i.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700",children:"Missions"}),i.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-700"})]})}),i.jsx("tbody",{className:"divide-y",children:x.map(j=>{var _,S;return i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(`/admin/partners/${j.id}`),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:i.jsx("span",{className:"text-orange-600 font-semibold text-sm",children:((S=(_=j.name)==null?void 0:_.charAt(0))==null?void 0:S.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:j.name}),j.phone&&i.jsx("div",{className:"text-sm text-gray-500",children:j.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.email}),i.jsx("td",{className:"px-6 py-4",children:j.specialty?i.jsx($n,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:j.specialty}):i.jsx("span",{className:"text-gray-400 text-sm",children:"Non dfinie"})}),i.jsx("td",{className:"px-6 py-4 text-center",children:j.active?i.jsxs($n,{className:"bg-green-100 text-green-700 border-green-200",children:[i.jsx(g3,{className:"h-3 w-3 mr-1"}),"Actif"]}):i.jsxs($n,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[i.jsx(v3,{className:"h-3 w-3 mr-1"}),"Inactif"]})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-700 font-medium text-sm",children:j.missionsCount})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx(Rf,{className:"h-5 w-5 text-gray-400"})})]},j.id)})})]})})]}),i.jsx(ih,{open:u,onOpenChange:w,children:i.jsxs(Oc,{className:"sm:max-w-md",children:[i.jsxs(Dc,{children:[i.jsxs($c,{className:"flex items-center gap-2",children:[i.jsx(fl,{className:"h-5 w-5 text-orange-600"}),"Inviter un partenaire"]}),i.jsx(ah,{children:"Le partenaire recevra un email avec ses identifiants de connexion."})]}),i.jsxs("div",{className:"px-6 py-5 space-y-5",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-company",children:["Nom de l'entreprise ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(me,{id:"invite-company",type:"text",placeholder:"Ex: Solaire Sud Ouest",value:m.companyName,onChange:j=>g(_=>({..._,companyName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(me,{id:"invite-email",type:"email",placeholder:"partenaire@entreprise.com",value:m.email,onChange:j=>g(_=>({..._,email:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-contact-name",children:["Nom du contact ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(me,{id:"invite-contact-name",type:"text",placeholder:"Dupont",value:m.contactLastName,onChange:j=>g(_=>({..._,contactLastName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-contact-firstname",children:["Prnom du contact ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(me,{id:"invite-contact-firstname",type:"text",placeholder:"Jean",value:m.contactFirstName,onChange:j=>g(_=>({..._,contactFirstName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-phone",children:["Tlphone ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(me,{id:"invite-phone",type:"tel",placeholder:"06 12 34 56 78",value:m.phone,onChange:j=>g(_=>({..._,phone:j.target.value})),disabled:d,className:"w-full rounded-lg"})]})]}),i.jsxs(oR,{className:"flex gap-2 mt-6",children:[i.jsx(H,{variant:"outline",onClick:w,disabled:d,children:"Annuler"}),i.jsx(H,{onClick:b,disabled:d,className:"bg-orange-600 hover:bg-orange-700",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"h-4 w-4 mr-2 animate-spin"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fl,{className:"h-4 w-4 mr-2"}),"Inviter le partenaire"]})})]})]})})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux Global Admin et Admin."}),i.jsx(H,{onClick:()=>e("/admin/pipeline"),children:"Retour au Pipeline"})]})})]})},Sre=()=>{var w,j;const{partnerId:e}=sa(),t=Oe(),{activeAdminUser:r}=Ve(),{organizationId:n}=nn(),{togglePartnerActive:s,getPartnerWithMissions:o}=j0(n),[a,l]=p.useState(null),[c,u]=p.useState([]),[f,d]=p.useState(!0),[h,m]=p.useState(null),[g,v]=p.useState(!1),x=p.useMemo(()=>(r==null?void 0:r.role)==="Global Admin"||(r==null?void 0:r.role)==="Admin"||(r==null?void 0:r.role)==="platform_admin",[r]);p.useEffect(()=>{(async()=>{if(!e)return;d(!0),m(null);const S=await o(e);S.error?m(S.error):(l(S.partner),u(S.missions)),d(!1)})()},[e,o]);const y=async()=>{if(!a)return;v(!0);const _=!a.active,S=await s(a.id,_);S.success?(l(E=>({...E,active:_})),M({title:_?" Partenaire activ":" Partenaire dsactiv",description:_?`${a.name} peut maintenant recevoir des missions.`:`${a.name} ne recevra plus de nouvelles missions.`,className:_?"bg-green-500 text-white":"bg-orange-500 text-white"})):M({title:" Erreur",description:S.error||"Impossible de modifier le statut.",variant:"destructive"}),v(!1)},b=_=>{const S={pending:{label:"En attente",icon:X6,className:"bg-gray-100 text-gray-700"},in_progress:{label:"En cours",icon:Me,className:"bg-blue-100 text-blue-700"},completed:{label:"Termine",icon:Zx,className:"bg-green-100 text-green-700"},blocked:{label:"Bloque",icon:Xx,className:"bg-red-100 text-red-700"},cancelled:{label:"Annule",icon:XC,className:"bg-gray-100 text-gray-500"}},E=S[_]||S.pending,N=E.icon;return i.jsxs($n,{className:E.className,children:[i.jsx(N,{className:"h-3 w-3 mr-1"}),E.label]})};return x?f?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 flex items-center justify-center",children:[i.jsx(Me,{className:"h-8 w-8 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement du partenaire..."})]})]}):h||!a?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Jx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600 font-medium mb-4",children:h||"Partenaire non trouv"}),i.jsx(H,{variant:"outline",onClick:()=>t("/admin/partners"),children:"Retour  la liste"})]})})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[i.jsxs(H,{variant:"ghost",className:"mb-4",onClick:()=>t("/admin/partners"),children:[i.jsx(qC,{className:"h-4 w-4 mr-2"}),"Retour  la liste"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[i.jsx("div",{className:"col-span-1",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-orange-100 flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-orange-600 font-bold text-2xl",children:((j=(w=a.name)==null?void 0:w.charAt(0))==null?void 0:j.toUpperCase())||"?"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a.name}),a.specialty&&i.jsx($n,{variant:"outline",className:"mt-2 bg-blue-50 text-blue-700",children:a.specialty})]}),i.jsxs("div",{className:"space-y-4 border-t pt-4",children:[i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(Zr,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm",children:a.email})]}),a.phone&&i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(wc,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm",children:a.phone})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(Qx,{className:"h-4 w-4 text-gray-400"}),i.jsxs("span",{className:"text-sm",children:["Cr le ",new Date(a.createdAt).toLocaleDateString("fr-FR")]})]})]}),i.jsx("div",{className:"border-t pt-4 mt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Statut"}),i.jsx("div",{className:"text-sm text-gray-500",children:a.active?"Peut recevoir des missions":"Ne reoit plus de missions"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ph,{checked:a.active,onCheckedChange:y,disabled:g}),g&&i.jsx(Me,{className:"h-4 w-4 animate-spin"})]})]})})]})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[i.jsxs("div",{className:"px-6 py-4 border-b",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx(Bg,{className:"h-5 w-5 text-blue-600"}),"Missions (",c.length,")"]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Historique des missions assignes  ce partenaire (lecture seule)"})]}),c.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(Bg,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucune mission assigne"})]}):i.jsx("div",{className:"divide-y max-h-[500px] overflow-y-auto",children:c.map(_=>i.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:_.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[i.jsx($n,{variant:"outline",className:"text-xs",children:_.projectType}),_.stepName&&i.jsxs("span",{children:[" ",_.stepName]}),i.jsxs("span",{children:[" ",_.source]})]}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Cre le ",new Date(_.createdAt).toLocaleDateString("fr-FR"),_.dueDate&&i.jsxs(i.Fragment,{children:["  chance: ",new Date(_.dueDate).toLocaleDateString("fr-FR")]})]})]}),i.jsx("div",{children:b(_.status)})]})},_.id))})]})})]})]})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(fn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux Global Admin et Admin."}),i.jsx(H,{onClick:()=>t("/admin/pipeline"),children:"Retour au Pipeline"})]})})]})},Ere=()=>{const e=Oe(),[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),[l,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!0),[y,b]=p.useState(!1),[w,j]=p.useState("");p.useEffect(()=>{const E=window.location.hash,N=E.includes("access_token")||E.includes("type=invite")||E.includes("type=recovery");T.info(" PartnerLoginPage - Vrification du flow invitation",{hash:E?E.substring(0,50)+"...":"(vide)",hasInviteToken:N});const P=async()=>{var $;const{data:{session:O}}=await k.auth.getSession();if(O){T.info(" Session active trouve",{userId:O.user.id,email:O.user.email,isRecovery:($=O.user)==null?void 0:$.recovery});const{data:L,error:V}=await k.from("partners").select("email, company_name").eq("user_id",O.user.id).single();if(L&&!V){const z=new Date(O.user.created_at),A=(new Date-z)/(1e3*60*60),R=A<24;if(T.info(" Partenaire trouv",{email:L.email,isRecentInvite:R,hoursSinceCreation:A.toFixed(1)}),N||R){g(!0),j(L.email),b(!0),x(!1);return}}}N?(T.warn(" Hash prsent mais pas de session valide"),g(!0),b(!1),x(!1)):(g(!1),x(!1))},C=setTimeout(P,500),{data:{subscription:I}}=k.auth.onAuthStateChange(async(O,$)=>{(O==="SIGNED_IN"||O==="TOKEN_REFRESHED"||O==="INITIAL_SESSION")&&$&&P()});return()=>{clearTimeout(C),I.unsubscribe()}},[]);const _=async E=>{if(E.preventDefault(),l.length<6){M({title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}if(l!==u){M({title:"Erreur",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}h(!0);try{const{error:N}=await k.auth.updateUser({password:l});if(N){T.error("Erreur updateUser password",{error:N.message}),M({title:"Erreur",description:N.message||"Impossible de dfinir le mot de passe.",variant:"destructive"});return}T.info("Mot de passe partenaire dfini avec succs"),M({title:" Mot de passe cr !",description:"Bienvenue sur EVATIME.",className:"bg-green-500 text-white"}),e("/partner/missions")}catch(N){T.error("Erreur inattendue cration mot de passe",{error:N.message}),M({title:"Erreur",description:"Une erreur inattendue s'est produite.",variant:"destructive"})}finally{h(!1)}},S=async E=>{E.preventDefault(),a(!0);try{const{data:N,error:P}=await k.auth.signInWithPassword({email:t,password:n});if(P){M({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}),a(!1);return}const{data:C,error:I}=await k.from("partners").select("id, company_name, active").eq("user_id",N.user.id).single();if(I||!C){T.warn("Tentative de connexion partenaire par un non-partenaire",{userId:N.user.id,email:t,error:I==null?void 0:I.message}),await k.auth.signOut(),M({title:"Accs refus",description:"Ce compte n'est pas un compte partenaire.",variant:"destructive"}),a(!1);return}if(!C.active){await k.auth.signOut(),M({title:"Compte dsactiv",description:"Votre compte partenaire a t dsactiv. Contactez l'administrateur.",variant:"destructive"}),a(!1);return}T.info("Connexion partenaire russie",{partnerId:C.id,companyName:C.company_name}),M({title:"Connexion russie !",description:`Bienvenue ${C.company_name}`,className:"bg-green-500 text-white"}),e("/partner")}catch(N){T.error("Erreur inattendue lors de la connexion partenaire",{error:N.message}),M({title:"Erreur",description:"Une erreur inattendue s'est produite.",variant:"destructive"})}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 flex items-center justify-center p-4",children:i.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[m&&v&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Me,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Validation de votre invitation..."})]}),m&&!v&&!y&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tj,{className:"w-8 h-8 text-red-600"})}),i.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Lien expir"}),i.jsx("p",{className:"text-gray-500 mb-6",children:"Ce lien d'invitation n'est plus valide ou a dj t utilis."}),i.jsx(H,{onClick:()=>e("/partner/login"),className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Retour  la connexion"})]}),m&&!v&&y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tj,{className:"w-8 h-8 text-orange-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crer votre mot de passe"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Dfinissez un mot de passe pour accder  votre espace"}),w&&i.jsx("p",{className:"text-sm text-orange-600 mt-1",children:w})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"new-password",children:"Nouveau mot de passe"}),i.jsx(me,{id:"new-password",type:"password",placeholder:"",value:l,onChange:E=>c(E.target.value),required:!0,disabled:d,className:"h-12",minLength:6})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirm-password",children:"Confirmer le mot de passe"}),i.jsx(me,{id:"confirm-password",type:"password",placeholder:"",value:u,onChange:E=>f(E.target.value),required:!0,disabled:d,className:"h-12",minLength:6})]}),i.jsx(H,{type:"submit",disabled:d,className:"w-full h-12 bg-orange-600 hover:bg-orange-700 text-white font-medium",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-4 h-4 mr-2 animate-spin"}),"Cration..."]}):"Crer mon mot de passe"})]}),i.jsx("p",{className:"text-center text-sm text-gray-400 mt-8",children:"Accs rserv aux partenaires agrs"})]}),!m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Bg,{className:"w-8 h-8 text-orange-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Espace Partenaire"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Connectez-vous  votre compte"})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsx(me,{id:"email",type:"email",placeholder:"partenaire@entreprise.com",value:t,onChange:E=>r(E.target.value),required:!0,disabled:o,className:"h-12"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(me,{id:"password",type:"password",placeholder:"",value:n,onChange:E=>s(E.target.value),required:!0,disabled:o,className:"h-12"})]}),i.jsx(H,{type:"submit",disabled:o,className:"w-full h-12 bg-orange-600 hover:bg-orange-700 text-white font-medium",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-4 h-4 mr-2 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),i.jsx("p",{className:"text-center text-sm text-gray-400 mt-8",children:"Accs rserv aux partenaires agrs"})]})]})})})},_S=()=>{const e=Oe(),[t,r]=p.useState(!0),[n,s]=p.useState([]),[o,a]=p.useState(null);return p.useEffect(()=>{let l=!0;return(async()=>{try{r(!0);const{data:{user:u},error:f}=await k.auth.getUser();if(f||!u){e("/partner/login");return}const{data:d,error:h}=await k.from("partners").select("id, company_name, email, phone, active").eq("user_id",u.id).single();if(h||!d){T.warn("PartnerMissionsPage: utilisateur non-partenaire",{userId:u.id}),await k.auth.signOut(),e("/partner/login");return}if(!d.active){await k.auth.signOut(),M({title:"Compte dsactiv",description:"Votre compte partenaire est dsactiv.",variant:"destructive"}),e("/partner/login");return}if(!l)return;a(d);const{data:m,error:g}=await k.from("missions").select("*").eq("partner_id",d.id).order("created_at",{ascending:!1});if(g)throw g;if(!l)return;s(m||[])}catch(u){T.error("PartnerMissionsPage load error",{err:u.message}),M({title:"Erreur",description:"Impossible de charger les missions.",variant:"destructive"})}finally{l&&r(!1)}})(),()=>{l=!1}},[e]),t?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-100 p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Me,{className:"w-8 h-8 text-orange-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Chargement des demandes..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 p-4 sm:p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Missions"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Demandes en cours"})]}),n.length===0?i.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Aucune mission pour le moment."})}):i.jsx("div",{className:"space-y-4",children:n.map(l=>i.jsx("article",{className:"bg-white rounded-xl shadow-sm border p-4 cursor-pointer",onClick:()=>e(`/partner/missions/${l.id}`),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Client"}),i.jsx("div",{className:"font-semibold text-gray-900 mt-1",children:l.title||"Client"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:l.description||""})]}),i.jsxs("div",{className:"ml-3 flex flex-col items-end space-y-2",children:[l.is_blocking&&i.jsx($n,{className:"bg-red-50 text-red-700 border-red-100",children:"Bloquante"}),i.jsx($n,{className:`mt-2 ${l.status==="completed"?"bg-green-50 text-green-700 border-green-100":"bg-gray-50 text-gray-700 border-gray-100"}`,children:l.status})]})]})},l.id))})]})})},Nre=()=>{const{missionId:e}=sa(),t=Oe(),[r,n]=p.useState(!0),[s,o]=p.useState(null),[a,l]=p.useState(null),[c,u]=p.useState({}),[f,d]=p.useState(""),[h,m]=p.useState(!1),[g,v]=p.useState({}),[x,y]=p.useState({}),[b,w]=p.useState([]);p.useEffect(()=>{let C=!0;return(async()=>{var O;try{n(!0);const{data:{user:$},error:L}=await k.auth.getUser();if(L||!$){t("/partner/login");return}const{data:V,error:z}=await k.from("partners").select("id, active").eq("user_id",$.id).single();if(z||!V){await k.auth.signOut(),t("/partner/login");return}if(!V.active){await k.auth.signOut(),t("/partner/login");return}const{data:B,error:A}=await k.from("missions").select("*").eq("id",e).single();if(A||!B){M({title:"Erreur",description:"Mission introuvable.",variant:"destructive"}),t("/partner/missions");return}if(B.partner_id!==V.id){T.warn("Accs mission non autoris",{missionId:e,userId:$.id}),await k.auth.signOut(),t("/partner/login");return}if(!C)return;o(B);const{data:R}=await k.from("prospects").select("id, name, email, phone, address").eq("id",B.prospect_id).maybeSingle();if(C&&l(R||null),((O=B.form_ids)==null?void 0:O.length)>0){const{data:F}=await k.from("forms").select("*").in("form_id",B.form_ids);if(F&&C){const te={};F.forEach(fe=>{te[fe.form_id]=fe}),v(te)}const{data:q,error:W}=await k.from("client_form_panels").select("*").eq("prospect_id",B.prospect_id).eq("filled_by_role","partner").in("form_id",B.form_ids);if(W)T.error("Erreur chargement panels partenaire",{error:W.message});else if(q&&C){const te=q.map(fe=>({id:fe.id,panelId:fe.panel_id,prospectId:fe.prospect_id,projectType:fe.project_type,formId:fe.form_id,status:fe.status,filledByRole:fe.filled_by_role,formData:fe.form_data||{},lastSubmittedAt:fe.last_submitted_at}));w(te),T.debug("Panels partenaire chargs",{count:te.length})}}const D=B.questions||B.payload||null;if(D&&typeof D=="object"){const F={};D.forEach((q,W)=>{F[q.id||W]=q.type==="boolean"?null:q.default||""}),u(F)}}catch($){T.error("PartnerMissionDetail load error",{err:$.message}),M({title:"Erreur",description:"Impossible de charger la mission.",variant:"destructive"}),t("/partner/missions")}finally{C&&n(!1)}})(),()=>{C=!1}},[e,t]);const j=()=>t("/partner/missions"),_=(C,I)=>{u(O=>({...O,[C]:I}))},S=(C,I,O)=>{y($=>({...$,[C]:{...$[C]||{},[I]:O}}))},E=async C=>{var I;try{const{panelId:O,prospectId:$,projectType:L,formId:V}=C,z=g[V],B=x[O]||{},A=(I=z==null?void 0:z.fields)==null?void 0:I.filter(D=>D.required&&!B[D.id]);if((A==null?void 0:A.length)>0){M({title:"Champs manquants",description:"Veuillez remplir tous les champs requis",variant:"destructive"});return}console.log("SUBMIT FORM DATA:",B);const{error:R}=await k.from("client_form_panels").update({form_data:B,status:"submitted",last_submitted_at:new Date().toISOString()}).eq("panel_id",O);if(R)throw console.error("UPDATE PANEL ERROR:",R),new Error(R.message||"Erreur update panel");console.log("UPDATE PANEL SUCCESS"),w(D=>D.map(F=>F.panelId===O?{...F,status:"submitted",formData:B}:F)),M({title:" Formulaire envoy",description:"En attente de validation par l'admin"})}catch(O){T.error("Erreur soumission formulaire partenaire",{err:O.message}),M({title:"Erreur",description:"Impossible d'envoyer le formulaire",variant:"destructive"})}},N=async C=>{try{if(m(!0),C==="blocked"&&(!f||f.trim()==="")){M({title:"Commentaire requis",description:"Veuillez fournir un commentaire.",variant:"destructive"}),m(!1);return}const I={responses:c,comment:f||null,updated_at:new Date().toISOString()},O={status:C,partner_notes:JSON.stringify(I),updated_at:new Date().toISOString()};C==="completed"&&(O.completed_at=new Date().toISOString());const{error:$}=await k.from("missions").update(O).eq("id",s.id);if($)throw $;M({title:" Enregistr",description:"Votre rponse a t sauvegarde.",className:"bg-green-500 text-white"}),t("/partner/missions")}catch(I){T.error("PartnerMissionDetail save error",{err:I.message}),M({title:"Erreur",description:"Impossible d'enregistrer la mission.",variant:"destructive"})}finally{m(!1)}},P=C=>{var O;const I={name:(s==null?void 0:s.client_name)||((O=s==null?void 0:s.title)==null?void 0:O.replace("Mission pour ",""))||(a==null?void 0:a.name)||"",phone:(s==null?void 0:s.phone)||(a==null?void 0:a.phone),email:(s==null?void 0:s.email)||(a==null?void 0:a.email),address:(s==null?void 0:s.address)||(a==null?void 0:a.address)};switch(C){case"Appel":I.phone&&(window.location.href=`tel:${I.phone}`);break;case"Mail":I.email&&(window.location.href=`mailto:${I.email}`);break;case"WhatsApp":if(I.phone){const $=I.phone.replace(/[^0-9]/g,"");window.open(`https://wa.me/${$}`,"_blank")}else M({title:"Numro manquant",description:"Ce client n'a pas de numro de tlphone.",variant:"destructive"});break;case"GPS":if(I.address){const $=encodeURIComponent(I.address);/Mac|iPod|iPhone|iPad/.test(navigator.platform)?window.location.href=`maps://?q=${$}`:window.open(`https://www.google.com/maps/search/?api=1&query=${$}`,"_blank")}break}};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-100 p-4",children:i.jsx(Me,{className:"w-8 h-8 text-orange-600 animate-spin"})}):s?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 p-4 sm:p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("header",{className:"mb-6 flex items-center gap-4",children:[i.jsx(H,{variant:"ghost",onClick:j,className:"p-2",children:i.jsx(qC,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.title}),i.jsx("p",{className:"text-sm text-gray-500",children:s.step_name||s.project_type})]})]}),i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),i.jsx("div",{className:"flex flex-wrap justify-between gap-2 text-center",children:[{icon:wc,label:"Appel"},{icon:Zr,label:"Mail"},{icon:l3,label:"WhatsApp"},{icon:ey,label:"GPS"}].map(({icon:C,label:I})=>i.jsxs("button",{onClick:()=>P(I),className:"flex flex-col items-center space-x-1 transition-colors group text-gray-600 hover:text-blue-600",children:[i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gray-100 group-hover:bg-blue-100",children:i.jsx(C,{className:"h-6 w-6"})}),i.jsx("span",{className:"text-xs font-medium",children:I})]},I))})]}),i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"ORDRE EVATIME"}),i.jsx("div",{className:"mt-2 font-medium text-gray-900",children:"Instruction"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description||""})]}),b.length>0&&i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"FORMULAIRES  REMPLIR"}),i.jsx("div",{className:"mt-4 space-y-6",children:b.map(C=>{var z;const I=g[C.formId],O=x[C.panelId]||{},$=C.status==="submitted",L=C.status==="approved",V=C.status==="rejected";return i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:(I==null?void 0:I.title)||"Formulaire"}),L&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:" Valid"}),$&&!L&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:" En attente"}),V&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700",children:" Refus"})]}),(I==null?void 0:I.description)&&i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:I.description}),!L&&i.jsxs("div",{className:"space-y-4",children:[(z=I==null?void 0:I.fields)==null?void 0:z.map(B=>{var A;return i.jsxs("div",{children:[i.jsxs(Q,{className:"mb-2 block",children:[B.label,B.required&&i.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),B.type==="text"&&i.jsx(me,{type:"text",value:O[B.id]||"",onChange:R=>S(C.panelId,B.id,R.target.value),placeholder:B.placeholder||"",disabled:$}),B.type==="textarea"&&i.jsx("textarea",{value:O[B.id]||"",onChange:R=>S(C.panelId,B.id,R.target.value),placeholder:B.placeholder||"",disabled:$,className:"w-full px-3 py-2 border rounded min-h-[80px]"}),B.type==="select"&&i.jsxs("select",{value:O[B.id]||"",onChange:R=>S(C.panelId,B.id,R.target.value),disabled:$,className:"w-full px-3 py-2 border rounded",children:[i.jsx("option",{value:"",children:"-- Slectionner --"}),(A=B.options)==null?void 0:A.map(R=>i.jsx("option",{value:R,children:R},R))]}),B.type==="number"&&i.jsx(me,{type:"number",value:O[B.id]||"",onChange:R=>S(C.panelId,B.id,R.target.value),placeholder:B.placeholder||"",disabled:$}),B.type==="date"&&i.jsx(me,{type:"date",value:O[B.id]||"",onChange:R=>S(C.panelId,B.id,R.target.value),disabled:$}),B.type==="checkbox"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:O[B.id]||!1,onChange:R=>S(C.panelId,B.id,R.target.checked),disabled:$,className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:B.placeholder})]})]},B.id)}),!$&&i.jsx(H,{onClick:()=>E(C),className:"w-full mt-4",children:"Envoyer le formulaire"}),V&&C.rejectionReason&&i.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded",children:i.jsxs("p",{className:"text-sm text-red-800",children:[i.jsx("strong",{children:"Raison du refus :"})," ",C.rejectionReason]})})]})]},C.panelId)})})]}),s.questions||s.payload?i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"Merci de confirmer les lments suivants"}),i.jsx("div",{className:"mt-3 space-y-3",children:(s.questions||s.payload).map((C,I)=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-medium text-gray-900",children:C.label}),C.type==="boolean"?i.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[i.jsx("button",{onClick:()=>_(C.id||I,!0),className:`px-3 py-2 rounded ${c[C.id||I]===!0?"bg-green-50 border":"bg-gray-50"}`,children:"Oui"}),i.jsx("button",{onClick:()=>_(C.id||I,!1),className:`px-3 py-2 rounded ${c[C.id||I]===!1?"bg-red-50 border":"bg-gray-50"}`,children:"Non"})]}):i.jsx("input",{type:"text",value:c[C.id||I]||"",onChange:O=>_(C.id||I,O.target.value),className:"w-full px-3 py-2 border rounded"})]},C.id||I))})]}):null,i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"Commentaire (optionnel)"}),i.jsx("textarea",{value:f,onChange:C=>d(C.target.value),className:"w-full mt-2 px-3 py-2 border rounded min-h-[80px]"}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Le commentaire devient requis si vous marquez la mission comme impossible."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(H,{variant:"ghost",onClick:()=>N("blocked"),className:"flex-1 border",children:"IMPOSSIBLE  RALISER"}),i.jsx(H,{onClick:()=>N("completed"),className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white",children:"VALIDER LA MISSION"})]})]})}):null},SS=()=>{var c;const{currentUser:e}=Ve(),[t,r]=p.useState(!1),n={filleuls:4,confirmes:3,gainsCumules:300},s=`https://evatime.fr/inscription/${((c=e==null?void 0:e.name)==null?void 0:c.replace(/\s+/g,"-"))||"Jack-Luc"}`,o=[{id:1,filleul:"Sophie Martin",statut:"En attente",gain:null,date:"06/11/2025",badgeColor:"bg-yellow-100 text-yellow-700"},{id:2,filleul:"Julien Dubois",statut:"Confirm",gain:100,date:"02/11/2025",badgeColor:"bg-green-100 text-green-700"},{id:3,filleul:"Alexandre Petit",statut:"Confirm",gain:100,date:"28/10/2025",badgeColor:"bg-green-100 text-green-700"}],a=()=>{navigator.clipboard.writeText(s),r(!0),M({title:"Lien copi !",description:"Le lien de parrainage a t copi dans le presse-papier.",className:"bg-green-500 text-white"}),setTimeout(()=>r(!1),2e3)},l=()=>{M({title:"Invitation",description:"Fonctionnalit d'invitation  venir..."})};return i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[i.jsxs("div",{className:"relative bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-xl overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]"}),i.jsxs("div",{className:"relative grid grid-cols-1 lg:grid-cols-[1fr_auto] gap-8 p-8 lg:p-12 items-center",children:[i.jsxs("div",{className:"text-white space-y-6",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium",children:[i.jsx(Ug,{className:"h-5 w-5"}),"Programme de parrainage"]}),i.jsx("h1",{className:"text-4xl lg:text-5xl font-bold leading-tight",children:"Gagnez de l'argent en recommandant nos services ! "}),i.jsxs("p",{className:"text-xl text-blue-100 leading-relaxed",children:["Chaque ami que vous parrainez vous rapporte"," ",i.jsx("span",{className:"font-bold text-yellow-300 text-2xl",children:"100 "})," ","et lui offre galement"," ",i.jsx("span",{className:"font-bold text-yellow-300 text-2xl",children:"100 "})," de rduction.",i.jsx("br",{}),i.jsx("span",{className:"text-white font-semibold mt-2 block",children:"C'est gagnant-gagnant ! "})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[i.jsxs(H,{onClick:l,size:"lg",className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold shadow-lg hover:shadow-xl transition-all",children:[i.jsx(fl,{className:"h-5 w-5 mr-2"}),"Inviter un ami maintenant"]}),i.jsx(H,{onClick:a,size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 font-semibold",children:t?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-5 w-5 mr-2"}),"Lien copi !"]}):i.jsxs(i.Fragment,{children:[i.jsx(Qw,{className:"h-5 w-5 mr-2"}),"Copier mon lien"]})})]})]}),i.jsx("div",{className:"hidden lg:block flex-shrink-0",children:i.jsx("img",{src:"https://ik.imagekit.io/bqla7nrgyf/ChatGPT%20Image%206%20nov.%202025%20a%CC%80%2017_33_52.png.webp?updatedAt=1762764615950",alt:"Programme de parrainage",className:"w-80 h-auto object-contain drop-shadow-2xl"})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[i.jsx(p3,{className:"h-6 w-6 text-green-600"}),"Vos performances de parrainage"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ie.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 text-center border-2 border-blue-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(Vi,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-blue-700 mb-2 uppercase tracking-wide",children:"Filleuls inscrits"}),i.jsx("p",{className:"text-5xl font-extrabold text-blue-900 mb-1",children:n.filleuls}),i.jsx("p",{className:"text-xs text-blue-600",children:"personnes invites"})]}),i.jsxs(ie.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 text-center border-2 border-green-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(Rn,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-green-700 mb-2 uppercase tracking-wide",children:"Parrainages confirms"}),i.jsx("p",{className:"text-5xl font-extrabold text-green-900 mb-1",children:n.confirmes}),i.jsx("p",{className:"text-xs text-green-600",children:"souscriptions valides"})]}),i.jsxs(ie.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-6 text-center border-2 border-yellow-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(Ug,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-yellow-700 mb-2 uppercase tracking-wide",children:"Revenus gnrs"}),i.jsxs("p",{className:"text-5xl font-extrabold text-yellow-900 mb-1",children:[n.gainsCumules," "]}),i.jsx("p",{className:"text-xs text-yellow-600",children:"total des gains"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Votre lien de parrainage unique"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(me,{value:s,readOnly:!0,className:"flex-1 bg-gray-50 border-gray-200"}),i.jsx(H,{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white",children:t?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Copi"]}):i.jsxs(i.Fragment,{children:[i.jsx(Qw,{className:"h-4 w-4 mr-2"}),"Copier le lien"]})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Suivi de vos parrainages"}),i.jsxs(H,{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(fl,{className:"h-4 w-4 mr-2"}),"Inviter un ami"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Filleul"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Statut"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Gain"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Date"})]})}),i.jsx("tbody",{children:o.map(u=>i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:u.filleul}),i.jsx("td",{className:"py-4 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${u.badgeColor}`,children:u.statut})}),i.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:u.gain?`+${u.gain} `:""}),i.jsx("td",{className:"py-4 px-4 text-gray-600",children:u.date})]},u.id))})]})})]})]})},ES=({title:e,children:t})=>i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl shadow-card",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:e}),i.jsx("div",{className:"space-y-6",children:t})]}),Rm=()=>{const e=yr();Oe();const{currentUser:t,setCurrentUser:r,updateProspect:n}=Ve(),s=e.pathname.includes("/profil"),[o,a]=p.useState({name:"",companyName:"",email:"",phone:"",address:""});p.useEffect(()=>{t&&a({name:t.name||"",companyName:t.companyName||"",email:t.email||"",phone:t.phone||"",address:t.address||""})},[t]);const l=m=>{const{id:g,value:v}=m.target;a(x=>({...x,[g]:v}))},c=async()=>{if(t)try{const m=await n({id:t.id,name:o.name,email:o.email,phone:o.phone,company:o.companyName,address:o.address});if(m&&m.length>0){const g=m[0],v={id:g.id,name:g.name,email:g.email,phone:g.phone,companyName:g.company_name,address:g.address,tags:g.tags||[],userId:g.user_id,ownerId:g.owner_id,status:g.status,hasAppointment:g.has_appointment,affiliateName:g.affiliate_name,formData:g.form_data||{},createdAt:g.created_at,updatedAt:g.updated_at};r(v)}M({title:"Profil mis a jour !",description:"Vos informations ont ete enregistrees avec succes.",className:"bg-green-100 border-green-300 text-green-800"})}catch(m){T.error("Erreur sauvegarde profil:",m),M({title:"Erreur",description:"Impossible de sauvegarder les modifications.",variant:"destructive"})}},u=()=>{M({title:'Sauvegarde des "Prfrences de notifications"...',description:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},f=()=>{k.auth.signOut(),window.location.href="/"},d=s?"Mon Profil":"Paramtres",h=s?"Grez vos informations personnelles et vos prfrences.":"Grez les paramtres de l'application.";return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:d}),i.jsx("p",{className:"text-gray-600 mt-1",children:h})]}),i.jsxs(ES,{title:"Informations Personnelles",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(jc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"name",type:"text",placeholder:"Jack Dupont",className:"pl-10",value:o.name,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",children:"Socit"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(zg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"companyName",type:"text",placeholder:"Nom de votre socit",className:"pl-10",value:o.companyName,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Adresse e-mail"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"email",type:"email",placeholder:"jack.dupont@email.com",className:"pl-10",value:o.email,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"phone",children:"Tlphone"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"phone",type:"tel",placeholder:"06 12 34 56 78",className:"pl-10",value:o.phone,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"address",children:"Adresse"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(ey,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"address",type:"text",placeholder:"123 Rue de Paris, 75001 Paris",className:"pl-10",value:o.address,onChange:l})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 sm:gap-4 mt-6 pt-6 border-t",children:[i.jsxs(Lc,{children:[i.jsx(lh,{asChild:!0,children:i.jsxs(H,{variant:"destructive",children:[i.jsx(a3,{className:"mr-2 h-4 w-4"}),"Se dconnecter"]})}),i.jsxs(ca,{children:[i.jsxs(ua,{children:[i.jsx(fa,{children:"Confirmer la dconnexion"}),i.jsx(ha,{children:"tes-vous sr de vouloir vous dconnecter ? Vous recevrez un nouveau lien scuris pour vous reconnecter."})]}),i.jsxs(da,{children:[i.jsx(ma,{children:"Annuler"}),i.jsx(pa,{onClick:f,className:"bg-red-600 hover:bg-red-700",children:"Se dconnecter"})]})]})]}),i.jsx(H,{onClick:c,className:"bg-green-600 hover:bg-green-700",children:"Enregistrer les modifications"})]})]}),i.jsxs(ES,{title:"Prfrences de notifications",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Choisissez comment nous pouvons vous contacter pour les mises  jour importantes de vos projets."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[i.jsx(tr,{id:"notif-email",defaultChecked:!0}),i.jsxs("div",{className:"grid gap-1.5 leading-none",children:[i.jsx("label",{htmlFor:"notif-email",className:"font-medium cursor-pointer",children:"Par e-mail"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les notifications directement dans votre bote de rception."})]})]}),i.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[i.jsx(tr,{id:"notif-sms"}),i.jsxs("div",{className:"grid gap-1.5 leading-none",children:[i.jsx("label",{htmlFor:"notif-sms",className:"font-medium cursor-pointer",children:"Par SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes rapides sur votre tlphone."})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(H,{onClick:u,className:"w-full sm:w-auto",children:"Enregistrer les prfrences"})})]})]})},Cre=({project:e,projectStatus:t})=>{var f;const{currentUser:r,setCurrentUser:n,updateProspect:s}=Ve(),o=Oe(),a=((f=r==null?void 0:r.tags)==null?void 0:f.includes(e.type))||!1,l=a&&(t==="abandon"||t==="archive"),c=async()=>{if(r!=null&&r.id)try{const{error:d}=await k.from("project_infos").upsert({prospect_id:r.id,project_type:e.type,status:"actif",data:{}},{onConflict:"prospect_id,project_type"});if(d)throw d;await k.from("project_history").insert({prospect_id:r.id,project_type:e.type,event_type:"status",description:"Projet ractiv par le client"}),M({title:"Projet ractiv ! ",description:`Le projet "${e.clientTitle}" est de nouveau actif dans votre tableau de bord.`,className:"bg-green-500 text-white"}),setTimeout(()=>window.location.reload(),1e3)}catch(d){T.error("Erreur ractivation:",d),M({title:"Erreur",description:"Impossible de ractiver le projet.",variant:"destructive"})}},u=async()=>{if(a&&!l){o("/dashboard",{state:{openProjectType:e.type}});return}if(!(r!=null&&r.id)){M({title:"Erreur",description:"Vous devez tre connect pour ajouter un projet.",variant:"destructive"});return}try{const d=[...r.tags||[],e.type];if(await s({id:r.id,tags:d}),e.steps&&e.steps.length>0){const h=JSON.parse(JSON.stringify(e.steps));h[0].status="in_progress";const{data:m,error:g}=await k.from("prospects").select("organization_id").eq("id",r.id).single();if(g||!(m!=null&&m.organization_id)){T.error("Organization introuvable pour le prospect:",{prospectId:r.id,error:g==null?void 0:g.message});return}const{error:v}=await k.from("project_steps_status").upsert({prospect_id:r.id,project_type:e.type,organization_id:m.organization_id,steps:h,updated_at:new Date().toISOString()},{onConflict:"prospect_id,project_type"});v&&T.error(" Erreur initialisation steps:",v),await new Promise(x=>setTimeout(x,500))}n({...r,tags:d}),M({title:"Projet ajout avec succs ! ",description:`Le projet "${e.clientTitle}" est maintenant dans votre tableau de bord.`}),o("/dashboard",{state:{openProjectType:e.type}})}catch(d){T.error("Erreur ajout projet:",d),M({title:"Erreur",description:"Impossible d'ajouter le projet. Veuillez ressayer.",variant:"destructive"})}};return i.jsxs(ie.div,{className:"bg-white rounded-3xl shadow-soft overflow-hidden flex flex-col",whileHover:{y:-5},children:[i.jsx("div",{className:"h-48 w-full bg-gray-100 flex items-center justify-center",children:e.coverImage?i.jsx("img",{src:e.coverImage,alt:e.clientTitle,className:"w-full h-full object-cover"}):i.jsx(JC,{className:"h-16 w-16 text-gray-300"})}),i.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.clientTitle}),i.jsx("p",{className:"text-gray-600 text-sm flex-grow mb-6",children:e.clientDescription||"Ce nouveau projet est disponible. Ajoutez-le  votre tableau de bord pour en savoir plus."}),l?i.jsxs(H,{onClick:c,className:"w-full mt-auto rounded-xl bg-orange-500 hover:bg-orange-600 text-white",size:"lg",children:[i.jsx(Of,{className:"mr-2 h-4 w-4"})," Ractiver ce projet"]}):i.jsx(H,{onClick:u,className:`w-full mt-auto rounded-xl ${a?"bg-blue-500 hover:bg-blue-600 text-white":"gradient-green hover:opacity-90"}`,size:"lg",children:a?" Voir le projet":e.ctaText||" Ajouter ce projet"})]})]})},NS=()=>{const{projectsData:e,currentUser:t}=Ve(),[r,n]=p.useState({});p.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)||!(t!=null&&t.tags)||t.tags.length===0)return;const{data:a}=await k.from("project_infos").select("project_type, status").eq("prospect_id",t.id).in("project_type",t.tags);if(a){const l={};a.forEach(c=>{l[c.project_type]=c.status||"actif"}),n(l)}})()},[t]);const s=Object.values(e).filter(o=>o.isPublic);return i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Dcouvrez nos offres exclusives "}),i.jsx("p",{className:"text-gray-600 mt-2 max-w-2xl mx-auto",children:"Choisissez lopportunit qui vous correspond et suivez-la directement dans votre Tableau de bord."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(o=>i.jsx(Cre,{project:o,projectStatus:r[o.type]||"actif"},o.type))})]})},Pre=()=>{const e=Oe(),{setCurrentUser:t}=Ve(),[r,n]=p.useState("loading"),[s,o]=p.useState("Activation de votre compte...");return p.useEffect(()=>{(async()=>{try{const l=window.location.hash;if(!l||l.length===0){console.warn(" Aucun fragment trouv dans l'URL"),n("error"),o("Lien invalide. Veuillez demander un nouveau lien d'invitation.");return}const c=l.startsWith("#")?l.slice(1):l,u=new URLSearchParams(c),f=u.get("access_token"),d=u.get("refresh_token");if(!f){logger.error(" Pas d'access_token dans le fragment"),n("error"),o("Lien invalide ou expir. Veuillez demander un nouveau lien.");return}const{data:h,error:m}=await k.auth.setSession({access_token:f,refresh_token:d||""});if(m){logger.error(" Erreur setSession:",m),n("error"),o("Erreur lors de la connexion. Le lien a peut-tre expir.");return}window.history.replaceState({},document.title,window.location.pathname+window.location.search);const g=h.user;if(!g){n("error"),o("Erreur: utilisateur non trouv aprs authentification.");return}const{data:v,error:x}=await k.from("prospects").select("*").eq("email",g.email).is("user_id",null);if(x)throw logger.error("Erreur recherche prospect:",x),x;if(!v||v.length===0){const{data:_,error:S}=await k.from("prospects").select("*").eq("user_id",g.id).single();if(_){const E={id:_.id,userId:_.user_id,name:_.name,email:_.email,phone:_.phone,company:_.company_name,address:_.address,tags:_.tags||[],status:_.status,ownerId:_.owner_id,hasAppointment:_.has_appointment};t(E),n("success"),o("Connexion reussie !"),setTimeout(()=>{e("/dashboard")},1500);return}n("error"),o("Aucun compte trouve avec cet email. Contactez votre conseiller.");return}const y=v[0],{data:b,error:w}=await k.from("prospects").update({user_id:g.id}).eq("id",y.id).select().single();if(w)throw logger.error("Erreur mise a jour prospect:",w),w;const j={id:b.id,userId:b.user_id,name:b.name,email:b.email,phone:b.phone,company:b.company_name,address:b.address,tags:b.tags||[],status:b.status,ownerId:b.owner_id,hasAppointment:b.has_appointment};t(j),n("success"),o("Compte active avec succes ! Redirection..."),M({title:"Bienvenue !",description:"Votre compte a ete active avec succes.",className:"bg-green-500 text-white"}),setTimeout(()=>{e("/dashboard")},2e3)}catch(l){logger.error("Erreur activation:",l),n("error"),o("Une erreur est survenue. Veuillez reessayer.")}})()},[e,t]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[r==="loading"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"h-16 w-16 text-blue-500 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Activation en cours..."}),i.jsx("p",{className:"text-gray-600",children:s})]}),r==="success"&&i.jsxs(i.Fragment,{children:[i.jsx(Zx,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Activation reussie !"}),i.jsx("p",{className:"text-gray-600",children:s})]}),r==="error"&&i.jsxs(i.Fragment,{children:[i.jsx(XC,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur d'activation"}),i.jsx("p",{className:"text-gray-600 mb-4",children:s}),i.jsx("button",{onClick:()=>e("/"),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition",children:"Retour a l'accueil"})]})]})})},Tre=()=>{const e=Oe(),{setActiveAdminUser:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState("");p.useEffect(()=>{const _=window.location.hash,S=_.includes("access_token")||_.includes("type=invite");if(T.info(" ActivateAccountPage - Vrification du flow invitation",{hash:_.substring(0,50)+"...",isInviteFlow:S}),S){const{data:{subscription:E}}=k.auth.onAuthStateChange(async(P,C)=>{P==="SIGNED_IN"&&C?await b(C):P==="TOKEN_REFRESHED"&&C&&await b(C)}),N=setTimeout(async()=>{T.warn(" Timeout - vrification manuelle de la session");const{data:{session:P}}=await k.auth.getSession();P?await b(P):(T.error(" Pas de session aprs timeout"),v(!1),m(!1))},5e3);return()=>{E.unsubscribe(),clearTimeout(N)}}else w()},[]);const b=async _=>{try{const S=_.user;if(!S||!S.email){T.error(" Pas d'utilisateur dans la session"),v(!1),m(!1);return}const{data:E,error:N}=await k.from("users").select("email, name").eq("user_id",S.id).single();if(N||!E){T.error(" Utilisateur non trouv dans table users:",N),v(!1),m(!1);return}T.info(" Session valide pour:",E.email),y(E.email),v(!0),m(!1)}catch(S){T.error(" Erreur validation session:",S),v(!1),m(!1)}},w=async()=>{try{T.info(" Vrification de la session existante...");const{data:{session:_},error:S}=await k.auth.getSession();if(S||!_){T.error(" Pas de session active:",S),v(!1),m(!1);return}await b(_)}catch(_){T.error(" Erreur vrification session:",_),v(!1),m(!1)}},j=async _=>{if(_.preventDefault(),!r||!s){M({title:"Champs manquants",description:"Veuillez remplir tous les champs.",variant:"destructive"});return}if(r.length<6){M({title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}if(r!==s){M({title:"Mots de passe diffrents",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}d(!0);try{T.info(" Mise  jour du mot de passe...");const{data:S,error:E}=await k.auth.updateUser({password:r});if(E){T.error(" Erreur updateUser:",E),M({title:"Erreur",description:"Impossible de dfinir le mot de passe. Veuillez ressayer.",variant:"destructive"}),d(!1);return}const N=S.user;if(!N){M({title:"Erreur",description:"Erreur lors de la mise  jour du compte.",variant:"destructive"}),d(!1);return}const{data:P,error:C}=await k.from("users").select("*").eq("user_id",N.id).single();if(C||!P){T.error(" Erreur rcupration donnes user:",C),M({title:"Erreur",description:"Impossible de rcuprer les informations du compte.",variant:"destructive"}),d(!1);return}M({title:"Compte activ !",description:"Votre mot de passe a t dfini. Connexion en cours...",className:"bg-green-500 text-white"});const I={id:P.id,userId:P.user_id,name:P.name,email:P.email,role:P.role,phone:P.phone,avatarUrl:P.avatar_url,managerId:P.manager_id,organizationId:P.organization_id,accessRights:P.access_rights,createdAt:P.created_at,updatedAt:P.updated_at};t(I),setTimeout(()=>{e("/admin/pipeline")},1200)}catch(S){T.error("Erreur activation compte:",S),M({title:"Erreur",description:"Une erreur est survenue. Veuillez ressayer.",variant:"destructive"}),d(!1)}};return h?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[i.jsx(Me,{className:"h-16 w-16 text-blue-500 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vrification..."}),i.jsx("p",{className:"text-gray-600",children:"Veuillez patienter"})]})}):g?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center px-4",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(Zx,{className:"h-8 w-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Activation de votre compte"}),i.jsx("p",{className:"text-gray-600",children:"Bienvenue ! Dfinissez votre mot de passe pour activer votre compte professionnel."}),x&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Compte : ",i.jsx("strong",{children:x})]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Nouveau mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(me,{id:"password",type:a?"text":"password",placeholder:"Minimum 6 caractres",required:!0,value:r,onChange:_=>n(_.target.value),className:"h-12 pr-10"}),i.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:a?i.jsx(Ul,{className:"h-5 w-5"}):i.jsx(Vl,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(me,{id:"confirmPassword",type:c?"text":"password",placeholder:"Retapez votre mot de passe",required:!0,value:s,onChange:_=>o(_.target.value),className:"h-12 pr-10"}),i.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?i.jsx(Ul,{className:"h-5 w-5"}):i.jsx(Vl,{className:"h-5 w-5"})})]})]}),r&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-gray-600",children:"Force du mot de passe :"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=6?"bg-green-500":"bg-gray-200"}`}),i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=8?"bg-green-500":"bg-gray-200"}`}),i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=10&&/[A-Z]/.test(r)?"bg-green-500":"bg-gray-200"}`})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[r.length<6&&"Minimum 6 caractres requis",r.length>=6&&r.length<8&&"Acceptable",r.length>=8&&r.length<10&&"Bon",r.length>=10&&/[A-Z]/.test(r)&&"Excellent"]})]}),i.jsx(H,{type:"submit",disabled:f,className:"w-full h-12 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white text-lg font-semibold",children:f?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"mr-2 h-5 w-5 animate-spin"}),"Activation en cours..."]}):"Activer mon compte"})]})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Un problme ?"," ",i.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:underline font-medium",children:"Retour  la connexion"})]})})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex items-center justify-center px-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[i.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Lien invalide ou expir"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Ce lien d'activation n'est plus valide. Veuillez contacter votre administrateur pour recevoir une nouvelle invitation."}),i.jsx(H,{onClick:()=>e("/login"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Retour  la connexion"})]})})},kre=()=>{const e=Oe(),[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(!1),[u,f]=p.useState(!1),[d,h]=p.useState({companyName:"",adminEmail:"",adminName:"",adminPhone:""});p.useEffect(()=>{(async()=>{try{const{data:w,error:j}=await k.rpc("platform_list_organizations");if(j){console.error("[OrganizationsListPage] Error fetching organizations:",j),a(j.message);return}r(w||[])}catch(w){console.error("[OrganizationsListPage] Exception:",w),a(w.message)}finally{s(!1)}})()},[]);const m=b=>{e(`/platform/organizations/${b}`)},g=async b=>{if(b.preventDefault(),!d.companyName||!d.adminEmail||!d.adminName){M({title:"Erreur",description:"Le nom de l'organisation, l'email et le nom de l'administrateur sont requis",variant:"destructive"});return}try{f(!0);const w=await fetch("https://vvzxvtiyybilkswslqfn.supabase.co/functions/v1/platform_create_organization",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:d.companyName,adminEmail:d.adminEmail,adminName:d.adminName,adminPhone:d.adminPhone||null})}),j=await w.json();if(!w.ok)throw new Error(j.error||"Erreur lors de la cration");M({title:" Organisation cre !",description:"Un email d'invitation a t envoy  l'administrateur.",className:"bg-green-500 text-white"});const{data:_}=await k.rpc("platform_list_organizations");r(_||[]),c(!1),h({companyName:"",adminEmail:"",adminName:"",adminPhone:""})}catch(w){console.error("[Platform] Error creating organization:",w),M({title:"Erreur",description:w.message,variant:"destructive"})}finally{f(!1)}},v=(b,w)=>{navigator.clipboard.writeText(b).then(()=>{M({title:"Lien copi",description:`Le lien de connexion ${w} a t copi dans le presse-papiers`})}).catch(j=>{console.error("Failed to copy:",j),M({title:"Erreur",description:"Impossible de copier le lien",variant:"destructive"})})},x=b=>`https://evatime.fr/login?org=${b}`,y=b=>`https://evatime.fr/client-access?org=${b}`;return n?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-800 font-medium",children:"Erreur lors du chargement des organisations"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Organisations"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:[t.length," organisation",t.length!==1?"s":""," enregistre",t.length!==1?"s":""]})]}),i.jsxs(H,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[i.jsx(Ar,{className:"w-4 h-4"}),"Crer une organisation"]})]}),t.length===0?i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Aucune organisation trouve"})}):i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cre le"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Connexions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(b.id),children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(b.id),children:i.jsx("div",{className:"text-sm text-gray-600",children:b.slug})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(b.id),children:i.jsx("div",{className:"text-sm text-gray-600",children:new Date(b.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:w=>{w.stopPropagation(),v(x(b.slug),"PRO")},className:"px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors",title:"Copier le lien de connexion PRO",children:" PRO"}),i.jsx("button",{onClick:w=>{w.stopPropagation(),v(y(b.slug),"CLIENT")},className:"px-3 py-1.5 text-xs font-medium text-green-700 bg-green-50 border border-green-200 rounded hover:bg-green-100 transition-colors",title:"Copier le lien de connexion CLIENT",children:" CLIENT"})]})})]},b.id))})]})}),i.jsx(ih,{open:l,onOpenChange:c,children:i.jsxs(Oc,{children:[i.jsxs(Dc,{children:[i.jsx($c,{children:"Crer une nouvelle organisation"}),i.jsx(ah,{children:"Un email d'invitation sera envoy  l'administrateur pour dfinir son mot de passe."})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",children:"Nom de l'organisation *"}),i.jsx(me,{id:"companyName",placeholder:"Ex: Acme Corporation",value:d.companyName,onChange:b=>h({...d,companyName:b.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminEmail",children:"Email administrateur *"}),i.jsx(me,{id:"adminEmail",type:"email",placeholder:"admin@example.com",value:d.adminEmail,onChange:b=>h({...d,adminEmail:b.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminName",children:"Nom de l'administrateur *"}),i.jsx(me,{id:"adminName",placeholder:"Jean Dupont",value:d.adminName,onChange:b=>h({...d,adminName:b.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminPhone",children:"Tlphone (optionnel)"}),i.jsx(me,{id:"adminPhone",type:"tel",placeholder:"06 12 34 56 78",value:d.adminPhone,onChange:b=>h({...d,adminPhone:b.target.value}),disabled:u})]}),i.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:u,children:"Annuler"}),i.jsx(H,{type:"submit",disabled:u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-4 h-4 mr-2 animate-spin"}),"Cration..."]}):"Crer l'organisation"})]})]})]})})]})},Are=()=>{const{id:e}=sa(),t=Oe(),[r,n]=p.useState(null),[s,o]=p.useState([]),[a,l]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(!0),[h,m]=p.useState(null),[g,v]=p.useState(!1),[x,y]=p.useState(null),[b,w]=p.useState(!1),[j,_]=p.useState(""),[S,E]=p.useState(""),[N,P]=p.useState(!1),[C,I]=p.useState("");p.useState(!1);const[O,$]=p.useState(null),[L,V]=p.useState(null),[z,B]=p.useState(!1),A=async()=>{try{const{data:U,error:Z}=await k.rpc("platform_get_organization_detail",{p_org_id:e});if(Z){console.error("[OrganizationDetailPage] RPC error:",Z),m(Z.message);return}if(U!=null&&U.error){console.error("[OrganizationDetailPage] RPC returned error:",U.error),m(U.error);return}n(U.organization||null),o(U.domains||[]),l(U.settings||null),U.organization&&(_(U.organization.pricing_plan||""),E(U.organization.monthly_price_reference||""),I(U.organization.evatime_load!==null?String(U.organization.evatime_load):""),$(U.organization.evatime_load_estimated),V(U.organization.evatime_load_score));const{data:ce,error:_e}=await k.rpc("platform_get_org_kpis",{p_org_id:e});!_e&&ce&&!ce.error&&u(ce)}catch(U){console.error("[OrganizationDetailPage] Exception:",U),m(U.message)}finally{d(!1)}};p.useEffect(()=>{A()},[e]);const R=()=>{t("/platform")},D=U=>{y(U),v(!0)},F=async()=>{if(!x)return;w(!0);const U=x==="suspend"?"suspended":"active";try{const{data:Z,error:ce}=await k.rpc("platform_set_org_status",{p_org_id:e,p_status:U});if(ce){console.error("[OrganizationDetailPage] Status change RPC error:",ce),M({title:"Erreur",description:ce.message,variant:"destructive"});return}if(Z!=null&&Z.error){M({title:"Erreur",description:Z.error,variant:"destructive"});return}M({title:x==="suspend"?"Organisation suspendue":"Organisation ractive",description:`L'organisation a t ${x==="suspend"?"suspendue":"ractive"} avec succs.`}),await A()}catch(Z){console.error("[OrganizationDetailPage] Status change exception:",Z),M({title:"Erreur",description:Z.message,variant:"destructive"})}finally{w(!1),v(!1),y(null)}},q=async()=>{P(!0);try{const{data:U,error:Z}=await k.rpc("platform_update_org_pricing",{p_org_id:e,p_pricing_plan:j||null,p_monthly_price:S?parseInt(S,10):null});if(Z){console.error("[OrganizationDetailPage] Pricing update RPC error:",Z),M({title:"Erreur",description:Z.message,variant:"destructive"});return}if(U!=null&&U.error){M({title:"Erreur",description:U.error,variant:"destructive"});return}M({title:"Pricing mis  jour",description:"Les informations de pricing ont t enregistres."}),await A()}catch(U){console.error("[OrganizationDetailPage] Pricing update exception:",U),M({title:"Erreur",description:U.message,variant:"destructive"})}finally{P(!1)}},W=async()=>{B(!0);try{const{data:U,error:Z}=await k.rpc("platform_calculate_evatime_load",{p_org_id:e});if(Z){console.error("[OrganizationDetailPage] Calculate load RPC error:",Z),M({title:"Erreur",description:Z.message,variant:"destructive"});return}if(U!=null&&U.error){M({title:"Erreur",description:U.error,variant:"destructive"});return}$(U.load),V(U.score),M({title:"Charge recalcule",description:`Score: ${U.score}  Niveau: ${U.load}`})}catch(U){console.error("[OrganizationDetailPage] Calculate load exception:",U),M({title:"Erreur",description:U.message,variant:"destructive"})}finally{B(!1)}},te=U=>{switch(U){case 0:return{emoji:"",label:"Lger",color:"bg-green-100 text-green-800"};case 1:return{emoji:"",label:"Normal",color:"bg-yellow-100 text-yellow-800"};case 2:return{emoji:"",label:"Complexe",color:"bg-orange-100 text-orange-800"};case 3:return{emoji:"",label:"Critique",color:"bg-red-100 text-red-800"};default:return{emoji:"",label:"Non calcul",color:"bg-gray-100 text-gray-600"}}},le=(()=>{if(O!=null)return O;if(!c)return null;const U=(c.admins||0)*2+(c.prospects||0)+(c.forms_pending||0)*5;return U<=15?0:U<=40?1:U<=70?2:3})(),ne=(U,Z)=>{navigator.clipboard.writeText(U).then(()=>{M({title:"Lien copi",description:`Le lien de connexion ${Z} a t copi dans le presse-papiers`})}).catch(ce=>{console.error("Failed to copy:",ce),M({title:"Erreur",description:"Impossible de copier le lien",variant:"destructive"})})},ue=U=>`https://evatime.fr/login?org=${U}`,Y=U=>`https://evatime.fr/client-access?org=${U}`;return f?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):h||!r?i.jsxs("div",{children:[i.jsx("button",{onClick:R,className:"mb-4 text-sm text-gray-600 hover:text-gray-900",children:" Retour  la liste"}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-800 font-medium",children:"Erreur lors du chargement de l'organisation"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:h||"Organisation non trouve"})]})]}):i.jsxs("div",{children:[i.jsxs("button",{onClick:R,className:"mb-6 text-sm text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Retour  la liste"})]}),i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r.name}),r.status==="suspended"?i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:" Suspendue"}):i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:" Active"})]}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["ID: ",r.id]})]}),i.jsx("div",{children:r.status==="suspended"?i.jsx("button",{onClick:()=>D("reactivate"),disabled:b,className:"px-4 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:b?"En cours...":" Ractiver"}):i.jsx("button",{onClick:()=>D("suspend"),disabled:b,className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors disabled:opacity-50",children:b?"En cours...":" Suspendre"})})]})}),i.jsx(Lc,{open:g,onOpenChange:v,children:i.jsxs(ca,{children:[i.jsxs(ua,{children:[i.jsx(fa,{children:x==="suspend"?"Suspendre cette organisation ?":"Ractiver cette organisation ?"}),i.jsx(ha,{children:x==="suspend"?"Les utilisateurs de cette organisation ne pourront plus accder  la plateforme.":"Les utilisateurs de cette organisation pourront  nouveau accder  la plateforme."})]}),i.jsxs(da,{children:[i.jsx(ma,{disabled:b,children:"Annuler"}),i.jsx(pa,{onClick:F,disabled:b,className:x==="suspend"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:b?"En cours...":x==="suspend"?"Suspendre":"Ractiver"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Connexion  EVATIME"})}),i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 text-2xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Connexion PRO"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"text-xs bg-gray-100 px-3 py-2 rounded border border-gray-200 flex-1 break-all",children:ue(r.slug)}),i.jsx("button",{onClick:()=>ne(ue(r.slug),"PRO"),className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors whitespace-nowrap",children:"Copier"})]})]})]}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 text-2xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Connexion CLIENT"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"text-xs bg-gray-100 px-3 py-2 rounded border border-gray-200 flex-1 break-all",children:Y(r.slug)}),i.jsx("button",{onClick:()=>ne(Y(r.slug),"CLIENT"),className:"px-4 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded hover:bg-green-100 transition-colors whitespace-nowrap",children:"Copier"})]})]})]})]})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" KPIs Platform V1"})}),i.jsx("div",{className:"px-6 py-4",children:c?i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:c.admins}),i.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Admins"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:c.prospects}),i.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Prospects"})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:c.projects}),i.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Projets"})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-orange-700",children:c.forms_pending}),i.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Formulaires en attente"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center border border-gray-200",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-700",children:c.files}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Fichiers"})]}),i.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 text-center col-span-2 sm:col-span-3 lg:col-span-5",children:[i.jsx("p",{className:"text-sm font-medium text-teal-700",children:c.last_activity?new Date(c.last_activity).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Aucune activit"}),i.jsx("p",{className:"text-xs text-teal-600 mt-1",children:"Dernire activit"})]})]}):i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Chargement des KPIs..."})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Pricing (interne)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-700",children:" Indicateur interne  aucune facturation automatique"})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan tarifaire"}),i.jsxs("select",{value:j,onChange:U=>_(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:"-- Non dfini --"}),i.jsx("option",{value:"standard",children:"Standard"}),i.jsx("option",{value:"custom",children:"Custom"}),i.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix mensuel de rfrence ()"}),i.jsx("input",{type:"number",value:S,onChange:U=>E(U.target.value),placeholder:"490 / 1500 / 3000 / 10000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:q,disabled:N,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:N?"Enregistrement...":"Enregistrer le pricing"})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Charge EVATIME (auto)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-700",children:"Calcule automatiquement  partir de l'activit relle."})}),i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:te(le).emoji}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${te(le).color}`,children:te(le).label})]}),c&&i.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",(c.admins||0)*2+(c.prospects||0)+(c.forms_pending||0)*5]})]}),i.jsx("button",{onClick:W,disabled:z,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:z?"Calcul en cours...":" Recalculer"})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Prix recommand (indicatif)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-gray-600",children:"Bas sur la charge observe. Aucun changement automatique."})}),i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:i.jsx("p",{className:"text-lg font-semibold text-blue-800",children:(()=>({0:" 490  / mois",1:" 1 500  / mois",2:" 3 000  / mois",3:"Sur engagement"})[le]||"Non calcul")()})})}),(()=>{const U=parseInt(S,10)||0,Z=le,_e={0:490,1:1500,2:3e3,3:5e3}[Z];return Z==null||U===0||!_e?null:Math.abs(U-_e)/_e>.5?i.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("p",{className:"text-sm text-orange-700",children:"Prix actuel trs diffrent de la charge observe."})]}):null})()]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organisation"})}),i.jsx("div",{className:"px-6 py-4",children:i.jsxs("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nom"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.name})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Slug"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.slug})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Cre le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(r.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Mise  jour le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(r.updated_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Domaines (",s.length,")"]})}),i.jsx("div",{className:"px-6 py-4",children:s.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun domaine configur"}):i.jsx("div",{className:"space-y-3",children:s.map(U=>i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:U.domain}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Cr le ",new Date(U.created_at).toLocaleDateString("fr-FR")]})]}),U.is_primary&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Principal"})]},U.id))})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Paramtres"})}),i.jsx("div",{className:"px-6 py-4",children:a?i.jsxs("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nom de marque"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.brand_name||"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Logo URL"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900 break-all",children:a.logo_url||"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Couleur primaire"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.primary_color?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:a.primary_color}}),i.jsx("span",{children:a.primary_color})]}):"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Couleur secondaire"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.secondary_color?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:a.secondary_color}}),i.jsx("span",{children:a.secondary_color})]}):"-"})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Cr le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(a.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}):i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun paramtre configur"})})]})]})]})},Rre=()=>{const e=Oe(),[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),[l,c]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const{data:{user:d},error:h}=await k.auth.getUser();if(h||!d){c(!1);return}const{data:m,error:g}=await k.from("platform_admins").select("user_id, email").eq("user_id",d.id).single();!g&&m?e("/platform/organizations",{replace:!0}):c(!1)}catch(d){console.error("[PlatformLogin] Error checking auth:",d),c(!1)}})()},[e]);const u=async f=>{if(f.preventDefault(),!t.trim()||!/\S+@\S+\.\S+/.test(t)){M({title:"Email invalide",description:"Veuillez saisir une adresse email valide.",variant:"destructive"});return}if(!n.trim()){M({title:"Mot de passe requis",description:"Veuillez saisir votre mot de passe.",variant:"destructive"});return}try{a(!0);const{data:d,error:h}=await k.auth.signInWithPassword({email:t.trim(),password:n.trim()});if(h){console.error("[PlatformLogin] Auth error:",h),M({title:"chec de connexion",description:h.message==="Invalid login credentials"?"Email ou mot de passe incorrect.":h.message,variant:"destructive"}),a(!1);return}if(!d.user)throw new Error("Aucun utilisateur retourn aprs connexion");const{data:m,error:g}=await k.from("platform_admins").select("user_id, email").eq("user_id",d.user.id).single();if(g||!m){console.error("[PlatformLogin] User not in platform_admins:",g),await k.auth.signOut(),M({title:"Accs plateforme refus",description:"Votre compte n'est pas autoris  accder  la plateforme EVATIME.",variant:"destructive"}),a(!1);return}M({title:"Connexion russie",description:`Bienvenue ${m.email}`,className:"bg-green-500 text-white"}),e("/platform/organizations",{replace:!0})}catch(d){console.error("[PlatformLogin] Exception:",d),M({title:"Erreur",description:d.message||"Une erreur est survenue lors de la connexion.",variant:"destructive"}),a(!1)}};return l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white font-medium",children:"Vrification de la session..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:i.jsx(qg,{className:"w-8 h-8 text-gray-900"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"EVATIME Platform"}),i.jsx("p",{className:"text-gray-400",children:"Accs rserv aux administrateurs plateforme"})]}),i.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1,duration:.5},className:"bg-white rounded-lg shadow-xl p-8",children:[i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",className:"text-gray-700 font-medium",children:"Adresse email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(me,{id:"email",type:"email",value:t,onChange:f=>r(f.target.value),placeholder:"admin@evatime.com",className:"pl-10 h-12 border-gray-300 focus:border-gray-900 focus:ring-gray-900",disabled:o,autoComplete:"email",autoFocus:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",className:"text-gray-700 font-medium",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(If,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(me,{id:"password",type:"password",value:n,onChange:f=>s(f.target.value),placeholder:"",className:"pl-10 h-12 border-gray-300 focus:border-gray-900 focus:ring-gray-900",disabled:o,autoComplete:"current-password"})]})]}),i.jsx(H,{type:"submit",disabled:o,className:"w-full h-12 bg-gray-900 hover:bg-gray-800 text-white font-semibold text-base",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"mr-2 h-5 w-5 animate-spin"}),"Connexion en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(qg,{className:"mr-2 h-5 w-5"}),"Se connecter"]})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Accs restreint aux utilisateurs avec le rle"," ",i.jsx("span",{className:"font-mono font-semibold text-gray-700",children:"platform_admin"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-400",children:[" ",new Date().getFullYear()," EVATIME Platform - Tous droits rservs"]})})]})})},Ire=()=>{const e=Oe(),[t,r]=p.useState(!0),[n,s]=p.useState(null),[o,a]=p.useState({lowPricing:[],churnRisk:[]}),[l,c]=p.useState(""),[u,f]=p.useState([]),d=u.filter(x=>{var b,w;if(!l.trim())return!0;const y=l.toLowerCase();return((b=x.name)==null?void 0:b.toLowerCase().includes(y))||((w=x.slug)==null?void 0:w.toLowerCase().includes(y))});p.useEffect(()=>{(async()=>{try{const{data:y,error:b}=await k.rpc("platform_get_home_kpis");if(b){console.error("[PlatformHomePage] RPC error:",b),M({title:"Erreur",description:b.message,variant:"destructive"});return}if(y!=null&&y.error){console.error("[PlatformHomePage] RPC returned error:",y.error),M({title:"Erreur",description:y.error,variant:"destructive"});return}s({orgsActive:y.orgs_active||0,orgsSuspended:y.orgs_suspended||0,revenueEstimate:y.revenue_estimate||0});const w=y.orgs_data||[];f(w);const j=E=>{if(E.evatime_load_estimated!==null&&E.evatime_load_estimated!==void 0)return E.evatime_load_estimated;const N=(E.users_count||0)*2+(E.prospects_count||0);return N<=15?0:N<=40?1:N<=70?2:3},_=w.filter(E=>{const N=E.monthly_price_reference||0,P=j(E);return N>0&&N<1500&&P>=2}),S=w.filter(E=>{const N=E.monthly_price_reference||0,P=j(E);return N>=1500&&P<=1});a({lowPricing:_,churnRisk:S})}catch(y){console.error("[PlatformHomePage] Exception:",y)}finally{r(!1)}})()},[]);const h=x=>{switch(x){case 0:return{emoji:"",label:"Lger"};case 1:return{emoji:"",label:"Normal"};case 2:return{emoji:"",label:"Complexe"};case 3:return{emoji:"",label:"Critique"};default:return{emoji:"",label:"-"}}},m=x=>{if(x.evatime_load_estimated!==null&&x.evatime_load_estimated!==void 0)return x.evatime_load_estimated;const y=(x.users_count||0)*2+(x.prospects_count||0);return y<=15?0:y<=40?1:y<=70?2:3},g=x=>{switch(x){case 0:return{value:490,label:"490 "};case 1:return{value:1500,label:"1 500 "};case 2:return{value:3e3,label:"3 000 "};case 3:return{value:5e3,label:"5 000 +"};default:return{value:0,label:"-"}}},v=x=>{const y=x.monthly_price_reference||0,b=m(x),w=g(b).value;return!y||!w?"neutral":y<w*.7?"under":y>w*1.5?"over":"ok"};return t?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Platform Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Vue d'ensemble de l'activit EVATIME"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(n==null?void 0:n.orgsActive)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Organisations actives"})]})]})}),i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(n==null?void 0:n.orgsSuspended)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Organisations suspendues"})]})]})}),i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[((n==null?void 0:n.revenueEstimate)||0).toLocaleString("fr-FR")," "]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Revenu mensuel estim"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[i.jsxs("div",{className:"px-6 py-4 bg-orange-50 border-b border-orange-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:" Opportunits d'augmentation"}),i.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"EVATIME travaille beaucoup pour ces clients. Le prix actuel est infrieur  la charge observe."})]}),i.jsx("div",{className:"px-6 py-4",children:o.lowPricing.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun signal"}):i.jsx("ul",{className:"space-y-2",children:o.lowPricing.slice(0,5).map(x=>{var y;return i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>e(`/platform/organizations/${x.id}`),className:"text-sm text-blue-600 hover:underline",children:x.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:[((y=x.monthly_price_reference)==null?void 0:y.toLocaleString("fr-FR"))||0,"   ",x.prospects_count," prospects"]})]},x.id)})})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-red-800",children:" Clients  risque (valeur perue)"}),i.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Ces clients paient cher mais utilisent peu EVATIME. Ils peuvent ne plus percevoir la valeur."})]}),i.jsx("div",{className:"px-6 py-4",children:o.churnRisk.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun signal"}):i.jsx("ul",{className:"space-y-2",children:o.churnRisk.slice(0,5).map(x=>{var y;return i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>e(`/platform/organizations/${x.id}`),className:"text-sm text-blue-600 hover:underline",children:x.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:[((y=x.monthly_price_reference)==null?void 0:y.toLocaleString("fr-FR"))||0,"   ",x.prospects_count," prospects"]})]},x.id)})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organisations"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[u.length," organisation",u.length>1?"s":""," enregistre",u.length>1?"s":""]})]}),i.jsxs("button",{onClick:()=>e("/platform/organizations?action=create"),className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"+"})," Crer une organisation"]})]}),i.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:i.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value),placeholder:"Rechercher par nom, slug...",className:"w-full max-w-md px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nom"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Charge"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actuel"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Recommand"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Prospects"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Connexions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:l?"Aucune organisation trouve":"Aucune organisation"})}):d.map(x=>i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>e(`/platform/organizations/${x.id}`),children:[i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("span",{className:"font-medium text-gray-900",children:x.name}),i.jsx("span",{className:"ml-2 text-xs text-gray-400",children:x.slug})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?" Actif":" Suspendu"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{title:`Score estim: ${(x.users_count||0)*2+(x.prospects_count||0)}`,children:h(m(x)).emoji}),i.jsx("span",{className:"text-xs text-gray-500",children:h(m(x)).label})]})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:x.monthly_price_reference?i.jsxs("span",{className:`font-medium ${v(x)==="under"?"text-orange-600":v(x)==="over"?"text-red-600":"text-gray-900"}`,children:[x.monthly_price_reference.toLocaleString("fr-FR")," "]}):i.jsx("span",{className:"text-gray-400 italic",children:"Non dfini"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx("span",{className:"text-blue-600 font-medium",children:g(m(x)).label})}),i.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:x.prospects_count||0}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex gap-2",onClick:y=>y.stopPropagation(),children:[i.jsx("button",{onClick:()=>window.open(`https://evatime.fr/admin?org=${x.slug}`,"_blank"),className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-lg hover:bg-green-200 transition-colors",children:" PRO"}),i.jsx("button",{onClick:()=>window.open(`https://evatime.fr/dashboard?org=${x.slug}`,"_blank"),className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-200 transition-colors",children:" CLIENT"})]})})]},x.id))})]})})]})]})},Im=({icon:e,title:t,description:r,badgeText:n,delay:s})=>i.jsxs(ie.div,{className:"bg-white border border-[#eef1f4] rounded-2xl shadow-card p-6 flex flex-col",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:s},children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:[e," ",t]}),i.jsx("p",{className:"text-gray-600 flex-grow",children:r}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs font-medium px-3 py-1.5 rounded-full",children:n})})]}),Ore=({isOpen:e,onOpenChange:t})=>{const r=Oe(),{setActiveAdminUser:n}=Ve(),[s,o]=p.useState(""),[a,l]=p.useState(""),c=async f=>{f.preventDefault();try{const{data:d,error:h}=await k.auth.signInWithPassword({email:s,password:a});if(h){M({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"});return}const{data:m,error:g}=await k.from("users").select("*").eq("user_id",d.user.id).single();if(g||!m){logger.error(" Erreur dtaille:",g),M({title:"Erreur",description:`Compte professionnel introuvable. ${(g==null?void 0:g.message)||""}`,variant:"destructive"}),await k.auth.signOut();return}M({title:"Connexion russie !",description:"Redirection vers l'espace pro...",className:"bg-green-500 text-white"});const v={id:m.id,userId:m.user_id,name:m.name,email:m.email,role:m.role,phone:m.phone,avatarUrl:m.avatar_url,managerId:m.manager_id,accessRights:m.access_rights,createdAt:m.created_at,updatedAt:m.updated_at};n(v),t(!1),setTimeout(()=>{window.location.href="/admin"},500)}catch(d){logger.error("Pro login error:",d),M({title:"Erreur",description:"Une erreur est survenue lors de la connexion.",variant:"destructive"})}},u=()=>{r("/reset-password")};return i.jsx(ih,{open:e,onOpenChange:t,children:i.jsxs(Oc,{className:"sm:max-w-md",children:[i.jsx(Dc,{children:i.jsx($c,{className:"text-2xl font-bold text-center",children:"Connexion Espace Pro"})}),i.jsxs("form",{onSubmit:c,className:"space-y-6 px-4 py-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsx(me,{id:"email",type:"email",placeholder:"votre@email.com",required:!0,value:s,onChange:f=>o(f.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(me,{id:"password",type:"password",placeholder:"********",required:!0,value:a,onChange:f=>l(f.target.value)})]}),i.jsx(H,{type:"submit",className:"w-full gradient-green text-white text-lg py-6",children:"Se connecter"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:u,className:"text-sm text-blue-600 hover:underline",children:"Mot de passe oubli ?"})})]})]})})},CS=()=>{const e=Oe(),[t,r]=p.useState(!1),{slugUser:n}=sa();p.useEffect(()=>{n&&sessionStorage.setItem("affiliateUser",n)},[n]);const s=()=>{e("/login")},o=()=>{e("/client-access")},a=n?`/inscription/${n}`:"/inscription";return i.jsxs("div",{className:"bg-gray-50 relative",children:[i.jsx("header",{className:"absolute top-0 right-0 p-4 md:p-6 z-20",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(H,{onClick:s,className:"gradient-green text-white shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Espace Pro"}),i.jsx(H,{onClick:o,className:"gradient-blue text-white shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Espace Client"})]})}),i.jsx(Ore,{isOpen:t,onOpenChange:r}),i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4",children:i.jsxs("div",{className:"relative w-full max-w-4xl",children:[i.jsxs(ie.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.7,ease:"easeOut"},className:"relative z-10 space-y-6",children:[i.jsxs(ie.h1,{className:"text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:["Gagnez ",i.jsx("span",{className:"text-green-600",children:"35% "})," sur votre lectricit, garantis entre 5 et 10 ans "]}),i.jsx(ie.h2,{className:"text-4xl md:text-5xl font-extrabold text-gray-800 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:"grce  une centrale solaire  ct de chez vous "}),i.jsx(ie.p,{className:"max-w-2xl mx-auto text-lg text-gray-600",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5}}),i.jsxs(ie.div,{className:"flex flex-col md:flex-row items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[i.jsx(uo,{to:a,children:i.jsx(H,{size:"lg",className:"gradient-green text-white px-8 py-6 rounded-2xl shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105 text-lg font-semibold",children:"Je dmarre mon projet"})}),i.jsx("a",{href:"#comment-ca-marche",className:"mt-3 md:mt-0 md:ml-4 text-base font-medium text-[#1976D2] hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded-md",children:"Comment a marche ?"})]})]}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/4 -translate-y-1/4 w-96 h-96 bg-green-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob animation-delay-2000"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-3/4 -translate-y-3/4 w-96 h-96 bg-yellow-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob animation-delay-4000"})]})}),i.jsx("section",{id:"comment-ca-marche",className:"py-16 px-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[i.jsx(ie.h2,{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"Comment a marche ?"}),i.jsx(ie.p,{className:"max-w-3xl mx-auto text-lg text-gray-600 mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:"Un systme simple et transparent qui permet de consommer llectricit produite par une centrale solaire locale, avec des conomies garanties."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(Im,{icon:"",title:"Producteur",description:"Centrale solaire photovoltaque qui produit de llectricit verte.",badgeText:" Production locale dnergie renouvelable",delay:.3}),i.jsx(Im,{icon:"",title:"PMO",description:"Association qui gre et rpartit lnergie de manire quitable.",badgeText:" Gestion transparente et bnfique pour tous",delay:.4}),i.jsx(Im,{icon:"",title:"Consommateurs",description:"Particuliers et entreprises qui bnficient dune lectricit moins chre.",badgeText:" Jusqu 40% dconomies sur la facture",delay:.5})]})]})}),i.jsx("style",{jsx:"true",children:`
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
      `})]})},Dre=()=>{const e=Oe(),t=yr(),{projectsData:r,authLoading:n,currentUser:s}=Ve(),{organizationId:o,organizationName:a}=nn();p.useState("");const[l,c]=p.useState("");p.useState([]);const[u,f]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(null);p.useEffect(()=>{const x=sessionStorage.getItem("org_suspended_message");x&&(g(x),sessionStorage.removeItem("org_suspended_message"),M({title:"Organisation suspendue",description:x,variant:"destructive",duration:1e4}))},[]),p.useEffect(()=>{s&&e("/dashboard")},[s,e]),p.useEffect(()=>{var x;(x=t.state)!=null&&x.email&&(c(t.state.email),M({title:" Presque termin !",description:"Cliquez sur 'Recevoir le lien' pour accder  votre espace.",className:"bg-blue-500 text-white"}))},[t.state]),p.useMemo(()=>!r||Object.keys(r).length===0?[]:Object.values(r).filter(x=>x&&x.isPublic).map(x=>({id:x.type,label:x.clientTitle||x.title,icon:x.icon||"",color:x.color})),[r]);const v=async x=>{if(x.preventDefault(),!l.trim()||!/\S+@\S+\.\S+/.test(l)){M({title:"Email invalide",description:"Veuillez saisir une adresse email valide.",variant:"destructive"});return}if(!o){M({title:"Organisation non identifie",description:"Impossible de dterminer l'organisation. Veuillez ressayer.",variant:"destructive"});return}try{f(!0);const{data:y,error:b}=await k.rpc("check_prospect_exists_in_org",{p_email:l.trim(),p_organization_id:o});if(b)throw b;if(!y){M({title:"Compte introuvable",description:`Aucun compte client trouv avec cet email chez ${a||"cette organisation"}. Veuillez vous inscrire d'abord.`,variant:"destructive"}),f(!1);return}const w=`${window.location.origin}/dashboard`,{error:j}=await k.auth.signInWithOtp({email:l.trim(),options:{shouldCreateUser:!0,emailRedirectTo:w}});if(j)throw j;h(!0),M({title:" Email envoy !",description:"Consultez votre bote mail pour accder  votre espace.",className:"bg-green-500 text-white"})}catch(y){logger.error("Error sending magic link:",y),M({title:"Erreur",description:y.message||"Impossible d'envoyer le lien. Veuillez ressayer.",variant:"destructive"})}finally{f(!1)}};return n||!r||Object.keys(r).length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Me,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):m?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-100 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-4xl",children:""})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Accs suspendu"}),i.jsx("p",{className:"text-gray-600 mb-6",children:m}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})}):d?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx(Af,{className:"w-20 h-20 text-green-500 mx-auto"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous vous avons envoy un lien scuris  ",i.jsx("strong",{children:l}),".",i.jsx("br",{}),i.jsx("br",{}),"Cliquez sur le lien dans l'email pour accder  votre espace client."]}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Connexion Client"}),i.jsx("p",{className:"text-gray-600",children:"Recevez un lien scuris pour accder  votre espace"})]}),i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Votre adresse email"}),i.jsxs("div",{className:"relative mt-2",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"email",type:"email",placeholder:"jean.dupont@email.com",value:l,onChange:x=>c(x.target.value),className:"pl-10",disabled:u})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Ou continuer avec"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(H,{type:"button",variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[i.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),i.jsxs(H,{type:"button",variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple"]})]}),i.jsx("p",{className:"text-xs text-center text-gray-500",children:"Connexion sociale bientt disponible"})]}),i.jsx(H,{type:"submit",className:"w-full gradient-blue text-white py-6 text-lg font-semibold",disabled:u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Recevoir mon lien scuris"}),i.jsx("p",{className:"text-xs text-center text-gray-500",children:"Un lien unique vous sera envoy par email pour accder  votre espace en toute scurit."})]}),i.jsxs("div",{className:"mt-6 text-center space-y-2",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Pas encore de compte ?"," ",i.jsx("button",{onClick:()=>e("/inscription"),className:"text-blue-600 font-medium hover:underline",children:"Crer un compte"})]}),i.jsx("button",{onClick:()=>e("/"),className:"text-sm text-gray-500 hover:underline block mx-auto",children:" Retour  l'accueil"})]})]})})},$re=()=>{const e=Oe(),{setActiveAdminUser:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(null);p.useEffect(()=>{const h=sessionStorage.getItem("org_suspended_message");h&&(u(h),sessionStorage.removeItem("org_suspended_message"),M({title:"Organisation suspendue",description:h,variant:"destructive",duration:1e4}))},[]);const f=async h=>{h.preventDefault(),l(!0);try{const{data:m,error:g}=await k.auth.signInWithPassword({email:r,password:s});if(g){M({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}),l(!1);return}const{data:v,error:x}=await k.from("users").select("*").eq("user_id",m.user.id).single();if(x||!v){T.error(" Erreur dtaille:",x),M({title:"Erreur",description:`Compte professionnel introuvable. ${(x==null?void 0:x.message)||""}`,variant:"destructive"}),await k.auth.signOut(),l(!1);return}if(v.organization_id){const{data:b,error:w}=await k.rpc("platform_get_org_status",{p_org_id:v.organization_id});if(!w&&(b==null?void 0:b.status)==="suspended"){await k.auth.signOut(),M({title:"Organisation suspendue",description:"Votre organisation est temporairement suspendue. Contactez le support.",variant:"destructive",duration:1e4}),l(!1);return}}M({title:"Connexion russie !",description:"Chargement de votre espace...",className:"bg-green-500 text-white"});const y={id:v.id,userId:v.user_id,name:v.name,email:v.email,role:v.role,phone:v.phone,avatarUrl:v.avatar_url,managerId:v.manager_id,accessRights:v.access_rights,createdAt:v.created_at,updatedAt:v.updated_at};t(y),setTimeout(()=>{e("/admin/pipeline")},1200)}catch(m){T.error("Pro login error:",m),M({title:"Erreur",description:"Une erreur est survenue lors de la connexion.",variant:"destructive"}),l(!1)}},d=()=>{e("/reset-password")};return c?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex flex-col items-center justify-center px-4",children:i.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-4xl",children:""})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Accs suspendu"}),i.jsx("p",{className:"text-gray-600 mb-6",children:c}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex flex-col items-center justify-center px-4",children:[i.jsxs("button",{onClick:()=>e("/"),className:"absolute top-6 left-6 text-gray-600 hover:text-gray-900 flex items-center gap-2 transition-colors",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Retour  l'accueil"})]}),i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Espace Pro"}),i.jsx("p",{className:"text-gray-600",children:"Connectez-vous  votre compte professionnel"})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email professionnel"}),i.jsx(me,{id:"email",type:"email",placeholder:"votre@email.com",required:!0,value:r,onChange:h=>n(h.target.value),className:"h-12"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(me,{id:"password",type:"password",placeholder:"********",required:!0,value:s,onChange:h=>o(h.target.value),className:"h-12"})]}),i.jsx(H,{type:"submit",disabled:a,className:"w-full h-12 gradient-green text-white text-lg font-semibold",children:a?"Connexion...":"Se connecter"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:d,className:"text-sm text-blue-600 hover:underline",children:"Mot de passe oubli ?"})})]})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Vous tes un client ?"," ",i.jsx("button",{onClick:()=>e("/client-access"),className:"text-blue-600 hover:underline font-medium",children:"Accdez  votre espace client"})]})})]})]})};function pD({organizationId:e=null,enabled:t=!0}={}){const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useRef(!1),u=p.useRef(null);p.useEffect(()=>{!t||!e||u.current!==e&&(u.current=e,f(e))},[e,t]),p.useEffect(()=>{if(!t||!e)return;const x=k.channel(`project-templates-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_templates",filter:`organization_id=eq.${e}`},y=>{var w;if(c.current){c.current=!1;return}if((w=y.new)!=null&&w.organization_id&&y.new.organization_id!==e)return;const b=j=>({...j,clientTitle:j.client_title,isPublic:j.is_public,coverImage:j.image_url,clientDescription:j.client_description,ctaText:j.cta_text});y.eventType==="INSERT"?n(j=>j.find(S=>S.id===y.new.id)?j:[...j,b(y.new)]):y.eventType==="UPDATE"?n(j=>j.map(_=>_.id===y.new.id?b(y.new):_)):y.eventType==="DELETE"&&n(j=>j.filter(_=>_.id!==y.old.id))}).subscribe();return()=>{k.removeChannel(x)}},[e]);const f=async x=>{try{o(!0),l(null);const{data:y,error:b}=await k.rpc("get_project_templates_for_org",{p_organization_id:x});if(b)throw b;const w=(Array.isArray(y)?y:[]).map(j=>({...j,clientTitle:j.client_title,isPublic:j.is_public,coverImage:j.image_url,clientDescription:j.client_description,ctaText:j.cta_text}));w.sort((j,_)=>(j.type||"").localeCompare(_.type||"")),n(w)}catch(y){T.error("Erreur fetch project templates:",{error:y.message}),l(y.message)}finally{o(!1)}};return{projectTemplates:r,loading:s,error:a,addTemplate:async x=>{if(!e)throw new Error("organization_id requis pour crer un template");try{c.current=!0;const y={...x,organization_id:e},{data:b,error:w}=await k.from("project_templates").insert([y]).select().single();if(w)throw w;const j={...b,clientTitle:b.client_title,isPublic:b.is_public,coverImage:b.image_url,clientDescription:b.client_description,ctaText:b.cta_text};return n(_=>[..._,j]),j}catch(y){throw T.error("Erreur cration template:",{error:y.message}),c.current=!1,y}},updateTemplate:async(x,y)=>{try{c.current=!0;const{data:b,error:w}=await k.from("project_templates").update(y).eq("id",x).select().single();if(w)throw w;const j={...b,clientTitle:b.client_title,isPublic:b.is_public,coverImage:b.image_url,clientDescription:b.client_description,ctaText:b.cta_text};return n(_=>_.map(S=>S.id===x?j:S)),j}catch(b){throw T.error("Erreur modification template:",{error:b.message}),c.current=!1,b}},deleteTemplate:async x=>{try{c.current=!0;const{error:y}=await k.from("project_templates").delete().eq("id",x);if(y)throw y;n(b=>b.filter(w=>w.id!==x))}catch(y){throw T.error("Erreur suppression template:",{error:y.message}),c.current=!1,y}},getTemplateByType:x=>r.find(y=>y.type===x),getPublicTemplates:()=>r.filter(x=>x.is_public===!0),refresh:f}}const PS=()=>{const e=Oe(),{slugUser:t}=sa(),{currentUser:r,activeAdminUser:n,setActiveAdminUser:s}=Ve(),{organizationId:o}=nn(),{projectTemplates:a,loading:l}=pD({organizationId:o}),[c,u]=p.useState([]),[f,d]=p.useState({name:"",email:""}),[h,m]=p.useState({}),[g,v]=p.useState({id:null,name:null}),[x,y]=p.useState(!1),[b,w]=p.useState(!1);p.useEffect(()=>{localStorage.removeItem("activeAdminUser"),localStorage.removeItem("adminUser"),localStorage.removeItem("users"),n&&s(null)},[n,s]);const j=p.useMemo(()=>!a||a.length===0?[]:a.filter(P=>P.isPublic||P.is_public).map(P=>({id:P.type,label:P.clientTitle||P.client_title,icon:P.icon})),[a]);p.useEffect(()=>{r&&(M({title:"Vous tes dj connect",description:"Redirection vers votre espace client...",variant:"destructive"}),setTimeout(()=>e("/dashboard"),2e3))},[r,e]),p.useEffect(()=>{const P=t||sessionStorage.getItem("affiliateUser");P&&k.from("users").select("id, name, affiliate_slug").eq("affiliate_slug",P).single().then(({data:C,error:I})=>{C&&!I?v({id:C.id,name:C.name}):console.error(" Commercial non trouv pour le slug:",P,I)})},[t]);const _=P=>{u(C=>C.includes(P)?C.filter(I=>I!==P):[...C,P])},S=P=>{const{id:C,value:I}=P.target;d(O=>({...O,[C]:I}))},E=()=>{const P={};return f.name||(P.name="Le nom complet est requis."),f.email?/\S+@\S+\.\S+/.test(f.email)||(P.email="L'adresse e-mail est invalide."):P.email="L'adresse e-mail est requise.",m(P),Object.keys(P).length===0},N=async P=>{if(P.preventDefault(),!!E()){if(c.length===0){M({title:"Slection requise",description:"Veuillez slectionner au moins un projet.",variant:"destructive"});return}try{y(!0);const C=[...new Set(c)],{data:I,error:O}=await k.rpc("check_prospect_exists_in_org",{p_email:f.email.trim(),p_organization_id:o});if(O){console.error("Error checking prospect:",O),M({title:"Erreur",description:"Impossible de vrifier l'email. Ressayez.",variant:"destructive"}),y(!1);return}if(I){M({title:"Compte existant",description:"Un compte existe dj avec cet email dans cette organisation. Connectez-vous plutt.",variant:"destructive"}),y(!1);return}const{data:$,error:L}=await k.rpc("create_affiliated_prospect",{p_name:f.name,p_email:f.email.trim(),p_phone:null,p_company:null,p_address:"",p_affiliate_slug:t||null,p_tags:C,p_status:null,p_host:window.location.hostname});if(L)throw console.error(" Erreur cration prospect:",L),L;const V=`${window.location.origin}/dashboard`,{error:z}=await k.auth.signInWithOtp({email:f.email.trim(),options:{shouldCreateUser:!0,emailRedirectTo:V}});if(z)throw z;sessionStorage.removeItem("affiliateUser"),w(!0),M({title:" Compte cr !",description:"Un email vous a t envoy. Cliquez sur le lien pour accder  votre espace.",className:"bg-green-500 text-white",duration:5e3})}catch(C){M({title:"Erreur",description:C.message||"Une erreur est survenue lors de l'inscription.",variant:"destructive"})}finally{y(!1)}}};return b?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-lg bg-white p-8 rounded-2xl shadow-soft text-center",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Zr,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Inscription russie !"}),i.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Un email avec un lien de connexion vous a t envoy  :"}),i.jsx("p",{className:"text-xl font-semibold text-blue-600 mb-6",children:f.email}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:[" ",i.jsx("strong",{children:"Vrifiez votre bote mail"})," et cliquez sur le lien pour accder  votre espace client."]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Le lien est valide pendant 60 minutes."})]})]}),i.jsx(H,{onClick:()=>e("/client-access"),className:"w-full gradient-blue text-white",children:"Retour  la connexion"})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg bg-white p-8 rounded-2xl shadow-soft",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-2",children:"Choisissez vos projets"}),i.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Commencez par slectionner les projets qui vous intressent."}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsx("div",{className:"space-y-4",children:j.map((P,C)=>i.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*(C+1)},children:i.jsxs(Q,{htmlFor:P.id,className:`flex items-center space-x-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${c.includes(P.id)?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[i.jsx(tr,{id:P.id,checked:c.includes(P.id),onCheckedChange:()=>_(P.id)}),i.jsxs("span",{className:"text-base font-medium text-gray-800 flex items-center",children:[i.jsx("span",{className:"mr-2",children:P.icon})," ",P.label]})]})},P.id))}),i.jsxs("div",{className:"space-y-4 pt-6 border-t mt-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(jc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"name",placeholder:"Jean Dupont",onChange:S,value:f.name,className:"pl-10",disabled:x})]}),h.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"email",type:"email",placeholder:"jean.dupont@email.com",onChange:S,value:f.email,className:"pl-10",disabled:x})]}),h.email&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.email})]})]}),i.jsx(H,{type:"submit",size:"lg",className:"w-full gradient-green text-white text-base font-semibold py-6 rounded-xl shadow-soft hover:shadow-lg transition-all transform hover:scale-105",disabled:x,children:x?"Inscription...":"Crer mon compte"}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Dj un compte ?"," ",i.jsx("button",{type:"button",onClick:()=>e("/client-access"),className:"text-blue-600 font-medium hover:underline",children:"Se connecter"})]})})]})]})})},Lre=()=>{const e=Oe(),[t,r]=p.useState(!1),[n,s]=p.useState({companyName:"",adminEmail:"",adminPassword:""}),[o,a]=p.useState({}),l=f=>{const{id:d,value:h}=f.target;s(m=>({...m,[d]:h})),o[d]&&a(m=>({...m,[d]:""}))},c=()=>{const f={};return(!n.companyName||n.companyName.trim().length<2)&&(f.companyName="Le nom de l'entreprise doit contenir au moins 2 caractres"),(!n.adminEmail||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.adminEmail))&&(f.adminEmail="Email invalide"),(!n.adminPassword||n.adminPassword.length<6)&&(f.adminPassword="Le mot de passe doit contenir au moins 6 caractres"),a(f),Object.keys(f).length===0},u=async f=>{if(f.preventDefault(),!c()){M({title:"Erreur de validation",description:"Veuillez corriger les erreurs dans le formulaire",variant:"destructive"});return}r(!0);try{const d=await fetch("https://vvzxvtiyybilkswslqfn.supabase.co/functions/v1/create_organization_onboarding",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:n.companyName.trim(),adminEmail:n.adminEmail.trim().toLowerCase(),adminPassword:n.adminPassword})}),h=await d.json();if(!d.ok)throw console.error("[SignupPage] Edge Function error:",h),new Error(h.error||"Erreur lors de la cration de l'organisation");if(!(h!=null&&h.success))throw console.error("[SignupPage] Edge Function returned error:",h),new Error((h==null?void 0:h.error)||"Erreur lors de la cration de l'organisation");M({title:" Organisation cre avec succs !",description:"Vous pouvez maintenant vous connecter avec vos identifiants.",className:"bg-green-500 text-white"}),setTimeout(()=>{e("/login",{state:{email:n.adminEmail.trim().toLowerCase(),message:"Votre organisation a t cre ! Connectez-vous pour accder  votre espace."}})},1500)}catch(d){console.error("[SignupPage] Error:",d),M({title:"Erreur",description:d.message||"Une erreur est survenue lors de la cration de l'organisation",variant:"destructive"})}finally{r(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:i.jsx(zg,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Crer votre organisation"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Commencez votre essai gratuit en quelques clics"})]}),i.jsxs("form",{onSubmit:u,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Nom de l'entreprise *"}),i.jsxs("div",{className:"relative",children:[i.jsx(zg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(me,{id:"companyName",type:"text",placeholder:"Ex: Acme Corporation",value:n.companyName,onChange:l,disabled:t,className:`pl-10 ${o.companyName?"border-red-500":""}`})]}),o.companyName&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.companyName})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminEmail",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Email administrateur *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(me,{id:"adminEmail",type:"email",placeholder:"admin@acme.com",value:n.adminEmail,onChange:l,disabled:t,className:`pl-10 ${o.adminEmail?"border-red-500":""}`})]}),o.adminEmail&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.adminEmail})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminPassword",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Mot de passe *"}),i.jsxs("div",{className:"relative",children:[i.jsx(If,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(me,{id:"adminPassword",type:"password",placeholder:"Minimum 6 caractres",value:n.adminPassword,onChange:l,disabled:t,className:`pl-10 ${o.adminPassword?"border-red-500":""}`})]}),o.adminPassword&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.adminPassword})]}),i.jsx(H,{type:"submit",disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3",children:t?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-5 h-5 mr-2 animate-spin"}),"Cration en cours..."]}):"Crer mon organisation"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Vous avez dj un compte ?"," ",i.jsx("button",{onClick:()=>e("/client-access"),className:"text-blue-600 hover:text-blue-700 font-medium",disabled:t,children:"Se connecter"})]})})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-xs text-gray-500",children:" Vos donnes sont scurises et chiffres"})})]})})},Mre=()=>{const e=Oe(),{setUserProjects:t,addProspect:r,setCurrentUser:n}=Ve(),[s,o]=p.useState({company:"",name:"",email:"",phone:"",password:""}),[a,l]=p.useState({}),c=d=>{const{id:h,value:m}=d.target;o(g=>({...g,[h]:m}))},u=()=>{const d={};return s.company||(d.company="Le nom de l'entreprise est requis."),s.name||(d.name="Le nom complet est requis."),s.email?/\S+@\S+\.\S+/.test(s.email)||(d.email="L'adresse e-mail est invalide."):d.email="L'adresse e-mail est requise.",s.phone||(d.phone="Le numro de tlphone est requis."),s.password?s.password.length<6&&(d.password="Le mot de passe doit contenir au moins 6 caractres."):d.password="Le mot de passe est requis.",l(d),Object.keys(d).length===0},f=d=>{if(d.preventDefault(),u()){const h=["ProducteurPro"],m={id:`prospect-${Date.now()}`,name:s.name,companyName:s.company,email:s.email,phone:s.phone,address:"",tags:h,status:"Intress",hasAppointment:!1};r(m),t&&t(h);const g={id:m.id,name:m.name,email:m.email};n(g),M({title:"Inscription russie !",description:"Bienvenue dans votre espace partenaire Evatime."}),e("/dashboard")}};return i.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:i.jsx("div",{className:"container mx-auto px-4 py-16 lg:py-24",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-24 items-center",children:[i.jsxs(ie.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"space-y-8",children:[i.jsxs("h1",{className:"text-4xl lg:text-6xl font-extrabold tracking-tight",children:["Vendez votre lectricit  un tarif ",i.jsx("span",{className:"text-green-400",children:"plus attractif"})," que l'EDF OA."]}),i.jsx("p",{className:"text-lg text-gray-300",children:"Grce  l'autoconsommation collective (ACC), vous pouvez vendre votre surplus d'nergie directement aux consommateurs locaux, en court-circuitant les tarifs d'obligation d'achat. Augmentez la rentabilit de vos centrales, qu'il s'agisse d'une seule installation ou d'un parc entier."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(e3,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Rentabilit Maximale :"})," Obtenez un meilleur prix pour chaque kWh produit."]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(Vi,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Circuit Court :"})," Vendez localement et renforcez votre impact territorial."]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(QC,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Simplicit Garantie :"})," Notre plateforme gre la complexit administrative pour vous."]})]})]})]}),i.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"Devenez Partenaire Producteur"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"company",className:"text-gray-300",children:"Nom de l'entreprise"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(G6,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"company",placeholder:"Solar Corp",onChange:c,value:s.company,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.company&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.company})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",className:"text-gray-300",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(jc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"name",placeholder:"Jack Dupont",onChange:c,value:s.name,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.name&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.name})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"phone",className:"text-gray-300",children:"Tlphone"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"phone",type:"tel",placeholder:"06 12 34 56 78",onChange:c,value:s.phone,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.phone&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.phone})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",className:"text-gray-300",children:"Email"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"email",type:"email",placeholder:"jack.dupont@email.com",onChange:c,value:s.email,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.email&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.email})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"password",className:"text-gray-300",children:"Mot de passe"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(If,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(me,{id:"password",type:"password",placeholder:"",onChange:c,value:s.password,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.password&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.password})]}),i.jsx(H,{type:"submit",size:"lg",className:"w-full bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 mt-4",children:"Je maximise mes revenus"})]})]})]})})})};function Fre(){var r,n,s,o,a,l,c,u,f;const[e,t]=p.useState({projects:null,pipeline:null,company:null,loading:!0,error:null});return p.useEffect(()=>{async function d(){try{const{data:h,error:m}=await k.from("project_templates").select("*");if(m)throw m;const{data:g,error:v}=await k.from("global_pipeline_steps").select("*").order("position");if(v)throw v;const{data:x,error:y}=await k.from("company_settings").select("*").limit(1).single();if(y)throw y;t({projects:h,pipeline:g,company:x,loading:!1,error:null})}catch(h){logger.error(" Erreur:",h),t(m=>({...m,loading:!1,error:h}))}}d()},[]),e.loading?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Test de connexion Supabase en cours..."})]})}):e.error?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-2xl w-full",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:" Erreur de connexion"}),i.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(e.error,null,2)})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:" Connexion Supabase russie !"}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:[" Modles de projets (",(r=e.projects)==null?void 0:r.length,")"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(n=e.projects)==null?void 0:n.map(d=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl mb-2",children:d.icon}),i.jsx("h3",{className:"font-semibold text-gray-900",children:d.title}),i.jsx("p",{className:"text-sm text-gray-600",children:d.type}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:d.is_public?" Public":" Priv"})]},d.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:[" tapes du pipeline (",(s=e.pipeline)==null?void 0:s.length,")"]}),i.jsx("div",{className:"flex gap-4 overflow-x-auto",children:(o=e.pipeline)==null?void 0:o.map(d=>i.jsxs("div",{className:`${d.color} border border-gray-300 rounded-lg p-4 min-w-[150px]`,children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:d.label}),i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Position: ",d.position]})]},d.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Paramtres de l'entreprise"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nom:"})," ",(a=e.company)==null?void 0:a.company_name]}),i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Formulaire de contact:"})," ",((u=(c=(l=e.company)==null?void 0:l.settings)==null?void 0:c.contact_form_config)==null?void 0:u.length)||0," champs"]}),((f=e.company)==null?void 0:f.logo_url)&&i.jsx("img",{src:e.company.logo_url,alt:"Logo",className:"h-16 mt-4"})]})]}),i.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-800",children:[" ",i.jsx("strong",{children:"Astuce:"})," Ouvre la console du navigateur (F12) pour voir les logs dtaills."]})})]})})}const Bre=()=>{const[e]=Cf(),t=Oe(),[r,n]=p.useState(!1),[s,o]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1);p.useEffect(()=>{(async()=>{const g=new URLSearchParams(window.location.hash.substring(1)),v=g.get("access_token");g.get("type");const x=g.get("error"),y=g.get("error_description"),b=e.get("token"),w=e.get("type");if(x){logger.error(" Erreur dans le hash:",x,y),M({title:"Erreur d'authentification",description:y||"Une erreur est survenue.",variant:"destructive"}),setTimeout(()=>t("/"),3e3);return}v||b&&w==="recovery"||(console.warn(" Aucun token de rcupration valide trouv"),console.warn("URL complte:",window.location.href),M({title:"Lien invalide",description:"Ce lien de rinitialisation n'est pas valide ou a expir.",variant:"destructive"}),setTimeout(()=>t("/"),3e3))})()},[e,t]);const h=async m=>{if(m.preventDefault(),s!==a){M({title:"Erreur",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}if(s.length<6){M({title:"Erreur",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}n(!0);try{const{error:g}=await k.auth.updateUser({password:s});if(g)throw g;const{data:{user:v}}=await k.auth.getUser();if(v){const{data:x}=await k.from("prospects").select("*").eq("user_id",v.id).single();x?(M({title:" Compte activ",description:"Bienvenue ! Votre compte a t activ avec succs.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/dashboard")},1500)):(M({title:" Mot de passe modifi",description:"Votre mot de passe a t rinitialis avec succs.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/")},2e3))}else M({title:" Mot de passe modifi",description:"Vous pouvez maintenant vous connecter.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/")},2e3)}catch(g){logger.error("Erreur rinitialisation mot de passe:",g),M({title:"Erreur",description:g.message||"Impossible de rinitialiser le mot de passe.",variant:"destructive"})}finally{n(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"space-y-1 mb-6",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-4 mx-auto",children:i.jsx(If,{className:"w-6 h-6 text-blue-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-center",children:"Rinitialiser le mot de passe"}),i.jsx("p",{className:"text-center text-gray-600",children:"Choisissez un nouveau mot de passe pour votre compte"})]}),i.jsx("div",{children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Nouveau mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(me,{id:"password",type:c?"text":"password",placeholder:"Au moins 6 caractres",value:s,onChange:m=>o(m.target.value),required:!0,disabled:r,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?i.jsx(Ul,{className:"w-4 h-4"}):i.jsx(Vl,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(me,{id:"confirmPassword",type:f?"text":"password",placeholder:"Retapez votre mot de passe",value:a,onChange:m=>l(m.target.value),required:!0,disabled:r,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>d(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?i.jsx(Ul,{className:"w-4 h-4"}):i.jsx(Vl,{className:"w-4 h-4"})})]})]}),i.jsx(H,{type:"submit",className:"w-full",disabled:r,children:r?"Rinitialisation...":"Rinitialiser le mot de passe"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:()=>t("/"),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Retour  la connexion"})})]})})]})})};function zre(){const{signatureProcedureId:e}=sa(),[t]=Cf(),r=t.get("token"),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1);p.useEffect(()=>{y()},[e,r]);const y=async()=>{try{if(s(!0),a(null),!r){a("Token manquant"),s(!1);return}T.debug("Chargement procdure",{signatureProcedureId:e,token:r});const{data:w,error:j}=await k.from("signature_procedures").select("*, project_files!signature_procedures_file_id_fkey(*)").eq("id",e).eq("access_token",r).single();if(j||!w){T.error("Erreur chargement procdure",j),a("Lien invalide ou expir"),s(!1);return}if(new Date(w.access_token_expires_at)<new Date){a("Lien expir - Veuillez contacter votre conseiller"),s(!1);return}if(w.status==="refused"||w.status==="cancelled"){a(`Signature ${w.status==="refused"?"refuse":"annule"}`),s(!1);return}c(w);const{data:S}=await k.from("signature_proofs").select("id, created_at").eq("signature_procedure_id",w.id).eq("signer_email",w.signer_email).maybeSingle();if(S){T.info("Signataire principal a dj sign",{email:w.signer_email,signedAt:S.created_at}),x(!0),s(!1);return}T.debug(" Procdure charge",{signer_name:w.signer_name,signer_email:w.signer_email,status:w.status});const{data:E,error:N}=await k.storage.from("project-files").createSignedUrl(w.project_files.storage_path,3600);if(N){T.error("Erreur cration URL signe",N),a("Impossible de charger le PDF"),s(!1);return}f(E.signedUrl),s(!1)}catch(w){T.error("Erreur chargement procdure",w),a("Erreur lors du chargement"),s(!1)}},b=async()=>{if(!d){alert("Veuillez accepter les conditions avant de signer");return}try{g(!0),T.debug("Tlchargement PDF pour calcul hash...");const _=await(await(await fetch(u)).blob()).arrayBuffer(),S=await crypto.subtle.digest("SHA-256",_),N=Array.from(new Uint8Array(S)).map(A=>A.toString(16).padStart(2,"0")).join("");T.debug("Hash SHA-256 calcul",{documentHash:N.substring(0,16)+"..."});const{data:P,error:C}=await k.functions.invoke("internal-signature",{body:{signature_procedure_id:e,signer_email:l.signer_email,signer_user_id:null,pdf_file_id:l.file_id,pdf_hash:N}});if(C)throw T.error("Erreur cration preuve signature",C),C;T.debug("Preuve de signature cre",P);const{data:I}=await k.from("signature_procedures").select("signers").eq("id",e).single(),O=((I==null?void 0:I.signers)||[]).map(A=>A.email===l.signer_email&&A.role==="principal"?{...A,status:"signed",signed_at:new Date().toISOString()}:A),$=O.some(A=>A.status==="pending"),L=$?"partially_signed":"completed";T.debug(" Analyse des signataires:",{totalSigners:O.length,signedCount:O.filter(A=>A.status==="signed").length,pendingCount:O.filter(A=>A.status==="pending").length,hasPendingSigners:$,globalStatus:L,allSigners:O});const V={signed_at:new Date().toISOString(),user_agent:navigator.userAgent,platform:navigator.platform,language:navigator.language,screen_resolution:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,consent_text:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite.",signature_method:"AES_eIDAS_art26",document_hash_algorithm:"SHA-256"},{data:z,error:B}=await k.from("signature_procedures").update({status:L,signers:O,signed_at:new Date().toISOString(),document_hash:N,signature_metadata:V}).eq("id",e).eq("access_token",r).select().single();if(B)throw T.error("Erreur mise  jour signature",B),B;if(T.debug("Signature enregistre avec succs",{procedureId:e,signer_name:z.signer_name,signer_email:z.signer_email,globalStatus:L,signed_at:z.signed_at}),L==="completed"){T.debug(" Status = completed - Appel generate-signed-pdf",{procedure_id:e});const{data:A,error:R}=await k.functions.invoke("generate-signed-pdf",{body:{signature_procedure_id:e}});R?T.error(" Erreur gnration PDF sign",R):T.debug(" PDF sign gnr avec succs",A)}else T.debug(" Status = partially_signed - Attente des co-signataires",{globalStatus:L,pendingSigners:O.filter(A=>A.status==="pending")});c(z),x(!0),g(!1)}catch(w){T.error("Erreur signature",w),a(`Erreur lors de la signature: ${w.message}`),g(!1)}};return n?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Me,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement du document..."})]})}):o?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(Jx,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),i.jsx("p",{className:"text-gray-600",children:o})]})}):v&&l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(Af,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contrat sign !"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Votre signature lectronique a t enregistre avec succs."}),i.jsxs("div",{className:"text-sm text-gray-500 space-y-1 bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Signataire:"})," ",l.signer_name]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",l.signer_email]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date(l.signed_at).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-t-lg shadow-lg p-6 border-b",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Signature lectronique"}),i.jsxs("p",{className:"text-gray-600",children:["Signataire: ",i.jsx("span",{className:"font-semibold",children:l==null?void 0:l.signer_name})," (",l==null?void 0:l.signer_email,")"]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Expire le: ",new Date(l==null?void 0:l.access_token_expires_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 border-b",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document  signer"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"600px"},children:i.jsx("iframe",{src:u,className:"w-full h-full",title:"Document PDF"})})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-b-lg",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Consentement  la signature lectronique"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique conforme au rglement eIDAS (article 26) et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite."}),i.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Cette signature est horodate et scelle par un hash cryptographique SHA-256 du document."})]}),i.jsxs("div",{className:"flex items-start space-x-3 mb-6",children:[i.jsx(tr,{id:"accept",checked:d,onCheckedChange:h,className:"mt-1"}),i.jsx("label",{htmlFor:"accept",className:"text-sm text-gray-700 cursor-pointer",children:"J'ai lu et accept les termes du contrat, et je consens  signer lectroniquement ce document"})]}),i.jsx(H,{onClick:b,disabled:!d||m,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-6 text-lg",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-5 h-5 animate-spin mr-2"}),"Signature en cours..."]}):i.jsx(i.Fragment,{children:" Signer le contrat"})}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Signature lectronique avance (AES) conforme au rglement eIDAS (UE) n910/2014 - Article 26"})]})]})})}const Ure=()=>{const[e]=Cf();Oe();const t=e.get("token"),[r,n]=p.useState("otp"),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(""),[f,d]=p.useState(null),[h,m]=p.useState(""),[g,v]=p.useState(""),[x,y]=p.useState(""),[b,w]=p.useState(!1),[j,_]=p.useState(!1),[S,E]=p.useState(3),[N,P]=p.useState(!1);p.useEffect(()=>{if(!t){u("Token manquant");return}(async()=>{var L;try{l(!0);const{data:V,error:z}=await k.from("cosigner_invite_tokens").select("signature_procedure_id, signer_email").eq("token",t).single();if(z||!V){u("Lien invalide"),l(!1);return}const{data:B,error:A}=await k.from("signature_procedures").select("*").eq("id",V.signature_procedure_id).single();if(A||!B){u("Procdure de signature introuvable"),l(!1);return}d(B);const R=(L=B.signers)==null?void 0:L.find(W=>W.email===V.signer_email&&W.role==="cosigner");m(V.signer_email),v((R==null?void 0:R.name)||V.signer_email);const{data:D}=await k.from("signature_proofs").select("id, created_at").eq("signature_procedure_id",B.id).eq("signer_email",V.signer_email).maybeSingle();if(D){T.info("Co-signataire a dj sign",{email:V.signer_email,signedAt:D.created_at}),_(!0),l(!1);return}l(!1);const F=`otp_requested_${t}`;localStorage.getItem(F)||(C(),localStorage.setItem(F,Date.now().toString()),setTimeout(()=>localStorage.removeItem(F),10*60*1e3))}catch(V){T.error("Erreur chargement procdure",V),u("Erreur chargement"),l(!1)}})()},[t]);const C=async()=>{try{l(!0),u("");const{data:$,error:L}=await k.functions.invoke("send-cosigner-otp",{body:{token:t}});if(L){u(L.message||"Erreur envoi OTP");return}if($!=null&&$.already_signed){T.info("Co-signataire a dj sign",{signedAt:$.signed_at}),_(!0),l(!1);return}E(3),u(""),$!=null&&$.dev_otp&&window.location.hostname==="localhost"&&(T.debug("OTP DEV:",$.dev_otp),console.log(" [DEV ONLY] Votre OTP:",$.dev_otp))}catch($){T.error("Erreur requestOtp",$),u("Erreur envoi OTP")}finally{l(!1)}},I=async $=>{if($.preventDefault(),s.length!==6){u("Le code doit contenir 6 chiffres");return}try{l(!0),u("");const{data:L,error:V}=await k.functions.invoke("verify-cosigner-otp",{body:{token:t,otp:s}});if(V||L!=null&&L.error){const B=(L==null?void 0:L.error)||(V==null?void 0:V.message)||"Code incorrect";u(B),(L==null?void 0:L.remaining_attempts)!==void 0&&E(L.remaining_attempts),l(!1);return}d(L.procedure),m(L.procedure.signer_email),v(L.procedure.signer_name||L.procedure.signer_email);const{data:z}=await k.from("project_files").select("storage_path").eq("id",L.procedure.file_id).single();if(z!=null&&z.storage_path){const{data:B}=await k.storage.from("project-files").createSignedUrl(z.storage_path,3600);B!=null&&B.signedUrl&&(y(B.signedUrl),n("pdf"))}}catch(L){T.error("Erreur verifyOtp",L),u("Erreur vrification")}finally{l(!1)}},O=async()=>{try{w(!0),u("");const V=await(await(await fetch(x)).blob()).arrayBuffer(),z=await crypto.subtle.digest("SHA-256",V),A=Array.from(new Uint8Array(z)).map(te=>te.toString(16).padStart(2,"0")).join("");T.debug("Cosigner signature - PDF hash calcul",{pdfHash:A});const{data:R,error:D}=await k.functions.invoke("internal-signature",{body:{signature_procedure_id:f.id,signer_email:h,signer_user_id:null,pdf_file_id:f.file_id,pdf_hash:A}});if(D){T.error("Erreur signature cosigner",D),u("Erreur lors de la signature"),w(!1);return}T.debug("Preuve de signature cre",R);const{data:F,error:q}=await k.from("signature_procedures").select("id, signers").eq("id",f.id).single();if(q){T.error("Erreur rcupration procdure",q),u("Erreur lors de la signature"),w(!1);return}if(!F){T.error("Procdure introuvable"),u("Procdure introuvable"),w(!1);return}const W=F.id;if(F!=null&&F.signers){const te=F.signers.map(ue=>ue.email===h&&ue.role==="cosigner"?{...ue,status:"signed",signed_at:new Date().toISOString()}:ue),fe=te.some(ue=>ue.status==="pending"),le=fe?"partially_signed":"completed";T.debug(" Co-signataire - Analyse des signataires:",{email:h,procedureId:W,totalSigners:te.length,signedCount:te.filter(ue=>ue.status==="signed").length,pendingCount:te.filter(ue=>ue.status==="pending").length,hasPendingSigners:fe,globalStatus:le,allSigners:te});const{error:ne}=await k.from("signature_procedures").update({signers:te,status:le}).eq("id",W);if(ne){T.error("Erreur mise  jour procdure",ne),u("Erreur lors de la signature"),w(!1);return}if(T.debug("Procdure mise  jour avec succs",{globalStatus:le}),le==="completed"){T.debug(" Co-signataire - Status = completed - Appel generate-signed-pdf",{signature_procedure_id:W});const{data:ue,error:Y}=await k.functions.invoke("generate-signed-pdf",{body:{signature_procedure_id:W}});Y?T.error(" Co-signataire - Erreur gnration PDF sign",Y):T.debug(" Co-signataire - PDF sign gnr avec succs",ue)}else T.debug(" Co-signataire - Status = partially_signed - Attente d'autres signataires",{globalStatus:le,pendingSigners:te.filter(ue=>ue.status==="pending")})}_(!0),w(!1)}catch($){T.error("Erreur handleSign",$),u("Erreur lors de la signature"),w(!1)}};return t?j?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(Af,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contrat sign !"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Votre signature lectronique a t enregistre avec succs."}),f&&h&&i.jsxs("div",{className:"text-sm text-gray-500 space-y-1 bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Signataire:"})," ",g]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",h]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date().toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:r==="otp"?i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(qg,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vrification de scurit"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Un code  6 chiffres a t envoy par email"})]}),i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"otp",children:"Code de vrification"}),i.jsx(me,{id:"otp",type:"text",value:s,onChange:$=>o($.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"text-center text-2xl tracking-widest",maxLength:6,disabled:a}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tentatives restantes: ",S]})]}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx(H,{type:"submit",className:"w-full",disabled:a||s.length!==6,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-4 h-4 mr-2 animate-spin"}),"Vrification..."]}):"Vrifier le code"}),i.jsx(H,{type:"button",variant:"outline",className:"w-full",onClick:C,disabled:a,children:"Renvoyer un code"})]})]}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-t-lg shadow-lg p-6 border-b",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Signature lectronique - Co-signataire"}),i.jsxs("p",{className:"text-gray-600",children:["Signataire: ",i.jsx("span",{className:"font-semibold",children:f==null?void 0:f.signer_email})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Document vrifi et scuris"})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 border-b",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document  signer"}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"600px"},children:i.jsx("iframe",{src:x,className:"w-full h-full",title:"Document PDF"})})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-b-lg",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Consentement  la signature lectronique"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique conforme au rglement eIDAS (article 26) et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite."}),i.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Cette signature est horodate et scelle par un hash cryptographique SHA-256 du document."})]}),i.jsxs("div",{className:"flex items-start space-x-3 mb-6",children:[i.jsx(tr,{id:"accept",checked:N,onCheckedChange:P,className:"mt-1"}),i.jsx("label",{htmlFor:"accept",className:"text-sm text-gray-700 cursor-pointer",children:"J'ai lu et accept les termes du contrat, et je consens  signer lectroniquement ce document"})]}),i.jsx(H,{onClick:O,disabled:!N||b,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-6 text-lg",children:b?i.jsxs(i.Fragment,{children:[i.jsx(Me,{className:"w-5 h-5 animate-spin mr-2"}),"Signature en cours..."]}):i.jsx(i.Fragment,{children:" Signer le contrat"})}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Signature lectronique avance (AES) conforme au rglement eIDAS (UE) n910/2014 - Article 26"})]})]})})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-red-600",children:"Token manquant"})})})},mD=p.createContext(null),Vre=({children:e})=>{const[t,r]=p.useState(null),[n,s]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(!0),[v,x]=p.useState(!1);p.useEffect(()=>{(async()=>{var w;try{const j=window.location.hostname,{data:_,error:S}=await k.rpc("resolve_organization_from_host",{host:j});if(S){console.warn("[PublicOrg] RPC error, fallback to platform:",S.message),x(!0),g(!1);return}const E=(_==null?void 0:_.id)||Array.isArray(_)&&((w=_[0])==null?void 0:w.id)||(typeof _=="string"?_:null);if(!E){console.info("[PublicOrg] No org found for hostname, using platform defaults"),x(!0),g(!1);return}r(E),x(!1);const{data:N,error:P}=await k.from("organization_settings").select("display_name, logo_url, primary_color, secondary_color, landing_page_config").eq("organization_id",E).single();!P&&N&&(s(N.display_name),a(N.logo_url),c(N.primary_color),f(N.secondary_color),h(N.landing_page_config)),g(!1)}catch(j){console.error("[PublicOrg] Exception:",j),x(!0),g(!1)}})()},[]),p.useEffect(()=>{l&&document.documentElement.style.setProperty("--primary",l),u&&document.documentElement.style.setProperty("--secondary",u)},[l,u]),p.useEffect(()=>{n&&(document.title=n)},[n]);const y={organizationId:t,brandName:n||"EVATIME",logoUrl:o||"/evatime-logo.png",primaryColor:l,secondaryColor:u,landingConfig:d,loading:m,isPlatform:v};return i.jsx(mD.Provider,{value:y,children:e})},qre=()=>{const e=p.useContext(mD);if(e)return{organizationId:e.organizationId,isPlatformOrg:e.isPlatform,brandName:e.brandName,logoUrl:e.logoUrl,organizationLoading:e.loading,landingConfig:e.landingConfig};const t=p.useContext(l0);return t?{organizationId:t.organizationId,isPlatformOrg:t.isPlatformOrg,brandName:t.brandName,logoUrl:t.logoUrl,organizationLoading:t.organizationLoading,landingConfig:null}:{organizationId:null,isPlatformOrg:!0,brandName:"EVATIME",logoUrl:"/evatime-logo.png",organizationLoading:!1,landingConfig:null}};function rd(){const{toast:e}=sP(),{organizationId:t,isPlatformOrg:r,brandName:n,logoUrl:s,organizationLoading:o,landingConfig:a}=qre(),l=a,c=r||!t,u=c?"EVATIME":n||"EVATIME",f=c?"/evatime-logo.png":s||"/evatime-logo.png",d=["Gnration automatique de devis personnaliss","Cration de factures intelligentes","Suivi des paiements en temps rel","Relances clients automatises","Rapports d'activit instantans"],h=[{icon:Wg,title:"Automatisations intelligentes",description:"L'IA gre vos tches rptitives pendant que vous vous concentrez sur l'essentiel",gradient:"from-blue-500 to-cyan-500"},{icon:dl,title:"Formulaires & questionnaires IA",description:"Crez des formulaires adaptatifs qui s'ajustent automatiquement aux rponses",gradient:"from-cyan-500 to-blue-600"},{icon:x3,title:"Workflows automatiques",description:"Orchestrez vos processus mtier sans une ligne de code",gradient:"from-blue-600 to-indigo-600"},{icon:n3,title:"Documents instantans",description:"Gnrez devis, factures et contrats en quelques secondes",gradient:"from-indigo-600 to-blue-500"},{icon:Q6,title:"Paiements & signatures",description:"Encaissez et faites signer vos documents en un clic",gradient:"from-blue-500 to-cyan-600"},{icon:Vg,title:"Gestion de projets complte",description:"Pilotez tous vos projets depuis une interface unifie",gradient:"from-cyan-600 to-blue-500"},{icon:Z6,title:"Donnes connectes en temps rel",description:"Synchronisation instantane de toutes vos informations",gradient:"from-blue-500 to-indigo-500"}],m=[{icon:Zw,title:"Qualification du projet",description:"Le client remplit un formulaire intelligent qui collecte les informations cls sur son projet (localisation, consommation, type de toiture...). L'IA analyse les donnes en temps rel pour valider l'ligibilit du projet."},{icon:zl,title:"Pr-tude automatique",description:"L'IA gnre instantanment une pr-tude complte : Le client peut simuler lui mme son installation."},{icon:i3,title:"tude technique",description:"Si le client est intress, l'IA assigne le projet  un technicien. Le technicien complte les informations sur site via une application, et l'IA met  jour l'tude technique en temps rel."},{icon:d3,title:"Offre personnalise",description:"Sur la base de l'tude finalise, l'IA gnre une offre commerciale dtaille et personnalise, incluant le plan de financement et les garanties. Elle est envoye automatiquement au client. Un rdv avec un commercial en visio ou sur le terrain est souvent ncssaire pour le contact humain et facilit la rcupration des documents"},{icon:Xw,title:"Signature & Paiement",description:"Le client peut signer lectroniquement son devis en un clic en direct avec un closer au telephone ou what app. L'IA dclenche ensuite la demande d'acompte et suit le paiement en temps rel."},{icon:ej,title:"Dmarches administratives",description:"Une fois le devis sign, l'IA pr-remplit tous les documents administratifs ncessaires (mairie, Enedis...) et suit leur avancement, vous notifiant  chaque tape cl."},{icon:y3,title:"Installation & Mise en service",description:"L'IA planifie l'intervention avec le client et les quipes techniques. Elle gnre le rapport de fin de chantier et dclenche la facturation finale une fois l'installation valide."}],g=[{icon:Zw,title:"Qualification du besoin",description:"Le client dcrit son projet de piscine via un questionnaire interactif : dimensions, type (enterre, hors-sol), options (chauffage, volet...). L'IA affine les questions pour cerner prcisment ses attentes."},{icon:ey,title:"tude du terrain",description:"L'IA analyse l'adresse du client, les rgles d'urbanisme locales (PLU) et utilise des donnes satellites pour une premire validation de la faisabilit technique (accs, topographie)."},{icon:t3,title:"Proposition de modles adapts",description:"En fonction du budget, des dimensions et des contraintes du terrain, l'IA propose une slection de modles de piscines et d'amnagements pertinents, avec des visuels 3D."},{icon:dl,title:"Offre complte & devis",description:"Une fois le modle choisi, l'IA gnre un devis dtaill incluant la piscine, les quipements, les travaux de terrassement et les options, le tout envoy instantanment au client."},{icon:Xw,title:"Signature & paiement acompte",description:"Le client signe son devis en ligne. L'IA gnre la facture d'acompte et propose le paiement en ligne pour lancer officiellement le projet."},{icon:ej,title:"Dclarations & dmarches",description:"L'IA prpare automatiquement la dclaration pralable de travaux ou la demande de permis de construire avec toutes les pices ncessaires, prte  tre dpose en mairie."},{icon:h3,title:"Prparation & travaux",description:"L'IA coordonne le planning des quipes (terrassement, maonnerie, pose...) et informe le client en temps rel de l'avancement du chantier  chaque tape cl."},{icon:r3,title:"Mise en eau & livraison",description:"Une fois les travaux termins, l'IA planifie la mise en eau, gnre le procs-verbal de rception et envoie les guides d'entretien personnaliss au client."}],v="https://horizons-cdn.hostinger.com/0006a1c4-b9a7-4c6e-882d-144771383456/3bfa51980327b635c396a2f5c6661668.png",x="https://horizons-cdn.hostinger.com/0006a1c4-b9a7-4c6e-882d-144771383456/1f9d3e047ee189487d139fbe166d1557.png",y=()=>{e({title:"Fonctionnalit  venir !",description:" Cette fonctionnalit n'est pas encore implmentemais ne vous inquitez pas ! "})},b=()=>{const w=l||{},j=w.hero_title||`Bienvenue chez ${u}`,_=w.hero_subtitle||"Suivez l'avancement de votre projet en temps rel",S=w.hero_cta_text||"Je dmarre mon projet",E=w.show_how_it_works!==!1,N=w.blocks||[{title:"tude",description:"Analyse de votre projet"},{title:"Installation",description:"Ralisation des travaux"},{title:"Suivi",description:"Accompagnement continu"}];return i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"pt-32 pb-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[i.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent leading-tight",children:j}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto",children:_}),i.jsxs("div",{className:"flex justify-center items-center gap-4",children:[i.jsx(H,{onClick:()=>window.location.href="/inscription",className:"bg-[#22c55e] hover:bg-[#16a34a] hover:scale-105 text-white rounded-full px-10 py-6 text-lg font-semibold transition-transform duration-200",children:S}),E&&i.jsx("button",{onClick:()=>{var P;return(P=document.getElementById("how-it-works"))==null?void 0:P.scrollIntoView({behavior:"smooth"})},className:"text-[#22c55e] hover:text-[#16a34a] font-medium text-lg transition-colors",children:w.how_it_works_title||"Comment a marche ?"})]})]})})}),E&&i.jsx("section",{id:"how-it-works",className:"py-20 px-6 bg-gradient-to-br from-blue-50 to-cyan-50",children:i.jsxs("div",{className:"container mx-auto max-w-6xl",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16 text-gray-900",children:w.how_it_works_title||"Comment a marche ?"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:N.map((P,C)=>i.jsxs(ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:C*.1},viewport:{once:!0},className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-4xl mb-4",children:P.icon||C+1}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:P.title}),i.jsx("p",{className:"text-gray-600",children:P.description})]},C))})]})}),i.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-blue-600 via-cyan-600 to-blue-700",children:i.jsx("div",{className:"container mx-auto max-w-4xl text-center",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8",children:"Prt  commencer ?"}),i.jsx(H,{onClick:()=>window.location.href="/inscription",className:"bg-white text-blue-600 hover:bg-gray-100 rounded-full px-10 py-6 text-lg shadow-xl font-semibold",children:S})]})})}),i.jsx("footer",{className:"bg-gray-900 text-white py-12 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"flex flex-col items-center gap-6",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f&&i.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:i.jsx("img",{src:f,alt:`${u} Logo`,className:"w-full h-full object-contain"})}),i.jsx("span",{className:"text-xl font-bold",children:u}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",u,". Tous droits rservs."]})]}),i.jsx(H,{onClick:()=>window.location.href="/partner/login",className:"bg-[#f97316] hover:bg-[#ea580c] hover:scale-105 text-white rounded-full px-8 py-3 font-semibold transition-transform duration-200 shadow-lg",children:"Espace Partenaire"})]})})})]})};return o?i.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!c&&o?i.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs(i.Fragment,{children:[i.jsxs(Id,{children:[i.jsx("title",{children:"EVATIME - L'IA qui pilote votre activit"}),i.jsx("meta",{name:"description",content:"Automatisez votre activit avec l'intelligence artificielle. Formulaires IA, workflows automatiques, documents instantans et gestion de projets complte."})]}),i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:s?i.jsx("div",{className:"h-12 flex items-center justify-center",children:i.jsx("img",{src:s,alt:`${u} Logo`,className:"h-full object-contain max-w-[200px]"})}):i.jsx("div",{children:i.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:u})})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(H,{onClick:()=>window.location.href="/login",className:"bg-[#22c55e] hover:bg-[#16a34a] hover:scale-105 text-white rounded-full px-6 font-medium transition-transform duration-200",children:"Espace Pro"}),i.jsx(H,{onClick:()=>window.location.href="/client-access",className:"bg-[#0ea5e9] hover:bg-[#0284c7] hover:scale-105 text-white rounded-full px-6 font-medium transition-transform duration-200",children:"Espace Client"})]})]})})}),!c&&b(),c&&i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"pt-32 pb-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[i.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent leading-tight",children:["L'IA qui pilote",i.jsx("br",{}),"votre activit"," ",i.jsx("img",{src:x,alt:"Rocket icon",className:"inline-block h-20 w-20 align-middle -mt-5 ml-1"})]}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto",children:"Automatisez vos processus, gnrez vos documents et pilotez votre entreprise avec l'intelligence artificielle"}),i.jsx("div",{className:"flex justify-center",children:i.jsxs(H,{onClick:y,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-full px-8 py-6 text-lg shadow-xl",children:["Essayer gratuitement",i.jsx(Jw,{className:"ml-2 h-5 w-5"})]})})]})})}),i.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-blue-50 to-cyan-50",children:i.jsxs("div",{className:"container mx-auto max-w-6xl",children:[i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Comment a marche ?"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Une plateforme qui connecte votre entreprise, vos clients et l'IA pour automatiser l'ensemble de votre activit"})]}),i.jsxs(ie.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-6",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Votre entreprise"}),i.jsx("p",{className:"text-gray-600",children:"Dites  EVATIME comment vous travaillez. Elle transforme vos tapes en un systme 100 % automatis."})]}),i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-6",children:i.jsx(Wg,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"L'IA EVATIME"}),i.jsx("p",{className:"text-gray-600",children:"Elle cre les formulaires, pose les bonnes questions, collecte les documents, envoie les relances, gre le pipeline et vous notifie uniquement quand il faut agir."})]}),i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center mb-6",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Vos clients"}),i.jsx("p",{className:"text-gray-600",children:"Une interface simple o ils envoient leurs infos, dposent leurs documents, signent, paient et suivent l'avancement, sans jamais vous dranger."})]})]})]})}),i.jsx("section",{className:"py-20 px-6 bg-white",children:i.jsxs("div",{className:"container mx-auto max-w-5xl",children:[i.jsx(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Exemple : Workflow automatis pour une socit solaire"})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 h-full w-px bg-gray-200 hidden md:block"}),m.map((w,j)=>i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.15},className:"relative flex md:items-center mb-12",children:[i.jsxs("div",{className:`flex items-center w-full md:w-1/2 ${j%2===0?"md:pr-12":"md:pl-12 md:ml-auto md:text-right"}`,children:[i.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center md:hidden mr-4",children:i.jsx(w.icon,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600",children:w.description})]})]}),i.jsx("div",{className:"hidden md:flex absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full bg-white border-4 border-gray-200 items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:i.jsx(w.icon,{className:"h-6 w-6 text-white"})})})]},j))]}),i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-16 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-8 text-center text-white flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsx("p",{className:"text-xl font-semibold",children:"Ce processus est 100% automatique et pilot par l'IA d'EVATIME"}),i.jsxs(H,{onClick:y,variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30 rounded-full px-6 py-3 flex-shrink-0",children:["Voir un autre exemple de workflow",i.jsx(Rf,{className:"ml-2 h-4 w-4"})]})]})]})}),i.jsx("section",{className:"py-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[i.jsxs(ie.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full mb-6",children:[i.jsx(QC,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-semibold",children:"Automatisations intelligentes"})]}),i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"L'IA travaille pour vous 24/7"}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Librez-vous des tches rptitives et concentrez-vous sur ce qui compte vraiment : dvelopper votre activit"}),i.jsx("div",{className:"space-y-4",children:d.map((w,j)=>i.jsxs(ie.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:j*.1},className:"flex items-start gap-3",children:[i.jsx(Af,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),i.jsx("span",{className:"text-gray-700 text-lg",children:w})]},j))})]}),i.jsx(ie.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative",children:i.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl border border-gray-100",children:[i.jsx("img",{alt:"Automatisations intelligentes EVATIME",className:"w-full h-auto",src:"https://images.unsplash.com/photo-1516383274235-5f42d6c6426d"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/20 to-transparent"})]})})]})})}),i.jsx("section",{className:"py-20 px-6 bg-gray-50",children:i.jsxs("div",{className:"container mx-auto max-w-7xl",children:[i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Tout ce dont vous avez besoin"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Une suite complte d'outils pilots par l'IA pour grer votre activit de A  Z"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((w,j)=>i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.1},className:"bg-white rounded-3xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group cursor-pointer",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${w.gradient} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`,children:i.jsx(w.icon,{className:"h-7 w-7 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-3 text-gray-900",children:w.title}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:w.description})]},j))})]})}),i.jsx("section",{className:"py-20 px-6 bg-gray-50",children:i.jsxs("div",{className:"container mx-auto max-w-5xl",children:[i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Exemple : Workflow pour un constructeur de piscine"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Du premier contact  la mise en eau, EVATIME gnre et pilote automatiquement l'intgralit du processus pour chaque projet de construction de piscine."})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 h-full w-px bg-gray-200 hidden md:block"}),g.map((w,j)=>i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.15},className:"relative flex md:items-center mb-12",children:[i.jsxs("div",{className:`flex items-center w-full md:w-1/2 ${j%2!==0?"md:pr-12":"md:pl-12 md:ml-auto md:text-right"}`,children:[i.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center md:hidden mr-4",children:i.jsx(w.icon,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600",children:w.description})]})]}),i.jsx("div",{className:"hidden md:flex absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full bg-white border-4 border-gray-200 items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:i.jsx(w.icon,{className:"h-6 w-6 text-white"})})})]},j))]}),i.jsx(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-12 text-center",children:i.jsxs("p",{className:"text-lg text-gray-700 font-medium bg-blue-50 p-4 rounded-lg inline-block",children:["Tout ce workflow piscine est gnr automatiquement ds qu'un client dmarre un projet."," ",i.jsx("span",{className:"font-bold text-blue-700",children:"EVATIME s'adapte  chaque mtier."})]})})]})}),i.jsxs("section",{className:"py-32 px-6 bg-gradient-to-br from-blue-600 via-cyan-600 to-blue-700 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10",children:i.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),i.jsx("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:i.jsxs(ie.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[i.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6 text-white",children:"Prt  transformer votre activit ?"}),i.jsx("p",{className:"text-xl md:text-2xl text-blue-100 mb-12",children:"Rejoignez les entreprises qui ont choisi l'intelligence artificielle pour piloter leur croissance"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsxs(H,{onClick:y,className:"bg-white text-blue-600 hover:bg-gray-100 rounded-full px-10 py-6 text-lg shadow-xl font-semibold",children:["Commencer gratuitement",i.jsx(Jw,{className:"ml-2 h-5 w-5"})]}),i.jsx(H,{onClick:y,variant:"outline",className:"border-2 border-white text-white hover:bg-white/10 rounded-full px-10 py-6 text-lg",children:"Planifier une dmo"})]})]})})]})]}),i.jsx("footer",{className:"bg-gray-900 text-white py-12 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:i.jsx("img",{src:v,alt:"EVATIME Logo",className:"w-full h-full object-contain"})}),i.jsx("span",{className:"text-xl font-bold",children:"EVATIME"})]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," EVATIME. Tous droits rservs."]})]})})})]})]})}const Wre=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"})),Hre=[{id:"name",name:"Nom*",type:"text",placeholder:"Jean Dupont",required:!0},{id:"companyName",name:"Socit",type:"text",placeholder:"Nom de la socit (optionnel)",required:!1},{id:"email",name:"Email*",type:"email",placeholder:"jean.dupont@email.com",required:!0},{id:"phone",name:"Tlphone",type:"text",placeholder:"06 12 34 56 78",required:!1},{id:"address",name:"Adresse",type:"text",placeholder:"1 Rue de la Paix, 75002 Paris",required:!1}],Gre={id:"id",name:"name",email:"email",phone:"phone",address:"address",status:"status",tags:"tags",notes:"notes",company_name:"companyName",owner_id:"ownerId",has_appointment:"hasAppointment",affiliate_name:"affiliateName",form_data:"formData",created_at:"createdAt",updated_at:"updatedAt",user_id:"userId",organization_id:"organizationId"},Va=e=>{if(!e)return null;const t={};for(const[r,n]of Object.entries(Gre))e[r]!==void 0&&(t[n]=e[r]);return t.company=e.company_name,t.form_data=e.form_data||{},t.tags=t.tags||[],t.formData=t.formData||{},t.hasAppointment=t.hasAppointment||!1,t},Kre={id:"id",title:"title",type:"type",status:"status",notes:"notes",location:"location",share:"share",step:"step",start_time:"start",end_time:"end",contact_id:"contactId",assigned_user_id:"assignedUserId",project_id:"projectId",rescheduled_from_id:"rescheduledFromId",created_at:"createdAt",updated_at:"updatedAt",organization_id:"organizationId"},qa=e=>{if(!e)return null;const t={};for(const[r,n]of Object.entries(Kre))e[r]!==void 0&&(t[n]=e[r]);return t},gD=(e,t)=>Array.isArray(e)?e.map(t).filter(Boolean):[],Yre=(e,t)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),[c,u]=p.useState(0),[f,d]=p.useState(!0),h=p.useRef(null),m=p.useRef(!0),g=500,v=async(j=0,_=!1)=>{try{_||o(!0);const{data:{session:S}}=await k.auth.getSession();if(!S){console.warn("[useSupabaseProspects] No session - skipping prospects loading"),n([]),o(!1);return}const{data:E,error:N}=await k.rpc("get_prospects_safe",{p_limit:g,p_offset:j});if(N)throw T.error("Erreur fetch prospects",{error:N.message}),N;const{data:P}=await k.rpc("get_prospects_count");P!==null&&u(P);const C=gD(E,Va);d(C.length===g),T.debug("Prospects fetched",{count:C.length,offset:j,total:P}),n(_?I=>[...I,...C]:C),l(null)}catch(S){T.error("Erreur chargement prospects",{error:S.message}),l(S.message),M({title:"Erreur",description:"Impossible de charger les prospects.",variant:"destructive"})}finally{o(!1)}},x=()=>{f&&!s&&v(r.length,!0)};return p.useEffect(()=>{if(!e||!e.id){o(!1),n([]);return}v()},[e==null?void 0:e.id]),p.useEffect(()=>{if(!e||!t)return;m.current=!0;const j=k.channel(`prospects-changes-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"prospects",filter:`organization_id=eq.${t}`},_=>{if(m.current)if(_.eventType==="INSERT"){const S=Va(_.new);n(E=>[S,...E]),M({title:" Nouveau contact",description:`${S.name} a t ajout !`,className:"bg-green-500 text-white"})}else if(_.eventType==="UPDATE"){T.info(" [useSupabaseProspects] Real-time UPDATE received",{prospectId:_.new.id,name:_.new.name,organizationId:_.new.organization_id,hasFormData:!!_.new.form_data,formDataKeys:_.new.form_data?Object.keys(_.new.form_data):[]});const S=Va(_.new);T.info(" [useSupabaseProspects] updatedProspect after transform",{id:S.id,name:S.name,hasFormData:!!S.formData,formDataProjects:Object.keys(S.formData||{}),fullObject:S}),n(E=>{const N=E.map(P=>P.id===_.new.id?S:P);return T.info(" [useSupabaseProspects] State updated, new array length:",N.length),[...N]})}else _.eventType==="DELETE"&&(n(S=>S.filter(E=>E.id!==_.old.id)),M({title:" Contact supprim",description:"Un contact a t supprim."}))}).on("broadcast",{event:"prospect-updated"},_=>{var S;m.current&&(T.debug("Broadcast manual UPDATE received",{id:(S=_.payload)==null?void 0:S.id}),n(E=>E.map(N=>N.id===_.payload.id?_.payload:N)))}).subscribe();return h.current=j,()=>{m.current=!1,k.removeChannel(j),h.current=null}},[e==null?void 0:e.id,t]),p.useEffect(()=>{const j=k.channel("prospects-broadcast-global").on("broadcast",{event:"prospect-updated"},_=>{var S;T.debug("GLOBAL Broadcast received",{id:(S=_.payload)==null?void 0:S.id}),n(E=>{var P,C;T.debug("Before update",{name:(P=E.find(I=>I.id===_.payload.id))==null?void 0:P.name});const N=E.map(I=>I.id===_.payload.id?{..._.payload}:I);return T.debug("After update",{name:(C=N.find(I=>I.id===_.payload.id))==null?void 0:C.name}),N})}).subscribe();return h.current||(h.current=j),()=>{k.removeChannel(j)}},[]),{prospects:r,loading:s,error:a,addProspect:async j=>{try{console.log("[addProspect] started",{prospectData:j});const{data:{user:_}}=await k.auth.getUser();if(!_)throw new Error("Utilisateur non authentifi");if(console.log("[addProspect] auth user",{userId:_.id}),!t)throw new Error("organization_id manquant");console.log("[addProspect] organizationId",{organizationId:t});const{data:S,error:E}=await k.from("prospects").insert({name:j.name,email:j.email,phone:j.phone||"",company_name:j.company||j.companyName||"",address:j.address||"",owner_id:j.ownerId||_.id,status:j.status||"lead",tags:j.tags||[],has_appointment:j.hasAppointment||!1,affiliate_name:j.affiliateName||null,organization_id:t,created_at:new Date().toISOString()}).select().single();if(console.log("[addProspect] insert result",{data:S,error:E==null?void 0:E.message}),E)throw console.error("[addProspect] insert failed",E),E;const N=Va(S);return M({title:"Succs",description:`Prospect "${S.name}" cr !`,className:"bg-green-500 text-white"}),N}catch(_){throw console.error("[addProspect] error",_),M({title:"Erreur",description:_.message||"Impossible d'ajouter le prospect.",variant:"destructive"}),_}},updateProspect:async(j,_)=>{try{T.debug("updateProspect called",{idType:typeof j,updatesType:typeof _});let S,E;typeof j=="object"&&j.id?(S=j.id,E=j,T.debug("Update mode: full object")):(S=j,E=_,T.debug("Update mode: separate params"));const N={};E.name!==void 0&&(N.name=E.name),E.email!==void 0&&(N.email=E.email),E.phone!==void 0&&(N.phone=E.phone),E.company!==void 0&&(N.company_name=E.company),E.companyName!==void 0&&(N.company_name=E.companyName),E.address!==void 0&&(N.address=E.address),E.ownerId!==void 0&&(N.owner_id=E.ownerId),E.status!==void 0&&(N.status=E.status),E.tags!==void 0&&(N.tags=E.tags),E.hasAppointment!==void 0&&(N.has_appointment=E.hasAppointment),E.affiliateName!==void 0&&(N.affiliate_name=E.affiliateName),E.formData!==void 0&&(N.form_data=E.formData),T.debug("Preparing update",{prospectId:S,fieldsUpdated:Object.keys(N)});const{data:{user:P}}=await k.auth.getUser(),{data:C}=await k.from("users").select("id").eq("user_id",P==null?void 0:P.id).single();let I,O;if(C){T.debug("Update mode: ADMIN - using update_prospect_safe");const $=await k.rpc("update_prospect_safe",{_prospect_id:S,_data:N});I=$.data,O=$.error}else{T.debug("Update mode: CLIENT - using update_own_prospect_profile");const $=await k.rpc("update_own_prospect_profile",{_data:N});I=$.data,O=$.error}if(O)throw T.error("Erreur RPC",{error:O.message}),T.error("Dtails erreur",{details:JSON.stringify(O)}),O;if(T.debug("RPC Success",{prospectId:S}),I&&I.length>0){const $=I[0],L=Va($);n(V=>V.map(z=>z.id===S?L:z)),T.debug("Local state updated immediately"),!C&&h.current&&(T.debug("Broadcasting manual update to other users"),h.current.send({type:"broadcast",event:"prospect-updated",payload:L}))}return I}catch(S){throw T.error("Erreur update prospect",{error:S.message}),M({title:"Erreur",description:S.message||"Impossible de modifier le prospect.",variant:"destructive"}),S}},deleteProspect:async j=>{try{const{error:_}=await k.from("prospects").delete().eq("id",j);if(_)throw _;n(S=>S.filter(E=>E.id!==j)),M({title:"Succs",description:"Prospect supprim avec succs !",className:"bg-green-500 text-white"})}catch(_){throw T.error("Erreur suppression prospect",{error:_.message}),M({title:"Erreur",description:_.message||"Impossible de supprimer le prospect.",variant:"destructive"}),_}},refetchProspects:v,totalCount:c,hasMore:f,loadMore:x}};function Jre({projectType:e,prospectId:t,enabled:r=!0,activeAdminUser:n}){const[s,o]=p.useState([]),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[f,d]=p.useState(null),h=p.useCallback(async()=>{if(!(!e||!r))try{l(!0),d(null);let v=k.from("project_history").select("*").eq("project_type",e).order("created_at",{ascending:!1});t&&(v=v.eq("prospect_id",t));const{data:x,error:y}=await v;if(y)throw y;o(x||[])}catch(v){T.error("Erreur rcupration project history:",{error:v.message}),d(v.message)}finally{l(!1)}},[e,t,r]);p.useEffect(()=>{if(!e||!r)return;h();const v=k.channel(`project-history-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"project_history",filter:`project_type=eq.${e}`},x=>{o(y=>[x.new,...y])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"project_history",filter:`project_type=eq.${e}`},x=>{o(y=>y.map(b=>b.id===x.new.id?x.new:b))}).subscribe();return()=>{k.removeChannel(v)}},[e,r,h]);const m=p.useCallback(async({event_type:v,title:x,description:y,metadata:b,createdBy:w,createdByName:j})=>{if(!(!e||!v)){if(!(n!=null&&n.organization_id))throw T.error(" [useSupabaseProjectHistory] organization_id manquant pour addHistoryEvent"),new Error("organization_id manquant pour addHistoryEvent");try{u(!0),d(null);const{data:_,error:S}=await k.from("project_history").insert([{project_type:e,prospect_id:t||null,event_type:v,title:x,description:y,metadata:b,created_by:w||null,created_by_name:j||null,organization_id:n.organization_id}]).select().single();if(S)throw S;return _}catch(_){throw T.error("Erreur ajout history event:",{error:_.message}),d(_.message),_}finally{u(!1)}}},[e,t,n]),g=p.useCallback(async({prospectId:v,projectType:x,title:y,description:b,metadata:w,createdBy:j,createdByName:_})=>{if(!x||!v)return T.error("prospectId and projectType required"),{success:!1,error:"Paramtres manquants"};if(!(n!=null&&n.organization_id))return T.error(" [useSupabaseProjectHistory] organization_id manquant pour addProjectEvent"),{success:!1,error:"organization_id manquant"};try{T.debug("Adding project event",{prospectId:v,projectType:x,title:y,organizationId:n.organization_id});const S=(w==null?void 0:w.event_type)||"form_event",{data:E,error:N}=await k.from("project_history").insert([{project_type:x,prospect_id:v,event_type:S,title:y,description:b,metadata:w||null,created_by:j||null,created_by_name:_||j||null,organization_id:n.organization_id}]).select().single();if(N)throw T.error("Supabase error:",N.message),N;return T.debug("Project event created",{eventId:E.id}),{success:!0,data:E}}catch(S){return T.error("[addProjectEvent] Exception:",{error:S.message||S}),{success:!1,error:S.message||"Erreur inconnue"}}},[n]);return{history:s,loading:a,saving:c,error:f,addHistoryEvent:m,addProjectEvent:g,refetch:h}}const Xre=(e,t)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),[c,u]=p.useState(null),{addProjectEvent:f}=Jre({projectType:null,enabled:!1,activeAdminUser:e}),d=async()=>{try{const b=new Date,w=new Date(b);w.setMonth(w.getMonth()-3);const j=new Date(b);j.setMonth(j.getMonth()+3);const{data:_,error:S}=await k.from("appointments").select("*").gte("start_time",w.toISOString()).lte("start_time",j.toISOString()).order("start_time",{ascending:!0});if(S)throw S;const E=gD(_,qa);return T.debug("Appointments fetched",{count:E.length,range:`${w.toISOString()} - ${j.toISOString()}`}),n(E),E}catch(b){throw T.error("Erreur chargement appointments:",{error:b.message}),b}},h=async()=>{try{o(!0),l(null),await d()}catch(b){T.error("Erreur chargement agenda:",{error:b.message}),l(b.message),M({title:"Erreur",description:"Impossible de charger l'agenda.",variant:"destructive"})}finally{o(!1)}};p.useEffect(()=>{e&&h()},[e]),p.useEffect(()=>{if(!e||!t)return;const b=k.channel(`agenda-changes-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"appointments",filter:`organization_id=eq.${t}`},w=>{if(w.eventType==="INSERT"){const j=qa(w.new);n(_=>_.some(S=>S.id===j.id)?_:[..._,j])}if(w.eventType==="UPDATE"){const j=qa(w.new);n(_=>_.map(S=>S.id===w.new.id?j:S))}w.eventType==="DELETE"&&n(j=>j.filter(_=>_.id!==w.old.id))}).subscribe();return u(b),()=>{k.removeChannel(b)}},[e,t]);const m=async b=>{try{const{data:{user:w}}=await k.auth.getUser();if(!w)throw new Error("Non authentifi");const j=b.contactId&&b.contactId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)?b.contactId:null;let _=b.assignedUserId;_||(_=w.id);const S=new Date,E=new Date(S.getTime()+60*60*1e3);if(!t)throw new Error("Organization ID manquant - Impossible de crer le rendez-vous");const{data:N,error:P}=await k.from("appointments").insert([{title:b.title||"Rendez-vous",start_time:b.startTime||S.toISOString(),end_time:b.endTime||E.toISOString(),contact_id:j,assigned_user_id:_,project_id:b.projectId||null,step:b.step||null,type:b.type||"physical",status:b.status||"pending",share:b.share||!1,notes:b.notes||null,location:b.location||null,organization_id:t}]).select().single();if(P)throw P;const C=qa(N);if(n(I=>[...I,C]),M({title:"Succs",description:"Rendez-vous ajout avec succs !",className:"bg-green-500 text-white"}),N.project_id&&N.contact_id)try{const I=N.type==="physical"?"RDV Physique":N.type==="virtual"?"RDV Visio":N.type==="call"?"Appel":"Tche",$=new Date(N.start_time).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});await f({prospectId:N.contact_id,projectType:N.project_id,title:"Activit planifie",description:`${I} programm pour le ${$}`,metadata:{event_type:"activity",activity_type:N.type,appointment_id:N.id,start_time:N.start_time,end_time:N.end_time,status:N.status,step:N.step,source:"agenda"},createdBy:(w==null?void 0:w.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),T.debug(" Activit journalise dans project_history",{appointmentId:N.id,projectId:N.project_id,type:N.type})}catch(I){T.error(" Erreur journalisation project_history (non-bloquant)",{error:I.message,appointmentId:N.id})}return C}catch(w){throw T.error("Erreur ajout appointment",{error:w.message}),T.error("Dtails erreur",{details:JSON.stringify(w,null,2)}),M({title:"Erreur",description:w.message||"Impossible d'ajouter le rendez-vous.",variant:"destructive"}),w}},g=async(b,w)=>{try{const j=r.find(P=>P.id===b),_={};w.title!==void 0&&(_.title=w.title),w.startTime!==void 0&&(_.start_time=w.startTime),w.endTime!==void 0&&(_.end_time=w.endTime),w.contactId!==void 0&&(_.contact_id=w.contactId),w.assignedUserId!==void 0&&(_.assigned_user_id=w.assignedUserId),w.projectId!==void 0&&(_.project_id=w.projectId),w.step!==void 0&&(_.step=w.step),w.type!==void 0&&(_.type=w.type),w.status!==void 0&&(_.status=w.status),w.share!==void 0&&(_.share=w.share),w.notes!==void 0&&(_.notes=w.notes),w.location!==void 0&&(_.location=w.location);const{data:S,error:E}=await k.from("appointments").update(_).eq("id",b).select().single();if(E)throw E;const N=qa(S);if(n(P=>P.map(C=>C.id===b?N:C)),S.project_id&&S.contact_id&&j)try{const P=w.status!==void 0&&j.status!==S.status,C=(w.startTime!==void 0||w.endTime!==void 0)&&(j.start!==S.start_time||j.end!==S.end_time),I=w.step!==void 0||w.notes!==void 0||w.location!==void 0;if(P||C||I){let O="Activit mise  jour : ";const $=[];if(P){const V={pending:"En attente",effectue:"Effectu",annule:"Annul",reporte:"Report"};$.push(`statut chang en "${V[S.status]||S.status}"`)}if(C){const z=new Date(S.start_time).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"});$.push(`reprogramm le ${z}`)}I&&!P&&!C&&$.push("informations modifies"),O+=$.join(", ");const{data:{user:L}}=await k.auth.getUser();await f({prospectId:S.contact_id,projectType:S.project_id,title:"Activit mise  jour",description:O,metadata:{event_type:"activity",activity_type:S.type,appointment_id:S.id,start_time:S.start_time,end_time:S.end_time,status:S.status,step:S.step,changes:{status:P?{from:j.status,to:S.status}:void 0,date:C?{from:j.start,to:S.start_time}:void 0},source:"agenda"},createdBy:(L==null?void 0:L.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),T.debug(" Modification activit journalise dans project_history",{appointmentId:S.id,changes:{hasStatusChange:P,hasDateChange:C,hasOtherChange:I}})}}catch(P){T.error(" Erreur journalisation project_history (non-bloquant)",{error:P.message,appointmentId:S.id})}return S}catch(j){throw T.error("Erreur update appointment:",{error:j.message}),M({title:"Erreur",description:j.message||"Impossible de modifier le rendez-vous.",variant:"destructive"}),j}},v=async b=>{try{const w=r.find(_=>_.id===b),{error:j}=await k.from("appointments").delete().eq("id",b);if(j)throw j;if(n(_=>_.filter(S=>S.id!==b)),M({title:"Succs",description:"Rendez-vous supprim avec succs !",className:"bg-green-500 text-white"}),w!=null&&w.projectId&&(w!=null&&w.contactId))try{const _=w.type==="physical"?"RDV Physique":w.type==="virtual"?"RDV Visio":w.type==="call"?"Appel":"Tche",{data:{user:S}}=await k.auth.getUser();await f({prospectId:w.contactId,projectType:w.projectId,title:"Activit supprime",description:`${_} supprim de l'agenda`,metadata:{event_type:"activity",activity_type:w.type,appointment_id:b,status:"deleted",deleted_at:new Date().toISOString(),source:"agenda"},createdBy:(S==null?void 0:S.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),T.debug(" Suppression activit journalise dans project_history",{appointmentId:b,type:w.type})}catch(_){T.error(" Erreur journalisation project_history (non-bloquant)",{error:_.message,appointmentId:b})}}catch(w){throw T.error("Erreur suppression appointment:",{error:w.message}),M({title:"Erreur",description:w.message||"Impossible de supprimer le rendez-vous.",variant:"destructive"}),w}},x=r.filter(b=>b.type==="call"),y=r.filter(b=>b.type==="task");return{appointments:r,calls:x,tasks:y,loading:s,error:a,addAppointment:m,updateAppointment:g,deleteAppointment:v,addCall:m,updateCall:g,deleteCall:v,addTask:m,updateTask:g,deleteTask:v,refetchAll:h}},Qre=(e={})=>{const t=typeof e=="string"?e:(e==null?void 0:e.organizationId)||null,r=typeof e=="string"?!0:(e==null?void 0:e.enabled)!==!1,[n,s]=p.useState(null),[o,a]=p.useState(!0),[l,c]=p.useState(null),u=p.useRef(!1),f="9769af46-b3ac-4909-8810-a8cf3fd6e307",d=async()=>{if(!r){a(!1);return}try{a(!0);const{data:N,error:P}=await k.from("company_settings").select("*").eq("id",f).single();if(P)throw P;s(N),c(null)}catch(N){T.error("Erreur chargement company settings:",{error:N.message}),c(N.message)}finally{a(!1)}};p.useEffect(()=>{if(!r){a(!1);return}d()},[r]),p.useEffect(()=>{if(!r)return;const N=k.channel("company-settings-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"company_settings",filter:`id=eq.${f}`},P=>{s(C=>JSON.stringify(C)===JSON.stringify(P.new)?C:(u.current=!1,P.new))}).subscribe();return()=>{k.removeChannel(N)}},[r]);const h=async N=>{try{u.current=!0;const{error:P}=await k.from("company_settings").update({logo_url:N,updated_at:new Date().toISOString()}).eq("id",f);if(P)throw T.error("Supabase update error details:",{error:P.message}),u.current=!1,P;if(t){const{error:C}=await k.from("organization_settings").update({logo_url:N,updated_at:new Date().toISOString()}).eq("organization_id",t);C?T.warn("Sync logo vers organization_settings chou:",{error:C.message}):T.info("Logo synchronis vers organization_settings")}return s(C=>({...C,logo_url:N,updated_at:new Date().toISOString()})),M({title:"Logo mis  jour !",description:"Le logo de l'entreprise a t modifi.",className:"bg-green-500 text-white"}),!0}catch(P){throw T.error("Erreur update logo:",{error:P.message}),M({title:"Erreur",description:P.message||"Impossible de mettre  jour le logo.",variant:"destructive"}),P}},m=async()=>{try{u.current=!0;const{error:N}=await k.from("company_settings").update({logo_url:null,updated_at:new Date().toISOString()}).eq("id",f);if(N)throw T.error("Supabase remove error details:",{error:N.message}),u.current=!1,N;if(t){const{error:P}=await k.from("organization_settings").update({logo_url:null,updated_at:new Date().toISOString()}).eq("organization_id",t);P?T.warn("Sync suppression logo vers organization_settings chou:",{error:P.message}):T.info("Suppression logo synchronise vers organization_settings")}return s(P=>({...P,logo_url:null,updated_at:new Date().toISOString()})),M({title:"Logo supprim",description:"Le logo de l'entreprise a t retir.",className:"bg-blue-500 text-white"}),!0}catch(N){throw T.error("Erreur suppression logo:",{error:N.message}),M({title:"Erreur",description:N.message||"Impossible de supprimer le logo.",variant:"destructive"}),N}},g=async N=>{try{u.current=!0;const{error:P}=await k.from("company_settings").update({settings:N,updated_at:new Date().toISOString()}).eq("id",f);if(P)throw T.error("Supabase settings update error details:",{error:P.message}),u.current=!1,P;return s(C=>({...C,settings:N,updated_at:new Date().toISOString()})),!0}catch(P){throw T.error("Erreur update settings:",{error:P.message}),M({title:"Erreur",description:P.message||"Impossible de mettre  jour les paramtres.",variant:"destructive"}),P}},v=async N=>{if(!t)return T.error("updateFormContactConfig: organizationId requis pour isolation multi-tenant"),M({title:"Erreur",description:"Organisation non dfinie. Impossible de sauvegarder.",variant:"destructive"}),!1;try{u.current=!0;const{error:P}=await k.from("organization_settings").upsert({organization_id:t,form_contact_config:N,updated_at:new Date().toISOString()},{onConflict:"organization_id"});if(P)throw T.error("Supabase form contact upsert error (organization_settings):",{error:P.message}),u.current=!1,P;return T.info("Form contact config sauvegard dans organization_settings",{organizationId:t}),!0}catch(P){throw T.error("Erreur update form contact config:",{error:P.message}),M({title:"Erreur",description:"Impossible de mettre  jour le formulaire de contact.",variant:"destructive"}),P}},x=()=>{var N;return((N=n==null?void 0:n.settings)==null?void 0:N.form_contact_config)||[]},y=async N=>{try{u.current=!0;const C={...(n==null?void 0:n.settings)||{},global_pipeline_steps:N},{error:I}=await k.from("company_settings").update({settings:C,updated_at:new Date().toISOString()}).eq("id",f);if(I)throw T.error("Supabase global pipeline update error:",{error:I.message}),u.current=!1,I;return s(O=>({...O,settings:C,updated_at:new Date().toISOString()})),!0}catch(P){throw T.error("Erreur update global pipeline steps:",{error:P.message}),M({title:"Erreur",description:"Impossible de mettre  jour les pipelines globaux.",variant:"destructive"}),P}},b=()=>{var N;return((N=n==null?void 0:n.settings)==null?void 0:N.global_pipeline_steps)||[]},w=async N=>{try{u.current=!0;const C={...(n==null?void 0:n.settings)||{},landing_page_config:N},{error:I}=await k.from("company_settings").update({settings:C,updated_at:new Date().toISOString()}).eq("id",f);if(I)throw T.error("Supabase landing page config update error:",{error:I.message}),u.current=!1,I;return s(O=>({...O,settings:C,updated_at:new Date().toISOString()})),!0}catch(P){throw T.error("Erreur update landing page config:",{error:P.message}),M({title:"Erreur",description:"Impossible de mettre  jour la configuration de la landing page.",variant:"destructive"}),P}},j=async(N,P)=>{try{u.current=!0;const C=(n==null?void 0:n.settings)||{},O={...C.landing_page_config||{},[N]:P},$={...C,landing_page_config:O},{error:L}=await k.from("company_settings").update({settings:$,updated_at:new Date().toISOString()}).eq("id",f);if(L)throw u.current=!1,L;return s(V=>({...V,settings:$,updated_at:new Date().toISOString()})),!0}catch(C){throw T.error("Erreur update landing page field:",{error:C.message,field:N,value:P}),C}},_=async(N,P)=>{try{u.current=!0;const C=(n==null?void 0:n.settings)||{},I=C.landing_page_config||{},$=(I.blocks||E()).map(B=>B.id===N?{...B,...P}:B),L={...I,blocks:$},V={...C,landing_page_config:L},{error:z}=await k.from("company_settings").update({settings:V,updated_at:new Date().toISOString()}).eq("id",f);if(z)throw u.current=!1,z;return s(B=>({...B,settings:V,updated_at:new Date().toISOString()})),!0}catch(C){throw T.error("Erreur update landing page block:",{error:C.message,blockId:N,blockData:P}),C}},S=()=>{var P;const N=((P=n==null?void 0:n.settings)==null?void 0:P.landing_page_config)||{};return{landing_logo_url:N.landing_logo_url||null,hero_title:N.hero_title||"Bienvenue sur notre plateforme",hero_subtitle:N.hero_subtitle||"Grez vos projets nergtiques en toute simplicit",hero_cta_text:N.hero_cta_text||"Commencer maintenant",hero_cta_link:N.hero_cta_link||"/inscription",blocks:N.blocks||E()}},E=()=>[{id:1,icon:"",title:"Crez votre projet",description:"Inscrivez-vous et dcrivez votre projet en quelques clics."},{id:2,icon:"",title:"Nous intervenons",description:"Notre quipe prend en charge votre dossier de A  Z."},{id:3,icon:"",title:"Profitez des rsultats",description:"Suivez l'avancement en temps rel depuis votre espace client."}];return{companySettings:n,loading:o,error:l,updateLogo:h,removeLogo:m,updateSettings:g,updateFormContactConfig:v,getFormContactConfig:x,updateGlobalPipelineSteps:y,getGlobalPipelineSteps:b,updateLandingPageConfig:w,updateLandingPageField:j,updateLandingPageBlock:_,getLandingPageConfig:S,refetch:d}};function Zre(e=null){const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=p.useRef(!1);p.useEffect(()=>{e&&c()},[e]),p.useEffect(()=>{if(!e)return;const m=k.channel(`global-pipeline-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"global_pipeline_steps",filter:`organization_id=eq.${e}`},g=>{if(l.current){l.current=!1;return}g.eventType==="INSERT"?r(v=>v.find(y=>y.id===g.new.id)?v:[...v,g.new].sort((y,b)=>y.position-b.position)):g.eventType==="UPDATE"?r(v=>v.map(x=>x.id===g.new.id?g.new:x).sort((x,y)=>x.position-y.position)):g.eventType==="DELETE"&&r(v=>v.filter(x=>x.id!==g.old.id))}).subscribe();return()=>{k.removeChannel(m)}},[e]);const c=async()=>{if(!e){r([]),s(!1);return}try{s(!0),a(null);const{data:m,error:g}=await k.rpc("get_global_pipeline_steps_for_org",{p_organization_id:e});if(g)throw g;const v=Array.isArray(m)?[...m].sort((x,y)=>(x.position??0)-(y.position??0)):[];r(v)}catch(m){T.error(" Erreur fetch global pipeline steps:",m),a(m.message)}finally{s(!1)}};return{globalPipelineSteps:t,loading:n,error:o,addStep:async(m,g="bg-gray-100")=>{if(!e)throw new Error("organization_id requis pour crer une colonne pipeline");try{l.current=!0;const x=(t.length>0?Math.max(...t.map(j=>j.position)):-1)+1,y=`global-pipeline-step-${Date.now()}`,{data:b,error:w}=await k.from("global_pipeline_steps").insert([{step_id:y,label:m,color:g,position:x,organization_id:e}]).select().single();if(w)throw w;return r(j=>[...j,b].sort((_,S)=>_.position-S.position)),b}catch(v){throw T.error(" Erreur cration colonne pipeline:",v),l.current=!1,v}},updateStep:async(m,g)=>{try{l.current=!0;const{data:v,error:x}=await k.from("global_pipeline_steps").update(g).eq("id",m).select().single();if(x)throw x;return r(y=>y.map(b=>b.id===m?v:b).sort((b,w)=>b.position-w.position)),v}catch(v){throw T.error(" Erreur modification colonne pipeline:",v),l.current=!1,v}},deleteStep:async m=>{try{l.current=!0;const{error:g}=await k.from("global_pipeline_steps").delete().eq("id",m);if(g)throw g;r(v=>v.filter(x=>x.id!==m))}catch(g){throw T.error(" Erreur suppression colonne pipeline:",g),l.current=!1,g}},reorderSteps:async m=>{try{l.current=!0;const g=m.map((v,x)=>({id:v.id,position:x}));for(const v of g){const{error:x}=await k.from("global_pipeline_steps").update({position:v.position}).eq("id",v.id);if(x)throw x}r(m)}catch(g){throw T.error(" Erreur rorganisation colonnes pipeline:",g),l.current=!1,g}},refresh:c}}function ene(e,t=!0){const[r,n]=p.useState([]),[s,o]=p.useState(!0);p.useEffect(()=>{if(!t||!e){o(!1);return}a();const f=`notifications-${e}-${Date.now()}`,d=k.channel(f).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`owner_id=eq.${e}`},h=>{if(h.eventType==="INSERT"){const m=u(h.new);n(g=>g.find(x=>x.id===m.id)?g:[m,...g])}else if(h.eventType==="UPDATE"){const m=u(h.new);n(g=>g.map(v=>v.id===m.id?m:v))}else h.eventType==="DELETE"&&n(m=>m.filter(g=>g.id!==h.old.id))}).subscribe();return()=>{k.removeChannel(d)}},[e,t]);async function a(){try{o(!0);const{data:f,error:d}=await k.from("notifications").select(`
          *,
          prospects!inner(owner_id)
        `).eq("prospects.owner_id",e).order("created_at",{ascending:!1});if(d)throw d;const h=(f||[]).map(u);n(h)}catch(f){T.error(" Error loading admin notifications:",f)}finally{o(!1)}}async function l(f){try{const{prospectId:d,projectType:h,prospectName:m,projectName:g,ownerId:v}=f;if(!v){T.error("ownerId is REQUIRED for notifications");return}T.debug("Checking existing notification",{prospectId:d,projectType:h});const{data:x,error:y}=await k.from("notifications").select("*").eq("prospect_id",d).eq("project_type",h).eq("read",!1).maybeSingle();if(T.debug("Existing notification check",{found:!!x,error:!!y}),y){T.error(" Error checking existing notification:",y);return}if(x){T.debug("Incrementing notification count",{from:x.count,to:x.count+1});const{error:b}=await k.from("notifications").update({count:x.count+1,created_at:new Date().toISOString()}).eq("id",x.id);if(b)throw T.error("Error updating notification:",b),b;T.debug("Notification count incremented successfully")}else{const{data:b,error:w}=await k.from("prospects").select("organization_id").eq("id",d).single();if(w||!(b!=null&&b.organization_id))throw T.error("Organization introuvable pour le prospect:",{prospectId:d,error:w==null?void 0:w.message}),new Error("Organization introuvable pour le prospect");T.debug("Creating new notification with count=1");const{error:j}=await k.from("notifications").insert({prospect_id:d,owner_id:v,organization_id:b.organization_id,project_type:h,prospect_name:m,project_name:g,count:1,read:!1});if(j)throw T.error("Error creating notification:",j),j;T.debug("New notification created")}}catch(d){T.error("Error creating/updating notification:",d)}}async function c(f){if(!f){T.warn("markAsRead appel sans notificationId valide");return}try{const{error:d}=await k.from("notifications").update({read:!0}).eq("id",f);if(d)throw d;n(h=>h.map(m=>m.id===f?{...m,read:!0}:m))}catch(d){T.error("Error marking notification as read:",d)}}function u(f){return{id:f.id,prospectId:f.prospect_id,projectType:f.project_type,prospectName:f.prospect_name,projectName:f.project_name,count:f.count,read:f.read,timestamp:f.created_at}}return{notifications:r,loading:s,createOrUpdateNotification:l,markAsRead:c,refresh:a}}function tne(e,t=!0){const[r,n]=p.useState([]),[s,o]=p.useState(!0);p.useEffect(()=>{if(!t||!e){n([]),o(!1);return}a();const f=k.channel(`client-notifications-${e}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"client_notifications",filter:`prospect_id=eq.${e}`},d=>{if(d.eventType==="INSERT"){const h=u(d.new);n(m=>m.find(v=>v.id===h.id)?m:[h,...m])}else if(d.eventType==="UPDATE"){const h=u(d.new);n(m=>m.map(g=>g.id===h.id?h:g))}else d.eventType==="DELETE"&&n(h=>h.filter(m=>m.id!==d.old.id))}).subscribe();return()=>{k.removeChannel(f)}},[e,t]);async function a(){try{o(!0);const{data:f,error:d}=await k.from("client_notifications").select("*").eq("prospect_id",e).order("created_at",{ascending:!1});if(d)throw d;const h=(f||[]).map(u);n(h)}catch(f){T.error("Erreur chargement client notifications:",{error:f.message})}finally{o(!1)}}async function l(f){try{const{prospectId:d,projectType:h,projectName:m,message:g}=f;if(!d||!h){T.error("Missing required fields:",{error:{prospectId:d,projectType:h}.message});return}const{data:v,error:x}=await k.from("client_notifications").select("*").eq("prospect_id",d).eq("project_type",h).eq("read",!1).maybeSingle();if(x){T.error("Error checking existing notification:",{error:x.message});return}if(v){const{error:y}=await k.from("client_notifications").update({count:v.count+1,message:g,created_at:new Date().toISOString()}).eq("id",v.id);if(y)throw T.error("Erreur update notification:",{error:y.message}),y}else{const{data:y,error:b}=await k.from("prospects").select("organization_id").eq("id",d).single();if(b||!(y!=null&&y.organization_id))throw T.error("Organization introuvable pour le prospect:",{prospectId:d,error:b==null?void 0:b.message}),new Error("Organization introuvable pour le prospect");const{data:w,error:j}=await k.from("client_notifications").insert({prospect_id:d,project_type:h,project_name:m,message:g,count:1,read:!1,organization_id:y.organization_id}).select();if(j)throw T.error("Error inserting notification:",{error:j.message}),j}}catch(d){T.error("Erreur cration/updating client notification:",{error:d.message})}}async function c(f){if(!f){T.warn("markAsRead appel sans notificationId valide");return}try{const{error:d}=await k.from("client_notifications").update({read:!0}).eq("id",f);if(d)throw d;n(h=>h.map(m=>m.id===f?{...m,read:!0}:m))}catch(d){T.error("Error marking client notification as read:",{error:d.message})}}function u(f){return{id:f.id,projectType:f.project_type,projectName:f.project_name,message:f.message,count:f.count,read:f.read,timestamp:f.created_at}}return{notifications:r,loading:s,createOrUpdateNotification:l,markAsRead:c,refresh:a}}function rne(e=null){const{organizationId:t}=nn(),[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=m=>({panelId:m.panel_id,prospectId:m.prospect_id,projectType:m.project_type,formId:m.form_id,promptId:m.prompt_id,currentStepIndex:m.current_step_index,messageTimestamp:m.message_timestamp,status:m.status,userOverride:m.user_override,stepName:m.step_name,filledByRole:m.filled_by_role||"client",formData:m.form_data||{},lastSubmittedAt:m.last_submitted_at?new Date(m.last_submitted_at).getTime():null,createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()});p.useEffect(()=>{if(e==="__DISABLED__"){n([]),o(!1);return}if(!t){n([]),o(!1);return}(async()=>{try{o(!0);const{data:{session:x}}=await k.auth.getSession();if(T.debug("Loading client form panels",{prospectId:e}),!x){T.debug("No session - skipping form panels loading"),n([]),o(!1);return}const{data:y,error:b}=await k.rpc("get_client_form_panels_for_org",{p_organization_id:t,p_prospect_id:e||null});if(b)throw T.error("Supabase SELECT error:",b.message),b;console.log("[useSupabaseClientFormPanels] RPC result:",{raw:(y==null?void 0:y.length)||0,organizationId:t,prospectId:e,firstPanel:y!=null&&y[0]?{id:y[0].id,panel_id:y[0].panel_id,prospect_id:y[0].prospect_id,form_id:y[0].form_id,status:y[0].status,filled_by_role:y[0].filled_by_role,form_data:y[0].form_data}:null});const w=Array.isArray(y)?y.map(c):[];console.log("[useSupabaseClientFormPanels] Transformed:",{count:w.length}),n(w),l(null)}catch(x){T.error(" [useSupabaseClientFormPanels] Exception chargement:",x.message||x),n([]),l(x.message||"Erreur inconnue")}finally{o(!1)}})();const g=e?`client-form-panels-${e}`:"client-form-panels-all",v=k.channel(g).on("postgres_changes",{event:"*",schema:"public",table:"client_form_panels",...e&&{filter:`prospect_id=eq.${e}`}},x=>{try{if(x.eventType==="INSERT"){const y=c(x.new);n(b=>{const w=Array.isArray(b)?b:[];return w.some(j=>j.panelId===y.panelId)?w:[y,...w]})}else if(x.eventType==="UPDATE"){const y=c(x.new);n(b=>(Array.isArray(b)?b:[]).map(j=>j.panelId===y.panelId?y:j))}else x.eventType==="DELETE"&&n(y=>(Array.isArray(y)?y:[]).filter(w=>w.panelId!==x.old.panel_id))}catch(y){T.error(" [useSupabaseClientFormPanels] Erreur real-time:",y)}}).subscribe();return()=>{k.removeChannel(v)}},[e,t]);const u=async(m,g)=>{try{const v={};g.status!==void 0&&(v.status=g.status),g.userOverride!==void 0&&(v.user_override=g.userOverride),g.lastSubmittedAt!==void 0&&(v.last_submitted_at=g.lastSubmittedAt),g.formData!==void 0&&(v.form_data=g.formData);const{error:x}=await k.from("client_form_panels").update(v).eq("panel_id",m);if(x)throw x;return{success:!0}}catch(v){return T.error(" Erreur mise  jour form panel:",v),{success:!1,error:v.message}}},f=async m=>{try{const{error:g}=await k.from("client_form_panels").delete().eq("panel_id",m);if(g)throw g;return{success:!0}}catch(g){return T.error(" Erreur suppression form panel:",g),{success:!1,error:g.message}}},d=async(m,g)=>{try{let v=k.from("client_form_panels").delete().eq("prospect_id",m);g&&(v=v.eq("project_type",g));const{error:x}=await v;if(x)throw x;return{success:!0}}catch(v){return T.error(" Erreur suppression form panels:",v),{success:!1,error:v.message}}},h=async m=>{try{T.debug("Creating form panel",{prospectId:m.prospectId,projectType:m.projectType,formId:m.formId});const{error:g}=await k.from("client_form_panels").insert({panel_id:m.panelId||`panel-${m.prospectId}-${m.projectType}-${m.formId}-${Date.now()}`,prospect_id:m.prospectId,project_type:m.projectType,form_id:m.formId,prompt_id:m.promptId||null,current_step_index:m.currentStepIndex||0,message_timestamp:m.messageTimestamp,status:m.status||"pending",step_name:m.stepName||null,action_id:m.actionId||null});if(g)throw T.error("Supabase INSERT error:",g.message),g;return T.debug("Form panel created successfully"),{success:!0}}catch(g){return T.error("Form panel insertion error:",g.message||g),{success:!1,error:g.message||"Erreur inconnue"}}};return{formPanels:Array.isArray(r)?r:[],loading:s,error:a,createFormPanel:h,updateFormPanel:u,deleteFormPanel:f,deleteFormPanelsByProspect:d}}function nne(e,t=!0){const[r,n]=p.useState({}),[s,o]=p.useState(!0);return p.useEffect(()=>{if(!t||!e)return;(async()=>{try{const{data:c,error:u}=await k.from("project_steps_status").select("prospect_id, project_type, steps");if(u)throw u;const f={};(c||[]).forEach(d=>{const h=`${d.prospect_id}-${d.project_type}`;f[h]=d.steps}),n(f)}catch(c){logger.error(" Error loading all project steps:",c)}finally{o(!1)}})();const l=k.channel(`all-project-steps-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_steps_status",filter:`organization_id=eq.${e}`},c=>{if(c.eventType==="INSERT"||c.eventType==="UPDATE"){const u=`${c.new.prospect_id}-${c.new.project_type}`;n(f=>({...f,[u]:c.new.steps}))}else if(c.eventType==="DELETE"){const u=`${c.old.prospect_id}-${c.old.project_type}`;n(f=>{const{[u]:d,...h}=f;return h})}}).subscribe();return()=>{k.removeChannel(l)}},[t,e]),{allProjectSteps:r,loading:s}}const sne=(e,t=!0)=>{const[r,n]=p.useState({}),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useCallback(d=>{if(!d||d.length===0)return{};const h={};return d.forEach(m=>{const{prospect_id:g,project_type:v,data:x}=m;if(!g||!v)return;h[g]||(h[g]={});const y={};(x==null?void 0:x.amount)!==void 0&&x.amount!==null&&(y.amount=x.amount),(x==null?void 0:x.status)!==void 0&&x.status!==null&&(y.status=x.status),h[g][v]=y}),h},[]);p.useEffect(()=>{(async()=>{try{if(!e){n({}),o(!1);return}o(!0),l(null);const{data:h,error:m}=await k.rpc("get_project_infos_for_org",{p_organization_id:e});if(m){T.error("Erreur chargement project_infos:",{error:m.message}),l(m);return}const g=c(h||[]);n(g),T.debug("project_infos loaded from Supabase",{count:Object.keys(g).length})}catch(h){T.error("Erreur fetchProjectInfos:",{error:h.message}),l(h)}finally{o(!1)}})()},[c,e]),p.useEffect(()=>{if(!t||!e)return;const d=k.channel(`project-infos-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_infos",filter:`organization_id=eq.${e}`},h=>{if(T.debug("Real-time project_infos",{eventType:h.eventType}),h.eventType==="INSERT"||h.eventType==="UPDATE"){const{prospect_id:m,project_type:g,data:v}=h.new;n(x=>{const y={...x};y[m]||(y[m]={});const b={};return(v==null?void 0:v.amount)!==void 0&&v.amount!==null&&(b.amount=v.amount),(v==null?void 0:v.status)!==void 0&&v.status!==null&&(b.status=v.status),y[m][g]=b,y})}else if(h.eventType==="DELETE"){const{prospect_id:m,project_type:g}=h.old;n(v=>{var y;const x={...v};return(y=x[m])!=null&&y[g]&&(delete x[m][g],Object.keys(x[m]).length===0&&delete x[m]),x})}}).subscribe();return()=>{k.removeChannel(d)}},[t,e]);const u=p.useCallback((d,h)=>{var m;return!d||!h?{}:((m=r==null?void 0:r[d])==null?void 0:m[h])||{}},[r]),f=p.useCallback(async(d,h,m)=>{var g;if(!d||!h){console.warn(" updateProjectInfo: prospectId ou projectType manquant");return}try{const v=((g=r==null?void 0:r[d])==null?void 0:g[h])||{},x=typeof m=="function"?m(v):{...v,...m},y={};(x==null?void 0:x.amount)!==void 0&&(y.amount=x.amount),(x==null?void 0:x.status)!==void 0&&(y.status=x.status),n(w=>{const j={...w};return j[d]||(j[d]={}),Object.keys(y).length===0?(delete j[d][h],Object.keys(j[d]).length===0&&delete j[d]):j[d][h]=y,j});const{error:b}=await k.from("project_infos").upsert({prospect_id:d,project_type:h,data:y},{onConflict:"prospect_id,project_type"});if(b)throw T.error("Erreur upsert project_infos:",{error:b.message}),b;T.debug("project_info updated",{prospectId:d,projectType:h})}catch(v){T.error("Error updateProjectInfo:",{error:v.message});const{data:x}=await k.from("project_infos").select("prospect_id, project_type, data").eq("prospect_id",d).eq("project_type",h).single();throw x&&n(y=>{var j,_;const b={...y};b[d]||(b[d]={});const w={};return((j=x.data)==null?void 0:j.amount)!==void 0&&(w.amount=x.data.amount),((_=x.data)==null?void 0:_.status)!==void 0&&(w.status=x.data.status),b[d][h]=w,b}),v}},[r]);return{projectInfos:r,getProjectInfo:u,updateProjectInfo:f,isLoading:s,error:a}};function one(e,t,r=!0){p.useEffect(()=>{if(!r||!e||!t||Object.keys(t).length===0)return;const n=k.channel(`auto-create-tasks-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"project_steps_status",filter:`organization_id=eq.${e}`},async s=>{var o;try{const{prospect_id:a,project_type:l,steps:c}=s.new,u=c.findIndex(g=>g.status==="in_progress");if(u===-1)return;T.debug("Step changed to in_progress",{prospect_id:a,project_type:l,currentStepIndex:u});const f=Object.values(t).find(g=>g.projectId===l);if(!f){T.debug("No prompt found for project",{project_type:l});return}const d=(o=f.stepsConfig)==null?void 0:o[u];if(!d){T.debug("No config for step",{currentStepIndex:u});return}const{data:h,error:m}=await k.from("prospects").select("owner_id, name").eq("id",a).single();if(m){T.error("Error fetching prospect",{error:m});return}for(const g of d.actions||[]){if(g.hasClientAction===!1){T.debug("Creating checklist task",{prospect_id:a,project_type:l,currentStepIndex:u,actionId:g.id});const v=(g.checklist||[]).map(b=>` ${b.text}`).join(`
`),x=kS(new Date),y=new Date(x);y.setMinutes(y.getMinutes()+30),await TS({prospect:h,prospect_id:a,project_type:l,stepName:c[u].name,title:`Tche pour ${h.name}`,notes:v||"Tches  effectuer",taskTime:x,endTime:y});continue}if(g.hasClientAction!==!1&&g.managementMode==="manual"&&g.createTask!==!1){T.debug("Creating task for manual action",{prospect_id:a,project_type:l,currentStepIndex:u,actionId:g.id});const v=kS(new Date),x=new Date(v);x.setMinutes(x.getMinutes()+30),await TS({prospect:h,prospect_id:a,project_type:l,stepName:c[u].name,title:`Tche pour ${h.name}`,notes:g.taskTitle||"Action requise pour ce client",taskTime:v,endTime:x})}}}catch(a){T.error("Error in auto-create-tasks listener",{error:a})}}).subscribe();return()=>{k.removeChannel(n)}},[t,r,e])}async function TS({prospect:e,prospect_id:t,project_type:r,stepName:n,title:s,notes:o,taskTime:a,endTime:l}){const{data:c,error:u}=await k.from("appointments").select("id").eq("type","task").eq("contact_id",t).eq("project_id",r).eq("step",n).eq("title",s).eq("status","pending").gte("created_at",new Date(Date.now()-6e4).toISOString());if(u&&T.error(" Erreur vrification tches existantes:",u),c&&c.length>0)return T.warn(" Tche dj existante, skip cration:",{prospect:e.name,project_type:r,step:n,existing_tasks:c.length}),!0;const{error:f}=await k.from("appointments").insert({type:"task",title:s,assigned_user_id:e.owner_id,contact_id:t,project_id:r,step:n,start_time:a.toISOString(),end_time:l.toISOString(),status:"pending",notes:o,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return f?f.code==="23505"?(T.warn(" Tche dj existante (bloque par contrainte unique DB):",{prospect:e.name,project_type:r,step:n,constraint:"unique_pending_task_per_prospect_step"}),!0):(T.error("Error creating task",{error:f}),M({title:"Erreur",description:"Impossible de crer la tche automatique",variant:"destructive"}),!1):(T.info(" Task created automatically",{prospect:e.name,project_type:r,step:n,scheduled_for:a.toISOString()}),M({title:" Tche cre",description:`Une tche a t cre pour ${e.name}`,className:"bg-green-500 text-white"}),!0)}function kS(e=new Date){const t=e.getHours();if(t<9){const r=new Date(e);return r.setHours(9,0,0,0),r}if(t>=9&&t<19)return e;if(t>=19){const r=new Date(e);return r.setDate(r.getDate()+1),r.setHours(9,0,0,0),r}return e}function ine(e,{organizationId:t=null,enabled:r=!0}={}){p.useEffect(()=>{if(!r)return;if(!t){T.warn(" useAutoVerificationTasks: Pas d'organization_id fourni");return}if(!e||Object.keys(e).length===0)return;const n=k.channel(`auto-verification-tasks-${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${t}`},async s=>{var o,a;try{const l=(o=s.old)==null?void 0:o.status,c=(a=s.new)==null?void 0:a.status;l!=="submitted"&&c==="submitted"&&(T.debug("Client form submitted",{panel_id:s.new.panel_id,prospect_id:s.new.prospect_id,project_type:s.new.project_type}),await ane(s.new,e))}catch(l){T.error(" Erreur dans useAutoVerificationTasks:",l)}}).subscribe();return()=>{k.removeChannel(n)}},[e,t,r])}async function ane(e,t){const{prospect_id:r,project_type:n,form_id:s,verification_mode:o}=e;if((o??"HUMAN").toUpperCase()!=="HUMAN")return;const{data:l,error:c}=await k.from("prospects").select("name, owner_id, organization_id").eq("id",r).single();if(c||!l){T.error(" Erreur rcupration prospect:",c);return}if(!l.organization_id){T.error(" Organization ID manquant pour le prospect:",{prospect_id:r});return}const{data:u,error:f}=await k.from("forms").select("name").eq("form_id",s).single(),d=(u==null?void 0:u.name)||s,h=e.step_name||n||"tape",{data:m,error:g}=await k.from("appointments").select("id").eq("type","task").eq("contact_id",r).eq("project_id",n).eq("step",h).eq("title",`Vrifier le formulaire de ${l.name}`).eq("status","pending").gte("created_at",new Date(Date.now()-6e4).toISOString());if(g&&T.error(" Erreur vrification tches existantes:",g),m&&m.length>0){T.warn(" Tche de vrification dj existante, skip cration:",{prospect:l.name,form:d,existing_tasks:m.length});return}let v=l.owner_id;if(!v){T.warn(` owner_id NULL pour ${l.name}, recherche fallback Global Admin`);const{data:_,error:S}=await k.from("users").select("user_id").eq("organization_id",l.organization_id).eq("role","Global Admin").limit(1).single();if(!S&&_)v=_.user_id;else{T.error(` Aucun admin disponible pour org ${l.organization_id}`),M({title:"Erreur",description:"Aucun admin disponible pour assigner la tche.",variant:"destructive"});return}}const x=`Vrifier le formulaire de ${l.name}`,y=new Date,b=new Date(y.getTime()+30*60*1e3),w={type:"task",title:x,assigned_user_id:v,contact_id:r,project_id:n,step:h,organization_id:l.organization_id,start_time:y.toISOString(),end_time:b.toISOString(),status:"pending",notes:` Vrification requise par un humain

 **Formulaire:** ${d}
 **Client:** ${l.name}
 **tape:** ${h}
 **Projet:** ${n}

 Consultez les rponses du client et validez ou rejetez le formulaire.`,created_at:y.toISOString(),updated_at:y.toISOString()},{error:j}=await k.from("appointments").insert(w);if(j){if(j.code==="23505"){T.warn(" Tche dj existante (bloque par contrainte unique DB):",{prospect:l.name,form:d,constraint:"unique_pending_task_per_prospect_step"});return}T.error(" Erreur cration tche de vrification:",j),M({title:"Erreur",description:"Impossible de crer la tche de vrification.",variant:"destructive"});return}T.info(" Tche de vrification cre:",{title:x,prospect:l.name,form:d,assigned_to:l.owner_id}),M({title:" Tche cre",description:`Tche de vrification assigne pour ${l.name}`,className:"bg-green-500 text-white"})}function lne(e=new Date){const t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getDay(),n=t.getHours();if(r===0||r===6){const s=r===0?1:2;return t.setDate(t.getDate()+s),t.setHours(8,0,0,0),t}return n<8?(t.setHours(8,0,0,0),t):(n>=20&&(r===5?t.setDate(t.getDate()+3):t.setDate(t.getDate()+1),t.setHours(8,0,0,0)),t)}async function cne({prospectId:e,projectType:t,moduleId:r,formId:n,ownerId:s,reminderCount:o=0}){try{const{data:a,error:l}=await k.from("prospects").select("first_name, last_name, email").eq("id",e).single();if(l)throw new Error(`Prospect introuvable: ${l.message}`);const{data:c,error:u}=await k.from("forms").select("name").eq("form_id",n).single();if(u)throw new Error(`Formulaire introuvable: ${u.message}`);const f=lne(),d="Formulaire client non complt",h=`
Le client ${a.first_name} ${a.last_name} (${a.email}) n'a pas complt le formulaire "${c.name}" aprs ${o} relance(s).

 Module : ${r}
 Projet : ${t}
 ${o} relance(s) automatique(s) envoye(s)

Action requise : Contacter le client pour l'accompagner dans la compltion du formulaire.
    `.trim(),{data:m,error:g}=await k.from("tasks").insert({title:d,description:h,contact_id:e,owner_id:s,status:"pending",priority:"medium",due_date:f.toISOString(),task_type:"follow_up",metadata:{source:"workflow_v2_auto",moduleId:r,projectType:t,formId:n,reminderCount:o,createdBy:"system"}}).select().single();if(g)throw new Error(`Erreur cration tche: ${g.message}`);return console.log(" [TaskScheduler] Tche cre:",{taskId:m.id,scheduledAt:f.toISOString(),prospectId:e,ownerId:s,reminderCount:o}),{success:!0,taskId:m.id,scheduledAt:f}}catch(a){return console.error(" [TaskScheduler] Erreur cration tche:",a),{success:!1,error:a.message}}}const une={answer_question:{label:"Rpondre aux questions",icon:"",description:"Rpond aux questions poses par l'utilisateur"},show_checklist:{label:"Afficher la checklist",icon:"",description:"Montre les lments  vrifier pour cette tape"},show_documents:{label:"Lister les documents",icon:"",description:"Affiche les documents requis ou disponibles"},explain_clause:{label:"Expliquer une clause",icon:"",description:"Explique le contenu juridique d'une clause"},verify_owner:{label:"Vrifier le propritaire",icon:"",description:"Vrifie les informations du propritaire foncier"},calculate_tariff:{label:"Calculer le tarif",icon:"",description:"Calcule le tarif de vente optimal"},check_eligibility:{label:"Vrifier l'ligibilit",icon:"",description:"Vrifie si le projet rpond aux critres"},explain_technical:{label:"Expliquer techniquement",icon:"",description:"Fournit des explications techniques dtailles"},final_check:{label:"Vrification finale",icon:"",description:"Effectue une vrification complte avant validation"}};function lse(e){return une[e]||{label:e,icon:"",description:"Action personnalise"}}const rb={targetAudience:"CLIENT",actionType:null,allowedFormIds:[],allowedTemplateIds:[],managementMode:"HUMAN",verificationMode:"HUMAN",completionTrigger:null,requiredFields:[],reminderConfig:{enabled:!1,delayDays:1,maxRemindersBeforeTask:3}},bi={objective:"Accompagner l'utilisateur dans cette tape du projet",instructions:"Rponds de manire claire et concise. Si tu ne connais pas la rponse, demande des prcisions.",buttonLabels:{proceedLabel:"Valider et continuer",needDataLabel:"J'ai besoin d'infos"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:null,tone:"professional",maxResponseLength:500,actionConfig:{...rb}},ds={"appel-offre-investisseurs":{objective:"Guider l'investisseur dans la soumission de son dossier d'appel d'offre photovoltaque",instructions:`Tu es un expert en appels d'offre CRE (Commission de Rgulation de l'nergie).
    
Ton rle:
- Expliquer le processus de soumission
- Vrifier que le dossier est complet
- Rpondre aux questions sur les critres d'ligibilit
- Aider  calculer le tarif de vente optimal

Rgles:
- Ne jamais inventer de chiffres ou de dates
- Toujours vrifier les informations avant de rpondre
- Si incertain, demander confirmation  l'quipe technique
- tre prcis sur les dlais (gnralement 2-3 mois pour les rsultats)`,buttonLabels:{proceedLabel:"Soumettre le dossier",needDataLabel:"Question sur l'AO"},allowedActions:["answer_question","show_checklist","show_documents","calculate_tariff","check_eligibility"],knowledgeKey:"appel-offre",tone:"professional",maxResponseLength:600},"appel-offre":{objective:"Accompagner la soumission  l'appel d'offre CRE",instructions:`Expert en appels d'offre photovoltaque.
    
Priorits:
1. Vrifier l'ligibilit du projet
2. S'assurer que le dossier est complet
3. Conseiller sur le tarif de vente
4. Rappeler les dates limites`,buttonLabels:{proceedLabel:"Valider la soumission",needDataLabel:"Question AO"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:"appel-offre",tone:"professional",maxResponseLength:500},pdb:{objective:"Scuriser la signature de la promesse de bail avec le propritaire",instructions:`Tu es un assistant juridique spcialis en baux photovoltaques.
    
Ton rle:
- Expliquer les clauses du contrat
- Vrifier les informations du propritaire
- Guider le processus de signature
- Rassurer sur les engagements mutuels

Rgles:
- Toujours recommander une relecture juridique pour les cas complexes
- Ne jamais donner de conseil fiscal personnalis
- Vrifier l'identit du signataire (propritaire lgal)`,buttonLabels:{proceedLabel:"Envoyer pour signature",needDataLabel:"Question sur le bail"},allowedActions:["answer_question","show_checklist","show_documents","verify_owner","explain_clause"],knowledgeKey:"pdb",tone:"reassuring",maxResponseLength:500,actionConfig:{targetAudience:"CLIENT",actionType:"SIGNATURE",allowedFormIds:[],allowedTemplateIds:[],managementMode:"HUMAN",verificationMode:"HUMAN"}},"etude-technique":{objective:"Valider la faisabilit technique du projet photovoltaque",instructions:`Tu es un ingnieur photovoltaque.
    
Ton rle:
- Expliquer les aspects techniques
- Rpondre aux questions sur le dimensionnement
- Clarifier les rsultats de l'tude
- Prparer la visite sur site`,buttonLabels:{proceedLabel:"Valider l'tude",needDataLabel:"Question technique"},allowedActions:["answer_question","show_checklist","explain_technical"],knowledgeKey:"etude-technique",tone:"technical",maxResponseLength:600},raccordement:{objective:"Accompagner la demande de raccordement au rseau Enedis",instructions:`Tu es un expert en raccordement lectrique.
    
Ton rle:
- Expliquer le processus Enedis
- Anticiper les dlais
- Aider  prparer le dossier
- Rpondre aux questions sur la PTF`,buttonLabels:{proceedLabel:"Soumettre  Enedis",needDataLabel:"Question raccordement"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:"raccordement",tone:"professional",maxResponseLength:500},"mise-en-service":{objective:"Finaliser la mise en service de l'installation",instructions:`Tu supervises la mise en service de l'installation.
    
Ton rle:
- Vrifier que tout est prt
- Coordonner avec Enedis
- S'assurer du bon fonctionnement
- Clbrer la russite du projet !`,buttonLabels:{proceedLabel:" Mettre en service",needDataLabel:"Question finale"},allowedActions:["answer_question","show_checklist","final_check"],knowledgeKey:"mise-en-service",tone:"enthusiastic",maxResponseLength:400}};function dne(e){if(!e)return bi;const t=e.toLowerCase().replace(/[_\s]/g,"-");if(ds[t])return{...bi,...ds[t]};const r=Object.keys(ds).find(n=>t.includes(n)||n.includes(t));return r?{...bi,...ds[r]}:bi}function cse(e,t){if(!e)return;const r=e.toLowerCase().replace(/[_\s]/g,"-");ds[r]={...ds[r]||bi,...t},console.log("[V2 Config] Module AI config updated",{moduleId:e,updates:t})}function fne(e){return dne(e).actionConfig||{...rb}}function use(e,t){if(!e)return;const r=e.toLowerCase().replace(/[_\s]/g,"-"),n=ds[r]||{...bi},s=n.actionConfig||{...rb};ds[r]={...n,actionConfig:{...s,...t}},console.log("[V2 Config] Module action config updated",{moduleId:e,actionUpdates:t})}function dse(e,t=null){var d;const r=[],n=[],s=fne(e),o=s.targetAudience;(Array.isArray(o)?o.length>0:!!o)||r.push({field:"targetAudience",message:"Au moins une cible doit tre slectionne (Client, Commercial ou Partenaire)"});const l=s.actionType;l||r.push({field:"actionType",message:"Le type d'action doit tre dfini (Formulaire ou Signature)"}),l==="FORM"&&(s.allowedFormIds||[]).length===0&&r.push({field:"allowedFormIds",message:"Au moins un formulaire doit tre slectionn"}),l==="SIGNATURE"&&((s.allowedFormIds||[]).length===0&&r.push({field:"allowedFormIds",message:"Au moins un formulaire de collecte doit tre slectionn pour la signature"}),(s.allowedTemplateIds||[]).length===0&&n.push("Aucun template de contrat slectionn (optionnel)"));const c=s.managementMode;(!c||!["AI","HUMAN"].includes(c))&&r.push({field:"managementMode",message:"Le mode de gestion doit tre dfini (IA ou Humain)"});const u=s.verificationMode;return(!u||!["AI","HUMAN"].includes(u))&&r.push({field:"verificationMode",message:"Le mode de vrification doit tre dfini (IA ou Humain)"}),s.completionTrigger||r.push({field:"completionTrigger",message:"Un trigger de compltion doit tre slectionn (Formulaire valid, Signature complte, etc.)"}),l==="FORM"&&o==="CLIENT"&&((s.requiredFields||[]).length===0&&r.push({field:"requiredFields",message:"Au moins un champ requis doit tre dfini pour viter les validations incompltes"}),(d=s.reminderConfig)!=null&&d.enabled||r.push({field:"reminderConfig",message:"La relance automatique doit tre active pour les formulaires Client"})),console.log("[V2 Validator] Config validation",{moduleId:e,projectType:t,isComplete:r.length===0,errorsCount:r.length,warningsCount:n.length}),{isComplete:r.length===0,errors:r,warnings:n}}function hne(e,t=!0){const r=p.useRef(new Set);p.useEffect(()=>{if(!t||!e)return;const n=k.channel(`form-reminder-watcher-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},async s=>{try{const o=s.new;if(o.status==="approved"||o.task_created)return;const a=`${o.prospect_id}-${o.form_id}-${o.reminder_count}`;if(r.current.has(a))return;const l=o.reminder_count||0,c=o.max_reminders_before_task||3;if(l===0)return;if(l>=c){T.info(" [FormReminderWatcher] Seuil atteint  Cration de tche",{prospect_id:o.prospect_id,form_id:o.form_id,reminder_count:l,max_reminders:c});const{data:u,error:f}=await k.from("prospects").select("owner_id, name, email").eq("id",o.prospect_id).single();if(f||!(u!=null&&u.owner_id)){T.error("[FormReminderWatcher] Owner ID introuvable",{error:f});return}const{data:d,error:h}=await k.from("forms").select("name").eq("form_id",o.form_id).single(),m=(d==null?void 0:d.name)||"Formulaire",g=await cne({prospectId:o.prospect_id,prospectName:u.name,prospectEmail:u.email,projectType:o.project_type,formName:m,formId:o.form_id,ownerId:u.owner_id,reminderCount:l});g.success?(T.info(" [FormReminderWatcher] Tche cre avec succs",{task_id:g.taskId,scheduled_at:g.scheduledAt}),r.current.add(a),await k.from("client_form_panels").update({task_created:!0}).eq("panel_id",o.panel_id)):T.error("[FormReminderWatcher] chec cration tche",{error:g.error})}else T.debug("[FormReminderWatcher] Seuil non atteint",{reminder_count:l,max_reminders:c,remaining:c-l})}catch(o){T.error("[FormReminderWatcher] Erreur dans le watcher",{error:o})}}).subscribe();return()=>{k.removeChannel(n)}},[t,e])}const Om=1*60*1e3,AS=" Vous tes toujours l ? N'hsitez pas si vous avez des questions, je suis l pour vous aider.",wl={start:0,end:24},Vv=[0,1,2,3,4,5,6];function pne(){const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getHours(),n=t.getDay();return Vv.includes(n)&&r>=wl.start&&r<wl.end}function mne(){const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getHours(),n=t.getDay();if(Vv.includes(n)&&r<wl.start){const l=new Date(t);return l.setHours(wl.start,0,0,0),l.getTime()-t.getTime()}let s=1,o=(n+1)%7;for(;!Vv.includes(o);)s++,o=(o+1)%7;const a=new Date(t);return a.setDate(a.getDate()+s),a.setHours(wl.start,0,0,0),a.getTime()-t.getTime()}function gne(e,t=!1){const r=p.useRef(new Map),n=p.useRef(new Set),s=p.useCallback(async(l,c,u)=>{try{T.info(" [PresenceCheck] Envoi message prsence",{prospectId:l,projectType:c,panelId:u});const{data:f,error:d}=await k.from("client_form_panels").select("panel_id, status, presence_message_sent").eq("panel_id",u).single();if(d||!f){T.warn("[PresenceCheck] Panel introuvable",{panelId:u,error:d});return}if(f.status!=="pending"){T.debug("[PresenceCheck] Panel non pending, skip",{panelId:u,status:f.status});return}if(f.presence_message_sent===!0){T.debug("[PresenceCheck] Message dj envoy, skip",{panelId:u});return}if(!pne()){T.debug("[PresenceCheck] Hors fentre horaire, report",{panelId:u});const g=mne(),v=setTimeout(()=>{s(l,c,u)},g);r.current.set(u,v);return}const{error:h}=await k.from("chat_messages").insert({prospect_id:l,project_type:c,sender:"admin",text:AS,metadata:{type:"presence_check",automated:!0,panel_id:u}});if(h){T.error("[PresenceCheck] Erreur envoi message",{panelId:u,error:h});return}const{error:m}=await k.from("client_form_panels").update({presence_message_sent:!0}).eq("panel_id",u);if(m){T.error("[PresenceCheck] Erreur update flag",{panelId:u,error:m});return}T.info(" [PresenceCheck] Message envoy avec succs",{panelId:u}),n.current.add(u)}catch(f){T.error("[PresenceCheck] Erreur inattendue",{panelId:u,error:f})}},[]),o=p.useCallback((l,c,u,f=Om)=>{if(r.current.has(u)&&clearTimeout(r.current.get(u)),n.current.has(u))return;const d=setTimeout(()=>{s(l,c,u),r.current.delete(u)},f);r.current.set(u,d)},[s]),a=p.useCallback(l=>{r.current.has(l)&&(clearTimeout(r.current.get(l)),r.current.delete(l))},[]);p.useEffect(()=>{if(!t||!e)return;const l=k.channel(`presence-check-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`organization_id=eq.${e}`},async f=>{var g;const d=f.new;if(d.sender==="admin"||d.sender==="pro"){if(((g=d.metadata)==null?void 0:g.type)==="presence_check"||d.text===AS){T.debug("[PresenceCheck] Ignore message prsence auto",{prospectId:d.prospect_id,projectType:d.project_type});return}const{data:v,error:x}=await k.from("chat_messages").select("id").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("sender","client").limit(1);if(x||!v||v.length===0){T.debug("[PresenceCheck] Client jamais interagi, pas de timer",{prospectId:d.prospect_id,projectType:d.project_type});return}T.debug("[PresenceCheck] Message admin/pro dtect, client a dj interagi, dmarrage timer",{prospectId:d.prospect_id,projectType:d.project_type,sender:d.sender});const{data:y,error:b}=await k.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("status","pending");if(b||!y||y.length===0)return;for(const w of y){if(w.presence_message_sent){T.debug("[PresenceCheck] Panel dj notifi, pas de nouveau timer",{panelId:w.panel_id});continue}o(w.prospect_id,w.project_type,w.panel_id)}return}if(d.sender!=="client")return;T.debug("[PresenceCheck] Message client dtect",{prospectId:d.prospect_id,projectType:d.project_type});const{data:h,error:m}=await k.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("status","pending");if(!(m||!h||h.length===0))for(const v of h)a(v.panel_id),n.current.delete(v.panel_id),await k.from("client_form_panels").update({presence_message_sent:!1}).eq("panel_id",v.panel_id),T.debug("[PresenceCheck] Timer reset aprs rponse client",{panelId:v.panel_id})}).subscribe(),c=k.channel(`presence-check-panels-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},async f=>{const d=f.new;if(d.status!=="pending")return;T.debug("[PresenceCheck] Nouveau panel dtect",{panelId:d.panel_id});const{data:h,error:m}=await k.from("chat_messages").select("sender, created_at").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).order("created_at",{ascending:!1}).limit(1);if(m||!h||h.length===0){T.debug("[PresenceCheck] Panel cr sans historique, pas de timer",{panelId:d.panel_id});return}const g=h[0];if(g.sender==="client"){T.debug("[PresenceCheck] Dernier message client, on attend un message admin avant timer",{panelId:d.panel_id});return}const v=new Date(g.created_at),y=new Date().getTime()-v.getTime(),b=Math.max(Om-y,0);b===0?s(d.prospect_id,d.project_type,d.panel_id):o(d.prospect_id,d.project_type,d.panel_id,b)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},f=>{const d=f.new;d.status!=="pending"&&(a(d.panel_id),T.debug("[PresenceCheck] Panel termin, timer annul",{panelId:d.panel_id}))}).subscribe();return(async()=>{const{data:f,error:d}=await k.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("status","pending").eq("presence_message_sent",!1);if(d||!f){T.error("[PresenceCheck] Erreur chargement panels existants",{error:d});return}T.info(`[PresenceCheck] ${f.length} panels pending  surveiller`);for(const h of f){const{data:m}=await k.from("chat_messages").select("sender, created_at").eq("prospect_id",h.prospect_id).eq("project_type",h.project_type).order("created_at",{ascending:!1}).limit(1);if(!m||m.length===0){T.debug("[PresenceCheck] Panel pending sans messages, skip timer",{panelId:h.panel_id});continue}const g=m[0];if(g.sender!=="admin"&&g.sender!=="pro"){T.debug("[PresenceCheck] Dernier message ct client, pas de timer",{panelId:h.panel_id});continue}const v=new Date(g.created_at),y=new Date().getTime()-v.getTime(),b=Math.max(Om-y,0);b===0?s(h.prospect_id,h.project_type,h.panel_id):o(h.prospect_id,h.project_type,h.panel_id,b)}})(),()=>{for(const[f,d]of r.current.entries())clearTimeout(d);r.current.clear(),k.removeChannel(l),k.removeChannel(c)}},[t,e,o,a,s])}function vne(e,t=!0){const r=p.useRef(new Set),n=p.useCallback(async(s,o,a)=>{try{if(r.current.has(a))return;if(r.current.add(a),r.current.size>1e3){const h=Array.from(r.current);r.current=new Set(h.slice(-500))}T.info(" [ReminderReset] Message client dtect, reset des relances",{prospectId:s,projectType:o,messageId:a});const{data:l,error:c}=await k.from("client_form_panels").select("panel_id, reminder_count, task_created").eq("prospect_id",s).eq("project_type",o).eq("status","pending").eq("task_created",!1);if(c){T.error("[ReminderReset] Erreur fetch panels",{error:c});return}if(!l||l.length===0){T.debug("[ReminderReset] Aucun panel pending  reset",{prospectId:s,projectType:o});return}const u=l.filter(h=>h.reminder_count>0);if(u.length===0){T.debug("[ReminderReset] Aucun panel avec relances  reset",{prospectId:s,projectType:o});const h=l.map(m=>m.panel_id);await k.from("client_form_panels").update({last_reminder_at:new Date().toISOString()}).in("panel_id",h);return}const f=u.map(h=>h.panel_id),{error:d}=await k.from("client_form_panels").update({reminder_count:0,last_reminder_at:new Date().toISOString()}).in("panel_id",f);if(d){T.error("[ReminderReset] Erreur update panels",{error:d});return}T.info(" [ReminderReset] Relances reset avec succs",{prospectId:s,projectType:o,panelsReset:f.length,panelIds:f,previousCounts:u.map(h=>({panelId:h.panel_id,count:h.reminder_count}))})}catch(l){T.error("[ReminderReset] Erreur inattendue",{error:l})}},[]);p.useEffect(()=>{if(!t||!e)return;const s=k.channel(`reminder-reset-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`organization_id=eq.${e}`},async o=>{const a=o.new;a.sender==="client"&&await n(a.prospect_id,a.project_type,a.id)}).subscribe();return()=>{k.removeChannel(s)}},[t,e,n])}const RS=p.lazy(()=>Lr(()=>import("./FinalPipeline-5c6c5fda.js"),["assets/FinalPipeline-5c6c5fda.js","assets/Agenda-600f80fc.js","assets/index-b15f87f2.js","assets/useSupabaseProjectStepsStatus-3cb9bab8.js","assets/external-link-fd62d7a6.js","assets/SearchableSelect-45766c7d.js","assets/useSupabaseProjectFiles-d2739591.js","assets/useSupabaseWorkflowModuleTemplates-fb0041a5.js","assets/workflowV2Config-b482875b.js","assets/download-f7c2866f.js","assets/pen-square-4786f85b.js","assets/index-a83a258c.js"])),xne=p.lazy(()=>Lr(()=>import("./Agenda-600f80fc.js").then(e=>e.a),["assets/Agenda-600f80fc.js","assets/index-b15f87f2.js","assets/useSupabaseProjectStepsStatus-3cb9bab8.js","assets/external-link-fd62d7a6.js"])),yne=p.lazy(()=>Lr(()=>import("./ProfilePage-9afab1b0.js"),["assets/ProfilePage-9afab1b0.js","assets/SearchableSelect-45766c7d.js","assets/pen-square-4786f85b.js"])),bne=p.lazy(()=>Lr(()=>import("./CharlyPage-e20d7020.js"),[])),wne=p.lazy(()=>Lr(()=>import("./ConfigurationIA-6c7568c4.js"),[])),jne=p.lazy(()=>Lr(()=>import("./ContractTemplatesPage-6f2c158a.js"),["assets/ContractTemplatesPage-6f2c158a.js","assets/pen-square-4786f85b.js"])),_ne=p.lazy(()=>Lr(()=>import("./ContractTemplateEditorPage-b9e6dbf0.js"),["assets/ContractTemplateEditorPage-b9e6dbf0.js","assets/ContractTemplateEditorPage-8e59e50e.css"])),IS=p.lazy(()=>Lr(()=>import("./ClientDashboardPage-b9c2fe6d.js"),["assets/ClientDashboardPage-b9c2fe6d.js","assets/useSupabaseProjectStepsStatus-3cb9bab8.js","assets/useSupabaseProjectFiles-d2739591.js","assets/index-b15f87f2.js","assets/download-f7c2866f.js","assets/index-a83a258c.js"])),Sne=p.lazy(()=>Lr(()=>import("./WorkflowV2Page-4468fbf5.js"),["assets/WorkflowV2Page-4468fbf5.js","assets/workflowV2Config-b482875b.js","assets/useSupabaseProjectStepsStatus-3cb9bab8.js","assets/useSupabaseProjectFiles-d2739591.js","assets/useSupabaseWorkflowModuleTemplates-fb0041a5.js","assets/ModuleConfigTab-fce700c4.js","assets/rocket-abfdf0ed.js","assets/download-f7c2866f.js","assets/external-link-fd62d7a6.js"])),Ene=p.lazy(()=>Lr(()=>import("./ProspectDetailsV2-338518e4.js"),["assets/ProspectDetailsV2-338518e4.js","assets/workflowV2Config-b482875b.js","assets/useSupabaseProjectStepsStatus-3cb9bab8.js","assets/rocket-abfdf0ed.js"])),Nne=p.lazy(()=>Lr(()=>import("./WorkflowV2ConfigPage-813c8de9.js"),["assets/WorkflowV2ConfigPage-813c8de9.js","assets/ModuleConfigTab-fce700c4.js","assets/useSupabaseWorkflowModuleTemplates-fb0041a5.js","assets/workflowV2Config-b482875b.js","assets/rocket-abfdf0ed.js","assets/download-f7c2866f.js"])),OS=["bg-blue-100","bg-yellow-100","bg-green-100","bg-purple-100","bg-orange-100","bg-indigo-100","bg-teal-100","bg-pink-100","bg-rose-100","bg-gray-100"],Cne={MARKET:"bg-blue-100",ETUDE:"bg-yellow-100",OFFRE:"bg-green-100",CONTRAT:"bg-blue-100","CONTRAT OK":"bg-blue-100","CLIENT ACTIF":"bg-purple-100"},qv=e=>(e||"").toString().trim().toUpperCase(),DS=(e,t,r,n=0)=>{const s=qv(e),o=Cne[s]||OS[n%OS.length];return{id:t||`global-pipeline-step-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,label:s,color:typeof r=="string"&&r.trim()?r:o}},Pne=e=>Array.isArray(e)?e.map((t,r)=>{if(typeof t=="string"){const n=qv(t);return n?DS(n,`legacy-global-pipeline-${r}`,void 0,r):null}if(t&&typeof t=="object"&&"label"in t){const n=qv(t.label);if(!n)return null;const s=typeof t.color=="string"?t.color:void 0;return DS(n,t.id||`legacy-global-pipeline-${r}`,s,r)}return null}).filter(Boolean):[],Tne=(e=[],t=[])=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],s=t[r];if(!n||!s||n.id!==s.id||n.name!==s.name||n.type!==s.type||n.placeholder!==s.placeholder||!!n.required!=!!s.required)return!1}return!0},kne=(e=[],t=[])=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],s=t[r];if(!n||!s||n.id!==s.id||n.label!==s.label||n.color!==s.color)return!1}return!0},vD=J.createContext(),Ve=()=>J.useContext(vD),mt={INIT:"init",RESOLVING_ORG:"resolving_org",AUTH:"auth",LOADING_USER:"loading_user",READY:"ready",ERROR:"error"};function Ane(){const e=yr();if(e.pathname==="/landing")return i.jsx(rd,{});const t=Oe(),r=e.pathname.startsWith("/admin"),[n,s]=p.useState(mt.INIT),[o,a]=p.useState(null),{organizationId:l,organizationLoading:c,organizationError:u,organizationReady:f,brandName:d,logoUrl:h,primaryColor:m,secondaryColor:g,brandingLoading:v,brandingError:x}=nn(),[y,b]=p.useState([]),[w,j]=p.useState([]),[_,S]=p.useState(null),[E,N]=p.useState([]),[P,C]=p.useState({});p.useState([]),p.useState([]);const[I,O]=p.useState({}),[$,L]=p.useState({}),[V,z]=p.useState(null),[B,A]=p.useState(null),[R,D]=p.useState(!0),[F,q]=p.useState(!1),[W,te]=p.useState(null),[fe,le]=p.useState(!1),ne=p.useRef(!1);p.useEffect(()=>{if(n===mt.INIT){s(mt.RESOLVING_ORG);return}if(n===mt.RESOLVING_ORG){if(u){T.error("[Boot] Organization resolution failed",{error:u}),a(u),s(mt.ERROR);return}if(f){s(mt.AUTH);return}}if(n===mt.AUTH&&!R){s(W?mt.LOADING_USER:mt.READY);return}n===mt.LOADING_USER&&(F||_||!B&&!_&&!R)&&s(mt.READY)},[n,f,u,l,R,W,F,B,_]),a0();const{prospects:ue,addProspect:Y,updateProspect:U,loading:Z}=Yre(R?null:B,l),{appointments:ce,calls:_e,tasks:Te,loading:dt,error:on,addAppointment:bn,updateAppointment:wa,deleteAppointment:Yn,addCall:Bo,updateCall:xD,deleteCall:yD,addTask:bD,updateTask:wD,deleteTask:jD,refresh:_D}=Xre(R?null:B,l);p.useEffect(()=>{!R&&!Z&&ue&&j(ue)},[ue,Z,R]);const nb=e.pathname.startsWith("/dashboard"),sb=R||!nb?null:_==null?void 0:_.id;W&&!R&&T.debug("App routing info",{isClientRoute:nb,activeAdmin:B==null?void 0:B.name,currentUser:_==null?void 0:_.name,prospectIdForForms:sb});const{formPanels:SD,createFormPanel:ED,updateFormPanel:ND,deleteFormPanelsByProspect:CD}=rne(f?sb:"__DISABLED__"),{companySettings:Gh,updateLogo:PD,removeLogo:TD,updateFormContactConfig:ob,getFormContactConfig:ib}=Qre({organizationId:l,enabled:f});p.useEffect(()=>{if(!l){z(null);return}(async()=>{try{const{data:G,error:K}=await k.from("organization_settings").select("form_contact_config").eq("organization_id",l).single();if(K){T.debug("[App] organization_settings.form_contact_config non trouv, fallback vers company_settings"),z(null);return}z((G==null?void 0:G.form_contact_config)||null)}catch{z(null)}})()},[l]);const{globalPipelineSteps:ab,loading:kD,addStep:AD,updateStep:RD,deleteStep:ID,reorderSteps:Dne}=Zre(f?l:null),{allProjectSteps:qc,loading:Kh}=nne(l);p.useEffect(()=>{!R&&!Kh&&qc&&C(X=>{const G={...X};return Object.entries(qc).forEach(([K,ae])=>{const[he,oe]=K.split("-"),qe=`prospect_${he}_project_${oe}`;G[qe]=ae}),G})},[qc,Kh,R]);const{projectTemplates:Yh,loading:$ne,addTemplate:OD,updateTemplate:DD,deleteTemplate:$D,getPublicTemplates:Lne}=pD({organizationId:l,enabled:f}),{forms:lb,loading:cb}=w0(l);p.useEffect(()=>{!R&&!cb&&O(lb)},[lb,cb,R]);const{prompts:Wc,loading:ub}=ZR({organizationId:l,enabled:f});p.useEffect(()=>{!R&&!ub&&L(Wc)},[Wc,ub,R]),one(l,Wc,!R&&F),ine(Wc,{organizationId:l,enabled:!R&&F&&f}),hne(l,!R&&F),gne(l,!R&&F),vne(l,!R&&F);const{notifications:LD,createOrUpdateNotification:MD,markAsRead:FD}=ene((B==null?void 0:B.user_id)||null,!R&&F&&!!B),{notifications:BD,createOrUpdateNotification:zD,markAsRead:UD}=tne((_==null?void 0:_.id)||null,!R&&!!_),{projectInfos:ja,getProjectInfo:VD,updateProjectInfo:db}=sne(l),_a=p.useMemo(()=>Yh.reduce((G,K)=>(G[K.type]=K,G),{}),[Yh]),qD=h||"",WD=PD,fb=V&&V.length>0?V:ib().length>0?ib():Hre;p.useEffect(()=>{(async()=>{var he;const ae=new URLSearchParams(window.location.search).get("code");if(ae){try{const{data:oe,error:qe}=await k.auth.exchangeCodeForSession(ae);qe?T.error("Error exchanging code for session",{error:qe.message}):oe.session&&(T.debug("Session established from code",{email:(he=oe.session.user)==null?void 0:he.email}),te(oe.session),window.history.replaceState({},document.title,window.location.pathname+window.location.hash))}catch(oe){T.error("Exception during code exchange",{error:oe.message})}return}})();const{data:{subscription:G}}=k.auth.onAuthStateChange((K,ae)=>{var he;T.debug("Auth event",{event:K,email:(he=ae==null?void 0:ae.user)==null?void 0:he.email}),te(ae??null)});return k.auth.getSession().then(({data:K})=>{var he;const ae=K.session;ae&&(T.debug("Initial session found",{email:(he=ae.user)==null?void 0:he.email}),te(ae))}),()=>G.unsubscribe()},[]);const an=p.useRef(!1);async function hb(X){if(!an.current){an.current=!0;try{D(!0);const{data:G}=await k.from("users").select("*").eq("user_id",X).maybeSingle();if(G){if(G.organization_id){const{data:oe}=await k.rpc("platform_get_org_status",{p_org_id:G.organization_id});if((oe==null?void 0:oe.status)==="suspended"){T.info("Organization suspended, logging out admin"),await k.auth.signOut(),D(!1),an.current=!1,sessionStorage.setItem("org_suspended_message","Votre organisation est temporairement suspendue. Contactez le support.");return}}const he={id:G.id,user_id:G.user_id,userId:G.user_id,name:G.name,email:G.email,role:G.role,phone:G.phone,avatar_url:G.avatar_url,avatarUrl:G.avatar_url,manager_id:G.manager_id,managerId:G.manager_id,organization_id:G.organization_id,organizationId:G.organization_id,access_rights:G.access_rights,accessRights:G.access_rights,created_at:G.created_at,createdAt:G.created_at,updated_at:G.updated_at,updatedAt:G.updated_at};A(he),q(!0),S(null),setTimeout(()=>{D(!1),an.current=!1},0);return}if(!f||!l){T.debug("Client lookup skipped: organization context not ready",{userId:X,organizationReady:f,organizationId:l}),setTimeout(()=>{D(!1),an.current=!1},0);return}let K=null;const{data:ae}=await k.from("prospects").select("*").eq("user_id",X).eq("organization_id",l).maybeSingle();if(K=ae||null,!K){T.debug("No prospect linked in this organization for user",{userId:X,organizationId:l}),le(!0),S(null),setTimeout(()=>{D(!1),an.current=!1},0);return}if(le(!1),K){if(K.organization_id){const{data:oe}=await k.rpc("platform_get_org_status",{p_org_id:K.organization_id});if((oe==null?void 0:oe.status)==="suspended"){T.info("Organization suspended, logging out client"),await k.auth.signOut(),D(!1),an.current=!1,sessionStorage.setItem("org_suspended_message","Votre organisation est temporairement suspendue. Contactez le support.");return}}const he={id:K.id,name:K.name,email:K.email,phone:K.phone,address:K.address,companyName:K.company_name,tags:K.tags||[],userId:K.user_id,ownerId:K.owner_id,organizationId:K.organization_id,organization_id:K.organization_id,status:K.status,hasAppointment:K.has_appointment,affiliateName:K.affiliate_name,formData:K.form_data||{},createdAt:K.created_at,updatedAt:K.updated_at};S(he),A(null),K.tags&&Array.isArray(K.tags)&&b(K.tags),setTimeout(()=>{D(!1),an.current=!1},0);return}S(null),A(null),setTimeout(()=>{D(!1)},0)}catch(G){T.error("Erreur chargement utilisateur authentifi",{error:G.message}),setTimeout(()=>{D(!1)},0)}finally{an.current=!1}}}p.useEffect(()=>{if(e.pathname.startsWith("/inscription")||e.pathname.startsWith("/register")||e.pathname==="/"||e.pathname.startsWith("/platform-login")||e.pathname.startsWith("/platform")){A(null),le(!1),setTimeout(()=>{D(!1)},0);return}if(!W){A(null),S(null),le(!1),setTimeout(()=>{D(!1)},0);return}le(!1),D(!0),hb(W.user.id),e.pathname==="/"&&!_&&!B&&setTimeout(()=>{_&&t("/dashboard")},1e3)},[W]),p.useEffect(()=>{var X;W&&(!f||!l||B||!_&&!an.current&&(T.debug("Organization ready - triggering deferred user load",{organizationId:l,userId:(X=W.user)==null?void 0:X.id}),D(!0),hb(W.user.id)))},[f,l,W,B,_]),p.useEffect(()=>{if(!(_!=null&&_.id))return;T.debug("Setting up real-time channel for currentUser prospect",{prospectId:_.id});const X=k.channel(`client-prospect-${_.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"prospects",filter:`id=eq.${_.id}`},G=>{var ae;T.debug("Real-time UPDATE received for currentUser",{prospectId:(ae=G.new)==null?void 0:ae.id});const K={id:G.new.id,name:G.new.name,email:G.new.email,phone:G.new.phone,address:G.new.address,companyName:G.new.company_name,tags:G.new.tags||[],userId:G.new.user_id,ownerId:G.new.owner_id,status:G.new.status,hasAppointment:G.new.has_appointment,affiliateName:G.new.affiliate_name,formData:G.new.form_data||{},createdAt:G.new.created_at,updatedAt:G.new.updated_at};S(K)}).subscribe();return()=>{k.removeChannel(X)}},[_==null?void 0:_.id]),p.useEffect(()=>{if(!(_!=null&&_.id)||!w.length)return;const X=w.find(G=>G.id===_.id);if(X){const G=JSON.stringify(_.formData||_.form_data),K=JSON.stringify(X.formData||X.form_data);G!==K&&S({..._,formData:X.formData||X.form_data,form_data:X.formData||X.form_data})}},[w,_==null?void 0:_.id]),p.useEffect(()=>{ne.current=!0},[]);const HD=async X=>{try{const G=[];for(const[K,ae]of Object.entries(X)){const he=Yh.find(qe=>qe.type===K),oe={title:ae.title,client_title:ae.clientTitle||ae.client_title,icon:ae.icon,color:ae.color,steps:ae.steps,is_public:ae.isPublic!==void 0?ae.isPublic:ae.is_public,image_url:ae.coverImage||ae.image_url,client_description:ae.clientDescription||ae.client_description,cta_text:ae.ctaText||ae.cta_text};he?(he.title!==oe.title||he.client_title!==oe.client_title||he.icon!==oe.icon||he.color!==oe.color||JSON.stringify(he.steps)!==JSON.stringify(oe.steps)||he.is_public!==oe.is_public||he.image_url!==oe.image_url||he.client_description!==oe.client_description||he.cta_text!==oe.cta_text)&&G.push(DD(he.id,oe)):G.push(OD({type:K,...oe}))}G.length>0&&await Promise.all(G)}catch(G){throw T.error("Erreur handleSetProjectsData",{error:G.message}),G}},GD=async X=>{const G=fb||[],K=typeof X=="function"?X(G):X;if(!Array.isArray(K)){T.warn("Invalid form contact config, using default",{received:typeof K});return}if(!Tne(G,K))try{await ob(K),z(K)}catch(ae){T.error("Erreur update config formulaire contact",{error:ae.message})}},KD=(X,G)=>{var K;return!X||!G?{}:((K=ja==null?void 0:ja[X])==null?void 0:K[G])||{}},pb=db,YD=async X=>{const G=ab,K=typeof X=="function"?X(G):X,ae=Pne(K);if(!kne(G,ae))try{const he=new Set(G.map(We=>We.id)),oe=new Set(ae.map(We=>We.id));for(const We of G)oe.has(We.id)||await ID(We.id);for(const We of ae)he.has(We.id)||await AD(We.label,We.color||"bg-gray-100");const qe=ae.filter(We=>he.has(We.id));for(let We=0;We<qe.length;We++){const Re=qe[We],wr=G.find(Jh=>Jh.id===Re.id);wr&&(wr.label!==Re.label||wr.color!==Re.color||wr.position!==We)&&await RD(Re.id,{label:Re.label,color:Re.color,position:We})}}catch(he){T.error("Erreur update pipeline steps",{error:he.message}),M({title:"Erreur",description:"Impossible de mettre  jour les colonnes du pipeline.",variant:"destructive"})}};p.useEffect(()=>{(async()=>{var K,ae;if(!l)return;const G=localStorage.getItem("evatime_form_contact_config");if(G){const he=JSON.parse(G),oe=V&&V.length>0;((ae=(K=Gh==null?void 0:Gh.settings)==null?void 0:K.form_contact_config)==null?void 0:ae.length)>0,oe||(await ob(he),z(he)),localStorage.removeItem("evatime_form_contact_config")}})()},[l,V]),p.useEffect(()=>{localStorage.getItem("evatime_company_logo")&&localStorage.removeItem("evatime_company_logo")},[]);const JD=async(X,G,K)=>{var ae,he,oe;try{if(K.completedFormId&&K.sender==="client"){const{data:Re}=await k.from("chat_messages").select("id").eq("prospect_id",X).eq("project_type",G).eq("sender","client").eq("completed_form_id",K.completedFormId).eq("related_message_timestamp",K.relatedMessageTimestamp||"");if(Re&&Re.length>0)return}if(K.promptId){const{data:Re}=await k.from("chat_messages").select("id").eq("prospect_id",X).eq("project_type",G).eq("sender",K.sender).eq("prompt_id",K.promptId).eq("step_index",K.stepIndex||0).eq("text",K.text||"");if(Re&&Re.length>0)return}const qe={prospect_id:X,project_type:G,sender:K.sender,text:K.text||null,file:K.file||null,form_id:K.formId||null,completed_form_id:K.completedFormId||null,prompt_id:K.promptId||null,step_index:K.stepIndex!==void 0?K.stepIndex:null,related_message_timestamp:K.relatedMessageTimestamp||null,read:!1},{error:We}=await k.from("chat_messages").insert([qe]);if(We)throw We;if(K.file&&K.sender==="client"&&pb(X,G,Re=>G==="ACC"&&!(Re!=null&&Re.ribFile)?{...Re,ribFile:K.file.name}:Re||{}),K.sender==="client"){const{data:Re,error:wr}=await k.from("prospects").select("name, owner_id").eq("id",X).single();if(wr){T.error("Error loading prospect for notification",{error:wr}),M({title:"Erreur",description:"Impossible de charger les informations du prospect.",variant:"destructive"});return}Re?await MD({prospectId:X,ownerId:Re.owner_id,projectType:G,prospectName:Re.name,projectName:((ae=_a[G])==null?void 0:ae.title)||G}):T.warn("No prospect data found for notification",{prospectId:X})}(K.sender==="admin"||K.sender==="pro")&&await zD({prospectId:X,projectType:G,projectName:((he=_a[G])==null?void 0:he.title)||G,message:((oe=K.text)==null?void 0:oe.substring(0,50))||"Nouveau message"})}catch(qe){T.error("Erreur envoi message",{error:qe.message}),M({title:"Erreur",description:"Impossible d'envoyer le message. Vrifiez votre connexion.",variant:"destructive"})}},XD=X=>{FD(X)},QD=(X,G,K)=>E.filter(ae=>ae.share===!0&&ae.contactId===X&&ae.projectId===G&&ae.step===K),Sa=async(X,G,K)=>{const ae=`prospect_${X}_project_${G}`;C(he=>({...he,[ae]:K}));try{if(!l){T.warn("updateProjectSteps: organisation manquante  skip server save");return}const{data:he,error:oe}=await k.from("project_steps_status").upsert({prospect_id:X,project_type:G,steps:K,organization_id:l,updated_at:new Date().toISOString()},{onConflict:"prospect_id,project_type"}).select().single();if(oe){T.error("Erreur sauvegarde Supabase",{error:oe.message}),M({title:"Erreur",description:"Impossible de sauvegarder les tapes",variant:"destructive"});return}}catch(he){T.error("Erreur sauvegarde project steps",{error:he.message})}},ZD=(X,G)=>{var qe;const K=`prospect_${X}_project_${G}`,ae=P[K],he=(qe=_a[G])==null?void 0:qe.steps;if(!he||he.length===0)return[];const oe=JSON.parse(JSON.stringify(he));return ae&&ae.length>0?oe.forEach((We,Re)=>{const wr=ae.find(Jh=>Jh.name===We.name);wr&&(We.status=wr.status)}):oe.length>0&&oe[0].status==="pending"&&(oe[0].status="in_progress"),oe},e$=async(X,G,K,ae)=>{if(!ae||ae.length===0){T.error("No steps provided",{prospectId:X,projectType:G});return}if(T.debug("Steps received from caller",{count:ae.length}),K<0||K>=ae.length){T.error("Index tape invalide",{currentStepIndex:K,stepsLength:ae.length});return}const he=JSON.parse(JSON.stringify(ae)),oe=he[K];if(oe!=null&&oe.subSteps&&Array.isArray(oe.subSteps)&&oe.subSteps.length>0){let qe=oe.subSteps.findIndex(Re=>Re.status==="in_progress");if(qe===-1&&(qe=oe.subSteps.findIndex(Re=>Re.status==="pending"),qe!==-1&&(oe.subSteps[qe].status="in_progress")),qe!==-1){oe.subSteps[qe].status="completed";const Re=oe.subSteps.findIndex(wr=>wr.status==="pending");if(Re!==-1){oe.subSteps[Re].status="in_progress",oe.status="in_progress",he[K]=oe,T.debug("Substep completed, staying in same step",{completedSub:qe,nextSub:Re,stepName:oe.name}),await Sa(X,G,he);return}}if(!oe.subSteps.every(Re=>Re.status==="completed")){T.warn("Sous-tapes incompltes dtectes alors que aucune active trouve",{stepName:oe.name,subSteps:oe.subSteps}),oe.status="in_progress",he[K]=oe,await Sa(X,G,he);return}oe.status="completed",he[K]=oe}else oe.status="completed",he[K]=oe;he[K].name,K+1<he.length&&(he[K+1].status="in_progress",he[K+1].name),await Sa(X,G,he)},t$=async X=>{var K;if(y.includes(X))return!1;const G=[...y,X];if(b(G),_){const ae=[..._.tags||[],X];try{await mb({id:_.id,tags:ae}),T.debug(" Tags updated in Supabase",{projectType:X,updatedTags:ae})}catch(oe){return T.error(" Failed to update tags in Supabase",oe),M({title:"Erreur",description:"Impossible d'ajouter le projet. Veuillez ressayer.",variant:"destructive"}),!1}const he=(K=_a[X])==null?void 0:K.steps;if(he&&he.length>0){const oe=JSON.parse(JSON.stringify(he));oe[0].status="in_progress",Sa(_.id,X,oe)}}return!0},mb=async X=>{try{await U(X.id,X),_&&_.id===X.id&&(S({..._,...X}),X.tags&&b(X.tags))}catch(G){T.error("Erreur update prospect",{error:G.message}),M({title:"Erreur",description:G.message||"Impossible de modifier le prospect.",variant:"destructive"})}},r$={userProjects:y,setUserProjects:b,addProject:t$,projectsData:_a,setProjectsData:HD,deleteProjectTemplate:$D,prospects:ue,prospectsLoading:Z,setProspects:j,addProspect:Y,updateProspect:mb,currentUser:_,setCurrentUser:(X,G)=>{const K=X?{...X,affiliateName:G}:null;S(K),K?K.tags&&Array.isArray(K.tags)&&b(K.tags):t("/")},appointments:ce||[],addAppointment:bn,updateAppointment:wa,deleteAppointment:Yn,getSharedAppointments:QD,getProjectSteps:ZD,updateProjectSteps:Sa,completeStepAndProceed:e$,calls:_e||[],addCall:Bo,updateCall:xD,deleteCall:yD,tasks:Te||[],addTask:bD,updateTask:wD,deleteTask:jD,agendaLoading:dt,refreshAgenda:_D,addChatMessage:JD,notifications:LD,markNotificationAsRead:XD,clientNotifications:BD,markClientNotificationAsRead:UD,forms:I,prompts:$,formContactConfig:fb,setFormContactConfig:GD,projectInfos:ja,getProjectInfo:KD,updateProjectInfo:pb,supabaseProjectInfos:ja,getSupabaseProjectInfo:VD,updateSupabaseProjectInfo:db,globalPipelineSteps:ab,setGlobalPipelineSteps:YD,pipelineLoading:kD,allProjectSteps:qc,allStepsLoading:Kh,activeAdminUser:B,setActiveAdminUser:A,switchActiveAdminUser:X=>{X&&X.id&&(A(X),M({title:`Connect en tant que ${X.name}`,description:`Vous naviguez maintenant avec le profil de ${X.name}.`,className:"bg-blue-600 text-white"}))},authLoading:R,adminReady:F,bootStatus:n,bootError:o,BOOT_STATUS:mt,clientFormPanels:SD,registerClientForm:ED,updateClientFormPanel:ND,clearClientFormsFor:CD,companyLogo:qD,setCompanyLogo:WD,removeLogo:TD,brandName:d,logoUrl:h,primaryColor:m,secondaryColor:g},gb=()=>{const X=d||"Application";return e.pathname==="/"?`${X} - conomisez sur votre lectricit`:e.pathname.startsWith("/inscription")?`${X} - Dmarrez votre projet`:e.pathname==="/producteurs"?`${X} - Vendez mieux votre lectricit`:e.pathname.startsWith("/dashboard/offres")?`${X} - Nos Offres Exclusives`:e.pathname.startsWith("/dashboard/profil")?`${X} - Votre Profil`:e.pathname.startsWith("/dashboard")?`${X} - Votre Espace Client`:e.pathname.startsWith("/admin/profil")?`${X} Pro - Mon Profil`:e.pathname.startsWith("/admin/charly")?`${X} Pro - Charly AI`:r?`${X} Pro - Espace Admin`:X},vb=()=>e.pathname==="/"?"Dpensez 35 % de moins sur votre lectricit, garanti 10 ans.":e.pathname.startsWith("/inscription")?`Choisissez vos projets et rejoignez ${d||"notre plateforme"}.`:e.pathname==="/producteurs"?"Optimisez la rentabilit de vos centrales solaires avec l'autoconsommation collective.":e.pathname.startsWith("/dashboard/offres")?"Dcouvrez nos offres pour l'autonomie nergtique, la production solaire et l'investissement.":e.pathname.startsWith("/dashboard/profil")?"Grez vos informations personnelles et vos prfrences.":e.pathname.startsWith("/dashboard")?"Suivez l'avancement de vos projets nergtiques ACC, solaire, et plus.":e.pathname.startsWith("/admin/profil")?"Grez vos informations, utilisateurs et clients.":e.pathname.startsWith("/admin/charly")?"Grez vos campagnes et scripts avec votre assistant IA Charly.":r?`Grez vos prospects, projets et agenda avec ${d||"la plateforme"} Pro.`:"La solution pour vos projets nergtiques.";if(n===mt.ERROR)return i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connexion impossible"}),i.jsx("p",{className:"text-gray-600 mb-4",children:o||"Le serveur ne rpond pas. Vrifiez votre connexion internet."}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[i.jsx("strong",{children:"Dtails techniques :"}),i.jsx("br",{}),"Boot status: ",n,i.jsx("br",{}),"Organization: ",l||"non rsolue"]})}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Ressayer"}),i.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour  l'accueil"})]})]})});if(n===mt.INIT||n===mt.RESOLVING_ORG){const X={[mt.INIT]:"Initialisation...",[mt.RESOLVING_ORG]:"Connexion au serveur..."};return i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:X[n]||"Chargement..."}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:n===mt.RESOLVING_ORG&&"Cela peut prendre quelques secondes..."})]})})}return i.jsxs(vD.Provider,{value:r$,children:[i.jsxs(Id,{children:[i.jsx("title",{children:gb()}),i.jsx("meta",{name:"description",content:vb()}),i.jsx("meta",{property:"og:title",content:gb()}),i.jsx("meta",{property:"og:description",content:vb()})]}),fe&&!R&&!e.pathname.startsWith("/partner")&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-900 px-4 py-3 text-sm flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:"Compte non rattach  cette organisation."}),i.jsx("span",{children:"Demandez une invitation."})]}),i.jsx(p.Suspense,{fallback:i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement..."})]})}),children:i.jsxs(w4,{children:[i.jsx(ve,{path:"/platform-login",element:i.jsx(Rre,{})}),i.jsxs(ve,{path:"/platform",element:i.jsx(HW,{}),children:[i.jsx(ve,{index:!0,element:i.jsx(Ire,{})}),i.jsx(ve,{path:"organizations",element:i.jsx(kre,{})}),i.jsx(ve,{path:"organizations/:id",element:i.jsx(Are,{})})]}),i.jsx(ve,{path:"/",element:i.jsx(rd,{})}),i.jsx(ve,{path:"/landing",element:i.jsx(rd,{})}),i.jsx(ve,{path:"/solaire",element:i.jsx(CS,{})}),i.jsx(ve,{path:"/login",element:i.jsx($re,{})}),i.jsx(ve,{path:"/activate-account",element:i.jsx(Tre,{})}),i.jsx(ve,{path:"/signup",element:i.jsx(Lre,{})}),i.jsx(ve,{path:"/client-access",element:i.jsx(Dre,{})}),i.jsx(ve,{path:"/inscription",element:i.jsx(PS,{})}),i.jsx(ve,{path:"/inscription/:slugUser",element:i.jsx(PS,{})}),i.jsx(ve,{path:"/producteurs",element:i.jsx(Mre,{})}),i.jsx(ve,{path:"/test-supabase",element:i.jsx(Fre,{})}),i.jsx(ve,{path:"/reset-password",element:i.jsx(Bre,{})}),i.jsx(ve,{path:"/signature/:signatureProcedureId",element:i.jsx(zre,{})}),i.jsx(ve,{path:"/sign/cosigner",element:i.jsx(Ure,{})}),i.jsx(ve,{path:"/partner/login",element:i.jsx(Ere,{})}),i.jsxs(ve,{path:"/partner",element:i.jsx(GW,{}),children:[i.jsx(ve,{index:!0,element:i.jsx(_S,{})}),i.jsx(ve,{path:"missions",element:i.jsx(_S,{})}),i.jsx(ve,{path:"missions/:missionId",element:i.jsx(Nre,{})})]}),i.jsx(ve,{path:"/:slugUser",element:i.jsx(CS,{})}),i.jsx(ve,{path:"/client/activation",element:i.jsx(Pre,{})}),i.jsxs(ve,{path:"/client/dashboard",element:i.jsx(o1,{}),children:[i.jsx(ve,{index:!0,element:i.jsx(IS,{})}),i.jsx(ve,{path:"parrainage",element:i.jsx(SS,{})}),i.jsx(ve,{path:"profil",element:i.jsx(Rm,{})}),i.jsx(ve,{path:"offres",element:i.jsx(NS,{})})]}),i.jsxs(ve,{path:"/dashboard",element:i.jsx(o1,{}),children:[i.jsx(ve,{index:!0,element:i.jsx(IS,{})}),i.jsx(ve,{path:"parrainage",element:i.jsx(SS,{})}),i.jsx(ve,{path:"profil",element:i.jsx(Rm,{})}),i.jsx(ve,{path:"offres",element:i.jsx(NS,{})})]}),i.jsxs(ve,{path:"/admin",element:i.jsx(qW,{}),children:[i.jsx(ve,{index:!0,element:i.jsx(RS,{})}),i.jsx(ve,{path:"pipeline",element:i.jsx(RS,{})}),i.jsx(ve,{path:"agenda",element:i.jsx(xne,{})}),i.jsx(ve,{path:"contacts",element:i.jsx(wH,{})}),i.jsx(ve,{path:"charly",element:i.jsx(bne,{})}),i.jsx(ve,{path:"configuration-ia",element:i.jsx(wne,{})}),i.jsx(ve,{path:"workflows-charly",element:i.jsx(CK,{})}),i.jsx(ve,{path:"workflow-v2/:prospectId/:projectType",element:i.jsx(Sne,{})}),i.jsx(ve,{path:"workflow-v2-config",element:i.jsx(Nne,{})}),i.jsx(ve,{path:"prospect-v2/:prospectId",element:i.jsx(Ene,{})}),i.jsx(ve,{path:"landing-page",element:i.jsx($K,{})}),i.jsx(ve,{path:"projects-management",element:i.jsx(Hee,{})}),i.jsx(ve,{path:"forms-management",element:i.jsx(wre,{})}),i.jsx(ve,{path:"contract-templates",element:i.jsx(jne,{})}),i.jsx(ve,{path:"contract-templates/editor",element:i.jsx(_ne,{})}),i.jsx(ve,{path:"project-display",element:i.jsx(jre,{})}),i.jsx(ve,{path:"partners",element:i.jsx(_re,{})}),i.jsx(ve,{path:"partners/:partnerId",element:i.jsx(Sre,{})}),i.jsx(ve,{path:"profil",element:i.jsx(yne,{})}),i.jsx(ve,{path:"parametres",element:i.jsx(Rm,{})})]})]})}),i.jsx(E3,{})]})}class Rne extends J.Component{constructor(r){super(r);Fs(this,"handleReload",()=>{window.location.reload()});Fs(this,"handleGoHome",()=>{window.location.href="/"});Fs(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){console.error(" ErrorBoundary caught an error:",r),console.error("Component stack:",n.componentStack),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-lg w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx(Xx,{className:"h-12 w-12 text-red-600"})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oups ! Une erreur est survenue"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"L'application a rencontr un problme inattendu. Essayez de rafrachir la page ou de retourner  l'accueil."}),!1,i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsxs(H,{onClick:this.handleReload,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(Of,{className:"h-4 w-4 mr-2"}),"Rafrachir"]}),i.jsxs(H,{onClick:this.handleGoHome,variant:"outline",children:[i.jsx(HC,{className:"h-4 w-4 mr-2"}),"Retour  l'accueil"]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Si le problme persiste, contactez le support technique."})]})}):this.props.children}}const Ine=()=>{const e=window.location.pathname;return e==="/"||e==="/landing"},One=()=>{if(Ine()){const e=J.lazy(()=>Lr(()=>Promise.resolve().then(()=>Wre),void 0));return i.jsx(J.Suspense,{fallback:i.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"})})}),children:i.jsx(Iw,{children:i.jsx(Vre,{children:i.jsx(e,{})})})})}return i.jsx(Rne,{children:i.jsx(Iw,{children:i.jsx(VW,{children:i.jsx(OW,{children:i.jsx(Ane,{})})})})})};Dm.createRoot(document.getElementById("root")).render(i.jsx(J.StrictMode,{children:i.jsx(One,{})}));export{pe as $,Lc as A,H as B,Qx as C,ih as D,ca as E,ua as F,fa as G,ha as H,da as I,ma as J,pa as K,M as L,Zr as M,dl as N,m3 as O,Ar as P,Vl as Q,J as R,Kt as S,In as T,Vi as U,Np as V,zl as W,Ro as X,Jx as Y,YC as Z,Rf as _,nn as a,J6 as a$,Qw as a0,Zx as a1,Me as a2,jc as a3,Bg as a4,Cf as a5,fne as a6,qC as a7,fl as a8,Q as a9,Zne as aA,ZR as aB,Qne as aC,a3 as aD,QZ as aE,Uee as aF,yee as aG,yre as aH,tr as aI,bo as aJ,Z5 as aK,Y6 as aL,ty as aM,Mk as aN,Fk as aO,Jy as aP,Xl as aQ,X6 as aR,BW as aS,Wg as aT,Jw as aU,fn as aV,zne as aW,xr as aX,No as aY,th as aZ,yr as a_,me as aa,Rn as ab,ah as ac,w0 as ad,EK as ae,f3 as af,rne as ag,G6 as ah,o3 as ai,bA as aj,xI as ak,yI as al,S0 as am,lD as an,cD as ao,uD as ap,dD as aq,fD as ar,Uv as as,ry as at,aH as au,tc as av,Ey as aw,QC as ax,ao as ay,ph as az,Ve as b,If as b0,sa as b1,Xx as b2,qg as b3,j0 as b4,rb as b5,dse as b6,dne as b7,u3 as b8,cse as b9,use as ba,lse as bb,Lr as bc,LW as bd,se as c,pD as d,Jre as e,K6 as f,Ui as g,a0 as h,Oc as i,i as j,Dc as k,T as l,ie as m,$c as n,wc as o,l3 as p,ey as q,p as r,k as s,Ft as t,Oe as u,Yt as v,Bt as w,Pe as x,oR as y,lh as z};
