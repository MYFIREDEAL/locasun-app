var w$=Object.defineProperty;var j$=(e,t,r)=>t in e?w$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var qs=(e,t,r)=>(j$(e,typeof t!="symbol"?t+"":t,r),r);function ZS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const _$="modulepreload",S$=function(e){return"/"+e},Ab={},Lr=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=S$(o),o in Ab)return;Ab[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let f=s.length-1;f>=0;f--){const d=s[f];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":_$,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var Uoe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function N$(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var eN={exports:{}},xf={},tN={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=Symbol.for("react.element"),E$=Symbol.for("react.portal"),C$=Symbol.for("react.fragment"),P$=Symbol.for("react.strict_mode"),T$=Symbol.for("react.profiler"),k$=Symbol.for("react.provider"),A$=Symbol.for("react.context"),R$=Symbol.for("react.forward_ref"),I$=Symbol.for("react.suspense"),O$=Symbol.for("react.memo"),D$=Symbol.for("react.lazy"),Rb=Symbol.iterator;function $$(e){return e===null||typeof e!="object"?null:(e=Rb&&e[Rb]||e["@@iterator"],typeof e=="function"?e:null)}var rN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nN=Object.assign,sN={};function la(e,t,r){this.props=e,this.context=t,this.refs=sN,this.updater=r||rN}la.prototype.isReactComponent={};la.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};la.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oN(){}oN.prototype=la.prototype;function nx(e,t,r){this.props=e,this.context=t,this.refs=sN,this.updater=r||rN}var sx=nx.prototype=new oN;sx.constructor=nx;nN(sx,la.prototype);sx.isPureReactComponent=!0;var Ib=Array.isArray,iN=Object.prototype.hasOwnProperty,ox={current:null},aN={key:!0,ref:!0,__self:!0,__source:!0};function lN(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)iN.call(t,n)&&!aN.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:xc,type:e,key:o,ref:a,props:s,_owner:ox.current}}function M$(e,t){return{$$typeof:xc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ix(e){return typeof e=="object"&&e!==null&&e.$$typeof===xc}function L$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ob=/\/+/g;function lp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?L$(""+e.key):t.toString(36)}function Hu(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case xc:case E$:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+lp(a,0):n,Ib(s)?(r="",e!=null&&(r=e.replace(Ob,"$&/")+"/"),Hu(s,t,r,"",function(u){return u})):s!=null&&(ix(s)&&(s=M$(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ob,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Ib(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+lp(o,l);a+=Hu(o,t,r,c,s)}else if(c=$$(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+lp(o,l++),a+=Hu(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Zc(e,t,r){if(e==null)return e;var n=[],s=0;return Hu(e,n,"","",function(o){return t.call(r,o,s++)}),n}function F$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vt={current:null},Gu={transition:null},B$={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Gu,ReactCurrentOwner:ox};function cN(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Zc,forEach:function(e,t,r){Zc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zc(e,function(){t++}),t},toArray:function(e){return Zc(e,function(t){return t})||[]},only:function(e){if(!ix(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=la;Ee.Fragment=C$;Ee.Profiler=T$;Ee.PureComponent=nx;Ee.StrictMode=P$;Ee.Suspense=I$;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B$;Ee.act=cN;Ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=nN({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=ox.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)iN.call(t,c)&&!aN.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:xc,type:e.type,key:s,ref:o,props:n,_owner:a}};Ee.createContext=function(e){return e={$$typeof:A$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:k$,_context:e},e.Consumer=e};Ee.createElement=lN;Ee.createFactory=function(e){var t=lN.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:R$,render:e}};Ee.isValidElement=ix;Ee.lazy=function(e){return{$$typeof:D$,_payload:{_status:-1,_result:e},_init:F$}};Ee.memo=function(e,t){return{$$typeof:O$,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=Gu.transition;Gu.transition={};try{e()}finally{Gu.transition=t}};Ee.unstable_act=cN;Ee.useCallback=function(e,t){return Vt.current.useCallback(e,t)};Ee.useContext=function(e){return Vt.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return Vt.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return Vt.current.useEffect(e,t)};Ee.useId=function(){return Vt.current.useId()};Ee.useImperativeHandle=function(e,t,r){return Vt.current.useImperativeHandle(e,t,r)};Ee.useInsertionEffect=function(e,t){return Vt.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return Vt.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return Vt.current.useMemo(e,t)};Ee.useReducer=function(e,t,r){return Vt.current.useReducer(e,t,r)};Ee.useRef=function(e){return Vt.current.useRef(e)};Ee.useState=function(e){return Vt.current.useState(e)};Ee.useSyncExternalStore=function(e,t,r){return Vt.current.useSyncExternalStore(e,t,r)};Ee.useTransition=function(){return Vt.current.useTransition()};Ee.version="18.3.1";tN.exports=Ee;var p=tN.exports;const J=Io(p),yc=ZS({__proto__:null,default:J},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z$=p,U$=Symbol.for("react.element"),V$=Symbol.for("react.fragment"),q$=Object.prototype.hasOwnProperty,W$=z$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H$={key:!0,ref:!0,__self:!0,__source:!0};function uN(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)q$.call(t,n)&&!H$.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:U$,type:e,key:o,ref:a,props:s,_owner:W$.current}}xf.Fragment=V$;xf.jsx=uN;xf.jsxs=uN;eN.exports=xf;var i=eN.exports,Gm={},dN={exports:{}},xr={},fN={exports:{}},hN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,R){var $=A.length;A.push(R);e:for(;0<$;){var L=$-1>>>1,W=A[L];if(0<s(W,R))A[L]=R,A[$]=W,$=L;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var R=A[0],$=A.pop();if($!==R){A[0]=$;e:for(var L=0,W=A.length,V=W>>>1;L<V;){var re=2*(L+1)-1,ve=A[re],se=re+1,Z=A[se];if(0>s(ve,$))se<W&&0>s(Z,ve)?(A[L]=Z,A[se]=$,L=se):(A[L]=ve,A[re]=$,L=re);else if(se<W&&0>s(Z,$))A[L]=Z,A[se]=$,L=se;else break e}}return R}function s(A,R){var $=A.sortIndex-R.sortIndex;return $!==0?$:A.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=A)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function j(A){if(v=!1,w(A),!g)if(r(c)!==null)g=!0,B(_);else{var R=r(u);R!==null&&q(j,R.startTime-A)}}function _(A,R){g=!1,v&&(v=!1,b(E),E=-1),m=!0;var $=h;try{for(w(R),d=r(c);d!==null&&(!(d.expirationTime>R)||A&&!I());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var W=L(d.expirationTime<=R);R=e.unstable_now(),typeof W=="function"?d.callback=W:d===r(c)&&n(c),w(R)}else n(c);d=r(c)}if(d!==null)var V=!0;else{var re=r(u);re!==null&&q(j,re.startTime-R),V=!1}return V}finally{d=null,h=$,m=!1}}var S=!1,N=null,E=-1,C=5,k=-1;function I(){return!(e.unstable_now()-k<C)}function O(){if(N!==null){var A=e.unstable_now();k=A;var R=!0;try{R=N(!0,A)}finally{R?M():(S=!1,N=null)}}else S=!1}var M;if(typeof y=="function")M=function(){y(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=O,M=function(){z.postMessage(null)}}else M=function(){x(O,0)};function B(A){N=A,S||(S=!0,M())}function q(A,R){E=x(function(){A(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var $=h;h=R;try{return A()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var $=h;h=A;try{return R()}finally{h=$}},e.unstable_scheduleCallback=function(A,R,$){var L=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?L+$:L):$=L,A){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,A={id:f++,callback:R,priorityLevel:A,startTime:$,expirationTime:W,sortIndex:-1},$>L?(A.sortIndex=$,t(u,A),r(c)===null&&A===r(u)&&(v?(b(E),E=-1):v=!0,q(j,$-L))):(A.sortIndex=W,t(c,A),g||m||(g=!0,B(_))),A},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(A){var R=h;return function(){var $=h;h=R;try{return A.apply(this,arguments)}finally{h=$}}}})(hN);fN.exports=hN;var G$=fN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K$=p,mr=G$;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pN=new Set,kl={};function Oo(e,t){qi(e,t),qi(e+"Capture",t)}function qi(e,t){for(kl[e]=t,e=0;e<t.length;e++)pN.add(t[e])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Km=Object.prototype.hasOwnProperty,Y$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Db={},$b={};function J$(e){return Km.call($b,e)?!0:Km.call(Db,e)?!1:Y$.test(e)?$b[e]=!0:(Db[e]=!0,!1)}function X$(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q$(e,t,r,n){if(t===null||typeof t>"u"||X$(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qt(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nt[e]=new qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nt[t]=new qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nt[e]=new qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nt[e]=new qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nt[e]=new qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nt[e]=new qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nt[e]=new qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nt[e]=new qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nt[e]=new qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ax=/[\-:]([a-z])/g;function lx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ax,lx);Nt[t]=new qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ax,lx);Nt[t]=new qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ax,lx);Nt[t]=new qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nt[e]=new qt(e,1,!1,e.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nt[e]=new qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function cx(e,t,r,n){var s=Nt.hasOwnProperty(t)?Nt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q$(t,r,s,n)&&(r=null),n||s===null?J$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Jn=K$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eu=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),ux=Symbol.for("react.strict_mode"),Ym=Symbol.for("react.profiler"),mN=Symbol.for("react.provider"),gN=Symbol.for("react.context"),dx=Symbol.for("react.forward_ref"),Jm=Symbol.for("react.suspense"),Xm=Symbol.for("react.suspense_list"),fx=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),vN=Symbol.for("react.offscreen"),Mb=Symbol.iterator;function Ia(e){return e===null||typeof e!="object"?null:(e=Mb&&e[Mb]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Object.assign,cp;function Za(e){if(cp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);cp=t&&t[1]||""}return`
`+cp+e}var up=!1;function dp(e,t){if(!e||up)return"";up=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{up=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Za(e):""}function Z$(e){switch(e.tag){case 5:return Za(e.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 2:case 15:return e=dp(e.type,!1),e;case 11:return e=dp(e.type.render,!1),e;case 1:return e=dp(e.type,!0),e;default:return""}}function Qm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case di:return"Portal";case Ym:return"Profiler";case ux:return"StrictMode";case Jm:return"Suspense";case Xm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gN:return(e.displayName||"Context")+".Consumer";case mN:return(e._context.displayName||"Context")+".Provider";case dx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fx:return t=e.displayName||null,t!==null?t:Qm(e.type)||"Memo";case is:t=e._payload,e=e._init;try{return Qm(e(t))}catch{}}return null}function eM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qm(t);case 8:return t===ux?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ks(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tM(e){var t=xN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tu(e){e._valueTracker||(e._valueTracker=tM(e))}function yN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function dd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zm(e,t){var r=t.checked;return nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Lb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ks(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bN(e,t){t=t.checked,t!=null&&cx(e,"checked",t,!1)}function eg(e,t){bN(e,t);var r=ks(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tg(e,t.type,r):t.hasOwnProperty("defaultValue")&&tg(e,t.type,ks(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tg(e,t,r){(t!=="number"||dd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var el=Array.isArray;function Pi(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ks(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function rg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(te(92));if(el(r)){if(1<r.length)throw Error(te(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ks(r)}}function wN(e,t){var r=ks(t.value),n=ks(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function zb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ng(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ru,_N=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ru=ru||document.createElement("div"),ru.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ru.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Al(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rM=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(e){rM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ul[t]=ul[e]})});function SN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ul.hasOwnProperty(e)&&ul[e]?(""+t).trim():t+"px"}function NN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=SN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var nM=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sg(e,t){if(t){if(nM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function og(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=null;function hx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ag=null,Ti=null,ki=null;function Ub(e){if(e=jc(e)){if(typeof ag!="function")throw Error(te(280));var t=e.stateNode;t&&(t=_f(t),ag(e.stateNode,e.type,t))}}function EN(e){Ti?ki?ki.push(e):ki=[e]:Ti=e}function CN(){if(Ti){var e=Ti,t=ki;if(ki=Ti=null,Ub(e),t)for(e=0;e<t.length;e++)Ub(t[e])}}function PN(e,t){return e(t)}function TN(){}var fp=!1;function kN(e,t,r){if(fp)return e(t,r);fp=!0;try{return PN(e,t,r)}finally{fp=!1,(Ti!==null||ki!==null)&&(TN(),CN())}}function Rl(e,t){var r=e.stateNode;if(r===null)return null;var n=_f(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(te(231,t,typeof r));return r}var lg=!1;if(Bn)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){lg=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{lg=!1}function sM(e,t,r,n,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var dl=!1,fd=null,hd=!1,cg=null,oM={onError:function(e){dl=!0,fd=e}};function iM(e,t,r,n,s,o,a,l,c){dl=!1,fd=null,sM.apply(oM,arguments)}function aM(e,t,r,n,s,o,a,l,c){if(iM.apply(this,arguments),dl){if(dl){var u=fd;dl=!1,fd=null}else throw Error(te(198));hd||(hd=!0,cg=u)}}function Do(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function AN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vb(e){if(Do(e)!==e)throw Error(te(188))}function lM(e){var t=e.alternate;if(!t){if(t=Do(e),t===null)throw Error(te(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Vb(s),e;if(o===n)return Vb(s),t;o=o.sibling}throw Error(te(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?e:t}function RN(e){return e=lM(e),e!==null?IN(e):null}function IN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=IN(e);if(t!==null)return t;e=e.sibling}return null}var ON=mr.unstable_scheduleCallback,qb=mr.unstable_cancelCallback,cM=mr.unstable_shouldYield,uM=mr.unstable_requestPaint,it=mr.unstable_now,dM=mr.unstable_getCurrentPriorityLevel,px=mr.unstable_ImmediatePriority,DN=mr.unstable_UserBlockingPriority,pd=mr.unstable_NormalPriority,fM=mr.unstable_LowPriority,$N=mr.unstable_IdlePriority,yf=null,vn=null;function hM(e){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(yf,e,void 0,(e.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:gM,pM=Math.log,mM=Math.LN2;function gM(e){return e>>>=0,e===0?32:31-(pM(e)/mM|0)|0}var nu=64,su=4194304;function tl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function md(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=tl(l):(o&=a,o!==0&&(n=tl(o)))}else a=r&~s,a!==0?n=tl(a):o!==0&&(n=tl(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Xr(t),s=1<<r,n|=e[r],t&=~s;return n}function vM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Xr(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=vM(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function ug(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MN(){var e=nu;return nu<<=1,!(nu&4194240)&&(nu=64),e}function hp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xr(t),e[t]=r}function yM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Xr(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function mx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var $e=0;function LN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var FN,gx,BN,zN,UN,dg=!1,ou=[],gs=null,vs=null,xs=null,Il=new Map,Ol=new Map,cs=[],bM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wb(e,t){switch(e){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":Il.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function Da(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=jc(t),t!==null&&gx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wM(e,t,r,n,s){switch(t){case"focusin":return gs=Da(gs,e,t,r,n,s),!0;case"dragenter":return vs=Da(vs,e,t,r,n,s),!0;case"mouseover":return xs=Da(xs,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return Il.set(o,Da(Il.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ol.set(o,Da(Ol.get(o)||null,e,t,r,n,s)),!0}return!1}function VN(e){var t=io(e.target);if(t!==null){var r=Do(t);if(r!==null){if(t=r.tag,t===13){if(t=AN(r),t!==null){e.blockedOn=t,UN(e.priority,function(){BN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ku(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ig=n,r.target.dispatchEvent(n),ig=null}else return t=jc(r),t!==null&&gx(t),e.blockedOn=r,!1;t.shift()}return!0}function Hb(e,t,r){Ku(e)&&r.delete(t)}function jM(){dg=!1,gs!==null&&Ku(gs)&&(gs=null),vs!==null&&Ku(vs)&&(vs=null),xs!==null&&Ku(xs)&&(xs=null),Il.forEach(Hb),Ol.forEach(Hb)}function $a(e,t){e.blockedOn===t&&(e.blockedOn=null,dg||(dg=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,jM)))}function Dl(e){function t(s){return $a(s,e)}if(0<ou.length){$a(ou[0],e);for(var r=1;r<ou.length;r++){var n=ou[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gs!==null&&$a(gs,e),vs!==null&&$a(vs,e),xs!==null&&$a(xs,e),Il.forEach(t),Ol.forEach(t),r=0;r<cs.length;r++)n=cs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cs.length&&(r=cs[0],r.blockedOn===null);)VN(r),r.blockedOn===null&&cs.shift()}var Ai=Jn.ReactCurrentBatchConfig,gd=!0;function _M(e,t,r,n){var s=$e,o=Ai.transition;Ai.transition=null;try{$e=1,vx(e,t,r,n)}finally{$e=s,Ai.transition=o}}function SM(e,t,r,n){var s=$e,o=Ai.transition;Ai.transition=null;try{$e=4,vx(e,t,r,n)}finally{$e=s,Ai.transition=o}}function vx(e,t,r,n){if(gd){var s=fg(e,t,r,n);if(s===null)_p(e,t,n,vd,r),Wb(e,n);else if(wM(s,e,t,r,n))n.stopPropagation();else if(Wb(e,n),t&4&&-1<bM.indexOf(e)){for(;s!==null;){var o=jc(s);if(o!==null&&FN(o),o=fg(e,t,r,n),o===null&&_p(e,t,n,vd,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else _p(e,t,n,null,r)}}var vd=null;function fg(e,t,r,n){if(vd=null,e=hx(n),e=io(e),e!==null)if(t=Do(e),t===null)e=null;else if(r=t.tag,r===13){if(e=AN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vd=e,null}function qN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dM()){case px:return 1;case DN:return 4;case pd:case fM:return 16;case $N:return 536870912;default:return 16}default:return 16}}var fs=null,xx=null,Yu=null;function WN(){if(Yu)return Yu;var e,t=xx,r=t.length,n,s="value"in fs?fs.value:fs.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return Yu=s.slice(e,1<n?1-n:void 0)}function Ju(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iu(){return!0}function Gb(){return!1}function yr(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?iu:Gb,this.isPropagationStopped=Gb,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),t}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yx=yr(ca),wc=nt({},ca,{view:0,detail:0}),NM=yr(wc),pp,mp,Ma,bf=nt({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ma&&(Ma&&e.type==="mousemove"?(pp=e.screenX-Ma.screenX,mp=e.screenY-Ma.screenY):mp=pp=0,Ma=e),pp)},movementY:function(e){return"movementY"in e?e.movementY:mp}}),Kb=yr(bf),EM=nt({},bf,{dataTransfer:0}),CM=yr(EM),PM=nt({},wc,{relatedTarget:0}),gp=yr(PM),TM=nt({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),kM=yr(TM),AM=nt({},ca,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RM=yr(AM),IM=nt({},ca,{data:0}),Yb=yr(IM),OM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$M={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$M[e])?!!t[e]:!1}function bx(){return MM}var LM=nt({},wc,{key:function(e){if(e.key){var t=OM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ju(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bx,charCode:function(e){return e.type==="keypress"?Ju(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ju(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FM=yr(LM),BM=nt({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jb=yr(BM),zM=nt({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bx}),UM=yr(zM),VM=nt({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),qM=yr(VM),WM=nt({},bf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HM=yr(WM),GM=[9,13,27,32],wx=Bn&&"CompositionEvent"in window,fl=null;Bn&&"documentMode"in document&&(fl=document.documentMode);var KM=Bn&&"TextEvent"in window&&!fl,HN=Bn&&(!wx||fl&&8<fl&&11>=fl),Xb=String.fromCharCode(32),Qb=!1;function GN(e,t){switch(e){case"keyup":return GM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function YM(e,t){switch(e){case"compositionend":return KN(t);case"keypress":return t.which!==32?null:(Qb=!0,Xb);case"textInput":return e=t.data,e===Xb&&Qb?null:e;default:return null}}function JM(e,t){if(hi)return e==="compositionend"||!wx&&GN(e,t)?(e=WN(),Yu=xx=fs=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HN&&t.locale!=="ko"?null:t.data;default:return null}}var XM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XM[e.type]:t==="textarea"}function YN(e,t,r,n){EN(n),t=xd(t,"onChange"),0<t.length&&(r=new yx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var hl=null,$l=null;function QM(e){iE(e,0)}function wf(e){var t=gi(e);if(yN(t))return e}function ZM(e,t){if(e==="change")return t}var JN=!1;if(Bn){var vp;if(Bn){var xp="oninput"in document;if(!xp){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),xp=typeof ew.oninput=="function"}vp=xp}else vp=!1;JN=vp&&(!document.documentMode||9<document.documentMode)}function tw(){hl&&(hl.detachEvent("onpropertychange",XN),$l=hl=null)}function XN(e){if(e.propertyName==="value"&&wf($l)){var t=[];YN(t,$l,e,hx(e)),kN(QM,t)}}function eL(e,t,r){e==="focusin"?(tw(),hl=t,$l=r,hl.attachEvent("onpropertychange",XN)):e==="focusout"&&tw()}function tL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wf($l)}function rL(e,t){if(e==="click")return wf(t)}function nL(e,t){if(e==="input"||e==="change")return wf(t)}function sL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zr=typeof Object.is=="function"?Object.is:sL;function Ml(e,t){if(Zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Km.call(t,s)||!Zr(e[s],t[s]))return!1}return!0}function rw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nw(e,t){var r=rw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rw(r)}}function QN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZN(){for(var e=window,t=dd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dd(e.document)}return t}function jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oL(e){var t=ZN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&QN(r.ownerDocument.documentElement,r)){if(n!==null&&jx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=nw(r,o);var a=nw(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iL=Bn&&"documentMode"in document&&11>=document.documentMode,pi=null,hg=null,pl=null,pg=!1;function sw(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pg||pi==null||pi!==dd(n)||(n=pi,"selectionStart"in n&&jx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pl&&Ml(pl,n)||(pl=n,n=xd(hg,"onSelect"),0<n.length&&(t=new yx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pi)))}function au(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var mi={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},yp={},eE={};Bn&&(eE=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function jf(e){if(yp[e])return yp[e];if(!mi[e])return e;var t=mi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eE)return yp[e]=t[r];return e}var tE=jf("animationend"),rE=jf("animationiteration"),nE=jf("animationstart"),sE=jf("transitionend"),oE=new Map,ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(e,t){oE.set(e,t),Oo(t,[e])}for(var bp=0;bp<ow.length;bp++){var wp=ow[bp],aL=wp.toLowerCase(),lL=wp[0].toUpperCase()+wp.slice(1);Ls(aL,"on"+lL)}Ls(tE,"onAnimationEnd");Ls(rE,"onAnimationIteration");Ls(nE,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(sE,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cL=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function iw(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,aM(n,t,void 0,e),e.currentTarget=null}function iE(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;iw(s,l,u),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;iw(s,l,u),o=c}}}if(hd)throw e=cg,hd=!1,cg=null,e}function Ge(e,t){var r=t[yg];r===void 0&&(r=t[yg]=new Set);var n=e+"__bubble";r.has(n)||(aE(t,e,2,!1),r.add(n))}function jp(e,t,r){var n=0;t&&(n|=4),aE(r,e,n,t)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[lu]){e[lu]=!0,pN.forEach(function(r){r!=="selectionchange"&&(cL.has(r)||jp(r,!1,e),jp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lu]||(t[lu]=!0,jp("selectionchange",!1,t))}}function aE(e,t,r,n){switch(qN(t)){case 1:var s=_M;break;case 4:s=SM;break;default:s=vx}r=s.bind(null,t,r,e),s=void 0,!lg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function _p(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=io(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}kN(function(){var u=o,f=hx(r),d=[];e:{var h=oE.get(e);if(h!==void 0){var m=yx,g=e;switch(e){case"keypress":if(Ju(r)===0)break e;case"keydown":case"keyup":m=FM;break;case"focusin":g="focus",m=gp;break;case"focusout":g="blur",m=gp;break;case"beforeblur":case"afterblur":m=gp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Kb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=CM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=UM;break;case tE:case rE:case nE:m=kM;break;case sE:m=qM;break;case"scroll":m=NM;break;case"wheel":m=HM;break;case"copy":case"cut":case"paste":m=RM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jb}var v=(t&4)!==0,x=!v&&e==="scroll",b=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,w;y!==null;){w=y;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,b!==null&&(j=Rl(y,b),j!=null&&v.push(Fl(y,j,w)))),x)break;y=y.return}0<v.length&&(h=new m(h,g,null,r,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==ig&&(g=r.relatedTarget||r.fromElement)&&(io(g)||g[zn]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?io(g):null,g!==null&&(x=Do(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=Kb,j="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Jb,j="onPointerLeave",b="onPointerEnter",y="pointer"),x=m==null?h:gi(m),w=g==null?h:gi(g),h=new v(j,y+"leave",m,r,f),h.target=x,h.relatedTarget=w,j=null,io(f)===u&&(v=new v(b,y+"enter",g,r,f),v.target=w,v.relatedTarget=x,j=v),x=j,m&&g)t:{for(v=m,b=g,y=0,w=v;w;w=Ko(w))y++;for(w=0,j=b;j;j=Ko(j))w++;for(;0<y-w;)v=Ko(v),y--;for(;0<w-y;)b=Ko(b),w--;for(;y--;){if(v===b||b!==null&&v===b.alternate)break t;v=Ko(v),b=Ko(b)}v=null}else v=null;m!==null&&aw(d,h,m,v,!1),g!==null&&x!==null&&aw(d,x,g,v,!0)}}e:{if(h=u?gi(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var _=ZM;else if(Zb(h))if(JN)_=nL;else{_=tL;var S=eL}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=rL);if(_&&(_=_(e,u))){YN(d,_,r,f);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&tg(h,"number",h.value)}switch(S=u?gi(u):window,e){case"focusin":(Zb(S)||S.contentEditable==="true")&&(pi=S,hg=u,pl=null);break;case"focusout":pl=hg=pi=null;break;case"mousedown":pg=!0;break;case"contextmenu":case"mouseup":case"dragend":pg=!1,sw(d,r,f);break;case"selectionchange":if(iL)break;case"keydown":case"keyup":sw(d,r,f)}var N;if(wx)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else hi?GN(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(HN&&r.locale!=="ko"&&(hi||E!=="onCompositionStart"?E==="onCompositionEnd"&&hi&&(N=WN()):(fs=f,xx="value"in fs?fs.value:fs.textContent,hi=!0)),S=xd(u,E),0<S.length&&(E=new Yb(E,e,null,r,f),d.push({event:E,listeners:S}),N?E.data=N:(N=KN(r),N!==null&&(E.data=N)))),(N=KM?YM(e,r):JM(e,r))&&(u=xd(u,"onBeforeInput"),0<u.length&&(f=new Yb("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=N))}iE(d,t)})}function Fl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xd(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rl(e,r),o!=null&&n.unshift(Fl(e,o,s)),o=Rl(e,t),o!=null&&n.push(Fl(e,o,s))),e=e.return}return n}function Ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aw(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Rl(r,o),c!=null&&a.unshift(Fl(r,c,l))):s||(c=Rl(r,o),c!=null&&a.push(Fl(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var uL=/\r\n?/g,dL=/\u0000|\uFFFD/g;function lw(e){return(typeof e=="string"?e:""+e).replace(uL,`
`).replace(dL,"")}function cu(e,t,r){if(t=lw(t),lw(e)!==t&&r)throw Error(te(425))}function yd(){}var mg=null,gg=null;function vg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xg=typeof setTimeout=="function"?setTimeout:void 0,fL=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,hL=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(e){return cw.resolve(null).then(e).catch(pL)}:xg;function pL(e){setTimeout(function(){throw e})}function Sp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dl(t)}function ys(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),fn="__reactFiber$"+ua,Bl="__reactProps$"+ua,zn="__reactContainer$"+ua,yg="__reactEvents$"+ua,mL="__reactListeners$"+ua,gL="__reactHandles$"+ua;function io(e){var t=e[fn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zn]||r[fn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uw(e);e!==null;){if(r=e[fn])return r;e=uw(e)}return t}e=r,r=e.parentNode}return null}function jc(e){return e=e[fn]||e[zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function _f(e){return e[Bl]||null}var bg=[],vi=-1;function Fs(e){return{current:e}}function Ke(e){0>vi||(e.current=bg[vi],bg[vi]=null,vi--)}function ze(e,t){vi++,bg[vi]=e.current,e.current=t}var As={},It=Fs(As),Qt=Fs(!1),bo=As;function Wi(e,t){var r=e.type.contextTypes;if(!r)return As;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(e){return e=e.childContextTypes,e!=null}function bd(){Ke(Qt),Ke(It)}function dw(e,t,r){if(It.current!==As)throw Error(te(168));ze(It,t),ze(Qt,r)}function lE(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(te(108,eM(e)||"Unknown",s));return nt({},r,n)}function wd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||As,bo=It.current,ze(It,e),ze(Qt,Qt.current),!0}function fw(e,t,r){var n=e.stateNode;if(!n)throw Error(te(169));r?(e=lE(e,t,bo),n.__reactInternalMemoizedMergedChildContext=e,Ke(Qt),Ke(It),ze(It,e)):Ke(Qt),ze(Qt,r)}var An=null,Sf=!1,Np=!1;function cE(e){An===null?An=[e]:An.push(e)}function vL(e){Sf=!0,cE(e)}function Bs(){if(!Np&&An!==null){Np=!0;var e=0,t=$e;try{var r=An;for($e=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}An=null,Sf=!1}catch(s){throw An!==null&&(An=An.slice(e+1)),ON(px,Bs),s}finally{$e=t,Np=!1}}return null}var xi=[],yi=0,jd=null,_d=0,Cr=[],Pr=0,wo=null,Rn=1,In="";function Ys(e,t){xi[yi++]=_d,xi[yi++]=jd,jd=e,_d=t}function uE(e,t,r){Cr[Pr++]=Rn,Cr[Pr++]=In,Cr[Pr++]=wo,wo=e;var n=Rn;e=In;var s=32-Xr(n)-1;n&=~(1<<s),r+=1;var o=32-Xr(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Rn=1<<32-Xr(t)+s|r<<s|n,In=o+e}else Rn=1<<o|r<<s|n,In=e}function _x(e){e.return!==null&&(Ys(e,1),uE(e,1,0))}function Sx(e){for(;e===jd;)jd=xi[--yi],xi[yi]=null,_d=xi[--yi],xi[yi]=null;for(;e===wo;)wo=Cr[--Pr],Cr[Pr]=null,In=Cr[--Pr],Cr[Pr]=null,Rn=Cr[--Pr],Cr[Pr]=null}var dr=null,cr=null,Xe=!1,Kr=null;function dE(e,t){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dr=e,cr=ys(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dr=e,cr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=wo!==null?{id:Rn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,dr=e,cr=null,!0):!1;default:return!1}}function wg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jg(e){if(Xe){var t=cr;if(t){var r=t;if(!hw(e,t)){if(wg(e))throw Error(te(418));t=ys(r.nextSibling);var n=dr;t&&hw(e,t)?dE(n,r):(e.flags=e.flags&-4097|2,Xe=!1,dr=e)}}else{if(wg(e))throw Error(te(418));e.flags=e.flags&-4097|2,Xe=!1,dr=e}}}function pw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dr=e}function uu(e){if(e!==dr)return!1;if(!Xe)return pw(e),Xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vg(e.type,e.memoizedProps)),t&&(t=cr)){if(wg(e))throw fE(),Error(te(418));for(;t;)dE(e,t),t=ys(t.nextSibling)}if(pw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){cr=ys(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}cr=null}}else cr=dr?ys(e.stateNode.nextSibling):null;return!0}function fE(){for(var e=cr;e;)e=ys(e.nextSibling)}function Hi(){cr=dr=null,Xe=!1}function Nx(e){Kr===null?Kr=[e]:Kr.push(e)}var xL=Jn.ReactCurrentBatchConfig;function La(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,e))}return e}function du(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mw(e){var t=e._init;return t(e._payload)}function hE(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function r(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function n(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(b,y){return b=_s(b,y),b.index=0,b.sibling=null,b}function o(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,w,j){return y===null||y.tag!==6?(y=Rp(w,b.mode,j),y.return=b,y):(y=s(y,w),y.return=b,y)}function c(b,y,w,j){var _=w.type;return _===fi?f(b,y,w.props.children,j,w.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===is&&mw(_)===y.type)?(j=s(y,w.props),j.ref=La(b,y,w),j.return=b,j):(j=nd(w.type,w.key,w.props,null,b.mode,j),j.ref=La(b,y,w),j.return=b,j)}function u(b,y,w,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Ip(w,b.mode,j),y.return=b,y):(y=s(y,w.children||[]),y.return=b,y)}function f(b,y,w,j,_){return y===null||y.tag!==7?(y=mo(w,b.mode,j,_),y.return=b,y):(y=s(y,w),y.return=b,y)}function d(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Rp(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case eu:return w=nd(y.type,y.key,y.props,null,b.mode,w),w.ref=La(b,null,y),w.return=b,w;case di:return y=Ip(y,b.mode,w),y.return=b,y;case is:var j=y._init;return d(b,j(y._payload),w)}if(el(y)||Ia(y))return y=mo(y,b.mode,w,null),y.return=b,y;du(b,y)}return null}function h(b,y,w,j){var _=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(b,y,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eu:return w.key===_?c(b,y,w,j):null;case di:return w.key===_?u(b,y,w,j):null;case is:return _=w._init,h(b,y,_(w._payload),j)}if(el(w)||Ia(w))return _!==null?null:f(b,y,w,j,null);du(b,w)}return null}function m(b,y,w,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(w)||null,l(y,b,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case eu:return b=b.get(j.key===null?w:j.key)||null,c(y,b,j,_);case di:return b=b.get(j.key===null?w:j.key)||null,u(y,b,j,_);case is:var S=j._init;return m(b,y,w,S(j._payload),_)}if(el(j)||Ia(j))return b=b.get(w)||null,f(y,b,j,_,null);du(y,j)}return null}function g(b,y,w,j){for(var _=null,S=null,N=y,E=y=0,C=null;N!==null&&E<w.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var k=h(b,N,w[E],j);if(k===null){N===null&&(N=C);break}e&&N&&k.alternate===null&&t(b,N),y=o(k,y,E),S===null?_=k:S.sibling=k,S=k,N=C}if(E===w.length)return r(b,N),Xe&&Ys(b,E),_;if(N===null){for(;E<w.length;E++)N=d(b,w[E],j),N!==null&&(y=o(N,y,E),S===null?_=N:S.sibling=N,S=N);return Xe&&Ys(b,E),_}for(N=n(b,N);E<w.length;E++)C=m(N,b,E,w[E],j),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?E:C.key),y=o(C,y,E),S===null?_=C:S.sibling=C,S=C);return e&&N.forEach(function(I){return t(b,I)}),Xe&&Ys(b,E),_}function v(b,y,w,j){var _=Ia(w);if(typeof _!="function")throw Error(te(150));if(w=_.call(w),w==null)throw Error(te(151));for(var S=_=null,N=y,E=y=0,C=null,k=w.next();N!==null&&!k.done;E++,k=w.next()){N.index>E?(C=N,N=null):C=N.sibling;var I=h(b,N,k.value,j);if(I===null){N===null&&(N=C);break}e&&N&&I.alternate===null&&t(b,N),y=o(I,y,E),S===null?_=I:S.sibling=I,S=I,N=C}if(k.done)return r(b,N),Xe&&Ys(b,E),_;if(N===null){for(;!k.done;E++,k=w.next())k=d(b,k.value,j),k!==null&&(y=o(k,y,E),S===null?_=k:S.sibling=k,S=k);return Xe&&Ys(b,E),_}for(N=n(b,N);!k.done;E++,k=w.next())k=m(N,b,E,k.value,j),k!==null&&(e&&k.alternate!==null&&N.delete(k.key===null?E:k.key),y=o(k,y,E),S===null?_=k:S.sibling=k,S=k);return e&&N.forEach(function(O){return t(b,O)}),Xe&&Ys(b,E),_}function x(b,y,w,j){if(typeof w=="object"&&w!==null&&w.type===fi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case eu:e:{for(var _=w.key,S=y;S!==null;){if(S.key===_){if(_=w.type,_===fi){if(S.tag===7){r(b,S.sibling),y=s(S,w.props.children),y.return=b,b=y;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===is&&mw(_)===S.type){r(b,S.sibling),y=s(S,w.props),y.ref=La(b,S,w),y.return=b,b=y;break e}r(b,S);break}else t(b,S);S=S.sibling}w.type===fi?(y=mo(w.props.children,b.mode,j,w.key),y.return=b,b=y):(j=nd(w.type,w.key,w.props,null,b.mode,j),j.ref=La(b,y,w),j.return=b,b=j)}return a(b);case di:e:{for(S=w.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(b,y.sibling),y=s(y,w.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else t(b,y);y=y.sibling}y=Ip(w,b.mode,j),y.return=b,b=y}return a(b);case is:return S=w._init,x(b,y,S(w._payload),j)}if(el(w))return g(b,y,w,j);if(Ia(w))return v(b,y,w,j);du(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(b,y.sibling),y=s(y,w),y.return=b,b=y):(r(b,y),y=Rp(w,b.mode,j),y.return=b,b=y),a(b)):r(b,y)}return x}var Gi=hE(!0),pE=hE(!1),Sd=Fs(null),Nd=null,bi=null,Ex=null;function Cx(){Ex=bi=Nd=null}function Px(e){var t=Sd.current;Ke(Sd),e._currentValue=t}function _g(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ri(e,t){Nd=e,Ex=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xt=!0),e.firstContext=null)}function Dr(e){var t=e._currentValue;if(Ex!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(Nd===null)throw Error(te(308));bi=e,Nd.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var ao=null;function Tx(e){ao===null?ao=[e]:ao.push(e)}function mE(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Tx(t)):(r.next=s.next,s.next=r),t.interleaved=r,Un(e,n)}function Un(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function kx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Un(e,r)}return s=n.interleaved,s===null?(t.next=t,Tx(n)):(t.next=s.next,s.next=t),n.interleaved=t,Un(e,r)}function Xu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mx(e,r)}}function gw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ed(e,t,r,n){var s=e.updateQueue;as=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;a=0,f=u=c=null,l=o;do{var h=l.lane,m=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=nt({},d,h);break e;case 2:as=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);_o|=a,e.lanes=a,e.memoizedState=d}}function vw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(te(191,s));s.call(n)}}}var _c={},xn=Fs(_c),zl=Fs(_c),Ul=Fs(_c);function lo(e){if(e===_c)throw Error(te(174));return e}function Ax(e,t){switch(ze(Ul,t),ze(zl,e),ze(xn,_c),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ng(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ng(t,e)}Ke(xn),ze(xn,t)}function Ki(){Ke(xn),Ke(zl),Ke(Ul)}function vE(e){lo(Ul.current);var t=lo(xn.current),r=ng(t,e.type);t!==r&&(ze(zl,e),ze(xn,r))}function Rx(e){zl.current===e&&(Ke(xn),Ke(zl))}var et=Fs(0);function Cd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ep=[];function Ix(){for(var e=0;e<Ep.length;e++)Ep[e]._workInProgressVersionPrimary=null;Ep.length=0}var Qu=Jn.ReactCurrentDispatcher,Cp=Jn.ReactCurrentBatchConfig,jo=0,rt=null,ht=null,gt=null,Pd=!1,ml=!1,Vl=0,yL=0;function Ct(){throw Error(te(321))}function Ox(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zr(e[r],t[r]))return!1;return!0}function Dx(e,t,r,n,s,o){if(jo=o,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qu.current=e===null||e.memoizedState===null?_L:SL,e=r(n,s),ml){o=0;do{if(ml=!1,Vl=0,25<=o)throw Error(te(301));o+=1,gt=ht=null,t.updateQueue=null,Qu.current=NL,e=r(n,s)}while(ml)}if(Qu.current=Td,t=ht!==null&&ht.next!==null,jo=0,gt=ht=rt=null,Pd=!1,t)throw Error(te(300));return e}function $x(){var e=Vl!==0;return Vl=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?rt.memoizedState=gt=e:gt=gt.next=e,gt}function $r(){if(ht===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=gt===null?rt.memoizedState:gt.next;if(t!==null)gt=t,ht=e;else{if(e===null)throw Error(te(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?rt.memoizedState=gt=e:gt=gt.next=e}return gt}function ql(e,t){return typeof t=="function"?t(e):t}function Pp(e){var t=$r(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var n=ht,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((jo&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=n):c=c.next=d,rt.lanes|=f,_o|=f}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=l,Zr(n,t.memoizedState)||(Xt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,rt.lanes|=o,_o|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tp(e){var t=$r(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Zr(o,t.memoizedState)||(Xt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function xE(){}function yE(e,t){var r=rt,n=$r(),s=t(),o=!Zr(n.memoizedState,s);if(o&&(n.memoizedState=s,Xt=!0),n=n.queue,Mx(jE.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Wl(9,wE.bind(null,r,n,s,t),void 0,null),xt===null)throw Error(te(349));jo&30||bE(r,t,s)}return s}function bE(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wE(e,t,r,n){t.value=r,t.getSnapshot=n,_E(t)&&SE(e)}function jE(e,t,r){return r(function(){_E(t)&&SE(e)})}function _E(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zr(e,r)}catch{return!0}}function SE(e){var t=Un(e,1);t!==null&&Qr(t,e,1,-1)}function xw(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:e},t.queue=e,e=e.dispatch=jL.bind(null,rt,e),[t.memoizedState,e]}function Wl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function NE(){return $r().memoizedState}function Zu(e,t,r,n){var s=dn();rt.flags|=e,s.memoizedState=Wl(1|t,r,void 0,n===void 0?null:n)}function Nf(e,t,r,n){var s=$r();n=n===void 0?null:n;var o=void 0;if(ht!==null){var a=ht.memoizedState;if(o=a.destroy,n!==null&&Ox(n,a.deps)){s.memoizedState=Wl(t,r,o,n);return}}rt.flags|=e,s.memoizedState=Wl(1|t,r,o,n)}function yw(e,t){return Zu(8390656,8,e,t)}function Mx(e,t){return Nf(2048,8,e,t)}function EE(e,t){return Nf(4,2,e,t)}function CE(e,t){return Nf(4,4,e,t)}function PE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function TE(e,t,r){return r=r!=null?r.concat([e]):null,Nf(4,4,PE.bind(null,t,e),r)}function Lx(){}function kE(e,t){var r=$r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ox(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function AE(e,t){var r=$r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ox(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function RE(e,t,r){return jo&21?(Zr(r,t)||(r=MN(),rt.lanes|=r,_o|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xt=!0),e.memoizedState=r)}function bL(e,t){var r=$e;$e=r!==0&&4>r?r:4,e(!0);var n=Cp.transition;Cp.transition={};try{e(!1),t()}finally{$e=r,Cp.transition=n}}function IE(){return $r().memoizedState}function wL(e,t,r){var n=js(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},OE(e))DE(t,r);else if(r=mE(e,t,r,n),r!==null){var s=Ut();Qr(r,e,n,s),$E(r,t,n)}}function jL(e,t,r){var n=js(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(OE(e))DE(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Zr(l,a)){var c=t.interleaved;c===null?(s.next=s,Tx(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=mE(e,t,s,n),r!==null&&(s=Ut(),Qr(r,e,n,s),$E(r,t,n))}}function OE(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function DE(e,t){ml=Pd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $E(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mx(e,r)}}var Td={readContext:Dr,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},_L={readContext:Dr,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Dr,useEffect:yw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zu(4194308,4,PE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zu(4,2,e,t)},useMemo:function(e,t){var r=dn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=wL.bind(null,rt,e),[n.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:xw,useDebugValue:Lx,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=xw(!1),t=e[0];return e=bL.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=rt,s=dn();if(Xe){if(r===void 0)throw Error(te(407));r=r()}else{if(r=t(),xt===null)throw Error(te(349));jo&30||bE(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,yw(jE.bind(null,n,o,e),[e]),n.flags|=2048,Wl(9,wE.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=dn(),t=xt.identifierPrefix;if(Xe){var r=In,n=Rn;r=(n&~(1<<32-Xr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Vl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yL++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SL={readContext:Dr,useCallback:kE,useContext:Dr,useEffect:Mx,useImperativeHandle:TE,useInsertionEffect:EE,useLayoutEffect:CE,useMemo:AE,useReducer:Pp,useRef:NE,useState:function(){return Pp(ql)},useDebugValue:Lx,useDeferredValue:function(e){var t=$r();return RE(t,ht.memoizedState,e)},useTransition:function(){var e=Pp(ql)[0],t=$r().memoizedState;return[e,t]},useMutableSource:xE,useSyncExternalStore:yE,useId:IE,unstable_isNewReconciler:!1},NL={readContext:Dr,useCallback:kE,useContext:Dr,useEffect:Mx,useImperativeHandle:TE,useInsertionEffect:EE,useLayoutEffect:CE,useMemo:AE,useReducer:Tp,useRef:NE,useState:function(){return Tp(ql)},useDebugValue:Lx,useDeferredValue:function(e){var t=$r();return ht===null?t.memoizedState=e:RE(t,ht.memoizedState,e)},useTransition:function(){var e=Tp(ql)[0],t=$r().memoizedState;return[e,t]},useMutableSource:xE,useSyncExternalStore:yE,useId:IE,unstable_isNewReconciler:!1};function Wr(e,t){if(e&&e.defaultProps){t=nt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Sg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:nt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ef={isMounted:function(e){return(e=e._reactInternals)?Do(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ut(),s=js(e),o=Dn(n,s);o.payload=t,r!=null&&(o.callback=r),t=bs(e,o,s),t!==null&&(Qr(t,e,s,n),Xu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ut(),s=js(e),o=Dn(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=bs(e,o,s),t!==null&&(Qr(t,e,s,n),Xu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ut(),n=js(e),s=Dn(r,n);s.tag=2,t!=null&&(s.callback=t),t=bs(e,s,n),t!==null&&(Qr(t,e,n,r),Xu(t,e,n))}};function bw(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ml(r,n)||!Ml(s,o):!0}function ME(e,t,r){var n=!1,s=As,o=t.contextType;return typeof o=="object"&&o!==null?o=Dr(o):(s=Zt(t)?bo:It.current,n=t.contextTypes,o=(n=n!=null)?Wi(e,s):As),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ef,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ww(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ef.enqueueReplaceState(t,t.state,null)}function Ng(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},kx(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Dr(o):(o=Zt(t)?bo:It.current,s.context=Wi(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Sg(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ef.enqueueReplaceState(s,s.state,null),Ed(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yi(e,t){try{var r="",n=t;do r+=Z$(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function kp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Eg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EL=typeof WeakMap=="function"?WeakMap:Map;function LE(e,t,r){r=Dn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ad||(Ad=!0,$g=n),Eg(e,t)},r}function FE(e,t,r){r=Dn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Eg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Eg(e,t),typeof n!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function jw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new EL;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=BL.bind(null,e,t,r),t.then(e,e))}function _w(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sw(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dn(-1,1),t.tag=2,bs(r,t,1))),r.lanes|=1),e)}var CL=Jn.ReactCurrentOwner,Xt=!1;function Lt(e,t,r,n){t.child=e===null?pE(t,null,r,n):Gi(t,e.child,r,n)}function Nw(e,t,r,n,s){r=r.render;var o=t.ref;return Ri(t,s),n=Dx(e,t,r,n,o,s),r=$x(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vn(e,t,s)):(Xe&&r&&_x(t),t.flags|=1,Lt(e,t,n,s),t.child)}function Ew(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Hx(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,BE(e,t,o,n,s)):(e=nd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ml,r(a,n)&&e.ref===t.ref)return Vn(e,t,s)}return t.flags|=1,e=_s(o,n),e.ref=t.ref,e.return=t,t.child=e}function BE(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(Ml(o,n)&&e.ref===t.ref)if(Xt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(Xt=!0);else return t.lanes=e.lanes,Vn(e,t,s)}return Cg(e,t,r,n,s)}function zE(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ji,or),or|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(ji,or),or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ze(ji,or),or|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ze(ji,or),or|=n;return Lt(e,t,s,r),t.child}function UE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cg(e,t,r,n,s){var o=Zt(r)?bo:It.current;return o=Wi(t,o),Ri(t,s),r=Dx(e,t,r,n,o,s),n=$x(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vn(e,t,s)):(Xe&&n&&_x(t),t.flags|=1,Lt(e,t,r,s),t.child)}function Cw(e,t,r,n,s){if(Zt(r)){var o=!0;wd(t)}else o=!1;if(Ri(t,s),t.stateNode===null)ed(e,t),ME(t,r,n),Ng(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Dr(u):(u=Zt(r)?bo:It.current,u=Wi(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ww(t,a,n,u),as=!1;var h=t.memoizedState;a.state=h,Ed(t,n,a,s),c=t.memoizedState,l!==n||h!==c||Qt.current||as?(typeof f=="function"&&(Sg(t,r,f,n),c=t.memoizedState),(l=as||bw(t,r,l,n,h,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,gE(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wr(t.type,l),a.props=u,d=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Dr(c):(c=Zt(r)?bo:It.current,c=Wi(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||h!==c)&&ww(t,a,n,c),as=!1,h=t.memoizedState,a.state=h,Ed(t,n,a,s);var g=t.memoizedState;l!==d||h!==g||Qt.current||as?(typeof m=="function"&&(Sg(t,r,m,n),g=t.memoizedState),(u=as||bw(t,r,u,n,h,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Pg(e,t,r,n,o,s)}function Pg(e,t,r,n,s,o){UE(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&fw(t,r,!1),Vn(e,t,o);n=t.stateNode,CL.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Gi(t,e.child,null,o),t.child=Gi(t,null,l,o)):Lt(e,t,l,o),t.memoizedState=n.state,s&&fw(t,r,!0),t.child}function VE(e){var t=e.stateNode;t.pendingContext?dw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dw(e,t.context,!1),Ax(e,t.containerInfo)}function Pw(e,t,r,n,s){return Hi(),Nx(s),t.flags|=256,Lt(e,t,r,n),t.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function kg(e){return{baseLanes:e,cachePool:null,transitions:null}}function qE(e,t,r){var n=t.pendingProps,s=et.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(et,s&1),e===null)return jg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Tf(a,n,0,null),e=mo(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=kg(r),t.memoizedState=Tg,e):Fx(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return PL(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_s(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=_s(l,o):(o=mo(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?kg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Tg,n}return o=e.child,e=o.sibling,n=_s(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fx(e,t){return t=Tf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fu(e,t,r,n){return n!==null&&Nx(n),Gi(t,e.child,null,r),e=Fx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function PL(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=kp(Error(te(422))),fu(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Tf({mode:"visible",children:n.children},s,0,null),o=mo(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Gi(t,e.child,null,a),t.child.memoizedState=kg(a),t.memoizedState=Tg,o);if(!(t.mode&1))return fu(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(te(419)),n=kp(o,n,void 0),fu(e,t,a,n)}if(l=(a&e.childLanes)!==0,Xt||l){if(n=xt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Un(e,s),Qr(n,e,s,-1))}return Wx(),n=kp(Error(te(421))),fu(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=zL.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,cr=ys(s.nextSibling),dr=t,Xe=!0,Kr=null,e!==null&&(Cr[Pr++]=Rn,Cr[Pr++]=In,Cr[Pr++]=wo,Rn=e.id,In=e.overflow,wo=t),t=Fx(t,n.children),t.flags|=4096,t)}function Tw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),_g(e.return,t,r)}function Ap(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function WE(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Lt(e,t,n.children,r),n=et.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tw(e,r,t);else if(e.tag===19)Tw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ze(et,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Cd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ap(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ap(t,!0,r,null,o);break;case"together":Ap(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ed(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_o|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,r=_s(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_s(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function TL(e,t,r){switch(t.tag){case 3:VE(t),Hi();break;case 5:vE(t);break;case 1:Zt(t.type)&&wd(t);break;case 4:Ax(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ze(Sd,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ze(et,et.current&1),t.flags|=128,null):r&t.child.childLanes?qE(e,t,r):(ze(et,et.current&1),e=Vn(e,t,r),e!==null?e.sibling:null);ze(et,et.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return WE(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(et,et.current),n)break;return null;case 22:case 23:return t.lanes=0,zE(e,t,r)}return Vn(e,t,r)}var HE,Ag,GE,KE;HE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ag=function(){};GE=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,lo(xn.current);var o=null;switch(r){case"input":s=Zm(e,s),n=Zm(e,n),o=[];break;case"select":s=nt({},s,{value:void 0}),n=nt({},n,{value:void 0}),o=[];break;case"textarea":s=rg(e,s),n=rg(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yd)}sg(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ge("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};KE=function(e,t,r,n){r!==n&&(t.flags|=4)};function Fa(e,t){if(!Xe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function kL(e,t,r){var n=t.pendingProps;switch(Sx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Zt(t.type)&&bd(),Pt(t),null;case 3:return n=t.stateNode,Ki(),Ke(Qt),Ke(It),Ix(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(uu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kr!==null&&(Fg(Kr),Kr=null))),Ag(e,t),Pt(t),null;case 5:Rx(t);var s=lo(Ul.current);if(r=t.type,e!==null&&t.stateNode!=null)GE(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(te(166));return Pt(t),null}if(e=lo(xn.current),uu(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[fn]=t,n[Bl]=o,e=(t.mode&1)!==0,r){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(s=0;s<rl.length;s++)Ge(rl[s],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":Lb(n,o),Ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ge("invalid",n);break;case"textarea":Bb(n,o),Ge("invalid",n)}sg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&cu(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&cu(n.textContent,l,e),s=["children",""+l]):kl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",n)}switch(r){case"input":tu(n),Fb(n,o,!0);break;case"textarea":tu(n),zb(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=yd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[fn]=t,e[Bl]=n,HE(e,t,!1,!1),t.stateNode=e;e:{switch(a=og(r,n),r){case"dialog":Ge("cancel",e),Ge("close",e),s=n;break;case"iframe":case"object":case"embed":Ge("load",e),s=n;break;case"video":case"audio":for(s=0;s<rl.length;s++)Ge(rl[s],e);s=n;break;case"source":Ge("error",e),s=n;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),s=n;break;case"details":Ge("toggle",e),s=n;break;case"input":Lb(e,n),s=Zm(e,n),Ge("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=nt({},n,{value:void 0}),Ge("invalid",e);break;case"textarea":Bb(e,n),s=rg(e,n),Ge("invalid",e);break;default:s=n}sg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?NN(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_N(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Al(e,c):typeof c=="number"&&Al(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ge("scroll",e):c!=null&&cx(e,o,c,a))}switch(r){case"input":tu(e),Fb(e,n,!1);break;case"textarea":tu(e),zb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ks(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Pi(e,!!n.multiple,o,!1):n.defaultValue!=null&&Pi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pt(t),null;case 6:if(e&&t.stateNode!=null)KE(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(te(166));if(r=lo(Ul.current),lo(xn.current),uu(t)){if(n=t.stateNode,r=t.memoizedProps,n[fn]=t,(o=n.nodeValue!==r)&&(e=dr,e!==null))switch(e.tag){case 3:cu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cu(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fn]=t,t.stateNode=n}return Pt(t),null;case 13:if(Ke(et),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&cr!==null&&t.mode&1&&!(t.flags&128))fE(),Hi(),t.flags|=98560,o=!1;else if(o=uu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(te(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[fn]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pt(t),o=!1}else Kr!==null&&(Fg(Kr),Kr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?pt===0&&(pt=3):Wx())),t.updateQueue!==null&&(t.flags|=4),Pt(t),null);case 4:return Ki(),Ag(e,t),e===null&&Ll(t.stateNode.containerInfo),Pt(t),null;case 10:return Px(t.type._context),Pt(t),null;case 17:return Zt(t.type)&&bd(),Pt(t),null;case 19:if(Ke(et),o=t.memoizedState,o===null)return Pt(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Fa(o,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cd(e),a!==null){for(t.flags|=128,Fa(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ze(et,et.current&1|2),t.child}e=e.sibling}o.tail!==null&&it()>Ji&&(t.flags|=128,n=!0,Fa(o,!1),t.lanes=4194304)}else{if(!n)if(e=Cd(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Pt(t),null}else 2*it()-o.renderingStartTime>Ji&&r!==1073741824&&(t.flags|=128,n=!0,Fa(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=it(),t.sibling=null,r=et.current,ze(et,n?r&1|2:r&1),t):(Pt(t),null);case 22:case 23:return qx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?or&1073741824&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function AL(e,t){switch(Sx(t),t.tag){case 1:return Zt(t.type)&&bd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ki(),Ke(Qt),Ke(It),Ix(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rx(t),null;case 13:if(Ke(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(et),null;case 4:return Ki(),null;case 10:return Px(t.type._context),null;case 22:case 23:return qx(),null;case 24:return null;default:return null}}var hu=!1,At=!1,RL=typeof WeakSet=="function"?WeakSet:Set,de=null;function wi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){st(e,t,n)}else r.current=null}function Rg(e,t,r){try{r()}catch(n){st(e,t,n)}}var kw=!1;function IL(e,t){if(mg=gd,e=ZN(),jx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===r&&++u===s&&(l=a),h===o&&++f===n&&(c=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gg={focusedElem:e,selectionRange:r},gd=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:Wr(t.type,v),x);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(j){st(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return g=kw,kw=!1,g}function gl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Rg(t,r,o)}s=s.next}while(s!==n)}}function Cf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ig(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function YE(e){var t=e.alternate;t!==null&&(e.alternate=null,YE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[Bl],delete t[yg],delete t[mL],delete t[gL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JE(e){return e.tag===5||e.tag===3||e.tag===4}function Aw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Og(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yd));else if(n!==4&&(e=e.child,e!==null))for(Og(e,t,r),e=e.sibling;e!==null;)Og(e,t,r),e=e.sibling}function Dg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Dg(e,t,r),e=e.sibling;e!==null;)Dg(e,t,r),e=e.sibling}var jt=null,Gr=!1;function es(e,t,r){for(r=r.child;r!==null;)XE(e,t,r),r=r.sibling}function XE(e,t,r){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(yf,r)}catch{}switch(r.tag){case 5:At||wi(r,t);case 6:var n=jt,s=Gr;jt=null,es(e,t,r),jt=n,Gr=s,jt!==null&&(Gr?(e=jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jt.removeChild(r.stateNode));break;case 18:jt!==null&&(Gr?(e=jt,r=r.stateNode,e.nodeType===8?Sp(e.parentNode,r):e.nodeType===1&&Sp(e,r),Dl(e)):Sp(jt,r.stateNode));break;case 4:n=jt,s=Gr,jt=r.stateNode.containerInfo,Gr=!0,es(e,t,r),jt=n,Gr=s;break;case 0:case 11:case 14:case 15:if(!At&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Rg(r,t,a),s=s.next}while(s!==n)}es(e,t,r);break;case 1:if(!At&&(wi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){st(r,t,l)}es(e,t,r);break;case 21:es(e,t,r);break;case 22:r.mode&1?(At=(n=At)||r.memoizedState!==null,es(e,t,r),At=n):es(e,t,r);break;default:es(e,t,r)}}function Rw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new RL),t.forEach(function(n){var s=UL.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function zr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Gr=!1;break e;case 3:jt=l.stateNode.containerInfo,Gr=!0;break e;case 4:jt=l.stateNode.containerInfo,Gr=!0;break e}l=l.return}if(jt===null)throw Error(te(160));XE(o,a,s),jt=null,Gr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){st(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QE(t,e),t=t.sibling}function QE(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zr(t,e),un(e),n&4){try{gl(3,e,e.return),Cf(3,e)}catch(v){st(e,e.return,v)}try{gl(5,e,e.return)}catch(v){st(e,e.return,v)}}break;case 1:zr(t,e),un(e),n&512&&r!==null&&wi(r,r.return);break;case 5:if(zr(t,e),un(e),n&512&&r!==null&&wi(r,r.return),e.flags&32){var s=e.stateNode;try{Al(s,"")}catch(v){st(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&bN(s,o),og(l,a);var u=og(l,o);for(a=0;a<c.length;a+=2){var f=c[a],d=c[a+1];f==="style"?NN(s,d):f==="dangerouslySetInnerHTML"?_N(s,d):f==="children"?Al(s,d):cx(s,f,d,u)}switch(l){case"input":eg(s,o);break;case"textarea":wN(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Pi(s,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?Pi(s,!!o.multiple,o.defaultValue,!0):Pi(s,!!o.multiple,o.multiple?[]:"",!1))}s[Bl]=o}catch(v){st(e,e.return,v)}}break;case 6:if(zr(t,e),un(e),n&4){if(e.stateNode===null)throw Error(te(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){st(e,e.return,v)}}break;case 3:if(zr(t,e),un(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(t.containerInfo)}catch(v){st(e,e.return,v)}break;case 4:zr(t,e),un(e);break;case 13:zr(t,e),un(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ux=it())),n&4&&Rw(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(At=(u=At)||f,zr(t,e),At=u):zr(t,e),un(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(de=e,f=e.child;f!==null;){for(d=de=f;de!==null;){switch(h=de,m=h.child,h.tag){case 0:case 11:case 14:case 15:gl(4,h,h.return);break;case 1:wi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){st(n,r,v)}}break;case 5:wi(h,h.return);break;case 22:if(h.memoizedState!==null){Ow(d);continue}}m!==null?(m.return=h,de=m):Ow(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=SN("display",a))}catch(v){st(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){st(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zr(t,e),un(e),n&4&&Rw(e);break;case 21:break;default:zr(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(JE(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Al(s,""),n.flags&=-33);var o=Aw(e);Dg(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Aw(e);Og(e,l,a);break;default:throw Error(te(161))}}catch(c){st(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OL(e,t,r){de=e,ZE(e)}function ZE(e,t,r){for(var n=(e.mode&1)!==0;de!==null;){var s=de,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||hu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||At;l=hu;var u=At;if(hu=a,(At=c)&&!u)for(de=s;de!==null;)a=de,c=a.child,a.tag===22&&a.memoizedState!==null?Dw(s):c!==null?(c.return=a,de=c):Dw(s);for(;o!==null;)de=o,ZE(o),o=o.sibling;de=s,hu=l,At=u}Iw(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,de=o):Iw(e)}}function Iw(e){for(;de!==null;){var t=de;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:At||Cf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!At)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&vw(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vw(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Dl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}At||t.flags&512&&Ig(t)}catch(h){st(t,t.return,h)}}if(t===e){de=null;break}if(r=t.sibling,r!==null){r.return=t.return,de=r;break}de=t.return}}function Ow(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var r=t.sibling;if(r!==null){r.return=t.return,de=r;break}de=t.return}}function Dw(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Cf(4,t)}catch(c){st(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){st(t,s,c)}}var o=t.return;try{Ig(t)}catch(c){st(t,o,c)}break;case 5:var a=t.return;try{Ig(t)}catch(c){st(t,a,c)}}}catch(c){st(t,t.return,c)}if(t===e){de=null;break}var l=t.sibling;if(l!==null){l.return=t.return,de=l;break}de=t.return}}var DL=Math.ceil,kd=Jn.ReactCurrentDispatcher,Bx=Jn.ReactCurrentOwner,Ar=Jn.ReactCurrentBatchConfig,Oe=0,xt=null,ct=null,St=0,or=0,ji=Fs(0),pt=0,Hl=null,_o=0,Pf=0,zx=0,vl=null,Kt=null,Ux=0,Ji=1/0,Cn=null,Ad=!1,$g=null,ws=null,pu=!1,hs=null,Rd=0,xl=0,Mg=null,td=-1,rd=0;function Ut(){return Oe&6?it():td!==-1?td:td=it()}function js(e){return e.mode&1?Oe&2&&St!==0?St&-St:xL.transition!==null?(rd===0&&(rd=MN()),rd):(e=$e,e!==0||(e=window.event,e=e===void 0?16:qN(e.type)),e):1}function Qr(e,t,r,n){if(50<xl)throw xl=0,Mg=null,Error(te(185));bc(e,r,n),(!(Oe&2)||e!==xt)&&(e===xt&&(!(Oe&2)&&(Pf|=r),pt===4&&us(e,St)),er(e,n),r===1&&Oe===0&&!(t.mode&1)&&(Ji=it()+500,Sf&&Bs()))}function er(e,t){var r=e.callbackNode;xM(e,t);var n=md(e,e===xt?St:0);if(n===0)r!==null&&qb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&qb(r),t===1)e.tag===0?vL($w.bind(null,e)):cE($w.bind(null,e)),hL(function(){!(Oe&6)&&Bs()}),r=null;else{switch(LN(n)){case 1:r=px;break;case 4:r=DN;break;case 16:r=pd;break;case 536870912:r=$N;break;default:r=pd}r=aC(r,eC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function eC(e,t){if(td=-1,rd=0,Oe&6)throw Error(te(327));var r=e.callbackNode;if(Ii()&&e.callbackNode!==r)return null;var n=md(e,e===xt?St:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Id(e,n);else{t=n;var s=Oe;Oe|=2;var o=rC();(xt!==e||St!==t)&&(Cn=null,Ji=it()+500,po(e,t));do try{LL();break}catch(l){tC(e,l)}while(1);Cx(),kd.current=o,Oe=s,ct!==null?t=0:(xt=null,St=0,t=pt)}if(t!==0){if(t===2&&(s=ug(e),s!==0&&(n=s,t=Lg(e,s))),t===1)throw r=Hl,po(e,0),us(e,n),er(e,it()),r;if(t===6)us(e,n);else{if(s=e.current.alternate,!(n&30)&&!$L(s)&&(t=Id(e,n),t===2&&(o=ug(e),o!==0&&(n=o,t=Lg(e,o))),t===1))throw r=Hl,po(e,0),us(e,n),er(e,it()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(te(345));case 2:Js(e,Kt,Cn);break;case 3:if(us(e,n),(n&130023424)===n&&(t=Ux+500-it(),10<t)){if(md(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=xg(Js.bind(null,e,Kt,Cn),t);break}Js(e,Kt,Cn);break;case 4:if(us(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Xr(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=it()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*DL(n/1960))-n,10<n){e.timeoutHandle=xg(Js.bind(null,e,Kt,Cn),n);break}Js(e,Kt,Cn);break;case 5:Js(e,Kt,Cn);break;default:throw Error(te(329))}}}return er(e,it()),e.callbackNode===r?eC.bind(null,e):null}function Lg(e,t){var r=vl;return e.current.memoizedState.isDehydrated&&(po(e,t).flags|=256),e=Id(e,t),e!==2&&(t=Kt,Kt=r,t!==null&&Fg(t)),e}function Fg(e){Kt===null?Kt=e:Kt.push.apply(Kt,e)}function $L(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Zr(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function us(e,t){for(t&=~zx,t&=~Pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xr(t),n=1<<r;e[r]=-1,t&=~n}}function $w(e){if(Oe&6)throw Error(te(327));Ii();var t=md(e,0);if(!(t&1))return er(e,it()),null;var r=Id(e,t);if(e.tag!==0&&r===2){var n=ug(e);n!==0&&(t=n,r=Lg(e,n))}if(r===1)throw r=Hl,po(e,0),us(e,t),er(e,it()),r;if(r===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Js(e,Kt,Cn),er(e,it()),null}function Vx(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(Ji=it()+500,Sf&&Bs())}}function So(e){hs!==null&&hs.tag===0&&!(Oe&6)&&Ii();var t=Oe;Oe|=1;var r=Ar.transition,n=$e;try{if(Ar.transition=null,$e=1,e)return e()}finally{$e=n,Ar.transition=r,Oe=t,!(Oe&6)&&Bs()}}function qx(){or=ji.current,Ke(ji)}function po(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fL(r)),ct!==null)for(r=ct.return;r!==null;){var n=r;switch(Sx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bd();break;case 3:Ki(),Ke(Qt),Ke(It),Ix();break;case 5:Rx(n);break;case 4:Ki();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:Px(n.type._context);break;case 22:case 23:qx()}r=r.return}if(xt=e,ct=e=_s(e.current,null),St=or=t,pt=0,Hl=null,zx=Pf=_o=0,Kt=vl=null,ao!==null){for(t=0;t<ao.length;t++)if(r=ao[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}ao=null}return e}function tC(e,t){do{var r=ct;try{if(Cx(),Qu.current=Td,Pd){for(var n=rt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Pd=!1}if(jo=0,gt=ht=rt=null,ml=!1,Vl=0,Bx.current=null,r===null||r.return===null){pt=1,Hl=t,ct=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=_w(a);if(m!==null){m.flags&=-257,Sw(m,a,l,o,t),m.mode&1&&jw(o,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){jw(o,u,t),Wx();break e}c=Error(te(426))}}else if(Xe&&l.mode&1){var x=_w(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Sw(x,a,l,o,t),Nx(Yi(c,l));break e}}o=c=Yi(c,l),pt!==4&&(pt=2),vl===null?vl=[o]:vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=LE(o,c,t);gw(o,b);break e;case 1:l=c;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ws===null||!ws.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=FE(o,l,t);gw(o,j);break e}}o=o.return}while(o!==null)}sC(r)}catch(_){t=_,ct===r&&r!==null&&(ct=r=r.return);continue}break}while(1)}function rC(){var e=kd.current;return kd.current=Td,e===null?Td:e}function Wx(){(pt===0||pt===3||pt===2)&&(pt=4),xt===null||!(_o&268435455)&&!(Pf&268435455)||us(xt,St)}function Id(e,t){var r=Oe;Oe|=2;var n=rC();(xt!==e||St!==t)&&(Cn=null,po(e,t));do try{ML();break}catch(s){tC(e,s)}while(1);if(Cx(),Oe=r,kd.current=n,ct!==null)throw Error(te(261));return xt=null,St=0,pt}function ML(){for(;ct!==null;)nC(ct)}function LL(){for(;ct!==null&&!cM();)nC(ct)}function nC(e){var t=iC(e.alternate,e,or);e.memoizedProps=e.pendingProps,t===null?sC(e):ct=t,Bx.current=null}function sC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=AL(r,t),r!==null){r.flags&=32767,ct=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ct=null;return}}else if(r=kL(r,t,or),r!==null){ct=r;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);pt===0&&(pt=5)}function Js(e,t,r){var n=$e,s=Ar.transition;try{Ar.transition=null,$e=1,FL(e,t,r,n)}finally{Ar.transition=s,$e=n}return null}function FL(e,t,r,n){do Ii();while(hs!==null);if(Oe&6)throw Error(te(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(yM(e,o),e===xt&&(ct=xt=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pu||(pu=!0,aC(pd,function(){return Ii(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ar.transition,Ar.transition=null;var a=$e;$e=1;var l=Oe;Oe|=4,Bx.current=null,IL(e,r),QE(r,e),oL(gg),gd=!!mg,gg=mg=null,e.current=r,OL(r),uM(),Oe=l,$e=a,Ar.transition=o}else e.current=r;if(pu&&(pu=!1,hs=e,Rd=s),o=e.pendingLanes,o===0&&(ws=null),hM(r.stateNode),er(e,it()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ad)throw Ad=!1,e=$g,$g=null,e;return Rd&1&&e.tag!==0&&Ii(),o=e.pendingLanes,o&1?e===Mg?xl++:(xl=0,Mg=e):xl=0,Bs(),null}function Ii(){if(hs!==null){var e=LN(Rd),t=Ar.transition,r=$e;try{if(Ar.transition=null,$e=16>e?16:e,hs===null)var n=!1;else{if(e=hs,hs=null,Rd=0,Oe&6)throw Error(te(331));var s=Oe;for(Oe|=4,de=e.current;de!==null;){var o=de,a=o.child;if(de.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(de=u;de!==null;){var f=de;switch(f.tag){case 0:case 11:case 15:gl(8,f,o)}var d=f.child;if(d!==null)d.return=f,de=d;else for(;de!==null;){f=de;var h=f.sibling,m=f.return;if(YE(f),f===u){de=null;break}if(h!==null){h.return=m,de=h;break}de=m}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}de=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,de=a;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,de=b;break e}de=o.return}}var y=e.current;for(de=y;de!==null;){a=de;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,de=w;else e:for(a=y;de!==null;){if(l=de,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cf(9,l)}}catch(_){st(l,l.return,_)}if(l===a){de=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,de=j;break e}de=l.return}}if(Oe=s,Bs(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(yf,e)}catch{}n=!0}return n}finally{$e=r,Ar.transition=t}}return!1}function Mw(e,t,r){t=Yi(r,t),t=LE(e,t,1),e=bs(e,t,1),t=Ut(),e!==null&&(bc(e,1,t),er(e,t))}function st(e,t,r){if(e.tag===3)Mw(e,e,r);else for(;t!==null;){if(t.tag===3){Mw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ws===null||!ws.has(n))){e=Yi(r,e),e=FE(t,e,1),t=bs(t,e,1),e=Ut(),t!==null&&(bc(t,1,e),er(t,e));break}}t=t.return}}function BL(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ut(),e.pingedLanes|=e.suspendedLanes&r,xt===e&&(St&r)===r&&(pt===4||pt===3&&(St&130023424)===St&&500>it()-Ux?po(e,0):zx|=r),er(e,t)}function oC(e,t){t===0&&(e.mode&1?(t=su,su<<=1,!(su&130023424)&&(su=4194304)):t=1);var r=Ut();e=Un(e,t),e!==null&&(bc(e,t,r),er(e,r))}function zL(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oC(e,r)}function UL(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(t),oC(e,r)}var iC;iC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)Xt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xt=!1,TL(e,t,r);Xt=!!(e.flags&131072)}else Xt=!1,Xe&&t.flags&1048576&&uE(t,_d,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ed(e,t),e=t.pendingProps;var s=Wi(t,It.current);Ri(t,r),s=Dx(null,t,n,e,s,r);var o=$x();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(n)?(o=!0,wd(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kx(t),s.updater=Ef,t.stateNode=s,s._reactInternals=t,Ng(t,n,e,r),t=Pg(null,t,n,!0,o,r)):(t.tag=0,Xe&&o&&_x(t),Lt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ed(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=qL(n),e=Wr(n,e),s){case 0:t=Cg(null,t,n,e,r);break e;case 1:t=Cw(null,t,n,e,r);break e;case 11:t=Nw(null,t,n,e,r);break e;case 14:t=Ew(null,t,n,Wr(n.type,e),r);break e}throw Error(te(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),Cg(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),Cw(e,t,n,s,r);case 3:e:{if(VE(t),e===null)throw Error(te(387));n=t.pendingProps,o=t.memoizedState,s=o.element,gE(e,t),Ed(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Yi(Error(te(423)),t),t=Pw(e,t,n,r,s);break e}else if(n!==s){s=Yi(Error(te(424)),t),t=Pw(e,t,n,r,s);break e}else for(cr=ys(t.stateNode.containerInfo.firstChild),dr=t,Xe=!0,Kr=null,r=pE(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hi(),n===s){t=Vn(e,t,r);break e}Lt(e,t,n,r)}t=t.child}return t;case 5:return vE(t),e===null&&jg(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,vg(n,s)?a=null:o!==null&&vg(n,o)&&(t.flags|=32),UE(e,t),Lt(e,t,a,r),t.child;case 6:return e===null&&jg(t),null;case 13:return qE(e,t,r);case 4:return Ax(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Gi(t,null,n,r):Lt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),Nw(e,t,n,s,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ze(Sd,n._currentValue),n._currentValue=a,o!==null)if(Zr(o.value,a)){if(o.children===s.children&&!Qt.current){t=Vn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Dn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),_g(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(te(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),_g(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Lt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ri(t,r),s=Dr(s),n=n(s),t.flags|=1,Lt(e,t,n,r),t.child;case 14:return n=t.type,s=Wr(n,t.pendingProps),s=Wr(n.type,s),Ew(e,t,n,s,r);case 15:return BE(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),ed(e,t),t.tag=1,Zt(n)?(e=!0,wd(t)):e=!1,Ri(t,r),ME(t,n,s),Ng(t,n,s,r),Pg(null,t,n,!0,e,r);case 19:return WE(e,t,r);case 22:return zE(e,t,r)}throw Error(te(156,t.tag))};function aC(e,t){return ON(e,t)}function VL(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(e,t,r,n){return new VL(e,t,r,n)}function Hx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qL(e){if(typeof e=="function")return Hx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dx)return 11;if(e===fx)return 14}return 2}function _s(e,t){var r=e.alternate;return r===null?(r=Tr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nd(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")Hx(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case fi:return mo(r.children,s,o,t);case ux:a=8,s|=8;break;case Ym:return e=Tr(12,r,t,s|2),e.elementType=Ym,e.lanes=o,e;case Jm:return e=Tr(13,r,t,s),e.elementType=Jm,e.lanes=o,e;case Xm:return e=Tr(19,r,t,s),e.elementType=Xm,e.lanes=o,e;case vN:return Tf(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mN:a=10;break e;case gN:a=9;break e;case dx:a=11;break e;case fx:a=14;break e;case is:a=16,n=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Tr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function mo(e,t,r,n){return e=Tr(7,e,n,t),e.lanes=r,e}function Tf(e,t,r,n){return e=Tr(22,e,n,t),e.elementType=vN,e.lanes=r,e.stateNode={isHidden:!1},e}function Rp(e,t,r){return e=Tr(6,e,null,t),e.lanes=r,e}function Ip(e,t,r){return t=Tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WL(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gx(e,t,r,n,s,o,a,l,c){return e=new WL(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Tr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kx(o),e}function HL(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function lC(e){if(!e)return As;e=e._reactInternals;e:{if(Do(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var r=e.type;if(Zt(r))return lE(e,r,t)}return t}function cC(e,t,r,n,s,o,a,l,c){return e=Gx(r,n,!0,e,s,o,a,l,c),e.context=lC(null),r=e.current,n=Ut(),s=js(r),o=Dn(n,s),o.callback=t??null,bs(r,o,s),e.current.lanes=s,bc(e,s,n),er(e,n),e}function kf(e,t,r,n){var s=t.current,o=Ut(),a=js(s);return r=lC(r),t.context===null?t.context=r:t.pendingContext=r,t=Dn(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bs(s,t,a),e!==null&&(Qr(e,s,a,o),Xu(e,s,a)),a}function Od(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Kx(e,t){Lw(e,t),(e=e.alternate)&&Lw(e,t)}function GL(){return null}var uC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yx(e){this._internalRoot=e}Af.prototype.render=Yx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));kf(e,t,null,null)};Af.prototype.unmount=Yx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;So(function(){kf(null,e,null,null)}),t[zn]=null}};function Af(e){this._internalRoot=e}Af.prototype.unstable_scheduleHydration=function(e){if(e){var t=zN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cs.length&&t!==0&&t<cs[r].priority;r++);cs.splice(r,0,e),r===0&&VN(e)}};function Jx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function KL(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Od(a);o.call(u)}}var a=cC(t,n,e,0,null,!1,!1,"",Fw);return e._reactRootContainer=a,e[zn]=a.current,Ll(e.nodeType===8?e.parentNode:e),So(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Od(c);l.call(u)}}var c=Gx(e,0,!1,null,null,!1,!1,"",Fw);return e._reactRootContainer=c,e[zn]=c.current,Ll(e.nodeType===8?e.parentNode:e),So(function(){kf(t,c,r,n)}),c}function If(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Od(a);l.call(c)}}kf(t,a,e,s)}else a=KL(r,t,e,s,n);return Od(a)}FN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=tl(t.pendingLanes);r!==0&&(mx(t,r|1),er(t,it()),!(Oe&6)&&(Ji=it()+500,Bs()))}break;case 13:So(function(){var n=Un(e,1);if(n!==null){var s=Ut();Qr(n,e,1,s)}}),Kx(e,1)}};gx=function(e){if(e.tag===13){var t=Un(e,134217728);if(t!==null){var r=Ut();Qr(t,e,134217728,r)}Kx(e,134217728)}};BN=function(e){if(e.tag===13){var t=js(e),r=Un(e,t);if(r!==null){var n=Ut();Qr(r,e,t,n)}Kx(e,t)}};zN=function(){return $e};UN=function(e,t){var r=$e;try{return $e=e,t()}finally{$e=r}};ag=function(e,t,r){switch(t){case"input":if(eg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=_f(n);if(!s)throw Error(te(90));yN(n),eg(n,s)}}}break;case"textarea":wN(e,r);break;case"select":t=r.value,t!=null&&Pi(e,!!r.multiple,t,!1)}};PN=Vx;TN=So;var YL={usingClientEntryPoint:!1,Events:[jc,gi,_f,EN,CN,Vx]},Ba={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JL={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RN(e),e===null?null:e.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{yf=mu.inject(JL),vn=mu}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YL;xr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jx(t))throw Error(te(200));return HL(e,t,null,r)};xr.createRoot=function(e,t){if(!Jx(e))throw Error(te(299));var r=!1,n="",s=uC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gx(e,1,!1,null,null,r,!1,n,s),e[zn]=t.current,Ll(e.nodeType===8?e.parentNode:e),new Yx(t)};xr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=RN(t),e=e===null?null:e.stateNode,e};xr.flushSync=function(e){return So(e)};xr.hydrate=function(e,t,r){if(!Rf(t))throw Error(te(200));return If(null,e,t,!0,r)};xr.hydrateRoot=function(e,t,r){if(!Jx(e))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=uC;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=cC(t,null,e,1,r??null,s,!1,o,a),e[zn]=t.current,Ll(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Af(t)};xr.render=function(e,t,r){if(!Rf(t))throw Error(te(200));return If(null,e,t,!1,r)};xr.unmountComponentAtNode=function(e){if(!Rf(e))throw Error(te(40));return e._reactRootContainer?(So(function(){If(null,null,e,!1,function(){e._reactRootContainer=null,e[zn]=null})}),!0):!1};xr.unstable_batchedUpdates=Vx;xr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Rf(r))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return If(e,t,r,!1,n)};xr.version="18.3.1-next-f1338f8080-20240426";function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(e){console.error(e)}}dC(),dN.exports=xr;var br=dN.exports;const Of=Io(br);var Bw=br;Gm.createRoot=Bw.createRoot,Gm.hydrateRoot=Bw.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gl.apply(this,arguments)}var ps;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ps||(ps={}));const zw="popstate";function XL(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:a,hash:l}=n.location;return Bg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Dd(s)}return ZL(t,r,null,e)}function ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QL(){return Math.random().toString(36).substr(2,8)}function Uw(e,t){return{usr:e.state,key:e.key,idx:t}}function Bg(e,t,r,n){return r===void 0&&(r=null),Gl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?da(t):t,{state:r,key:t&&t.key||n||QL()})}function Dd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function da(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ZL(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=ps.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(Gl({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=ps.Pop;let x=f(),b=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:b})}function h(x,b){l=ps.Push;let y=Bg(v.location,x,b);r&&r(y,x),u=f()+1;let w=Uw(y,u),j=v.createHref(y);try{a.pushState(w,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}o&&c&&c({action:l,location:v.location,delta:1})}function m(x,b){l=ps.Replace;let y=Bg(v.location,x,b);r&&r(y,x),u=f();let w=Uw(y,u),j=v.createHref(y);a.replaceState(w,"",j),o&&c&&c({action:l,location:v.location,delta:0})}function g(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof x=="string"?x:Dd(x);return ut(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let v={get action(){return l},get location(){return e(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,d),c=x,()=>{s.removeEventListener(zw,d),c=null}},createHref(x){return t(s,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(x){return a.go(x)}};return v}var Vw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vw||(Vw={}));function e4(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?da(t):t,s=Qx(n.pathname||"/",r);if(s==null)return null;let o=fC(e);t4(o);let a=null;for(let l=0;a==null&&l<o.length;++l)a=u4(o[l],h4(s));return a}function fC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ss([n,c.relativePath]),f=r.concat(c);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fC(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:l4(u,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of hC(o.path))s(o,a,c)}),t}function hC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=hC(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function t4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:c4(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const r4=/^:\w+$/,n4=3,s4=2,o4=1,i4=10,a4=-2,qw=e=>e==="*";function l4(e,t){let r=e.split("/"),n=r.length;return r.some(qw)&&(n+=a4),t&&(n+=s4),r.filter(s=>!qw(s)).reduce((s,o)=>s+(r4.test(o)?n4:o===""?o4:i4),n)}function c4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function u4(e,t){let{routesMeta:r}=e,n={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",f=d4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u);if(!f)return null;Object.assign(n,f.params);let d=l.route;o.push({params:n,pathname:Ss([s,f.pathname]),pathnameBase:v4(Ss([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Ss([s,f.pathnameBase]))}return o}function d4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=f4(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{if(f==="*"){let h=l[d]||"";a=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return u[f]=p4(l[d]||"",f),u},{}),pathname:o,pathnameBase:a,pattern:e}}function f4(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Xx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,l)=>(n.push(l),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function h4(e){try{return decodeURI(e)}catch(t){return Xx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function p4(e,t){try{return decodeURIComponent(e)}catch(r){return Xx(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Qx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function m4(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?da(e):e;return{pathname:r?r.startsWith("/")?r:g4(r,t):t,search:x4(n),hash:y4(s)}}function g4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Op(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pC(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function mC(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=da(e):(s=Gl({},e),ut(!s.pathname||!s.pathname.includes("?"),Op("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Op("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Op("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(n||a==null)l=r;else{let d=t.length-1;if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=m4(s,l),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Ss=e=>e.join("/").replace(/\/\/+/g,"/"),v4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,y4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function b4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gC=["post","put","patch","delete"];new Set(gC);const w4=["get",...gC];new Set(w4);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $d(){return $d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$d.apply(this,arguments)}const Zx=p.createContext(null),vC=p.createContext(null),$o=p.createContext(null),Df=p.createContext(null),Xn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),xC=p.createContext(null);function j4(e,t){let{relative:r}=t===void 0?{}:t;Sc()||ut(!1);let{basename:n,navigator:s}=p.useContext($o),{hash:o,pathname:a,search:l}=ey(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:Ss([n,a])),s.createHref({pathname:c,search:l,hash:o})}function Sc(){return p.useContext(Df)!=null}function nr(){return Sc()||ut(!1),p.useContext(Df).location}function yC(e){p.useContext($o).static||p.useLayoutEffect(e)}function Te(){let{isDataRoute:e}=p.useContext(Xn);return e?M4():_4()}function _4(){Sc()||ut(!1);let e=p.useContext(Zx),{basename:t,navigator:r}=p.useContext($o),{matches:n}=p.useContext(Xn),{pathname:s}=nr(),o=JSON.stringify(pC(n).map(c=>c.pathnameBase)),a=p.useRef(!1);return yC(()=>{a.current=!0}),p.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=mC(c,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ss([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,o,s,e])}const S4=p.createContext(null);function N4(e){let t=p.useContext(Xn).outlet;return t&&p.createElement(S4.Provider,{value:e},t)}function fa(){let{matches:e}=p.useContext(Xn),t=e[e.length-1];return t?t.params:{}}function ey(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=p.useContext(Xn),{pathname:s}=nr(),o=JSON.stringify(pC(n).map(a=>a.pathnameBase));return p.useMemo(()=>mC(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function E4(e,t){return C4(e,t)}function C4(e,t,r){Sc()||ut(!1);let{navigator:n}=p.useContext($o),{matches:s}=p.useContext(Xn),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=nr(),u;if(t){var f;let v=typeof t=="string"?da(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||ut(!1),u=v}else u=c;let d=u.pathname||"/",h=l==="/"?d:d.slice(l.length)||"/",m=e4(e,{pathname:h}),g=R4(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Ss([l,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Ss([l,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r);return t&&g?p.createElement(Df.Provider,{value:{location:$d({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ps.Pop}},g):g}function P4(){let e=$4(),t=b4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,o)}const T4=p.createElement(P4,null);class k4 extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?p.createElement(Xn.Provider,{value:this.props.routeContext},p.createElement(xC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A4(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(Zx);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Xn.Provider,{value:t},n)}function R4(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let l=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));l>=0||ut(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,c,u)=>{let f=c.route.id?a==null?void 0:a[c.route.id]:null,d=null;r&&(d=c.route.errorElement||T4);let h=t.concat(o.slice(0,u+1)),m=()=>{let g;return f?g=d:c.route.Component?g=p.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=l,p.createElement(A4,{match:c,routeContext:{outlet:l,matches:h,isDataRoute:r!=null},children:g})};return r&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?p.createElement(k4,{location:r.location,revalidation:r.revalidation,component:d,error:f,children:m(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):m()},null)}var bC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bC||{}),Md=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Md||{});function I4(e){let t=p.useContext(Zx);return t||ut(!1),t}function O4(e){let t=p.useContext(vC);return t||ut(!1),t}function D4(e){let t=p.useContext(Xn);return t||ut(!1),t}function wC(e){let t=D4(),r=t.matches[t.matches.length-1];return r.route.id||ut(!1),r.route.id}function $4(){var e;let t=p.useContext(xC),r=O4(Md.UseRouteError),n=wC(Md.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function M4(){let{router:e}=I4(bC.UseNavigateStable),t=wC(Md.UseNavigateStable),r=p.useRef(!1);return yC(()=>{r.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,$d({fromRouteId:t},o)))},[e,t])}function $f(e){return N4(e.context)}function me(e){ut(!1)}function L4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=ps.Pop,navigator:o,static:a=!1}=e;Sc()&&ut(!1);let l=t.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);typeof n=="string"&&(n=da(n));let{pathname:u="/",search:f="",hash:d="",state:h=null,key:m="default"}=n,g=p.useMemo(()=>{let v=Qx(u,l);return v==null?null:{location:{pathname:v,search:f,hash:d,state:h,key:m},navigationType:s}},[l,u,f,d,h,m,s]);return g==null?null:p.createElement($o.Provider,{value:c},p.createElement(Df.Provider,{children:r,value:g}))}function F4(e){let{children:t,location:r}=e;return E4(zg(t),r)}new Promise(()=>{});function zg(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let o=[...t,s];if(n.type===p.Fragment){r.push.apply(r,zg(n.props.children,o));return}n.type!==me&&ut(!1),!n.props.index||!n.props.children||ut(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=zg(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(this,arguments)}function jC(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function B4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function z4(e,t){return e.button===0&&(!t||t==="_self")&&!B4(e)}function Ug(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function U4(e,t){let r=Ug(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}const V4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],q4=["aria-current","caseSensitive","className","end","style","to","children"],W4="startTransition",Ww=yc[W4];function Hw(e){let{basename:t,children:r,future:n,window:s}=e,o=p.useRef();o.current==null&&(o.current=XL({window:s,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},f=p.useCallback(d=>{u&&Ww?Ww(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>a.listen(f),[a,f]),p.createElement(L4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a})}const H4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",G4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,go=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:f}=t,d=jC(t,V4),{basename:h}=p.useContext($o),m,g=!1;if(typeof u=="string"&&G4.test(u)&&(m=u,H4))try{let y=new URL(window.location.href),w=u.startsWith("//")?new URL(y.protocol+u):new URL(u),j=Qx(w.pathname,h);w.origin===y.origin&&j!=null?u=j+w.search+w.hash:g=!0}catch{}let v=j4(u,{relative:s}),x=K4(u,{replace:a,state:l,target:c,preventScrollReset:f,relative:s});function b(y){n&&n(y),y.defaultPrevented||x(y)}return p.createElement("a",Ld({},d,{href:m||v,onClick:g||o?n:b,ref:r,target:c}))}),Fd=p.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:a=!1,style:l,to:c,children:u}=t,f=jC(t,q4),d=ey(c,{relative:f.relative}),h=nr(),m=p.useContext(vC),{navigator:g}=p.useContext($o),v=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(x=x.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase());let y=x===v||!a&&x.startsWith(v)&&x.charAt(v.length)==="/",w=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),j=y?n:void 0,_;typeof o=="function"?_=o({isActive:y,isPending:w}):_=[o,y?"active":null,w?"pending":null].filter(Boolean).join(" ");let S=typeof l=="function"?l({isActive:y,isPending:w}):l;return p.createElement(go,Ld({},f,{"aria-current":j,className:_,ref:r,style:S,to:c}),typeof u=="function"?u({isActive:y,isPending:w}):u)});var Gw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Gw||(Gw={}));var Kw;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Kw||(Kw={}));function K4(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a}=t===void 0?{}:t,l=Te(),c=nr(),u=ey(e,{relative:a});return p.useCallback(f=>{if(z4(f,r)){f.preventDefault();let d=n!==void 0?n:Dd(c)===Dd(u);l(e,{replace:d,state:s,preventScrollReset:o,relative:a})}},[c,l,u,n,s,r,e,o,a])}function Mf(e){let t=p.useRef(Ug(e)),r=p.useRef(!1),n=nr(),s=p.useMemo(()=>U4(n.search,r.current?null:t.current),[n.search]),o=Te(),a=p.useCallback((l,c)=>{const u=Ug(typeof l=="function"?l(s):l);r.current=!0,o("?"+u,c)},[o,s]);return[s,a]}var _C={exports:{}},Y4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",J4=Y4,X4=J4;function SC(){}function NC(){}NC.resetWarningCache=SC;var Q4=function(){function e(n,s,o,a,l,c){if(c!==X4){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:NC,resetWarningCache:SC};return r.PropTypes=r,r};_C.exports=Q4();var Z4=_C.exports;const Ye=Io(Z4);function e5(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var EC=p,t5=e5(EC);function Yw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r5(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var n5=!!(typeof window<"u"&&window.document&&window.document.createElement);function s5(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(s){return s.displayName||s.name||"Component"}return function(o){if(typeof o!="function")throw new Error("Expected WrappedComponent to be a React component.");var a=[],l;function c(){l=e(a.map(function(f){return f.props})),u.canUseDOM?t(l):r&&(l=r(l))}var u=function(f){r5(d,f);function d(){return f.apply(this,arguments)||this}d.peek=function(){return l},d.rewind=function(){if(d.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,a=[],g};var h=d.prototype;return h.UNSAFE_componentWillMount=function(){a.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var g=a.indexOf(this);a.splice(g,1),c()},h.render=function(){return t5.createElement(o,this.props)},d}(EC.PureComponent);return Yw(u,"displayName","SideEffect("+n(o)+")"),Yw(u,"canUseDOM",n5),u}}var o5=s5;const i5=Io(o5);var a5=typeof Element<"u",l5=typeof Map=="function",c5=typeof Set=="function",u5=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function sd(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!sd(e[n],t[n]))return!1;return!0}var o;if(l5&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!sd(n.value[1],t.get(n.value[0])))return!1;return!0}if(c5&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(u5&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;if(a5&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&e.$$typeof)&&!sd(e[s[n]],t[s[n]]))return!1;return!0}return e!==e&&t!==t}var d5=function(t,r){try{return sd(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const f5=Io(d5);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Jw=Object.getOwnPropertySymbols,h5=Object.prototype.hasOwnProperty,p5=Object.prototype.propertyIsEnumerable;function m5(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function g5(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(o){s[o]=o}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var v5=g5()?Object.assign:function(e,t){for(var r,n=m5(e),s,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var a in r)h5.call(r,a)&&(n[a]=r[a]);if(Jw){s=Jw(r);for(var l=0;l<s.length;l++)p5.call(r,s[l])&&(n[s[l]]=r[s[l]])}}return n};const x5=Io(v5);var vo={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ne={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ne).map(function(e){return Ne[e]});var Je={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Bd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Kl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},y5=Object.keys(Bd).reduce(function(e,t){return e[Bd[t]]=t,e},{}),b5=[Ne.NOSCRIPT,Ne.SCRIPT,Ne.STYLE],Yr="data-react-helmet",w5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j5=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_5=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S5=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Xw=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},N5=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Vg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},E5=function(t){var r=Oi(t,Ne.TITLE),n=Oi(t,Kl.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var s=Oi(t,Kl.DEFAULT_TITLE);return r||s||void 0},C5=function(t){return Oi(t,Kl.ON_CHANGE_CLIENT_STATE)||function(){}},Dp=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,s){return Ht({},n,s)},{})},P5=function(t,r){return r.filter(function(n){return typeof n[Ne.BASE]<"u"}).map(function(n){return n[Ne.BASE]}).reverse().reduce(function(n,s){if(!n.length)for(var o=Object.keys(s),a=0;a<o.length;a++){var l=o[a],c=l.toLowerCase();if(t.indexOf(c)!==-1&&s[c])return n.concat(s)}return n},[])},za=function(t,r,n){var s={};return n.filter(function(o){return Array.isArray(o[t])?!0:(typeof o[t]<"u"&&R5("Helmet: "+t+' should be of type "Array". Instead found type "'+w5(o[t])+'"'),!1)}).map(function(o){return o[t]}).reverse().reduce(function(o,a){var l={};a.filter(function(h){for(var m=void 0,g=Object.keys(h),v=0;v<g.length;v++){var x=g[v],b=x.toLowerCase();r.indexOf(b)!==-1&&!(m===Je.REL&&h[m].toLowerCase()==="canonical")&&!(b===Je.REL&&h[b].toLowerCase()==="stylesheet")&&(m=b),r.indexOf(x)!==-1&&(x===Je.INNER_HTML||x===Je.CSS_TEXT||x===Je.ITEM_PROP)&&(m=x)}if(!m||!h[m])return!1;var y=h[m].toLowerCase();return s[m]||(s[m]={}),l[m]||(l[m]={}),s[m][y]?!1:(l[m][y]=!0,!0)}).reverse().forEach(function(h){return o.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var f=c[u],d=x5({},s[f],l[f]);s[f]=d}return o},[]).reverse()},Oi=function(t,r){for(var n=t.length-1;n>=0;n--){var s=t[n];if(s.hasOwnProperty(r))return s[r]}return null},T5=function(t){return{baseTag:P5([Je.HREF,Je.TARGET],t),bodyAttributes:Dp(vo.BODY,t),defer:Oi(t,Kl.DEFER),encode:Oi(t,Kl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Dp(vo.HTML,t),linkTags:za(Ne.LINK,[Je.REL,Je.HREF],t),metaTags:za(Ne.META,[Je.NAME,Je.CHARSET,Je.HTTPEQUIV,Je.PROPERTY,Je.ITEM_PROP],t),noscriptTags:za(Ne.NOSCRIPT,[Je.INNER_HTML],t),onChangeClientState:C5(t),scriptTags:za(Ne.SCRIPT,[Je.SRC,Je.INNER_HTML],t),styleTags:za(Ne.STYLE,[Je.CSS_TEXT],t),title:E5(t),titleAttributes:Dp(vo.TITLE,t)}},qg=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){qg(t)},0)}}(),Qw=function(t){return clearTimeout(t)},k5=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||qg:global.requestAnimationFrame||qg,A5=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Qw:global.cancelAnimationFrame||Qw,R5=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Ua=null,I5=function(t){Ua&&A5(Ua),t.defer?Ua=k5(function(){Zw(t,function(){Ua=null})}):(Zw(t),Ua=null)},Zw=function(t,r){var n=t.baseTag,s=t.bodyAttributes,o=t.htmlAttributes,a=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,f=t.scriptTags,d=t.styleTags,h=t.title,m=t.titleAttributes;Wg(Ne.BODY,s),Wg(Ne.HTML,o),O5(h,m);var g={baseTag:Yo(Ne.BASE,n),linkTags:Yo(Ne.LINK,a),metaTags:Yo(Ne.META,l),noscriptTags:Yo(Ne.NOSCRIPT,c),scriptTags:Yo(Ne.SCRIPT,f),styleTags:Yo(Ne.STYLE,d)},v={},x={};Object.keys(g).forEach(function(b){var y=g[b],w=y.newTags,j=y.oldTags;w.length&&(v[b]=w),j.length&&(x[b]=g[b].oldTags)}),r&&r(),u(t,v,x)},CC=function(t){return Array.isArray(t)?t.join(""):t},O5=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=CC(t)),Wg(Ne.TITLE,r)},Wg=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var s=n.getAttribute(Yr),o=s?s.split(","):[],a=[].concat(o),l=Object.keys(r),c=0;c<l.length;c++){var u=l[c],f=r[u]||"";n.getAttribute(u)!==f&&n.setAttribute(u,f),o.indexOf(u)===-1&&o.push(u);var d=a.indexOf(u);d!==-1&&a.splice(d,1)}for(var h=a.length-1;h>=0;h--)n.removeAttribute(a[h]);o.length===a.length?n.removeAttribute(Yr):n.getAttribute(Yr)!==l.join(",")&&n.setAttribute(Yr,l.join(","))}},Yo=function(t,r){var n=document.head||document.querySelector(Ne.HEAD),s=n.querySelectorAll(t+"["+Yr+"]"),o=Array.prototype.slice.call(s),a=[],l=void 0;return r&&r.length&&r.forEach(function(c){var u=document.createElement(t);for(var f in c)if(c.hasOwnProperty(f))if(f===Je.INNER_HTML)u.innerHTML=c.innerHTML;else if(f===Je.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var d=typeof c[f]>"u"?"":c[f];u.setAttribute(f,d)}u.setAttribute(Yr,"true"),o.some(function(h,m){return l=m,u.isEqualNode(h)})?o.splice(l,1):a.push(u)}),o.forEach(function(c){return c.parentNode.removeChild(c)}),a.forEach(function(c){return n.appendChild(c)}),{oldTags:o,newTags:a}},PC=function(t){return Object.keys(t).reduce(function(r,n){var s=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+s:s},"")},D5=function(t,r,n,s){var o=PC(n),a=CC(r);return o?"<"+t+" "+Yr+'="true" '+o+">"+Vg(a,s)+"</"+t+">":"<"+t+" "+Yr+'="true">'+Vg(a,s)+"</"+t+">"},$5=function(t,r,n){return r.reduce(function(s,o){var a=Object.keys(o).filter(function(u){return!(u===Je.INNER_HTML||u===Je.CSS_TEXT)}).reduce(function(u,f){var d=typeof o[f]>"u"?f:f+'="'+Vg(o[f],n)+'"';return u?u+" "+d:d},""),l=o.innerHTML||o.cssText||"",c=b5.indexOf(t)===-1;return s+"<"+t+" "+Yr+'="true" '+a+(c?"/>":">"+l+"</"+t+">")},"")},TC=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,s){return n[Bd[s]||s]=t[s],n},r)},M5=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,s){return n[y5[s]||s]=t[s],n},r)},L5=function(t,r,n){var s,o=(s={key:r},s[Yr]=!0,s),a=TC(n,o);return[J.createElement(Ne.TITLE,a,r)]},F5=function(t,r){return r.map(function(n,s){var o,a=(o={key:s},o[Yr]=!0,o);return Object.keys(n).forEach(function(l){var c=Bd[l]||l;if(c===Je.INNER_HTML||c===Je.CSS_TEXT){var u=n.innerHTML||n.cssText;a.dangerouslySetInnerHTML={__html:u}}else a[c]=n[l]}),J.createElement(t,a)})},Nn=function(t,r,n){switch(t){case Ne.TITLE:return{toComponent:function(){return L5(t,r.title,r.titleAttributes)},toString:function(){return D5(t,r.title,r.titleAttributes,n)}};case vo.BODY:case vo.HTML:return{toComponent:function(){return TC(r)},toString:function(){return PC(r)}};default:return{toComponent:function(){return F5(t,r)},toString:function(){return $5(t,r,n)}}}},kC=function(t){var r=t.baseTag,n=t.bodyAttributes,s=t.encode,o=t.htmlAttributes,a=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,f=t.styleTags,d=t.title,h=d===void 0?"":d,m=t.titleAttributes;return{base:Nn(Ne.BASE,r,s),bodyAttributes:Nn(vo.BODY,n,s),htmlAttributes:Nn(vo.HTML,o,s),link:Nn(Ne.LINK,a,s),meta:Nn(Ne.META,l,s),noscript:Nn(Ne.NOSCRIPT,c,s),script:Nn(Ne.SCRIPT,u,s),style:Nn(Ne.STYLE,f,s),title:Nn(Ne.TITLE,{title:h,titleAttributes:m},s)}},B5=function(t){var r,n;return n=r=function(s){S5(o,s);function o(){return j5(this,o),N5(this,s.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(l){return!f5(this.props,l)},o.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case Ne.SCRIPT:case Ne.NOSCRIPT:return{innerHTML:c};case Ne.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,f=l.arrayTypeChildren,d=l.newChildProps,h=l.nestedChildren;return Ht({},f,(c={},c[u.type]=[].concat(f[u.type]||[],[Ht({},d,this.mapNestedChildrenToProps(u,h))]),c))},o.prototype.mapObjectTypeChildren=function(l){var c,u,f=l.child,d=l.newProps,h=l.newChildProps,m=l.nestedChildren;switch(f.type){case Ne.TITLE:return Ht({},d,(c={},c[f.type]=m,c.titleAttributes=Ht({},h),c));case Ne.BODY:return Ht({},d,{bodyAttributes:Ht({},h)});case Ne.HTML:return Ht({},d,{htmlAttributes:Ht({},h)})}return Ht({},d,(u={},u[f.type]=Ht({},h),u))},o.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Ht({},c);return Object.keys(l).forEach(function(f){var d;u=Ht({},u,(d={},d[f]=l[f],d))}),u},o.prototype.warnOnInvalidChildren=function(l,c){return!0},o.prototype.mapChildrenToProps=function(l,c){var u=this,f={};return J.Children.forEach(l,function(d){if(!(!d||!d.props)){var h=d.props,m=h.children,g=Xw(h,["children"]),v=M5(g);switch(u.warnOnInvalidChildren(d,m),d.type){case Ne.LINK:case Ne.META:case Ne.NOSCRIPT:case Ne.SCRIPT:case Ne.STYLE:f=u.flattenArrayTypeChildren({child:d,arrayTypeChildren:f,newChildProps:v,nestedChildren:m});break;default:c=u.mapObjectTypeChildren({child:d,newProps:c,newChildProps:v,nestedChildren:m});break}}}),c=this.mapArrayTypeChildrenToProps(f,c),c},o.prototype.render=function(){var l=this.props,c=l.children,u=Xw(l,["children"]),f=Ht({},u);return c&&(f=this.mapChildrenToProps(c,f)),J.createElement(t,f)},_5(o,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),o}(J.Component),r.propTypes={base:Ye.object,bodyAttributes:Ye.object,children:Ye.oneOfType([Ye.arrayOf(Ye.node),Ye.node]),defaultTitle:Ye.string,defer:Ye.bool,encodeSpecialCharacters:Ye.bool,htmlAttributes:Ye.object,link:Ye.arrayOf(Ye.object),meta:Ye.arrayOf(Ye.object),noscript:Ye.arrayOf(Ye.object),onChangeClientState:Ye.func,script:Ye.arrayOf(Ye.object),style:Ye.arrayOf(Ye.object),title:Ye.string,titleAttributes:Ye.object,titleTemplate:Ye.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var s=t.rewind();return s||(s=kC({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},n},z5=function(){return null},U5=i5(T5,I5,kC)(z5),zd=B5(U5);zd.renderStatic=zd.rewind;function AC(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=AC(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function RC(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=AC(e))&&(n&&(n+=" "),n+=t);return n}function V5(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=IC(t))&&(n&&(n+=" "),n+=r);return n}function IC(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=IC(e[n]))&&(r&&(r+=" "),r+=t);return r}var ty="-";function q5(e){var t=H5(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,s=n===void 0?{}:n;function o(l){var c=l.split(ty);return c[0]===""&&c.length!==1&&c.shift(),OC(c,t)||W5(l)}function a(l,c){var u=r[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:o,getConflictingClassGroupIds:a}}function OC(e,t){var a;if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),s=n?OC(e.slice(1),n):void 0;if(s)return s;if(t.validators.length!==0){var o=e.join(ty);return(a=t.validators.find(function(l){var c=l.validator;return c(o)}))==null?void 0:a.classGroupId}}var ej=/^\[(.+)\]$/;function W5(e){if(ej.test(e)){var t=ej.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function H5(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},s=K5(Object.entries(e.classGroups),r);return s.forEach(function(o){var a=o[0],l=o[1];Hg(l,n,a,t)}),n}function Hg(e,t,r,n){e.forEach(function(s){if(typeof s=="string"){var o=s===""?t:tj(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(G5(s)){Hg(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(a){var l=a[0],c=a[1];Hg(c,tj(t,l),r,n)})})}function tj(e,t){var r=e;return t.split(ty).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function G5(e){return e.isThemeGetter}function K5(e,t){return t?e.map(function(r){var n=r[0],s=r[1],o=s.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):a});return[n,o]}):e}function Y5(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function s(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return s(a,l),l},set:function(a,l){r.has(a)?r.set(a,l):s(a,l)}}}var DC="!";function J5(e){var t=e.separator||":",r=t.length===1,n=t[0],s=t.length;return function(a){for(var l=[],c=0,u=0,f,d=0;d<a.length;d++){var h=a[d];if(c===0){if(h===n&&(r||a.slice(d,d+s)===t)){l.push(a.slice(u,d)),u=d+s;continue}if(h==="/"){f=d;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?a:a.substring(u),g=m.startsWith(DC),v=g?m.substring(1):m,x=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}}}function X5(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var s=n[0]==="[";s?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function Q5(e){return{cache:Y5(e.cacheSize),splitModifiers:J5(e),...q5(e)}}var Z5=/\s+/;function e6(e,t){var r=t.splitModifiers,n=t.getClassGroupId,s=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(Z5).map(function(a){var l=r(a),c=l.modifiers,u=l.hasImportantModifier,f=l.baseClassName,d=l.maybePostfixModifierPosition,h=n(d?f.substring(0,d):f),m=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:a};if(h=n(f),!h)return{isTailwindClass:!1,originalClassName:a};m=!1}var g=X5(c).join(":"),v=u?g+DC:g;return{isTailwindClass:!0,modifierId:v,classGroupId:h,originalClassName:a,hasPostfixModifier:m}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,c=a.classGroupId,u=a.hasPostfixModifier,f=l+c;return o.has(f)?!1:(o.add(f),s(c,u).forEach(function(d){return o.add(l+d)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function t6(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,o,a=l;function l(u){var f=t[0],d=t.slice(1),h=d.reduce(function(m,g){return g(m)},f());return n=Q5(h),s=n.cache.get,o=n.cache.set,a=c,c(u)}function c(u){var f=s(u);if(f)return f;var d=e6(u,n);return o(u,d),d}return function(){return a(V5.apply(null,arguments))}}function He(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var $C=/^\[(?:([a-z-]+):)?(.+)\]$/i,r6=/^\d+\/\d+$/,n6=new Set(["px","full","screen"]),s6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,o6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ur(e){return co(e)||n6.has(e)||r6.test(e)||Gg(e)}function Gg(e){return Mo(e,"length",f6)}function a6(e){return Mo(e,"size",MC)}function l6(e){return Mo(e,"position",MC)}function c6(e){return Mo(e,"url",h6)}function gu(e){return Mo(e,"number",co)}function co(e){return!Number.isNaN(Number(e))}function u6(e){return e.endsWith("%")&&co(e.slice(0,-1))}function Va(e){return rj(e)||Mo(e,"number",rj)}function Ce(e){return $C.test(e)}function qa(){return!0}function ts(e){return s6.test(e)}function d6(e){return Mo(e,"",p6)}function Mo(e,t,r){var n=$C.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function f6(e){return o6.test(e)}function MC(){return!1}function h6(e){return e.startsWith("url(")}function rj(e){return Number.isInteger(Number(e))}function p6(e){return i6.test(e)}function m6(){var e=He("colors"),t=He("spacing"),r=He("blur"),n=He("brightness"),s=He("borderColor"),o=He("borderRadius"),a=He("borderSpacing"),l=He("borderWidth"),c=He("contrast"),u=He("grayscale"),f=He("hueRotate"),d=He("invert"),h=He("gap"),m=He("gradientColorStops"),g=He("gradientColorStopPositions"),v=He("inset"),x=He("margin"),b=He("opacity"),y=He("padding"),w=He("saturate"),j=He("scale"),_=He("sepia"),S=He("skew"),N=He("space"),E=He("translate"),C=function(){return["auto","contain","none"]},k=function(){return["auto","hidden","clip","visible","scroll"]},I=function(){return["auto",Ce,t]},O=function(){return[Ce,t]},M=function(){return["",Ur]},D=function(){return["auto",co,Ce]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},B=function(){return["solid","dashed","dotted","double","none"]},q=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},A=function(){return["start","end","center","between","around","evenly","stretch"]},R=function(){return["","0",Ce]},$=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},L=function(){return[co,gu]},W=function(){return[co,Ce]};return{cacheSize:500,theme:{colors:[qa],spacing:[Ur],blur:["none","",ts,Ce],brightness:L(),borderColor:[e],borderRadius:["none","","full",ts,Ce],borderSpacing:O(),borderWidth:M(),contrast:L(),grayscale:R(),hueRotate:W(),invert:R(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[u6,Gg],inset:I(),margin:I(),opacity:L(),padding:O(),saturate:L(),scale:L(),sepia:R(),skew:W(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[ts]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[Ce])}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Va]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Va]}],"grid-cols":[{"grid-cols":[qa]}],"col-start-end":[{col:["auto",{span:["full",Va]},Ce]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[qa]}],"row-start-end":[{row:["auto",{span:[Va]},Ce]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(A())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(A(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(A(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ce,t]}],"min-w":[{"min-w":["min","max","fit",Ce,Ur]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ts]},ts,Ce]}],h:[{h:[Ce,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ce,Ur]}],"max-h":[{"max-h":[Ce,t,"min","max","fit"]}],"font-size":[{text:["base",ts,Gg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gu]}],"font-family":[{font:[qa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",co,gu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ce,Ur]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(B(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ur]}],"underline-offset":[{"underline-offset":["auto",Ce,Ur]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[l6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[].concat(B(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(B())}],"outline-offset":[{"outline-offset":[Ce,Ur]}],"outline-w":[{outline:[Ur]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ur]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ts,d6]}],"shadow-color":[{shadow:[qa]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":q()}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ts,Ce]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Va,Ce]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ur,gu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var g6=t6(m6);function he(...e){return g6(RC(e))}function v6(e){return e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""}function xe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function nj(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lf(...e){return t=>{let r=!1;const n=e.map(s=>{const o=nj(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():nj(e[s],null)}}}}function Fe(...e){return p.useCallback(Lf(...e),e)}function x6(e,t){const r=p.createContext(t),n=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=p.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function nn(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=d=>{var b;const{scope:h,children:m,...g}=d,v=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=o+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,y6(s,...t)]}function y6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function No(e){const t=w6(e),r=p.forwardRef((n,s)=>{const{children:o,...a}=n,l=p.Children.toArray(o),c=l.find(_6);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var b6=No("Slot");function w6(e){const t=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const a=N6(s),l=S6(o,s.props);return s.type!==p.Fragment&&(l.ref=n?Lf(n,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LC=Symbol("radix.slottable");function j6(e){const t=({children:r})=>i.jsx(i.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=LC,t}function _6(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LC}function S6(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function N6(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ry(e){const t=e+"CollectionProvider",[r,n]=nn(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:x,children:b}=v,y=J.useRef(null),w=J.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:w,collectionRef:y,children:b})};a.displayName=t;const l=e+"CollectionSlot",c=No(l),u=J.forwardRef((v,x)=>{const{scope:b,children:y}=v,w=o(l,b),j=Fe(x,w.collectionRef);return i.jsx(c,{ref:j,children:y})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=No(f),m=J.forwardRef((v,x)=>{const{scope:b,children:y,...w}=v,j=J.useRef(null),_=Fe(x,j),S=o(f,b);return J.useEffect(()=>(S.itemMap.set(j,{ref:j,...w}),()=>void S.itemMap.delete(j))),i.jsx(h,{[d]:"",ref:_,children:y})});m.displayName=f;function g(v){const x=o(e+"CollectionConsumer",v);return J.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((S,N)=>w.indexOf(S.ref.current)-w.indexOf(N.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},g,n]}var E6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=E6.reduce((e,t)=>{const r=No(`Primitive.${t}`),n=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ny(e,t){e&&br.flushSync(()=>e.dispatchEvent(t))}function gr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function C6(e,t=globalThis==null?void 0:globalThis.document){const r=gr(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var P6="DismissableLayer",Kg="dismissableLayer.update",T6="dismissableLayer.pointerDownOutside",k6="dismissableLayer.focusOutside",sj,FC=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(FC),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Fe(t,N=>d(N)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(x),y=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=y>=b,_=R6(N=>{const E=N.target,C=[...u.branches].some(k=>k.contains(E));!j||C||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},h),S=I6(N=>{const E=N.target;[...u.branches].some(k=>k.contains(E))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},h);return C6(N=>{y===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(sj=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),oj(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=sj)}},[f,h,r,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),oj())},[f,u]),p.useEffect(()=>{const N=()=>m({});return document.addEventListener(Kg,N),()=>document.removeEventListener(Kg,N)},[]),i.jsx(Re.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:xe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:xe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:xe(e.onPointerDownCapture,_.onPointerDownCapture)})});Nc.displayName=P6;var A6="DismissableLayerBranch",BC=p.forwardRef((e,t)=>{const r=p.useContext(FC),n=p.useRef(null),s=Fe(t,n);return p.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(Re.div,{...e,ref:s})});BC.displayName=A6;function R6(e,t=globalThis==null?void 0:globalThis.document){const r=gr(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){zC(T6,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function I6(e,t=globalThis==null?void 0:globalThis.document){const r=gr(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&zC(k6,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function oj(){const e=new CustomEvent(Kg);document.dispatchEvent(e)}function zC(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?ny(s,o):s.dispatchEvent(o)}var O6=Nc,D6=BC,qn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},$6="Portal",Ec=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=p.useState(!1);qn(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?Of.createPortal(i.jsx(Re.div,{...n,ref:t}),a):null});Ec.displayName=$6;function M6(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Fr=e=>{const{present:t,children:r}=e,n=L6(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=Fe(n.ref,F6(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};Fr.displayName="Presence";function L6(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=M6(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=vu(n.current);o.current=l==="mounted"?u:"none"},[l]),qn(()=>{const u=n.current,f=s.current;if(f!==e){const h=o.current,m=vu(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),qn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=vu(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&v&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(o.current=vu(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function vu(e){return(e==null?void 0:e.animationName)||"none"}function F6(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var B6=yc[" useInsertionEffect ".trim().toString()]||qn;function Lo({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,a]=z6({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,n])}const u=p.useCallback(f=>{var d;if(l){const h=U6(f)?f(e):f;h!==e&&((d=a.current)==null||d.call(a,h))}else o(f)},[l,e,o,a]);return[c,u]}function z6({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),o=p.useRef(t);return B6(()=>{o.current=t},[t]),p.useEffect(()=>{var a;s.current!==r&&((a=o.current)==null||a.call(o,r),s.current=r)},[r,s]),[r,n,o]}function U6(e){return typeof e=="function"}var V6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q6="VisuallyHidden",sy=p.forwardRef((e,t)=>i.jsx(Re.span,{...e,ref:t,style:{...V6,...e.style}}));sy.displayName=q6;var oy="ToastProvider",[iy,W6,H6]=ry("Toast"),[UC,Voe]=nn("Toast",[H6]),[G6,Ff]=UC(oy),VC=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${oy}\`. Expected non-empty \`string\`.`),i.jsx(iy.Provider,{scope:t,children:i.jsx(G6,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};VC.displayName=oy;var qC="ToastViewport",K6=["F8"],Yg="toast.viewportPause",Jg="toast.viewportResume",WC=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=K6,label:s="Notifications ({hotkey})",...o}=e,a=Ff(qC,r),l=W6(r),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=Fe(t,d,a.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;p.useEffect(()=>{const x=b=>{var w;n.length!==0&&n.every(j=>b[j]||b.code===j)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),p.useEffect(()=>{const x=c.current,b=d.current;if(g&&x&&b){const y=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(Yg);b.dispatchEvent(S),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(Jg);b.dispatchEvent(S),a.isClosePausedRef.current=!1}},j=S=>{!x.contains(S.relatedTarget)&&w()},_=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",y),x.addEventListener("focusout",j),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[g,a.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const y=l().map(w=>{const j=w.ref.current,_=[j,...a3(j)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const b=y=>{var _,S,N;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const E=document.activeElement,C=y.shiftKey;if(y.target===x&&C){(_=u.current)==null||_.focus();return}const O=v({tabbingDirection:C?"backwards":"forwards"}),M=O.findIndex(D=>D===E);$p(O.slice(M+1))?y.preventDefault():C?(S=u.current)==null||S.focus():(N=f.current)==null||N.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[l,v]),i.jsxs(D6,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(Xg,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});$p(x)}}),i.jsx(iy.Slot,{scope:r,children:i.jsx(Re.ol,{tabIndex:-1,...o,ref:h})}),g&&i.jsx(Xg,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});$p(x)}})]})});WC.displayName=qC;var HC="ToastFocusProxy",Xg=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=Ff(HC,r);return i.jsx(sy,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});Xg.displayName=HC;var Cc="Toast",Y6="toast.swipeStart",J6="toast.swipeMove",X6="toast.swipeCancel",Q6="toast.swipeEnd",GC=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l,c]=Lo({prop:n,defaultProp:s??!0,onChange:o,caller:Cc});return i.jsx(Fr,{present:r||l,children:i.jsx(t3,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:gr(e.onPause),onResume:gr(e.onResume),onSwipeStart:xe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:xe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});GC.displayName=Cc;var[Z6,e3]=UC(Cc,{onClose(){}}),t3=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Ff(Cc,r),[x,b]=p.useState(null),y=Fe(t,D=>b(D)),w=p.useRef(null),j=p.useRef(null),_=s||v.duration,S=p.useRef(0),N=p.useRef(_),E=p.useRef(0),{onToastAdd:C,onToastRemove:k}=v,I=gr(()=>{var z;(x==null?void 0:x.contains(document.activeElement))&&((z=v.viewport)==null||z.focus()),a()}),O=p.useCallback(D=>{!D||D===1/0||(window.clearTimeout(E.current),S.current=new Date().getTime(),E.current=window.setTimeout(I,D))},[I]);p.useEffect(()=>{const D=v.viewport;if(D){const z=()=>{O(N.current),u==null||u()},B=()=>{const q=new Date().getTime()-S.current;N.current=N.current-q,window.clearTimeout(E.current),c==null||c()};return D.addEventListener(Yg,B),D.addEventListener(Jg,z),()=>{D.removeEventListener(Yg,B),D.removeEventListener(Jg,z)}}},[v.viewport,_,c,u,O]),p.useEffect(()=>{o&&!v.isClosePausedRef.current&&O(_)},[o,_,v.isClosePausedRef,O]),p.useEffect(()=>(C(),()=>k()),[C,k]);const M=p.useMemo(()=>x?eP(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[M&&i.jsx(r3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:M}),i.jsx(Z6,{scope:r,onClose:I,children:br.createPortal(i.jsx(iy.ItemSlot,{scope:r,children:i.jsx(O6,{asChild:!0,onEscapeKeyDown:xe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Re.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xe(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:xe(e.onPointerDown,D=>{D.button===0&&(w.current={x:D.clientX,y:D.clientY})}),onPointerMove:xe(e.onPointerMove,D=>{if(!w.current)return;const z=D.clientX-w.current.x,B=D.clientY-w.current.y,q=!!j.current,A=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,$=A?R(0,z):0,L=A?0:R(0,B),W=D.pointerType==="touch"?10:2,V={x:$,y:L},re={originalEvent:D,delta:V};q?(j.current=V,xu(J6,d,re,{discrete:!1})):ij(V,v.swipeDirection,W)?(j.current=V,xu(Y6,f,re,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(z)>W||Math.abs(B)>W)&&(w.current=null)}),onPointerUp:xe(e.onPointerUp,D=>{const z=j.current,B=D.target;if(B.hasPointerCapture(D.pointerId)&&B.releasePointerCapture(D.pointerId),j.current=null,w.current=null,z){const q=D.currentTarget,A={originalEvent:D,delta:z};ij(z,v.swipeDirection,v.swipeThreshold)?xu(Q6,m,A,{discrete:!0}):xu(X6,h,A,{discrete:!0}),q.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),r3=e=>{const{__scopeToast:t,children:r,...n}=e,s=Ff(Cc,t),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return o3(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Ec,{asChild:!0,children:i.jsx(sy,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},n3="ToastTitle",KC=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Re.div,{...n,ref:t})});KC.displayName=n3;var s3="ToastDescription",YC=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Re.div,{...n,ref:t})});YC.displayName=s3;var JC="ToastAction",XC=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(ZC,{altText:r,asChild:!0,children:i.jsx(ay,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${JC}\`. Expected non-empty \`string\`.`),null)});XC.displayName=JC;var QC="ToastClose",ay=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=e3(QC,r);return i.jsx(ZC,{asChild:!0,children:i.jsx(Re.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,s.onClose)})})});ay.displayName=QC;var ZC=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function eP(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),i3(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...eP(n))}}),t}function xu(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?ny(s,o):s.dispatchEvent(o)}var ij=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function o3(e=()=>{}){const t=gr(e);qn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function i3(e){return e.nodeType===e.ELEMENT_NODE}function a3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function $p(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var l3=VC,tP=WC,rP=GC,nP=KC,sP=YC,oP=XC,iP=ay;const aj=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lj=RC,Bf=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return lj(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],d=o==null?void 0:o[u];if(f===null)return null;const h=aj(f)||aj(d);return s[u][h]}),l=r&&Object.entries(r).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...u,d,h]:u},[]);return lj(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};var c3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:l,...c},u)=>p.createElement("svg",{ref:u,...c3,width:s,height:s,stroke:n,strokeWidth:a?Number(o)*24/Number(s):o,className:`lucide lucide-${u3(e)}`,...c},[...t.map(([f,d])=>p.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},ly=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),cy=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),uy=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),cj=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ud=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Yl=oe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Qg=oe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Zg=oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),d3=oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dy=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),zf=oe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Uf=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),$n=oe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Rs=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Wn=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f3=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),h3=oe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),p3=oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uj=oe("ClipboardSignature",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}],["path",{d:"M8 18h1",key:"13wk12"}]]),Vd=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),dj=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),m3=oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),g3=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),v3=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),x3=oe("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),y3=oe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),ev=oe("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Jl=oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Xl=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b3=oe("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),fj=oe("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v3",key:"am10z3"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"ychnub"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]),yl=oe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),hj=oe("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),tv=oe("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),w3=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),j3=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),_3=oe("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]),aP=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Mp=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),pj=oe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),fy=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),De=oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Vf=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),S3=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),en=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hy=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),lP=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),py=oe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Di=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),N3=oe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Pc=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Rr=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qf=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),E3=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),C3=oe("Scaling",[["path",{d:"M21 3 9 15",key:"15kdhq"}],["path",{d:"M12 3H3v18h18v-9",key:"8suug0"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}]]),Wf=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),cP=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),uP=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rv=oe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),dP=oe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),P3=oe("Shovel",[["path",{d:"M2 22v-5l5-5 5 5-5 5z",key:"1fh25c"}],["path",{d:"M9.5 14.5 16 8",key:"1smz5x"}],["path",{d:"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2",key:"1q8uv5"}]]),nv=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Mn=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),T3=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),k3=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),A3=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),bl=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),R3=oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Tc=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Eo=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),I3=oe("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),O3=oe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),my=oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Fo=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fP=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),D3=l3,hP=J.forwardRef(({className:e,...t},r)=>i.jsx(tP,{ref:r,className:he("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));hP.displayName=tP.displayName;const $3=Bf("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pP=J.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(rP,{ref:n,className:he($3({variant:t}),e),...r}));pP.displayName=rP.displayName;const M3=J.forwardRef(({className:e,...t},r)=>i.jsx(oP,{ref:r,className:he("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));M3.displayName=oP.displayName;const mP=J.forwardRef(({className:e,...t},r)=>i.jsx(iP,{ref:r,className:he("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Fo,{className:"h-4 w-4"})}));mP.displayName=iP.displayName;const gP=J.forwardRef(({className:e,...t},r)=>i.jsx(nP,{ref:r,className:he("text-sm font-semibold",e),...t}));gP.displayName=nP.displayName;const vP=J.forwardRef(({className:e,...t},r)=>i.jsx(sP,{ref:r,className:he("text-sm opacity-90",e),...t}));vP.displayName=sP.displayName;const L3=1;let Lp=0;function F3(){return Lp=(Lp+1)%Number.MAX_VALUE,Lp.toString()}const $t={state:{toasts:[]},listeners:[],getState:()=>$t.state,setState:e=>{typeof e=="function"?$t.state=e($t.state):$t.state={...$t.state,...e},$t.listeners.forEach(t=>t($t.state))},subscribe:e=>($t.listeners.push(e),()=>{$t.listeners=$t.listeners.filter(t=>t!==e)})},F=({...e})=>{const t=F3(),r=s=>$t.setState(o=>({...o,toasts:o.toasts.map(a=>a.id===t?{...a,...s}:a)})),n=()=>$t.setState(s=>({...s,toasts:s.toasts.filter(o=>o.id!==t)}));return $t.setState(s=>({...s,toasts:[{...e,id:t,dismiss:n},...s.toasts].slice(0,L3)})),{id:t,dismiss:n,update:r}};function xP(){const[e,t]=p.useState($t.getState());return p.useEffect(()=>$t.subscribe(n=>{t(n)}),[]),p.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const s=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(s)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:F,toasts:e.toasts}}function B3(){const{toasts:e}=xP();return i.jsxs(D3,{children:[e.map(({id:t,title:r,description:n,action:s,...o})=>i.jsxs(pP,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(gP,{children:r}),n&&i.jsx(vP,{children:n})]}),s,i.jsx(mP,{})]},t)),i.jsx(hP,{})]})}const yP=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Hf=p.createContext({}),Gf=p.createContext(null),Kf=typeof document<"u",gy=Kf?p.useLayoutEffect:p.useEffect,bP=p.createContext({strict:!1}),vy=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),z3="framerAppearId",wP="data-"+vy(z3);function U3(e,t,r,n){const{visualElement:s}=p.useContext(Hf),o=p.useContext(bP),a=p.useContext(Gf),l=p.useContext(yP).reducedMotion,c=p.useRef();n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;p.useInsertionEffect(()=>{u&&u.update(r,a)});const f=p.useRef(!!(r[wP]&&!window.HandoffComplete));return gy(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),p.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),u}function _i(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function V3(e,t,r){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):_i(r)&&(r.current=n))},[t])}function Ql(e){return typeof e=="string"||Array.isArray(e)}function Yf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const xy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yy=["initial",...xy];function Jf(e){return Yf(e.animate)||yy.some(t=>Ql(e[t]))}function jP(e){return!!(Jf(e)||e.variants)}function q3(e,t){if(Jf(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Ql(r)?r:void 0,animate:Ql(n)?n:void 0}}return e.inherit!==!1?t:{}}function W3(e){const{initial:t,animate:r}=q3(e,p.useContext(Hf));return p.useMemo(()=>({initial:t,animate:r}),[mj(t),mj(r)])}function mj(e){return Array.isArray(e)?e.join(" "):e}const gj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zl={};for(const e in gj)Zl[e]={isEnabled:t=>gj[e].some(r=>!!t[r])};function H3(e){for(const t in e)Zl[t]={...Zl[t],...e[t]}}const by=p.createContext({}),_P=p.createContext({}),G3=Symbol.for("motionComponentSymbol");function K3({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&H3(e);function o(l,c){let u;const f={...p.useContext(yP),...l,layoutId:Y3(l)},{isStatic:d}=f,h=W3(l),m=n(l,d);if(!d&&Kf){h.visualElement=U3(s,m,f,t);const g=p.useContext(_P),v=p.useContext(bP).strict;h.visualElement&&(u=h.visualElement.loadFeatures(f,v,e,g))}return p.createElement(Hf.Provider,{value:h},u&&h.visualElement?p.createElement(u,{visualElement:h.visualElement,...f}):null,r(s,l,V3(m,h.visualElement,c),m,d,h.visualElement))}const a=p.forwardRef(o);return a[G3]=s,a}function Y3({layoutId:e}){const t=p.useContext(by).id;return t&&e!==void 0?t+"-"+e:e}function J3(e){function t(n,s={}){return K3(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const X3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wy(e){return typeof e!="string"||e.includes("-")?!1:!!(X3.indexOf(e)>-1||/[A-Z]/.test(e))}const qd={};function Q3(e){Object.assign(qd,e)}const kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bo=new Set(kc);function SP(e,{layout:t,layoutId:r}){return Bo.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!qd[e]||e==="opacity")}const tr=e=>!!(e&&e.getVelocity),Z3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eF=kc.length;function tF(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let o="";for(let a=0;a<eF;a++){const l=kc[a];if(e[l]!==void 0){const c=Z3[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,n?"":o):r&&n&&(o="none"),o}const NP=e=>t=>typeof t=="string"&&t.startsWith(e),EP=NP("--"),sv=NP("var(--"),rF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,nF=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Is=(e,t,r)=>Math.min(Math.max(r,e),t),zo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wl={...zo,transform:e=>Is(0,1,e)},yu={...zo,default:1},jl=e=>Math.round(e*1e5)/1e5,Xf=/(-)?([\d]*\.?[\d])+/g,CP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,sF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ac(e){return typeof e=="string"}const Rc=e=>({test:t=>Ac(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ns=Rc("deg"),yn=Rc("%"),we=Rc("px"),oF=Rc("vh"),iF=Rc("vw"),vj={...yn,parse:e=>yn.parse(e)/100,transform:e=>yn.transform(e*100)},xj={...zo,transform:Math.round},PP={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:ns,rotateX:ns,rotateY:ns,rotateZ:ns,scale:yu,scaleX:yu,scaleY:yu,scaleZ:yu,skew:ns,skewX:ns,skewY:ns,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:wl,originX:vj,originY:vj,originZ:we,zIndex:xj,fillOpacity:wl,strokeOpacity:wl,numOctaves:xj};function jy(e,t,r,n){const{style:s,vars:o,transform:a,transformOrigin:l}=e;let c=!1,u=!1,f=!0;for(const d in t){const h=t[d];if(EP(d)){o[d]=h;continue}const m=PP[d],g=nF(h,m);if(Bo.has(d)){if(c=!0,a[d]=g,!f)continue;h!==(m.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,l[d]=g):s[d]=g}if(t.transform||(c||n?s.transform=tF(e.transform,r,f,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:m=0}=l;s.transformOrigin=`${d} ${h} ${m}`}}const _y=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TP(e,t,r){for(const n in t)!tr(t[n])&&!SP(n,r)&&(e[n]=t[n])}function aF({transformTemplate:e},t,r){return p.useMemo(()=>{const n=_y();return jy(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function lF(e,t,r){const n=e.style||{},s={};return TP(s,n,e),Object.assign(s,aF(e,t,r)),e.transformValues?e.transformValues(s):s}function cF(e,t,r){const n={},s=lF(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const uF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||uF.has(e)}let kP=e=>!Wd(e);function dF(e){e&&(kP=t=>t.startsWith("on")?!Wd(t):e(t))}try{dF(require("@emotion/is-prop-valid").default)}catch{}function fF(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(kP(s)||r===!0&&Wd(s)||!t&&!Wd(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function yj(e,t,r){return typeof e=="string"?e:we.transform(t+r*e)}function hF(e,t,r){const n=yj(t,e.x,e.width),s=yj(r,e.y,e.height);return`${n} ${s}`}const pF={offset:"stroke-dashoffset",array:"stroke-dasharray"},mF={offset:"strokeDashoffset",array:"strokeDasharray"};function gF(e,t,r=1,n=0,s=!0){e.pathLength=1;const o=s?pF:mF;e[o.offset]=we.transform(-n);const a=we.transform(t),l=we.transform(r);e[o.array]=`${a} ${l}`}function Sy(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},f,d,h){if(jy(e,u,f,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:v}=e;m.transform&&(v&&(g.transform=m.transform),delete m.transform),v&&(s!==void 0||o!==void 0||g.transform)&&(g.transformOrigin=hF(v,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),a!==void 0&&gF(m,a,l,c,!1)}const AP=()=>({..._y(),attrs:{}}),Ny=e=>typeof e=="string"&&e.toLowerCase()==="svg";function vF(e,t,r,n){const s=p.useMemo(()=>{const o=AP();return Sy(o,t,{enableHardwareAcceleration:!1},Ny(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};TP(o,e.style,e),s.style={...o,...s.style}}return s}function xF(e=!1){return(r,n,s,{latestValues:o},a)=>{const c=(wy(r)?vF:cF)(n,o,a,r),f={...fF(n,typeof r=="string",e),...c,ref:s},{children:d}=n,h=p.useMemo(()=>tr(d)?d.get():d,[d]);return p.createElement(r,{...f,children:h})}}function RP(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const IP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OP(e,t,r,n){RP(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(IP.has(s)?s:vy(s),t.attrs[s])}function Ey(e,t){const{style:r}=e,n={};for(const s in r)(tr(r[s])||t.style&&tr(t.style[s])||SP(s,e))&&(n[s]=r[s]);return n}function DP(e,t){const r=Ey(e,t);for(const n in e)if(tr(e[n])||tr(t[n])){const s=kc.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function Cy(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function $P(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Hd=e=>Array.isArray(e),yF=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),bF=e=>Hd(e)?e[e.length-1]||0:e;function od(e){const t=tr(e)?e.get():e;return yF(t)?t.toValue():t}function wF({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,o){const a={latestValues:jF(n,s,o,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const MP=e=>(t,r)=>{const n=p.useContext(Hf),s=p.useContext(Gf),o=()=>wF(e,t,n,s);return r?o():$P(o)};function jF(e,t,r,n){const s={},o=n(e,{});for(const h in o)s[h]=od(o[h]);let{initial:a,animate:l}=e;const c=Jf(e),u=jP(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let f=r?r.initial===!1:!1;f=f||a===!1;const d=f?l:a;return d&&typeof d!="boolean"&&!Yf(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=Cy(e,m);if(!g)return;const{transitionEnd:v,transition:x,...b}=g;for(const y in b){let w=b[y];if(Array.isArray(w)){const j=f?w.length-1:0;w=w[j]}w!==null&&(s[y]=w)}for(const y in v)s[y]=v[y]}),s}const ot=e=>e;class bj{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function _F(e){let t=new bj,r=new bj,n=0,s=!1,o=!1;const a=new WeakSet,l={schedule:(c,u=!1,f=!1)=>{const d=f&&s,h=d?t:r;return u&&a.add(c),h.add(c)&&d&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){o=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const f=t.order[u];f(c),a.has(f)&&(l.schedule(f),e())}s=!1,o&&(o=!1,l.process(c))}};return l}const bu=["prepare","read","update","preRender","render","postRender"],SF=40;function NF(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=bu.reduce((d,h)=>(d[h]=_F(()=>r=!0),d),{}),a=d=>o[d].process(s),l=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,SF),1),s.timestamp=d,s.isProcessing=!0,bu.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:bu.reduce((d,h)=>{const m=o[h];return d[h]=(g,v=!1,x=!1)=>(r||c(),m.schedule(g,v,x)),d},{}),cancel:d=>bu.forEach(h=>o[h].cancel(d)),state:s,steps:o}}const{schedule:Ue,cancel:Hn,state:kt,steps:Fp}=NF(typeof requestAnimationFrame<"u"?requestAnimationFrame:ot,!0),EF={useVisualState:MP({scrapeMotionValuesFromProps:DP,createRenderState:AP,onMount:(e,t,{renderState:r,latestValues:n})=>{Ue.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ue.render(()=>{Sy(r,n,{enableHardwareAcceleration:!1},Ny(t.tagName),e.transformTemplate),OP(t,r)})}})},CF={useVisualState:MP({scrapeMotionValuesFromProps:Ey,createRenderState:_y})};function PF(e,{forwardMotionProps:t=!1},r,n){return{...wy(e)?EF:CF,preloadedFeatures:r,useRender:xF(t),createVisualElement:n,Component:e}}function On(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const LP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Qf(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const TF=e=>t=>LP(t)&&e(t,Qf(t));function Ln(e,t,r,n){return On(e,t,TF(r),n)}const kF=(e,t)=>r=>t(e(r)),Ns=(...e)=>e.reduce(kF);function FP(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const wj=FP("dragHorizontal"),jj=FP("dragVertical");function BP(e){let t=!1;if(e==="y")t=jj();else if(e==="x")t=wj();else{const r=wj(),n=jj();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function zP(){const e=BP(!0);return e?(e(),!1):!0}class zs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function _j(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(o,a)=>{if(o.pointerType==="touch"||zP())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ue.update(()=>l[n](o,a))};return Ln(e.current,r,s,{passive:!e.getProps()[n]})}class AF extends zs{mount(){this.unmount=Ns(_j(this.node,!0),_j(this.node,!1))}unmount(){}}class RF extends zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ns(On(this.node.current,"focus",()=>this.onFocus()),On(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const UP=(e,t)=>t?e===t?!0:UP(e,t.parentElement):!1;function Bp(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Qf(r))}class IF extends zs{constructor(){super(...arguments),this.removeStartListeners=ot,this.removeEndListeners=ot,this.removeAccessibleListeners=ot,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=Ln(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f,globalTapTarget:d}=this.node.getProps();Ue.update(()=>{!d&&!UP(this.node.current,l.target)?f&&f(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=Ln(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ns(o,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Bp("up",(c,u)=>{const{onTap:f}=this.node.getProps();f&&Ue.update(()=>f(c,u))})};this.removeEndListeners(),this.removeEndListeners=On(this.node.current,"keyup",a),Bp("down",(l,c)=>{this.startPress(l,c)})},r=On(this.node.current,"keydown",t),n=()=>{this.isPressing&&Bp("cancel",(o,a)=>this.cancelPress(o,a))},s=On(this.node.current,"blur",n);this.removeAccessibleListeners=Ns(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ue.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zP()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ue.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Ln(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=On(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ns(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ov=new WeakMap,zp=new WeakMap,OF=e=>{const t=ov.get(e.target);t&&t(e)},DF=e=>{e.forEach(OF)};function $F({root:e,...t}){const r=e||document;zp.has(r)||zp.set(r,{});const n=zp.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(DF,{root:e,...t})),n[s]}function MF(e,t,r){const n=$F(t);return ov.set(e,r),n.observe(e),()=>{ov.delete(e),n.unobserve(e)}}const LF={some:0,all:1};class FF extends zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:LF[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=u?f:d;h&&h(c)};return MF(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(BF(t,r))&&this.startObserver()}unmount(){}}function BF({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const zF={inView:{Feature:FF},tap:{Feature:IF},focus:{Feature:RF},hover:{Feature:AF}};function VP(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function UF(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function VF(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Zf(e,t,r){const n=e.getProps();return Cy(n,t,r!==void 0?r:n.custom,UF(e),VF(e))}let qF=ot,Py=ot;const Es=e=>e*1e3,Fn=e=>e/1e3,WF={current:!1},qP=e=>Array.isArray(e)&&typeof e[0]=="number";function WP(e){return!!(!e||typeof e=="string"&&HP[e]||qP(e)||Array.isArray(e)&&e.every(WP))}const nl=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,HP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nl([0,.65,.55,1]),circOut:nl([.55,0,1,.45]),backIn:nl([.31,.01,.66,-.59]),backOut:nl([.33,1.53,.69,.99])};function GP(e){if(e)return qP(e)?nl(e):Array.isArray(e)?e.map(GP):HP[e]}function HF(e,t,r,{delay:n=0,duration:s,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const f=GP(l);return Array.isArray(f)&&(u.easing=f),e.animate(u,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function GF(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const KP=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,KF=1e-7,YF=12;function JF(e,t,r,n,s){let o,a,l=0;do a=t+(r-t)/2,o=KP(a,n,s)-e,o>0?r=a:t=a;while(Math.abs(o)>KF&&++l<YF);return a}function Ic(e,t,r,n){if(e===t&&r===n)return ot;const s=o=>JF(o,0,1,e,r);return o=>o===0||o===1?o:KP(s(o),t,n)}const XF=Ic(.42,0,1,1),QF=Ic(0,0,.58,1),YP=Ic(.42,0,.58,1),ZF=e=>Array.isArray(e)&&typeof e[0]!="number",JP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,XP=e=>t=>1-e(1-t),Ty=e=>1-Math.sin(Math.acos(e)),QP=XP(Ty),eB=JP(Ty),ZP=Ic(.33,1.53,.69,.99),ky=XP(ZP),tB=JP(ky),rB=e=>(e*=2)<1?.5*ky(e):.5*(2-Math.pow(2,-10*(e-1))),nB={linear:ot,easeIn:XF,easeInOut:YP,easeOut:QF,circIn:Ty,circInOut:eB,circOut:QP,backIn:ky,backInOut:tB,backOut:ZP,anticipate:rB},Sj=e=>{if(Array.isArray(e)){Py(e.length===4);const[t,r,n,s]=e;return Ic(t,r,n,s)}else if(typeof e=="string")return nB[e];return e},Ay=(e,t)=>r=>!!(Ac(r)&&sF.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),e2=(e,t,r)=>n=>{if(!Ac(n))return n;const[s,o,a,l]=n.match(Xf);return{[e]:parseFloat(s),[t]:parseFloat(o),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},sB=e=>Is(0,255,e),Up={...zo,transform:e=>Math.round(sB(e))},uo={test:Ay("rgb","red"),parse:e2("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Up.transform(e)+", "+Up.transform(t)+", "+Up.transform(r)+", "+jl(wl.transform(n))+")"};function oB(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const iv={test:Ay("#"),parse:oB,transform:uo.transform},Si={test:Ay("hsl","hue"),parse:e2("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+yn.transform(jl(t))+", "+yn.transform(jl(r))+", "+jl(wl.transform(n))+")"},Mt={test:e=>uo.test(e)||iv.test(e)||Si.test(e),parse:e=>uo.test(e)?uo.parse(e):Si.test(e)?Si.parse(e):iv.parse(e),transform:e=>Ac(e)?e:e.hasOwnProperty("red")?uo.transform(e):Si.transform(e)},tt=(e,t,r)=>-r*e+r*t+e;function Vp(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function iB({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,o=0,a=0;if(!t)s=o=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Vp(c,l,e+1/3),o=Vp(c,l,e),a=Vp(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const qp=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},aB=[iv,uo,Si],lB=e=>aB.find(t=>t.test(e));function Nj(e){const t=lB(e);let r=t.parse(e);return t===Si&&(r=iB(r)),r}const t2=(e,t)=>{const r=Nj(e),n=Nj(t),s={...r};return o=>(s.red=qp(r.red,n.red,o),s.green=qp(r.green,n.green,o),s.blue=qp(r.blue,n.blue,o),s.alpha=tt(r.alpha,n.alpha,o),uo.transform(s))};function cB(e){var t,r;return isNaN(e)&&Ac(e)&&(((t=e.match(Xf))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(CP))===null||r===void 0?void 0:r.length)||0)>0}const r2={regex:rF,countKey:"Vars",token:"${v}",parse:ot},n2={regex:CP,countKey:"Colors",token:"${c}",parse:Mt.parse},s2={regex:Xf,countKey:"Numbers",token:"${n}",parse:zo.parse};function Wp(e,{regex:t,countKey:r,token:n,parse:s}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(s)))}function Gd(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Wp(r,r2),Wp(r,n2),Wp(r,s2),r}function o2(e){return Gd(e).values}function i2(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Gd(e),o=t.length;return a=>{let l=s;for(let c=0;c<o;c++)c<n?l=l.replace(r2.token,a[c]):c<n+r?l=l.replace(n2.token,Mt.transform(a[c])):l=l.replace(s2.token,jl(a[c]));return l}}const uB=e=>typeof e=="number"?0:e;function dB(e){const t=o2(e);return i2(e)(t.map(uB))}const Os={test:cB,parse:o2,createTransformer:i2,getAnimatableNone:dB},a2=(e,t)=>r=>`${r>0?t:e}`;function l2(e,t){return typeof e=="number"?r=>tt(e,t,r):Mt.test(e)?t2(e,t):e.startsWith("var(")?a2(e,t):u2(e,t)}const c2=(e,t)=>{const r=[...e],n=r.length,s=e.map((o,a)=>l2(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=s[a](o);return r}},fB=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=l2(e[s],t[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}},u2=(e,t)=>{const r=Os.createTransformer(t),n=Gd(e),s=Gd(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Ns(c2(n.values,s.values),r):a2(e,t)},ec=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Ej=(e,t)=>r=>tt(e,t,r);function hB(e){return typeof e=="number"?Ej:typeof e=="string"?Mt.test(e)?t2:u2:Array.isArray(e)?c2:typeof e=="object"?fB:Ej}function pB(e,t,r){const n=[],s=r||hB(e[0]),o=e.length-1;for(let a=0;a<o;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||ot:t;l=Ns(c,l)}n.push(l)}return n}function d2(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const o=e.length;if(Py(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=pB(t,n,s),l=a.length,c=u=>{let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const d=ec(e[f],e[f+1],u);return a[f](d)};return r?u=>c(Is(e[0],e[o-1],u)):c}function mB(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=ec(0,t,n);e.push(tt(r,1,s))}}function gB(e){const t=[0];return mB(t,e.length-1),t}function vB(e,t){return e.map(r=>r*t)}function xB(e,t){return e.map(()=>t||YP).splice(0,e.length-1)}function Kd({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=ZF(n)?n.map(Sj):Sj(n),o={done:!1,value:t[0]},a=vB(r&&r.length===t.length?r:gB(t),e),l=d2(a,t,{ease:Array.isArray(s)?s:xB(t,s)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function f2(e,t){return t?e*(1e3/t):0}const yB=5;function h2(e,t,r){const n=Math.max(t-yB,0);return f2(r-e(n),t-n)}const Hp=.001,bB=.01,Cj=10,wB=.05,jB=1;function _B({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,o;qF(e<=Es(Cj));let a=1-t;a=Is(wB,jB,a),e=Is(bB,Cj,Fn(e)),a<1?(s=u=>{const f=u*a,d=f*e,h=f-r,m=av(u,a),g=Math.exp(-d);return Hp-h/m*g},o=u=>{const d=u*a*e,h=d*r+r,m=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-d),v=av(Math.pow(u,2),a);return(-s(u)+Hp>0?-1:1)*((h-m)*g)/v}):(s=u=>{const f=Math.exp(-u*e),d=(u-r)*e+1;return-Hp+f*d},o=u=>{const f=Math.exp(-u*e),d=(r-u)*(e*e);return f*d});const l=5/e,c=NB(s,o,l);if(e=Es(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const SB=12;function NB(e,t,r){let n=r;for(let s=1;s<SB;s++)n=n-e(n)/t(n);return n}function av(e,t){return e*Math.sqrt(1-t*t)}const EB=["duration","bounce"],CB=["stiffness","damping","mass"];function Pj(e,t){return t.some(r=>e[r]!==void 0)}function PB(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Pj(e,CB)&&Pj(e,EB)){const r=_B(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function p2({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],o=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:h}=PB({...n,velocity:-Fn(n.velocity||0)}),m=d||0,g=c/(2*Math.sqrt(l*u)),v=o-s,x=Fn(Math.sqrt(l/u)),b=Math.abs(v)<5;r||(r=b?.01:2),t||(t=b?.005:.5);let y;if(g<1){const w=av(x,g);y=j=>{const _=Math.exp(-g*x*j);return o-_*((m+g*x*v)/w*Math.sin(w*j)+v*Math.cos(w*j))}}else if(g===1)y=w=>o-Math.exp(-x*w)*(v+(m+x*v)*w);else{const w=x*Math.sqrt(g*g-1);y=j=>{const _=Math.exp(-g*x*j),S=Math.min(w*j,300);return o-_*((m+g*x*v)*Math.sinh(S)+w*v*Math.cosh(S))/w}}return{calculatedDuration:h&&f||null,next:w=>{const j=y(w);if(h)a.done=w>=f;else{let _=m;w!==0&&(g<1?_=h2(y,w,j):_=0);const S=Math.abs(_)<=r,N=Math.abs(o-j)<=t;a.done=S&&N}return a.value=a.done?o:j,a}}}function Tj({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:f}){const d=e[0],h={done:!1,value:d},m=E=>l!==void 0&&E<l||c!==void 0&&E>c,g=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let v=r*t;const x=d+v,b=a===void 0?x:a(x);b!==x&&(v=b-d);const y=E=>-v*Math.exp(-E/n),w=E=>b+y(E),j=E=>{const C=y(E),k=w(E);h.done=Math.abs(C)<=u,h.value=h.done?b:k};let _,S;const N=E=>{m(h.value)&&(_=E,S=p2({keyframes:[h.value,g(h.value)],velocity:h2(w,E,h.value),damping:s,stiffness:o,restDelta:u,restSpeed:f}))};return N(0),{calculatedDuration:null,next:E=>{let C=!1;return!S&&_===void 0&&(C=!0,j(E),N(E)),_!==void 0&&E>_?S.next(E-_):(!C&&j(E),h)}}}const TB=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Ue.update(t,!0),stop:()=>Hn(t),now:()=>kt.isProcessing?kt.timestamp:performance.now()}},kj=2e4;function Aj(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<kj;)t+=r,n=e.next(t);return t>=kj?1/0:t}const kB={decay:Tj,inertia:Tj,tween:Kd,keyframes:Kd,spring:p2};function Yd({autoplay:e=!0,delay:t=0,driver:r=TB,keyframes:n,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:f,onUpdate:d,...h}){let m=1,g=!1,v,x;const b=()=>{x=new Promise(L=>{v=L})};b();let y;const w=kB[s]||Kd;let j;w!==Kd&&typeof n[0]!="number"&&(j=d2([0,100],n,{clamp:!1}),n=[0,100]);const _=w({...h,keyframes:n});let S;l==="mirror"&&(S=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let N="idle",E=null,C=null,k=null;_.calculatedDuration===null&&o&&(_.calculatedDuration=Aj(_));const{calculatedDuration:I}=_;let O=1/0,M=1/0;I!==null&&(O=I+a,M=O*(o+1)-a);let D=0;const z=L=>{if(C===null)return;m>0&&(C=Math.min(C,L)),m<0&&(C=Math.min(L-M/m,C)),E!==null?D=E:D=Math.round(L-C)*m;const W=D-t*(m>=0?1:-1),V=m>=0?W<0:W>M;D=Math.max(W,0),N==="finished"&&E===null&&(D=M);let re=D,ve=_;if(o){const Y=Math.min(D,M)/O;let U=Math.floor(Y),ee=Y%1;!ee&&Y>=1&&(ee=1),ee===1&&U--,U=Math.min(U,o+1),!!(U%2)&&(l==="reverse"?(ee=1-ee,a&&(ee-=a/O)):l==="mirror"&&(ve=S)),re=Is(0,1,ee)*O}const se=V?{done:!1,value:n[0]}:ve.next(re);j&&(se.value=j(se.value));let{done:Z}=se;!V&&I!==null&&(Z=m>=0?D>=M:D<=0);const ue=E===null&&(N==="finished"||N==="running"&&Z);return d&&d(se.value),ue&&A(),se},B=()=>{y&&y.stop(),y=void 0},q=()=>{N="idle",B(),v(),b(),C=k=null},A=()=>{N="finished",f&&f(),B(),v()},R=()=>{if(g)return;y||(y=r(z));const L=y.now();c&&c(),E!==null?C=L-E:(!C||N==="finished")&&(C=L),N==="finished"&&b(),k=C,E=null,N="running",y.start()};e&&R();const $={then(L,W){return x.then(L,W)},get time(){return Fn(D)},set time(L){L=Es(L),D=L,E!==null||!y||m===0?E=L:C=y.now()-L/m},get duration(){const L=_.calculatedDuration===null?Aj(_):_.calculatedDuration;return Fn(L)},get speed(){return m},set speed(L){L===m||!y||(m=L,$.time=Fn(D))},get state(){return N},play:R,pause:()=>{N="paused",E=D},stop:()=>{g=!0,N!=="idle"&&(N="idle",u&&u(),q())},cancel:()=>{k!==null&&z(k),q()},complete:()=>{N="finished"},sample:L=>(C=0,z(L))};return $}function AB(e){let t;return()=>(t===void 0&&(t=e()),t)}const RB=AB(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IB=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wu=10,OB=2e4,DB=(e,t)=>t.type==="spring"||e==="backgroundColor"||!WP(t.ease);function $B(e,t,{onUpdate:r,onComplete:n,...s}){if(!(RB()&&IB.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const f=()=>{c=new Promise(w=>{l=w})};f();let{keyframes:d,duration:h=300,ease:m,times:g}=s;if(DB(t,s)){const w=Yd({...s,repeat:0,delay:0});let j={done:!1,value:d[0]};const _=[];let S=0;for(;!j.done&&S<OB;)j=w.sample(S),_.push(j.value),S+=wu;g=void 0,d=_,h=S-wu,m="linear"}const v=HF(e.owner.current,t,d,{...s,duration:h,ease:m,times:g}),x=()=>{u=!1,v.cancel()},b=()=>{u=!0,Ue.update(x),l(),f()};return v.onfinish=()=>{u||(e.set(GF(d,s)),n&&n(),b())},{then(w,j){return c.then(w,j)},attachTimeline(w){return v.timeline=w,v.onfinish=null,ot},get time(){return Fn(v.currentTime||0)},set time(w){v.currentTime=Es(w)},get speed(){return v.playbackRate},set speed(w){v.playbackRate=w},get duration(){return Fn(h)},play:()=>{a||(v.play(),Hn(x))},pause:()=>v.pause(),stop:()=>{if(a=!0,v.playState==="idle")return;const{currentTime:w}=v;if(w){const j=Yd({...s,autoplay:!1});e.setWithVelocity(j.sample(w-wu).value,j.sample(w).value,wu)}b()},complete:()=>{u||v.finish()},cancel:b}}function MB({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:ot,pause:ot,stop:ot,then:o=>(o(),Promise.resolve()),cancel:ot,complete:ot});return t?Yd({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const LB={type:"spring",stiffness:500,damping:25,restSpeed:10},FB=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BB={type:"keyframes",duration:.8},zB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UB=(e,{keyframes:t})=>t.length>2?BB:Bo.has(e)?e.startsWith("scale")?FB(t[1]):LB:zB,lv=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Os.test(t)||t==="0")&&!t.startsWith("url(")),VB=new Set(["brightness","contrast","saturate","opacity"]);function qB(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Xf)||[];if(!n)return e;const s=r.replace(n,"");let o=VB.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+s+")"}const WB=/([a-z-]*)\(.*?\)/g,cv={...Os,getAnimatableNone:e=>{const t=e.match(WB);return t?t.map(qB).join(" "):e}},HB={...PP,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:cv,WebkitFilter:cv},Ry=e=>HB[e];function m2(e,t){let r=Ry(e);return r!==cv&&(r=Os),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const g2=e=>/^0[^.\s]+$/.test(e);function GB(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||g2(e)}function KB(e,t,r,n){const s=lv(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),GB(o[u])&&c.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(l=o[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const f=c[u];o[f]=m2(t,l)}return o}function YB({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}function Iy(e,t){return e[t]||e.default||e}const JB={skipAnimations:!1},Oy=(e,t,r,n={})=>s=>{const o=Iy(n,e)||{},a=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Es(a);const c=KB(t,e,r,o),u=c[0],f=c[c.length-1],d=lv(e,u),h=lv(e,f);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(YB(o)||(m={...m,...UB(e,m)}),m.duration&&(m.duration=Es(m.duration)),m.repeatDelay&&(m.repeatDelay=Es(m.repeatDelay)),!d||!h||WF.current||o.type===!1||JB.skipAnimations)return MB(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=$B(t,e,m);if(g)return g}return Yd(m)};function Jd(e){return!!(tr(e)&&e.add)}const v2=e=>/^\-?\d*\.?\d+$/.test(e);function Dy(e,t){e.indexOf(t)===-1&&e.push(t)}function $y(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class My{constructor(){this.subscriptions=[]}add(t){return Dy(this.subscriptions,t),()=>$y(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const XB=e=>!isNaN(parseFloat(e));class QB{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=kt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ue.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ue.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=XB(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new My);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?f2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xi(e,t){return new QB(e,t)}const x2=e=>t=>t.test(e),ZB={test:e=>e==="auto",parse:e=>e},y2=[zo,we,yn,ns,iF,oF,ZB],Wa=e=>y2.find(x2(e)),e8=[...y2,Mt,Os],t8=e=>e8.find(x2(e));function r8(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Xi(r))}function n8(e,t){const r=Zf(e,t);let{transitionEnd:n={},transition:s={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const l=bF(o[a]);r8(e,a,l)}}function s8(e,t,r){var n,s;const o=Object.keys(t).filter(l=>!e.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],u=t[c];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),f!=null&&(typeof f=="string"&&(v2(f)||g2(f))?f=parseFloat(f):!t8(f)&&Os.test(u)&&(f=m2(c,u)),e.addValue(c,Xi(f,{owner:e})),r[c]===void 0&&(r[c]=f),f!==null&&e.setBaseTarget(c,f))}}function o8(e,t){return t?(t[e]||t.default||t).from:void 0}function i8(e,t,r){const n={};for(const s in e){const o=o8(s,t);if(o!==void 0)n[s]=o;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function a8({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function l8(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function b2(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(o=n);const u=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d),m=l[d];if(!h||m===void 0||f&&a8(f,d))continue;const g={delay:r,elapsed:0,...Iy(o||{},d)};if(window.HandoffAppearAnimations){const b=e.getProps()[wP];if(b){const y=window.HandoffAppearAnimations(b,d,h,Ue);y!==null&&(g.elapsed=y,g.isHandoff=!0)}}let v=!g.isHandoff&&!l8(h,m);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(v=!1),h.animation&&(v=!1),v)continue;h.start(Oy(d,h,m,e.shouldReduceMotion&&Bo.has(d)?{type:!1}:g));const x=h.animation;Jd(c)&&(c.add(d),x.then(()=>c.remove(d))),u.push(x)}return a&&Promise.all(u).then(()=>{a&&n8(e,a)}),u}function uv(e,t,r={}){const n=Zf(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(b2(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return c8(e,t,u+c,f,d,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function c8(e,t,r=0,n=0,s=1,o){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(u8).forEach((u,f)=>{u.notify("AnimationStart",t),a.push(uv(u,t,{...o,delay:r+c(f)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function u8(e,t){return e.sortNodePosition(t)}function d8(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(o=>uv(e,o,r));n=Promise.all(s)}else if(typeof t=="string")n=uv(e,t,r);else{const s=typeof t=="function"?Zf(e,t,r.custom):t;n=Promise.all(b2(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const f8=[...xy].reverse(),h8=xy.length;function p8(e){return t=>Promise.all(t.map(({animation:r,options:n})=>d8(e,r,n)))}function m8(e){let t=p8(e);const r=v8();let n=!0;const s=(c,u)=>{const f=Zf(e,u);if(f){const{transition:d,transitionEnd:h,...m}=f;c={...c,...m,...h}}return c};function o(c){t=c(e)}function a(c,u){const f=e.getProps(),d=e.getVariantContext(!0)||{},h=[],m=new Set;let g={},v=1/0;for(let b=0;b<h8;b++){const y=f8[b],w=r[y],j=f[y]!==void 0?f[y]:d[y],_=Ql(j),S=y===u?w.isActive:null;S===!1&&(v=b);let N=j===d[y]&&j!==f[y]&&_;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...g},!w.isActive&&S===null||!j&&!w.prevProp||Yf(j)||typeof j=="boolean")continue;let C=g8(w.prevProp,j)||y===u&&w.isActive&&!N&&_||b>v&&_,k=!1;const I=Array.isArray(j)?j:[j];let O=I.reduce(s,{});S===!1&&(O={});const{prevResolvedValues:M={}}=w,D={...M,...O},z=B=>{C=!0,m.has(B)&&(k=!0,m.delete(B)),w.needsAnimating[B]=!0};for(const B in D){const q=O[B],A=M[B];if(g.hasOwnProperty(B))continue;let R=!1;Hd(q)&&Hd(A)?R=!VP(q,A):R=q!==A,R?q!==void 0?z(B):m.add(B):q!==void 0&&m.has(B)?z(B):w.protectedKeys[B]=!0}w.prevProp=j,w.prevResolvedValues=O,w.isActive&&(g={...g,...O}),n&&e.blockInitialAnimation&&(C=!1),C&&(!N||k)&&h.push(...I.map(B=>({animation:B,options:{type:y,...c}})))}if(m.size){const b={};m.forEach(y=>{const w=e.getBaseTarget(y);w!==void 0&&(b[y]=w)}),h.push({animation:b})}let x=!!h.length;return n&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(h):Promise.resolve()}function l(c,u,f){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=a(f,c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>r}}function g8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!VP(t,e):!1}function Ws(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function v8(){return{animate:Ws(!0),whileInView:Ws(),whileHover:Ws(),whileTap:Ws(),whileDrag:Ws(),whileFocus:Ws(),exit:Ws()}}class x8 extends zs{constructor(t){super(t),t.animationState||(t.animationState=m8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yf(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let y8=0;class b8 extends zs{constructor(){super(...arguments),this.id=y8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const w8={animation:{Feature:x8},exit:{Feature:b8}},Rj=(e,t)=>Math.abs(e-t);function j8(e,t){const r=Rj(e.x,t.x),n=Rj(e.y,t.y);return Math.sqrt(r**2+n**2)}class w2{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Kp(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=j8(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=d,{timestamp:v}=kt;this.history.push({...g,timestamp:v});const{onStart:x,onMove:b}=this.handlers;h||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Gp(h,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Kp(d.type==="pointercancel"?this.lastMoveEventInfo:Gp(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),g&&g(d,x)},!LP(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=Qf(t),l=Gp(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=kt;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=r;f&&f(t,Kp(l,this.history)),this.removeListeners=Ns(Ln(this.contextWindow,"pointermove",this.handlePointerMove),Ln(this.contextWindow,"pointerup",this.handlePointerUp),Ln(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hn(this.updatePoint)}}function Gp(e,t){return t?{point:t(e.point)}:e}function Ij(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Kp({point:e},t){return{point:e,delta:Ij(e,j2(t)),offset:Ij(e,_8(t)),velocity:S8(t,.1)}}function _8(e){return e[0]}function j2(e){return e[e.length-1]}function S8(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=j2(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Es(t)));)r--;if(!n)return{x:0,y:0};const o=Fn(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function vr(e){return e.max-e.min}function dv(e,t=0,r=.01){return Math.abs(e-t)<=r}function Oj(e,t,r,n=.5){e.origin=n,e.originPoint=tt(t.min,t.max,e.origin),e.scale=vr(r)/vr(t),(dv(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=tt(r.min,r.max,e.origin)-e.originPoint,(dv(e.translate)||isNaN(e.translate))&&(e.translate=0)}function _l(e,t,r,n){Oj(e.x,t.x,r.x,n?n.originX:void 0),Oj(e.y,t.y,r.y,n?n.originY:void 0)}function Dj(e,t,r){e.min=r.min+t.min,e.max=e.min+vr(t)}function N8(e,t,r){Dj(e.x,t.x,r.x),Dj(e.y,t.y,r.y)}function $j(e,t,r){e.min=t.min-r.min,e.max=e.min+vr(t)}function Sl(e,t,r){$j(e.x,t.x,r.x),$j(e.y,t.y,r.y)}function E8(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?tt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?tt(r,e,n.max):Math.min(e,r)),e}function Mj(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function C8(e,{top:t,left:r,bottom:n,right:s}){return{x:Mj(e.x,r,s),y:Mj(e.y,t,n)}}function Lj(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function P8(e,t){return{x:Lj(e.x,t.x),y:Lj(e.y,t.y)}}function T8(e,t){let r=.5;const n=vr(e),s=vr(t);return s>n?r=ec(t.min,t.max-n,e.min):n>s&&(r=ec(e.min,e.max-s,t.min)),Is(0,1,r)}function k8(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const fv=.35;function A8(e=fv){return e===!1?e=0:e===!0&&(e=fv),{x:Fj(e,"left","right"),y:Fj(e,"top","bottom")}}function Fj(e,t,r){return{min:Bj(e,t),max:Bj(e,r)}}function Bj(e,t){return typeof e=="number"?e:e[t]||0}const zj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ni=()=>({x:zj(),y:zj()}),Uj=()=>({min:0,max:0}),at=()=>({x:Uj(),y:Uj()});function Nr(e){return[e("x"),e("y")]}function _2({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function R8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function I8(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Yp(e){return e===void 0||e===1}function hv({scale:e,scaleX:t,scaleY:r}){return!Yp(e)||!Yp(t)||!Yp(r)}function Xs(e){return hv(e)||S2(e)||e.z||e.rotate||e.rotateX||e.rotateY}function S2(e){return Vj(e.x)||Vj(e.y)}function Vj(e){return e&&e!=="0%"}function Xd(e,t,r){const n=e-r,s=t*n;return r+s}function qj(e,t,r,n,s){return s!==void 0&&(e=Xd(e,s,n)),Xd(e,r,n)+t}function pv(e,t=0,r=1,n,s){e.min=qj(e.min,t,r,n,s),e.max=qj(e.max,t,r,n,s)}function N2(e,{x:t,y:r}){pv(e.x,t.translate,t.scale,t.originPoint),pv(e.y,r.translate,r.scale,r.originPoint)}function O8(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=r[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ei(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,N2(e,a)),n&&Xs(o.latestValues)&&Ei(e,o.latestValues))}t.x=Wj(t.x),t.y=Wj(t.y)}function Wj(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ls(e,t){e.min=e.min+t,e.max=e.max+t}function Hj(e,t,[r,n,s]){const o=t[s]!==void 0?t[s]:.5,a=tt(e.min,e.max,o);pv(e,t[r],t[n],a,t.scale)}const D8=["x","scaleX","originX"],$8=["y","scaleY","originY"];function Ei(e,t){Hj(e.x,t,D8),Hj(e.y,t,$8)}function E2(e,t){return _2(I8(e.getBoundingClientRect(),t))}function M8(e,t,r){const n=E2(e,r),{scroll:s}=t;return s&&(ls(n.x,s.offset.x),ls(n.y,s.offset.y)),n}const C2=({current:e})=>e?e.ownerDocument.defaultView:null,L8=new WeakMap;class F8{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Qf(f,"page").point)},o=(f,d)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=BP(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nr(x=>{let b=this.getAxisMotionValue(x).get()||0;if(yn.test(b)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[x];w&&(b=vr(w)*(parseFloat(b)/100))}}this.originPoint[x]=b}),g&&Ue.update(()=>g(f,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=B8(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),v&&v(f,d)},l=(f,d)=>this.stop(f,d),c=()=>Nr(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new w2(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:C2(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ue.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ju(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=E8(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&_i(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=C8(s.layoutBox,r):this.constraints=!1,this.elastic=A8(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Nr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=k8(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!_i(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=M8(n,s.root,this.visualElement.getTransformPagePoint());let a=P8(s.layout.layoutBox,o);if(r){const l=r(R8(a));this.hasMutatedConstraints=!!l,l&&(a=_2(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Nr(f=>{if(!ju(f,r,this.currentDirection))return;let d=c&&c[f]||{};a&&(d={min:0,max:0});const h=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:n?t[f]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Oy(t,n,0,r))}stopAnimation(){Nr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Nr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Nr(r=>{const{drag:n}=this.getProps();if(!ju(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];o.set(t[r]-tt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!_i(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Nr(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=T8({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Nr(a=>{if(!ju(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(tt(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;L8.set(this.visualElement,this);const t=this.visualElement.current,r=Ln(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();_i(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=On(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Nr(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=fv,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function ju(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function B8(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class z8 extends zs{constructor(t){super(t),this.removeGroupControls=ot,this.removeListeners=ot,this.controls=new F8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gj=e=>(t,r)=>{e&&Ue.update(()=>e(t,r))};class U8 extends zs{constructor(){super(...arguments),this.removePointerDownListener=ot}onPointerDown(t){this.session=new w2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:C2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Gj(t),onStart:Gj(r),onMove:n,onEnd:(o,a)=>{delete this.session,s&&Ue.update(()=>s(o,a))}}}mount(){this.removePointerDownListener=Ln(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function V8(){const e=p.useContext(Gf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=p.useId();return p.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const id={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kj(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ha={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(we.test(e))e=parseFloat(e);else return e;const r=Kj(e,t.target.x),n=Kj(e,t.target.y);return`${r}% ${n}%`}},q8={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Os.parse(e);if(s.length>5)return n;const o=Os.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=tt(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};class W8 extends J.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=t;Q3(H8),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),id.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Ue.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function P2(e){const[t,r]=V8(),n=p.useContext(by);return J.createElement(W8,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(_P),isPresent:t,safeToRemove:r})}const H8={borderRadius:{...Ha,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ha,borderTopRightRadius:Ha,borderBottomLeftRadius:Ha,borderBottomRightRadius:Ha,boxShadow:q8},T2=["TopLeft","TopRight","BottomLeft","BottomRight"],G8=T2.length,Yj=e=>typeof e=="string"?parseFloat(e):e,Jj=e=>typeof e=="number"||we.test(e);function K8(e,t,r,n,s,o){s?(e.opacity=tt(0,r.opacity!==void 0?r.opacity:1,Y8(n)),e.opacityExit=tt(t.opacity!==void 0?t.opacity:1,0,J8(n))):o&&(e.opacity=tt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<G8;a++){const l=`border${T2[a]}Radius`;let c=Xj(t,l),u=Xj(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Jj(c)===Jj(u)?(e[l]=Math.max(tt(Yj(c),Yj(u),n),0),(yn.test(u)||yn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=tt(t.rotate||0,r.rotate||0,n))}function Xj(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Y8=k2(0,.5,QP),J8=k2(.5,.95,ot);function k2(e,t,r){return n=>n<e?0:n>t?1:r(ec(e,t,n))}function Qj(e,t){e.min=t.min,e.max=t.max}function _r(e,t){Qj(e.x,t.x),Qj(e.y,t.y)}function Zj(e,t,r,n,s){return e-=t,e=Xd(e,1/r,n),s!==void 0&&(e=Xd(e,1/s,n)),e}function X8(e,t=0,r=1,n=.5,s,o=e,a=e){if(yn.test(t)&&(t=parseFloat(t),t=tt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=tt(o.min,o.max,n);e===o&&(l-=t),e.min=Zj(e.min,t,r,l,s),e.max=Zj(e.max,t,r,l,s)}function e_(e,t,[r,n,s],o,a){X8(e,t[r],t[n],t[s],t.scale,o,a)}const Q8=["x","scaleX","originX"],Z8=["y","scaleY","originY"];function t_(e,t,r,n){e_(e.x,t,Q8,r?r.x:void 0,n?n.x:void 0),e_(e.y,t,Z8,r?r.y:void 0,n?n.y:void 0)}function r_(e){return e.translate===0&&e.scale===1}function A2(e){return r_(e.x)&&r_(e.y)}function ez(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function R2(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function n_(e){return vr(e.x)/vr(e.y)}class tz{constructor(){this.members=[]}add(t){Dy(this.members,t),t.scheduleRender()}remove(t){if($y(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s_(e,t,r){let n="";const s=e.x.translate/t.x,o=e.y.translate/t.y;if((s||o)&&(n=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:f}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),f&&(n+=`rotateY(${f}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const rz=(e,t)=>e.depth-t.depth;class nz{constructor(){this.children=[],this.isDirty=!1}add(t){Dy(this.children,t),this.isDirty=!0}remove(t){$y(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(rz),this.isDirty=!1,this.children.forEach(t)}}function sz(e,t){const r=performance.now(),n=({timestamp:s})=>{const o=s-r;o>=t&&(Hn(n),e(o-t))};return Ue.read(n,!0),()=>Hn(n)}function oz(e){window.MotionDebug&&window.MotionDebug.record(e)}function iz(e){return e instanceof SVGElement&&e.tagName!=="svg"}function az(e,t,r){const n=tr(e)?e:Xi(e);return n.start(Oy("",n,t,r)),n.animation}const o_=["","X","Y","Z"],lz={visibility:"hidden"},i_=1e3;let cz=0;const Qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function I2({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=cz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qs.totalNodes=Qs.resolvedTargetDeltas=Qs.recalculatedProjection=0,this.nodes.forEach(fz),this.nodes.forEach(vz),this.nodes.forEach(xz),this.nodes.forEach(hz),oz(Qs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new nz)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new My),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iz(a),this.instance=a;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=sz(h,250),id.hasAnimatedSinceResize&&(id.hasAnimatedSinceResize=!1,this.nodes.forEach(l_))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||_z,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=f.getProps(),y=!this.targetLayout||!R2(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const j={...Iy(v,"layout"),onPlay:x,onComplete:b};(f.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else h||l_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Hn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a_);return}this.isUpdating||this.nodes.forEach(mz),this.isUpdating=!1,this.nodes.forEach(gz),this.nodes.forEach(uz),this.nodes.forEach(dz),this.clearAllSnapshots();const l=performance.now();kt.delta=Is(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,Fp.update.process(kt),Fp.preRender.process(kt),Fp.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pz),this.sharedNodes.forEach(bz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!A2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(l||Xs(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Sz(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return at();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(ls(l.x,c.offset.x),ls(l.y,c.offset.y)),l}removeElementScroll(a){const l=at();_r(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){_r(l,a);const{scroll:h}=this.root;h&&(ls(l.x,-h.offset.x),ls(l.y,-h.offset.y))}ls(l.x,f.offset.x),ls(l.y,f.offset.y)}}return l}applyTransform(a,l=!1){const c=at();_r(c,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ei(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Xs(f.latestValues)&&Ei(c,f.latestValues)}return Xs(this.latestValues)&&Ei(c,this.latestValues),c}removeTransform(a){const l=at();_r(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Xs(u.latestValues))continue;hv(u.latestValues)&&u.updateSnapshot();const f=at(),d=u.measurePageBox();_r(f,d),t_(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Xs(this.latestValues)&&t_(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Sl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),N8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),N2(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Sl(this.relativeTargetOrigin,this.target,m.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hv(this.parent.latestValues)||S2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;_r(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;O8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Ni(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ni(),this.projectionDeltaWithTransform=Ni());const v=this.projectionTransform;_l(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=s_(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},d=Ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=at(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,x=this.getStack(),b=!x||x.members.length<=1,y=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(jz));this.animationProgress=0;let w;this.mixTargetDelta=j=>{const _=j/1e3;c_(d.x,a.x,_),c_(d.y,a.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sl(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wz(this.relativeTarget,this.relativeTargetOrigin,h,_),w&&ez(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=at()),_r(w,this.relativeTarget)),v&&(this.animationValues=f,K8(f,u,this.latestValues,_,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Hn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{id.hasAnimatedSinceResize=!0,this.currentAnimation=az(0,i_,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(i_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&O2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||at();const d=vr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+d;const h=vr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}_r(l,c),Ei(l,f),_l(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new tz),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let f=0;f<o_.length;f++){const d="rotate"+o_[f];c[d]&&(u[d]=c[d],a.setStaticValue(d,0))}a.render();for(const f in u)a.setStaticValue(f,u[f]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return lz;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=od(a==null?void 0:a.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=od(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Xs(this.latestValues)&&(v.transform=f?f({},""):"none",this.hasProjected=!1),v}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=s_(this.projectionDeltaWithTransform,this.treeScale,h),f&&(u.transform=f(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in qd){if(h[v]===void 0)continue;const{correct:x,applyTo:b}=qd[v],y=u.transform==="none"?h[v]:x(h[v],d);if(b){const w=b.length;for(let j=0;j<w;j++)u[b[j]]=y}else u[v]=y}return this.options.layoutId&&(u.pointerEvents=d===this?od(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(a_),this.root.sharedNodes.clear()}}}function uz(e){e.updateLayout()}function dz(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:o}=e.options,a=r.source!==e.layout.source;o==="size"?Nr(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],m=vr(h);h.min=n[d].min,h.max=h.min+m}):O2(o,r.layoutBox,n)&&Nr(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],m=vr(n[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const l=Ni();_l(l,n,r.layoutBox);const c=Ni();a?_l(c,e.applyTransform(s,!0),r.measuredBox):_l(c,n,r.layoutBox);const u=!A2(l);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=at();Sl(g,r.layoutBox,h.layoutBox);const v=at();Sl(v,n,m.layoutBox),R2(g,v)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function fz(e){Qs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hz(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pz(e){e.clearSnapshot()}function a_(e){e.clearMeasurements()}function mz(e){e.isLayoutDirty=!1}function gz(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function l_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function vz(e){e.resolveTargetDelta()}function xz(e){e.calcProjection()}function yz(e){e.resetRotation()}function bz(e){e.removeLeadSnapshot()}function c_(e,t,r){e.translate=tt(t.translate,0,r),e.scale=tt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function u_(e,t,r,n){e.min=tt(t.min,r.min,n),e.max=tt(t.max,r.max,n)}function wz(e,t,r,n){u_(e.x,t.x,r.x,n),u_(e.y,t.y,r.y,n)}function jz(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _z={duration:.45,ease:[.4,0,.1,1]},d_=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),f_=d_("applewebkit/")&&!d_("chrome/")?Math.round:ot;function h_(e){e.min=f_(e.min),e.max=f_(e.max)}function Sz(e){h_(e.x),h_(e.y)}function O2(e,t,r){return e==="position"||e==="preserve-aspect"&&!dv(n_(t),n_(r),.2)}const Nz=I2({attachResizeListener:(e,t)=>On(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jp={current:void 0},D2=I2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Jp.current){const e=new Nz({});e.mount(window),e.setOptions({layoutScroll:!0}),Jp.current=e}return Jp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Ez={pan:{Feature:U8},drag:{Feature:z8,ProjectionNode:D2,MeasureLayout:P2}},Cz=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Pz(e){const t=Cz.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function mv(e,t,r=1){const[n,s]=Pz(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return v2(a)?parseFloat(a):a}else return sv(s)?mv(s,t,r+1):s}function Tz(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const o=s.get();if(!sv(o))return;const a=mv(o,n);a&&s.set(a)});for(const s in t){const o=t[s];if(!sv(o))continue;const a=mv(o,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=o))}return{target:t,transitionEnd:r}}const kz=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),$2=e=>kz.has(e),Az=e=>Object.keys(e).some($2),p_=e=>e===zo||e===we,m_=(e,t)=>parseFloat(e.split(", ")[t]),g_=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return m_(s[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?m_(o[1],e):0}},Rz=new Set(["x","y","z"]),Iz=kc.filter(e=>!Rz.has(e));function Oz(e){const t=[];return Iz.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Qi={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:g_(4,13),y:g_(5,14)};Qi.translateX=Qi.x;Qi.translateY=Qi.y;const Dz=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Qi[u](n,o)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const f=t.getValue(u);f&&f.jump(l[u]),e[u]=Qi[u](c,o)}),e},$z=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter($2);let o=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let f=r[c],d=Wa(f);const h=t[c];let m;if(Hd(h)){const g=h.length,v=h[0]===null?1:0;f=h[v],d=Wa(f);for(let x=v;x<g&&h[x]!==null;x++)m?Py(Wa(h[x])===m):m=Wa(h[x])}else m=Wa(h);if(d!==m)if(p_(d)&&p_(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&m===we&&(t[c]=h.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(f===0||h===0)?f===0?u.set(m.transform(f)):t[c]=d.transform(h):(a||(o=Oz(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=Dz(t,e,l);return o.length&&o.forEach(([f,d])=>{e.getValue(f).set(d)}),e.render(),Kf&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function Mz(e,t,r,n){return Az(t)?$z(e,t,r,n):{target:t,transitionEnd:n}}const Lz=(e,t,r,n)=>{const s=Tz(e,t,n);return t=s.target,n=s.transitionEnd,Mz(e,t,r,n)},gv={current:null},M2={current:!1};function Fz(){if(M2.current=!0,!!Kf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gv.current=e.matches;e.addListener(t),t()}else gv.current=!1}function Bz(e,t,r){const{willChange:n}=t;for(const s in t){const o=t[s],a=r[s];if(tr(o))e.addValue(s,o),Jd(n)&&n.add(s);else if(tr(a))e.addValue(s,Xi(o,{owner:e})),Jd(n)&&n.remove(s);else if(a!==o)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(s);e.addValue(s,Xi(l!==void 0?l:o,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const v_=new WeakMap,L2=Object.keys(Zl),zz=L2.length,x_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Uz=yy.length;class Vz{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ue.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=Jf(r),this.isVariantNode=jP(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{});for(const d in f){const h=f[d];l[d]!==void 0&&tr(h)&&(h.set(l[d],!1),Jd(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,v_.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),M2.current||Fz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){v_.delete(this.current),this.projection&&this.projection.unmount(),Hn(this.notifyUpdate),Hn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Bo.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ue.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,o){let a,l;for(let c=0;c<zz;c++){const u=L2[c],{isEnabled:f,Feature:d,ProjectionNode:h,MeasureLayout:m}=Zl[u];h&&(a=h),f(r)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:f,dragConstraints:d,layoutScroll:h,layoutRoot:m}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!f||d&&_i(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<x_.length;n++){const s=x_[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Bz(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Uz;n++){const s=yy[n],o=this.props[s];(Ql(o)||o===!1)&&(r[s]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Xi(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=Cy(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!tr(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new My),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class F2 extends Vz{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},o){let a=i8(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),o){s8(this,n,a);const l=Lz(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function qz(e){return window.getComputedStyle(e)}class Wz extends F2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Bo.has(r)){const n=Ry(r);return n&&n.default||0}else{const n=qz(t),s=(EP(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return E2(t,r)}build(t,r,n,s){jy(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Ey(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;tr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){RP(t,r,n,s)}}class Hz extends F2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Bo.has(r)){const n=Ry(r);return n&&n.default||0}return r=IP.has(r)?r:vy(r),t.getAttribute(r)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(t,r){return DP(t,r)}build(t,r,n,s){Sy(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){OP(t,r,n,s)}mount(t){this.isSVGTag=Ny(t.tagName),super.mount(t)}}const Gz=(e,t)=>wy(e)?new Hz(t,{enableHardwareAcceleration:!1}):new Wz(t,{enableHardwareAcceleration:!0}),Kz={layout:{ProjectionNode:D2,MeasureLayout:P2}},Yz={...w8,...zF,...Ez,...Kz},ae=J3((e,t)=>PF(e,t,Yz,Gz));function B2(){const e=p.useRef(!1);return gy(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Jz(){const e=B2(),[t,r]=p.useState(0),n=p.useCallback(()=>{e.current&&r(t+1)},[t]);return[p.useCallback(()=>Ue.postRender(n),[n]),t]}class Xz extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Qz({children:e,isPresent:t}){const r=p.useId(),n=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(t||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.createElement(Xz,{isPresent:t,childRef:n,sizeRef:s},p.cloneElement(e,{ref:n}))}const Xp=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=$P(Zz),c=p.useId(),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:f=>{l.set(f,!0);for(const d of l.values())if(!d)return;n&&n()},register:f=>(l.set(f,!1),()=>l.delete(f))}),o?void 0:[r]);return p.useMemo(()=>{l.forEach((f,d)=>l.set(d,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=p.createElement(Qz,{isPresent:r},e)),p.createElement(Gf.Provider,{value:u},e)};function Zz(){return new Map}function eU(e){return p.useEffect(()=>()=>e(),[])}const Zs=e=>e.key||"";function tU(e,t){e.forEach(r=>{const n=Zs(r);t.set(n,r)})}function rU(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const Co=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=p.useContext(by).forceRender||Jz()[0],c=B2(),u=rU(e);let f=u;const d=p.useRef(new Map).current,h=p.useRef(f),m=p.useRef(new Map).current,g=p.useRef(!0);if(gy(()=>{g.current=!1,tU(u,m),h.current=f}),eU(()=>{g.current=!0,m.clear(),d.clear()}),g.current)return p.createElement(p.Fragment,null,f.map(y=>p.createElement(Xp,{key:Zs(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:a},y)));f=[...f];const v=h.current.map(Zs),x=u.map(Zs),b=v.length;for(let y=0;y<b;y++){const w=v[y];x.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return a==="wait"&&d.size&&(f=[]),d.forEach((y,w)=>{if(x.indexOf(w)!==-1)return;const j=m.get(w);if(!j)return;const _=v.indexOf(w);let S=y;if(!S){const N=()=>{d.delete(w);const E=Array.from(m.keys()).filter(C=>!x.includes(C));if(E.forEach(C=>m.delete(C)),h.current=u.filter(C=>{const k=Zs(C);return k===w||E.includes(k)}),!d.size){if(c.current===!1)return;l(),n&&n()}};S=p.createElement(Xp,{key:Zs(j),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:o,mode:a},j),d.set(w,S)}f.splice(_,0,S)}),f=f.map(y=>{const w=y.key;return d.has(w)?y:p.createElement(Xp,{key:Zs(y),isPresent:!0,presenceAffectsLayout:o,mode:a},y)}),p.createElement(p.Fragment,null,d.size?f:f.map(y=>p.cloneElement(y)))},Ly=Bf("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=J.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?b6:"button";return i.jsx(a,{className:he(Ly({variant:t,size:r,className:e})),ref:o,...s})});H.displayName="Button";var nU=p.createContext(void 0);function z2(e){const t=p.useContext(nU);return e||t||"ltr"}var Qp=0;function Fy(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??y_()),document.body.insertAdjacentElement("beforeend",e[1]??y_()),Qp++,()=>{Qp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Qp--}},[])}function y_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Zp="focusScope.autoFocusOnMount",em="focusScope.autoFocusOnUnmount",b_={bubbles:!1,cancelable:!0},sU="FocusScope",eh=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=gr(s),f=gr(o),d=p.useRef(null),h=Fe(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:ss(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||ss(d.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&ss(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),y.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){j_.add(m);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Zp,b_);l.addEventListener(Zp,u),l.dispatchEvent(b),b.defaultPrevented||(oU(uU(U2(l)),{select:!0}),document.activeElement===v&&ss(l))}return()=>{l.removeEventListener(Zp,u),setTimeout(()=>{const b=new CustomEvent(em,b_);l.addEventListener(em,f),l.dispatchEvent(b),b.defaultPrevented||ss(v??document.body,{select:!0}),l.removeEventListener(em,f),j_.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(x&&b){const y=v.currentTarget,[w,j]=iU(y);w&&j?!v.shiftKey&&b===j?(v.preventDefault(),r&&ss(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&ss(j,{select:!0})):b===y&&v.preventDefault()}},[r,n,m.paused]);return i.jsx(Re.div,{tabIndex:-1,...a,ref:h,onKeyDown:g})});eh.displayName=sU;function oU(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ss(n,{select:t}),document.activeElement!==r)return}function iU(e){const t=U2(e),r=w_(t,e),n=w_(t.reverse(),e);return[r,n]}function U2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function w_(e,t){for(const r of e)if(!aU(r,{upTo:t}))return r}function aU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lU(e){return e instanceof HTMLInputElement&&"select"in e}function ss(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&lU(e)&&t&&e.select()}}var j_=cU();function cU(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=__(e,t),e.unshift(t)},remove(t){var r;e=__(e,t),(r=e[0])==null||r.resume()}}}function __(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function uU(e){return e.filter(t=>t.tagName!=="A")}var dU=yc[" useId ".trim().toString()]||(()=>{}),fU=0;function xo(e){const[t,r]=p.useState(dU());return qn(()=>{e||r(n=>n??String(fU++))},[e]),e||(t?`radix-${t}`:"")}const hU=["top","right","bottom","left"],Ds=Math.min,ir=Math.max,Qd=Math.round,_u=Math.floor,bn=e=>({x:e,y:e}),pU={left:"right",right:"left",bottom:"top",top:"bottom"},mU={start:"end",end:"start"};function vv(e,t,r){return ir(e,Ds(t,r))}function Gn(e,t){return typeof e=="function"?e(t):e}function Kn(e){return e.split("-")[0]}function ha(e){return e.split("-")[1]}function By(e){return e==="x"?"y":"x"}function zy(e){return e==="y"?"height":"width"}const gU=new Set(["top","bottom"]);function mn(e){return gU.has(Kn(e))?"y":"x"}function Uy(e){return By(mn(e))}function vU(e,t,r){r===void 0&&(r=!1);const n=ha(e),s=Uy(e),o=zy(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Zd(a)),[a,Zd(a)]}function xU(e){const t=Zd(e);return[xv(e),t,xv(t)]}function xv(e){return e.replace(/start|end/g,t=>mU[t])}const S_=["left","right"],N_=["right","left"],yU=["top","bottom"],bU=["bottom","top"];function wU(e,t,r){switch(e){case"top":case"bottom":return r?t?N_:S_:t?S_:N_;case"left":case"right":return t?yU:bU;default:return[]}}function jU(e,t,r,n){const s=ha(e);let o=wU(Kn(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(xv)))),o}function Zd(e){return e.replace(/left|right|bottom|top/g,t=>pU[t])}function _U(e){return{top:0,right:0,bottom:0,left:0,...e}}function V2(e){return typeof e!="number"?_U(e):{top:e,right:e,bottom:e,left:e}}function ef(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function E_(e,t,r){let{reference:n,floating:s}=e;const o=mn(t),a=Uy(t),l=zy(a),c=Kn(t),u=o==="y",f=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:f,y:n.y-s.height};break;case"bottom":m={x:f,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-s.width,y:d};break;default:m={x:n.x,y:n.y}}switch(ha(t)){case"start":m[a]-=h*(r&&u?-1:1);break;case"end":m[a]+=h*(r&&u?-1:1);break}return m}const SU=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:d}=E_(u,n,c),h=n,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:b}=l[v],{x:y,y:w,data:j,reset:_}=await b({x:f,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:e,floating:t}});f=y??f,d=w??d,m={...m,[x]:{...m[x],...j}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:f,y:d}=E_(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:s,middlewareData:m}};async function tc(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Gn(t,e),g=V2(m),x=l[h?d==="floating"?"reference":"floating":d],b=ef(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),y=d==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},_=ef(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(b.top-_.top+g.top)/j.y,bottom:(_.bottom-b.bottom+g.bottom)/j.y,left:(b.left-_.left+g.left)/j.x,right:(_.right-b.right+g.right)/j.x}}const NU=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Gn(e,t)||{};if(u==null)return{};const d=V2(f),h={x:r,y:n},m=Uy(s),g=zy(m),v=await a.getDimensions(u),x=m==="y",b=x?"top":"left",y=x?"bottom":"right",w=x?"clientHeight":"clientWidth",j=o.reference[g]+o.reference[m]-h[m]-o.floating[g],_=h[m]-o.reference[m],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=S?S[w]:0;(!N||!await(a.isElement==null?void 0:a.isElement(S)))&&(N=l.floating[w]||o.floating[g]);const E=j/2-_/2,C=N/2-v[g]/2-1,k=Ds(d[b],C),I=Ds(d[y],C),O=k,M=N-v[g]-I,D=N/2-v[g]/2+E,z=vv(O,D,M),B=!c.arrow&&ha(s)!=null&&D!==z&&o.reference[g]/2-(D<O?k:I)-v[g]/2<0,q=B?D<O?D-O:D-M:0;return{[m]:h[m]+q,data:{[m]:z,centerOffset:D-z-q,...B&&{alignmentOffset:q}},reset:B}}}),EU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=Gn(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const b=Kn(s),y=mn(l),w=Kn(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=h||(w||!v?[Zd(l)]:xU(l)),S=g!=="none";!h&&S&&_.push(...jU(l,v,g,j));const N=[l,..._],E=await tc(t,x),C=[];let k=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&C.push(E[b]),d){const D=vU(s,a,j);C.push(E[D[0]],E[D[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(D=>D<=0)){var I,O;const D=(((I=o.flip)==null?void 0:I.index)||0)+1,z=N[D];if(z&&(!(d==="alignment"?y!==mn(z):!1)||k.every(A=>mn(A.placement)===y?A.overflows[0]>0:!0)))return{data:{index:D,overflows:k},reset:{placement:z}};let B=(O=k.filter(q=>q.overflows[0]<=0).sort((q,A)=>q.overflows[1]-A.overflows[1])[0])==null?void 0:O.placement;if(!B)switch(m){case"bestFit":{var M;const q=(M=k.filter(A=>{if(S){const R=mn(A.placement);return R===y||R==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(R=>R>0).reduce((R,$)=>R+$,0)]).sort((A,R)=>A[1]-R[1])[0])==null?void 0:M[0];q&&(B=q);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function C_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function P_(e){return hU.some(t=>e[t]>=0)}const CU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Gn(e,t);switch(n){case"referenceHidden":{const o=await tc(t,{...s,elementContext:"reference"}),a=C_(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:P_(a)}}}case"escaped":{const o=await tc(t,{...s,altBoundary:!0}),a=C_(o,r.floating);return{data:{escapedOffsets:a,escaped:P_(a)}}}default:return{}}}}},q2=new Set(["left","top"]);async function PU(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=Kn(r),l=ha(r),c=mn(r)==="y",u=q2.has(a)?-1:1,f=o&&c?-1:1,d=Gn(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const TU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await PU(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},kU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:b,y}=x;return{x:b,y}}},...c}=Gn(e,t),u={x:r,y:n},f=await tc(t,c),d=mn(Kn(s)),h=By(d);let m=u[h],g=u[d];if(o){const x=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=m+f[x],w=m-f[b];m=vv(y,m,w)}if(a){const x=d==="y"?"top":"left",b=d==="y"?"bottom":"right",y=g+f[x],w=g-f[b];g=vv(y,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[d]:a}}}}}},AU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Gn(e,t),f={x:r,y:n},d=mn(s),h=By(d);let m=f[h],g=f[d];const v=Gn(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",j=o.reference[h]-o.floating[w]+x.mainAxis,_=o.reference[h]+o.reference[w]-x.mainAxis;m<j?m=j:m>_&&(m=_)}if(u){var b,y;const w=h==="y"?"width":"height",j=q2.has(Kn(s)),_=o.reference[d]-o.floating[w]+(j&&((b=a.offset)==null?void 0:b[d])||0)+(j?0:x.crossAxis),S=o.reference[d]+o.reference[w]+(j?0:((y=a.offset)==null?void 0:y[d])||0)-(j?x.crossAxis:0);g<_?g=_:g>S&&(g=S)}return{[h]:m,[d]:g}}}},RU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Gn(e,t),f=await tc(t,u),d=Kn(s),h=ha(s),m=mn(s)==="y",{width:g,height:v}=o.floating;let x,b;d==="top"||d==="bottom"?(x=d,b=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=d,x=h==="end"?"top":"bottom");const y=v-f.top-f.bottom,w=g-f.left-f.right,j=Ds(v-f[x],y),_=Ds(g-f[b],w),S=!t.middlewareData.shift;let N=j,E=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=y),S&&!h){const k=ir(f.left,0),I=ir(f.right,0),O=ir(f.top,0),M=ir(f.bottom,0);m?E=g-2*(k!==0||I!==0?k+I:ir(f.left,f.right)):N=v-2*(O!==0||M!==0?O+M:ir(f.top,f.bottom))}await c({...t,availableWidth:E,availableHeight:N});const C=await a.getDimensions(l.floating);return g!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function th(){return typeof window<"u"}function pa(e){return W2(e)?(e.nodeName||"").toLowerCase():"#document"}function fr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function jn(e){var t;return(t=(W2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function W2(e){return th()?e instanceof Node||e instanceof fr(e).Node:!1}function tn(e){return th()?e instanceof Element||e instanceof fr(e).Element:!1}function wn(e){return th()?e instanceof HTMLElement||e instanceof fr(e).HTMLElement:!1}function T_(e){return!th()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fr(e).ShadowRoot}const IU=new Set(["inline","contents"]);function Oc(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=rn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!IU.has(s)}const OU=new Set(["table","td","th"]);function DU(e){return OU.has(pa(e))}const $U=[":popover-open",":modal"];function rh(e){return $U.some(t=>{try{return e.matches(t)}catch{return!1}})}const MU=["transform","translate","scale","rotate","perspective"],LU=["transform","translate","scale","rotate","perspective","filter"],FU=["paint","layout","strict","content"];function Vy(e){const t=qy(),r=tn(e)?rn(e):e;return MU.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||LU.some(n=>(r.willChange||"").includes(n))||FU.some(n=>(r.contain||"").includes(n))}function BU(e){let t=$s(e);for(;wn(t)&&!Zi(t);){if(Vy(t))return t;if(rh(t))return null;t=$s(t)}return null}function qy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zU=new Set(["html","body","#document"]);function Zi(e){return zU.has(pa(e))}function rn(e){return fr(e).getComputedStyle(e)}function nh(e){return tn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $s(e){if(pa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||T_(e)&&e.host||jn(e);return T_(t)?t.host:t}function H2(e){const t=$s(e);return Zi(t)?e.ownerDocument?e.ownerDocument.body:e.body:wn(t)&&Oc(t)?t:H2(t)}function rc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=H2(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=fr(s);if(o){const l=yv(a);return t.concat(a,a.visualViewport||[],Oc(s)?s:[],l&&r?rc(l):[])}return t.concat(s,rc(s,[],r))}function yv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function G2(e){const t=rn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=wn(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Qd(r)!==o||Qd(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function Wy(e){return tn(e)?e:e.contextElement}function $i(e){const t=Wy(e);if(!wn(t))return bn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=G2(t);let a=(o?Qd(r.width):r.width)/n,l=(o?Qd(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const UU=bn(0);function K2(e){const t=fr(e);return!qy()||!t.visualViewport?UU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VU(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==fr(e)?!1:t}function Po(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Wy(e);let a=bn(1);t&&(n?tn(n)&&(a=$i(n)):a=$i(e));const l=VU(o,r,n)?K2(o):bn(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,d=s.height/a.y;if(o){const h=fr(o),m=n&&tn(n)?fr(n):n;let g=h,v=yv(g);for(;v&&n&&m!==g;){const x=$i(v),b=v.getBoundingClientRect(),y=rn(v),w=b.left+(v.clientLeft+parseFloat(y.paddingLeft))*x.x,j=b.top+(v.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=j,g=fr(v),v=yv(g)}}return ef({width:f,height:d,x:c,y:u})}function sh(e,t){const r=nh(e).scrollLeft;return t?t.left+r:Po(jn(e)).left+r}function Y2(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-sh(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function qU(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=jn(n),l=t?rh(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=bn(1);const f=bn(0),d=wn(n);if((d||!d&&!o)&&((pa(n)!=="body"||Oc(a))&&(c=nh(n)),wn(n))){const m=Po(n);u=$i(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}const h=a&&!d&&!o?Y2(a,c):bn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:r.y*u.y-c.scrollTop*u.y+f.y+h.y}}function WU(e){return Array.from(e.getClientRects())}function HU(e){const t=jn(e),r=nh(e),n=e.ownerDocument.body,s=ir(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=ir(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+sh(e);const l=-r.scrollTop;return rn(n).direction==="rtl"&&(a+=ir(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}const k_=25;function GU(e,t){const r=fr(e),n=jn(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const f=qy();(!f||f&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=sh(n);if(u<=0){const f=n.ownerDocument,d=f.body,h=getComputedStyle(d),m=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(n.clientWidth-d.clientWidth-m);g<=k_&&(o-=g)}else u<=k_&&(o+=u);return{width:o,height:a,x:l,y:c}}const KU=new Set(["absolute","fixed"]);function YU(e,t){const r=Po(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=wn(e)?$i(e):bn(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:a,height:l,x:c,y:u}}function A_(e,t,r){let n;if(t==="viewport")n=GU(e,r);else if(t==="document")n=HU(jn(e));else if(tn(t))n=YU(t,r);else{const s=K2(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ef(n)}function J2(e,t){const r=$s(e);return r===t||!tn(r)||Zi(r)?!1:rn(r).position==="fixed"||J2(r,t)}function JU(e,t){const r=t.get(e);if(r)return r;let n=rc(e,[],!1).filter(l=>tn(l)&&pa(l)!=="body"),s=null;const o=rn(e).position==="fixed";let a=o?$s(e):e;for(;tn(a)&&!Zi(a);){const l=rn(a),c=Vy(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&KU.has(s.position)||Oc(a)&&!c&&J2(e,a))?n=n.filter(f=>f!==a):s=l,a=$s(a)}return t.set(e,n),n}function XU(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?rh(t)?[]:JU(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,f)=>{const d=A_(t,f,s);return u.top=ir(d.top,u.top),u.right=Ds(d.right,u.right),u.bottom=Ds(d.bottom,u.bottom),u.left=ir(d.left,u.left),u},A_(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function QU(e){const{width:t,height:r}=G2(e);return{width:t,height:r}}function ZU(e,t,r){const n=wn(t),s=jn(t),o=r==="fixed",a=Po(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=bn(0);function u(){c.x=sh(s)}if(n||!n&&!o)if((pa(t)!=="body"||Oc(s))&&(l=nh(t)),n){const m=Po(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();o&&!n&&s&&u();const f=s&&!n&&!o?Y2(s,l):bn(0),d=a.left+l.scrollLeft-c.x-f.x,h=a.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:a.width,height:a.height}}function tm(e){return rn(e).position==="static"}function R_(e,t){if(!wn(e)||rn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return jn(e)===r&&(r=r.ownerDocument.body),r}function X2(e,t){const r=fr(e);if(rh(e))return r;if(!wn(e)){let s=$s(e);for(;s&&!Zi(s);){if(tn(s)&&!tm(s))return s;s=$s(s)}return r}let n=R_(e,t);for(;n&&DU(n)&&tm(n);)n=R_(n,t);return n&&Zi(n)&&tm(n)&&!Vy(n)?r:n||BU(e)||r}const eV=async function(e){const t=this.getOffsetParent||X2,r=this.getDimensions,n=await r(e.floating);return{reference:ZU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function tV(e){return rn(e).direction==="rtl"}const rV={convertOffsetParentRelativeRectToViewportRelativeRect:qU,getDocumentElement:jn,getClippingRect:XU,getOffsetParent:X2,getElementRects:eV,getClientRects:WU,getDimensions:QU,getScale:$i,isElement:tn,isRTL:tV};function Q2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nV(e,t){let r=null,n;const s=jn(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=_u(d),v=_u(s.clientWidth-(f+h)),x=_u(s.clientHeight-(d+m)),b=_u(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-b+"px",threshold:ir(0,Ds(1,c))||1};let j=!0;function _(S){const N=S[0].intersectionRatio;if(N!==c){if(!j)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!Q2(u,e.getBoundingClientRect())&&a(),j=!1}try{r=new IntersectionObserver(_,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(_,w)}r.observe(e)}return a(!0),o}function Z2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Wy(e),f=s||o?[...u?rc(u):[],...rc(t)]:[];f.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),o&&b.addEventListener("resize",r)});const d=u&&l?nV(u,r):null;let h=-1,m=null;a&&(m=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Po(e):null;c&&x();function x(){const b=Po(e);v&&!Q2(v,b)&&r(),v=b,g=requestAnimationFrame(x)}return r(),()=>{var b;f.forEach(y=>{s&&y.removeEventListener("scroll",r),o&&y.removeEventListener("resize",r)}),d==null||d(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const sV=TU,oV=kU,iV=EU,aV=RU,lV=CU,I_=NU,cV=AU,uV=(e,t,r)=>{const n=new Map,s={platform:rV,...r},o={...s.platform,_c:n};return SU(e,t,{...s,platform:o})};var dV=typeof document<"u",fV=function(){},ad=dV?p.useLayoutEffect:fV;function tf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!tf(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!tf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function eT(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function O_(e,t){const r=eT(e);return Math.round(t*r)/r}function rm(e){const t=p.useRef(e);return ad(()=>{t.current=e}),t}function tT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(n);tf(h,n)||m(n);const[g,v]=p.useState(null),[x,b]=p.useState(null),y=p.useCallback(A=>{A!==S.current&&(S.current=A,v(A))},[]),w=p.useCallback(A=>{A!==N.current&&(N.current=A,b(A))},[]),j=o||g,_=a||x,S=p.useRef(null),N=p.useRef(null),E=p.useRef(f),C=c!=null,k=rm(c),I=rm(s),O=rm(u),M=p.useCallback(()=>{if(!S.current||!N.current)return;const A={placement:t,strategy:r,middleware:h};I.current&&(A.platform=I.current),uV(S.current,N.current,A).then(R=>{const $={...R,isPositioned:O.current!==!1};D.current&&!tf(E.current,$)&&(E.current=$,br.flushSync(()=>{d($)}))})},[h,t,r,I,O]);ad(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(A=>({...A,isPositioned:!1})))},[u]);const D=p.useRef(!1);ad(()=>(D.current=!0,()=>{D.current=!1}),[]),ad(()=>{if(j&&(S.current=j),_&&(N.current=_),j&&_){if(k.current)return k.current(j,_,M);M()}},[j,_,M,k,C]);const z=p.useMemo(()=>({reference:S,floating:N,setReference:y,setFloating:w}),[y,w]),B=p.useMemo(()=>({reference:j,floating:_}),[j,_]),q=p.useMemo(()=>{const A={position:r,left:0,top:0};if(!B.floating)return A;const R=O_(B.floating,f.x),$=O_(B.floating,f.y);return l?{...A,transform:"translate("+R+"px, "+$+"px)",...eT(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:$}},[r,l,B.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:M,refs:z,elements:B,floatingStyles:q}),[f,M,z,B,q])}const hV=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?I_({element:n.current,padding:s}).fn(r):{}:n?I_({element:n,padding:s}).fn(r):{}}}},rT=(e,t)=>({...sV(e),options:[e,t]}),nT=(e,t)=>({...oV(e),options:[e,t]}),sT=(e,t)=>({...cV(e),options:[e,t]}),oT=(e,t)=>({...iV(e),options:[e,t]}),iT=(e,t)=>({...aV(e),options:[e,t]}),aT=(e,t)=>({...lV(e),options:[e,t]}),lT=(e,t)=>({...hV(e),options:[e,t]});var pV="Arrow",cT=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(Re.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});cT.displayName=pV;var mV=cT;function Hy(e){const[t,r]=p.useState(void 0);return qn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Gy="Popper",[uT,oh]=nn(Gy),[gV,dT]=uT(Gy),fT=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return i.jsx(gV,{scope:t,anchor:n,onAnchorChange:s,children:r})};fT.displayName=Gy;var hT="PopperAnchor",pT=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=dT(hT,r),a=p.useRef(null),l=Fe(t,a),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||a.current,u!==c.current&&o.onAnchorChange(c.current)}),n?null:i.jsx(Re.div,{...s,ref:l})});pT.displayName=hT;var Ky="PopperContent",[vV,xV]=uT(Ky),mT=p.forwardRef((e,t)=>{var Z,ue,Y,U,ee,ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=dT(Ky,r),[b,y]=p.useState(null),w=Fe(t,_e=>y(_e)),[j,_]=p.useState(null),S=Hy(j),N=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,C=n+(o!=="center"?"-"+o:""),k=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},I=Array.isArray(u)?u:[u],O=I.length>0,M={padding:k,boundary:I.filter(bV),altBoundary:O},{refs:D,floatingStyles:z,placement:B,isPositioned:q,middlewareData:A}=tT({strategy:"fixed",placement:C,whileElementsMounted:(..._e)=>Z2(..._e,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[rT({mainAxis:s+E,alignmentAxis:a}),c&&nT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?sT():void 0,...M}),c&&oT({...M}),iT({...M,apply:({elements:_e,rects:ke,availableWidth:dt,availableHeight:ln})=>{const{width:Sn,height:Ta}=ke.reference,Zn=_e.floating.style;Zn.setProperty("--radix-popper-available-width",`${dt}px`),Zn.setProperty("--radix-popper-available-height",`${ln}px`),Zn.setProperty("--radix-popper-anchor-width",`${Sn}px`),Zn.setProperty("--radix-popper-anchor-height",`${Ta}px`)}}),j&&lT({element:j,padding:l}),wV({arrowWidth:N,arrowHeight:E}),h&&aT({strategy:"referenceHidden",...M})]}),[R,$]=xT(B),L=gr(g);qn(()=>{q&&(L==null||L())},[q,L]);const W=(Z=A.arrow)==null?void 0:Z.x,V=(ue=A.arrow)==null?void 0:ue.y,re=((Y=A.arrow)==null?void 0:Y.centerOffset)!==0,[ve,se]=p.useState();return qn(()=>{b&&se(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:q?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(U=A.transformOrigin)==null?void 0:U.x,(ee=A.transformOrigin)==null?void 0:ee.y].join(" "),...((ce=A.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(vV,{scope:r,placedSide:R,onArrowChange:_,arrowX:W,arrowY:V,shouldHideArrow:re,children:i.jsx(Re.div,{"data-side":R,"data-align":$,...v,ref:w,style:{...v.style,animation:q?void 0:"none"}})})})});mT.displayName=Ky;var gT="PopperArrow",yV={top:"bottom",right:"left",bottom:"top",left:"right"},vT=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=xV(gT,n),a=yV[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(mV,{...s,ref:r,style:{...s.style,display:"block"}})})});vT.displayName=gT;function bV(e){return e!==null}var wV=e=>({name:"transformOrigin",options:e,fn(t){var x,b,y;const{placement:r,rects:n,middlewareData:s}=t,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=xT(r),d={start:"0%",center:"50%",end:"100%"}[f],h=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=a?d:`${h}px`,v=`${-c}px`):u==="top"?(g=a?d:`${h}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=a?d:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=a?d:`${m}px`),{data:{x:g,y:v}}}});function xT(e){const[t,r="center"]=e.split("-");return[t,r]}var yT=fT,Yy=pT,bT=mT,wT=vT,nm="rovingFocusGroup.onEntryFocus",jV={bubbles:!1,cancelable:!0},Dc="RovingFocusGroup",[bv,jT,_V]=ry(Dc),[SV,_T]=nn(Dc,[_V]),[NV,EV]=SV(Dc),ST=p.forwardRef((e,t)=>i.jsx(bv.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(bv.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(CV,{...e,ref:t})})}));ST.displayName=Dc;var CV=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=Fe(t,h),g=z2(o),[v,x]=Lo({prop:a,defaultProp:l??null,onChange:c,caller:Dc}),[b,y]=p.useState(!1),w=gr(u),j=jT(r),_=p.useRef(!1),[S,N]=p.useState(0);return p.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(nm,w),()=>E.removeEventListener(nm,w)},[w]),i.jsx(NV,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(E=>x(E),[x]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>N(E=>E-1),[]),children:i.jsx(Re.div,{tabIndex:b||S===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:xe(e.onMouseDown,()=>{_.current=!0}),onFocus:xe(e.onFocus,E=>{const C=!_.current;if(E.target===E.currentTarget&&C&&!b){const k=new CustomEvent(nm,jV);if(E.currentTarget.dispatchEvent(k),!k.defaultPrevented){const I=j().filter(B=>B.focusable),O=I.find(B=>B.active),M=I.find(B=>B.id===v),z=[O,M,...I].filter(Boolean).map(B=>B.ref.current);CT(z,f)}}_.current=!1}),onBlur:xe(e.onBlur,()=>y(!1))})})}),NT="RovingFocusGroupItem",ET=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=xo(),u=o||c,f=EV(NT,r),d=f.currentTabStopId===u,h=jT(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),i.jsx(bv.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(Re.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:xe(e.onMouseDown,x=>{n?f.onItemFocus(u):x.preventDefault()}),onFocus:xe(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:xe(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=kV(x,f.orientation,f.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(j=>j.focusable).map(j=>j.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const j=w.indexOf(x.currentTarget);w=f.loop?AV(w,j+1):w.slice(j+1)}setTimeout(()=>CT(w))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:v!=null}):a})})});ET.displayName=NT;var PV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kV(e,t,r){const n=TV(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return PV[n]}function CT(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function AV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var RV=ST,IV=ET,OV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Jo=new WeakMap,Su=new WeakMap,Nu={},sm=0,PT=function(e){return e&&(e.host||PT(e.parentNode))},DV=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=PT(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},$V=function(e,t,r,n){var s=DV(t,Array.isArray(e)?e:[e]);Nu[r]||(Nu[r]=new WeakMap);var o=Nu[r],a=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",v=(Jo.get(h)||0)+1,x=(o.get(h)||0)+1;Jo.set(h,v),o.set(h,x),a.push(h),v===1&&g&&Su.set(h,!0),x===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return f(t),l.clear(),sm++,function(){a.forEach(function(d){var h=Jo.get(d)-1,m=o.get(d)-1;Jo.set(d,h),o.set(d,m),h||(Su.has(d)||d.removeAttribute(n),Su.delete(d)),m||d.removeAttribute(r)}),sm--,sm||(Jo=new WeakMap,Jo=new WeakMap,Su=new WeakMap,Nu={})}},$c=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=t||OV(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),$V(n,s,r,"aria-hidden")):function(){return null}},wv=function(e,t){return wv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},wv(e,t)};function TT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qe=function(){return Qe=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Qe.apply(this,arguments)};function _n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function kT(e,t,r,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(s<3?a(o):s>3?a(t,r,o):a(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function AT(e,t){return function(r,n){t(r,n,e)}}function RT(e,t,r,n,s,o){function a(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,m=r.length-1;m>=0;m--){var g={};for(var v in n)g[v]=v==="access"?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(b){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(b||null))};var x=(0,r[m])(l==="accessor"?{get:f.get,set:f.set}:f[c],g);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=a(x.get))&&(f.get=d),(d=a(x.set))&&(f.set=d),(d=a(x.init))&&s.unshift(d)}else(d=a(x))&&(l==="field"?s.unshift(d):f[c]=d)}u&&Object.defineProperty(u,n.name,f),h=!0}function IT(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function OT(e){return typeof e=="symbol"?e:"".concat(e)}function DT(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function $T(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ge(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function MT(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ih=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function LT(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ih(t,e,r)}function rf(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jy(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,o=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function FT(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jy(arguments[t]));return e}function BT(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n}function Mc(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function ea(e){return this instanceof ea?(this.v=e,this):new ea(e)}function zT(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(g){return Promise.resolve(g).then(m,d)}}function l(m,g){n[m]&&(s[m]=function(v){return new Promise(function(x,b){o.push([m,v,x,b])>1||c(m,v)})},g&&(s[m]=g(s[m])))}function c(m,g){try{u(n[m](g))}catch(v){h(o[0][3],v)}}function u(m){m.value instanceof ea?Promise.resolve(m.value.v).then(f,d):h(o[0][2],m)}function f(m){c("next",m)}function d(m){c("throw",m)}function h(m,g){m(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function UT(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,o){t[s]=e[s]?function(a){return(r=!r)?{value:ea(e[s](a)),done:!1}:o?o(a):a}:o}}function VT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof rf=="function"?rf(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(l,c){a=e[o](a),s(l,c,a.done,a.value)})}}function s(o,a,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},a)}}function qT(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var MV=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},jv=function(e){return jv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},jv(e)};function WT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=jv(e),n=0;n<r.length;n++)r[n]!=="default"&&ih(t,e,r[n]);return MV(t,e),t}function HT(e){return e&&e.__esModule?e:{default:e}}function GT(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function KT(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function YT(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function JT(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var LV=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function XT(e){function t(o){e.error=e.hasError?new LV(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(a){return t(a),s()})}else n|=1}catch(a){t(a)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function QT(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,a){return n?t?".jsx":".js":s&&(!o||!a)?r:s+o+"."+a.toLowerCase()+"js"}):e}const FV={__extends:TT,__assign:Qe,__rest:_n,__decorate:kT,__param:AT,__esDecorate:RT,__runInitializers:IT,__propKey:OT,__setFunctionName:DT,__metadata:$T,__awaiter:ge,__generator:MT,__createBinding:ih,__exportStar:LT,__values:rf,__read:Jy,__spread:FT,__spreadArrays:BT,__spreadArray:Mc,__await:ea,__asyncGenerator:zT,__asyncDelegator:UT,__asyncValues:VT,__makeTemplateObject:qT,__importStar:WT,__importDefault:HT,__classPrivateFieldGet:GT,__classPrivateFieldSet:KT,__classPrivateFieldIn:YT,__addDisposableResource:JT,__disposeResources:XT,__rewriteRelativeImportExtension:QT},BV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:JT,get __assign(){return Qe},__asyncDelegator:UT,__asyncGenerator:zT,__asyncValues:VT,__await:ea,__awaiter:ge,__classPrivateFieldGet:GT,__classPrivateFieldIn:YT,__classPrivateFieldSet:KT,__createBinding:ih,__decorate:kT,__disposeResources:XT,__esDecorate:RT,__exportStar:LT,__extends:TT,__generator:MT,__importDefault:HT,__importStar:WT,__makeTemplateObject:qT,__metadata:$T,__param:AT,__propKey:OT,__read:Jy,__rest:_n,__rewriteRelativeImportExtension:QT,__runInitializers:IT,__setFunctionName:DT,__spread:FT,__spreadArray:Mc,__spreadArrays:BT,__values:rf,default:FV},Symbol.toStringTag,{value:"Module"}));var Mi="right-scroll-bar-position",Li="width-before-scroll-bar",zV="with-scroll-bars-hidden",UV="--removed-body-scroll-bar-size";function om(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function VV(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var qV=typeof window<"u"?p.useLayoutEffect:p.useEffect,D_=new WeakMap;function Xy(e,t){var r=VV(t||null,function(n){return e.forEach(function(s){return om(s,n)})});return qV(function(){var n=D_.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||om(l,null)}),o.forEach(function(l){s.has(l)||om(l,a)})}D_.set(r,e)},[e]),r}function WV(e){return e}function HV(e,t){t===void 0&&(t=WV);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),r}}}};return s}function Qy(e){e===void 0&&(e={});var t=HV(null);return t.options=Qe({async:!0,ssr:!1},e),t}var ZT=function(e){var t=e.sideCar,r=_n(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Qe({},r))};ZT.isSideCarExport=!0;function Zy(e,t){return e.useMedium(t),ZT}var ek=Qy(),im=function(){},ah=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:im,onWheelCapture:im,onTouchMoveCapture:im}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,w=e.gapMode,j=_n(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=Xy([r,t]),N=Qe(Qe({},j),s);return p.createElement(p.Fragment,null,f&&p.createElement(_,{sideCar:ek,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:w}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},N),{ref:S})):p.createElement(y,Qe({},N,{className:c,ref:S}),l))});ah.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ah.classNames={fullWidth:Li,zeroRight:Mi};var $_,GV=function(){if($_)return $_;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=GV();return t&&e.setAttribute("nonce",t),e}function YV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function JV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var XV=function(){var e=0,t=null;return{add:function(r){e==0&&(t=KV())&&(YV(t,r),JV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},QV=function(){var e=XV();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},lh=function(){var e=QV(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},ZV={left:0,top:0,right:0,gap:0},am=function(e){return parseInt(e||"",10)||0},e7=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[am(r),am(n),am(s)]},t7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ZV;var t=e7(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},r7=lh(),Fi="data-scroll-locked",n7=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(zV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Fi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mi,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Li,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Mi," .").concat(Mi,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Li," .").concat(Li,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Fi,`] {
    `).concat(UV,": ").concat(l,`px;
  }
`)},M_=function(){var e=parseInt(document.body.getAttribute(Fi)||"0",10);return isFinite(e)?e:0},s7=function(){p.useEffect(function(){return document.body.setAttribute(Fi,(M_()+1).toString()),function(){var e=M_()-1;e<=0?document.body.removeAttribute(Fi):document.body.setAttribute(Fi,e.toString())}},[])},e0=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;s7();var o=p.useMemo(function(){return t7(s)},[s]);return p.createElement(r7,{styles:n7(o,!t,s,r?"":"!important")})},_v=!1;if(typeof window<"u")try{var Eu=Object.defineProperty({},"passive",{get:function(){return _v=!0,!0}});window.addEventListener("test",Eu,Eu),window.removeEventListener("test",Eu,Eu)}catch{_v=!1}var Xo=_v?{passive:!1}:!1,o7=function(e){return e.tagName==="TEXTAREA"},tk=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!o7(e)&&r[t]==="visible")},i7=function(e){return tk(e,"overflowY")},a7=function(e){return tk(e,"overflowX")},L_=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=rk(e,n);if(s){var o=nk(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},l7=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},c7=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},rk=function(e,t){return e==="v"?i7(t):a7(t)},nk=function(e,t){return e==="v"?l7(t):c7(t)},u7=function(e,t){return e==="h"&&t==="rtl"?-1:1},d7=function(e,t,r,n,s){var o=u7(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{if(!l)break;var m=nk(e,l),g=m[0],v=m[1],x=m[2],b=v-x-o*g;(g||b)&&rk(e,l)&&(d+=b,h+=g);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&Math.abs(d)<1||!s&&a>d)||!f&&(s&&Math.abs(h)<1||!s&&-a>h))&&(u=!0),u},Cu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},F_=function(e){return[e.deltaX,e.deltaY]},B_=function(e){return e&&"current"in e?e.current:e},f7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},h7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},p7=0,Qo=[];function m7(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(p7++)[0],o=p.useState(lh)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Mc([e.lockRef.current],(e.shards||[]).map(B_),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var b=Cu(v),y=r.current,w="deltaX"in v?v.deltaX:y[0]-b[0],j="deltaY"in v?v.deltaY:y[1]-b[1],_,S=v.target,N=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&N==="h"&&S.type==="range")return!1;var E=L_(N,S);if(!E)return!0;if(E?_=N:(_=N==="v"?"h":"v",E=L_(N,S)),!E)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var C=n.current||_;return d7(C,x,v,C==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!Qo.length||Qo[Qo.length-1]!==o)){var b="deltaY"in x?F_(x):Cu(x),y=t.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&f7(_.delta,b)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(B_).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,b,y){var w={name:v,delta:x,target:b,should:y,shadowParent:g7(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=Cu(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,F_(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Cu(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return Qo.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Xo),document.addEventListener("touchmove",c,Xo),document.addEventListener("touchstart",f,Xo),function(){Qo=Qo.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Xo),document.removeEventListener("touchmove",c,Xo),document.removeEventListener("touchstart",f,Xo)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:h7(s)}):null,m?p.createElement(e0,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function g7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const v7=Zy(ek,m7);var sk=p.forwardRef(function(e,t){return p.createElement(ah,Qe({},e,{ref:t,sideCar:v7}))});sk.classNames=ah.classNames;const t0=sk;var Sv=["Enter"," "],x7=["ArrowDown","PageUp","Home"],ok=["ArrowUp","PageDown","End"],y7=[...x7,...ok],b7={ltr:[...Sv,"ArrowRight"],rtl:[...Sv,"ArrowLeft"]},w7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Lc="Menu",[nc,j7,_7]=ry(Lc),[Uo,ik]=nn(Lc,[_7,oh,_T]),ch=oh(),ak=_T(),[S7,Vo]=Uo(Lc),[N7,Fc]=Uo(Lc),lk=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:o,modal:a=!0}=e,l=ch(t),[c,u]=p.useState(null),f=p.useRef(!1),d=gr(o),h=z2(s);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(yT,{...l,children:i.jsx(S7,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(N7,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:a,children:n})})})};lk.displayName=Lc;var E7="MenuAnchor",r0=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=ch(r);return i.jsx(Yy,{...s,...n,ref:t})});r0.displayName=E7;var n0="MenuPortal",[C7,ck]=Uo(n0,{forceMount:void 0}),uk=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,o=Vo(n0,t);return i.jsx(C7,{scope:t,forceMount:r,children:i.jsx(Fr,{present:r||o.open,children:i.jsx(Ec,{asChild:!0,container:s,children:n})})})};uk.displayName=n0;var Ir="MenuContent",[P7,s0]=Uo(Ir),dk=p.forwardRef((e,t)=>{const r=ck(Ir,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Vo(Ir,e.__scopeMenu),a=Fc(Ir,e.__scopeMenu);return i.jsx(nc.Provider,{scope:e.__scopeMenu,children:i.jsx(Fr,{present:n||o.open,children:i.jsx(nc.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(T7,{...s,ref:t}):i.jsx(k7,{...s,ref:t})})})})}),T7=p.forwardRef((e,t)=>{const r=Vo(Ir,e.__scopeMenu),n=p.useRef(null),s=Fe(t,n);return p.useEffect(()=>{const o=n.current;if(o)return $c(o)},[]),i.jsx(o0,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),k7=p.forwardRef((e,t)=>{const r=Vo(Ir,e.__scopeMenu);return i.jsx(o0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),A7=No("MenuContent.ScrollLock"),o0=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=Vo(Ir,r),b=Fc(Ir,r),y=ch(r),w=ak(r),j=j7(r),[_,S]=p.useState(null),N=p.useRef(null),E=Fe(t,N,x.onContentChange),C=p.useRef(0),k=p.useRef(""),I=p.useRef(0),O=p.useRef(null),M=p.useRef("right"),D=p.useRef(0),z=g?t0:p.Fragment,B=g?{as:A7,allowPinchZoom:!0}:void 0,q=R=>{var Z,ue;const $=k.current+R,L=j().filter(Y=>!Y.disabled),W=document.activeElement,V=(Z=L.find(Y=>Y.ref.current===W))==null?void 0:Z.textValue,re=L.map(Y=>Y.textValue),ve=V7(re,$,V),se=(ue=L.find(Y=>Y.textValue===ve))==null?void 0:ue.ref.current;(function Y(U){k.current=U,window.clearTimeout(C.current),U!==""&&(C.current=window.setTimeout(()=>Y(""),1e3))})($),se&&setTimeout(()=>se.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),Fy();const A=p.useCallback(R=>{var L,W;return M.current===((L=O.current)==null?void 0:L.side)&&W7(R,(W=O.current)==null?void 0:W.area)},[]);return i.jsx(P7,{scope:r,searchRef:k,onItemEnter:p.useCallback(R=>{A(R)&&R.preventDefault()},[A]),onItemLeave:p.useCallback(R=>{var $;A(R)||(($=N.current)==null||$.focus(),S(null))},[A]),onTriggerLeave:p.useCallback(R=>{A(R)&&R.preventDefault()},[A]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback(R=>{O.current=R},[]),children:i.jsx(z,{...B,children:i.jsx(eh,{asChild:!0,trapped:s,onMountAutoFocus:xe(o,R=>{var $;R.preventDefault(),($=N.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Nc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx(RV,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:xe(c,R=>{b.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(bT,{role:"menu","aria-orientation":"vertical","data-state":Ck(x.open),"data-radix-menu-content":"",dir:b.dir,...y,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:xe(v.onKeyDown,R=>{const L=R.target.closest("[data-radix-menu-content]")===R.currentTarget,W=R.ctrlKey||R.altKey||R.metaKey,V=R.key.length===1;L&&(R.key==="Tab"&&R.preventDefault(),!W&&V&&q(R.key));const re=N.current;if(R.target!==re||!y7.includes(R.key))return;R.preventDefault();const se=j().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);ok.includes(R.key)&&se.reverse(),z7(se)}),onBlur:xe(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),k.current="")}),onPointerMove:xe(e.onPointerMove,sc(R=>{const $=R.target,L=D.current!==R.clientX;if(R.currentTarget.contains($)&&L){const W=R.clientX>D.current?"right":"left";M.current=W,D.current=R.clientX}}))})})})})})})});dk.displayName=Ir;var R7="MenuGroup",i0=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Re.div,{role:"group",...n,ref:t})});i0.displayName=R7;var I7="MenuLabel",fk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Re.div,{...n,ref:t})});fk.displayName=I7;var nf="MenuItem",z_="menu.itemSelect",uh=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,o=p.useRef(null),a=Fc(nf,e.__scopeMenu),l=s0(nf,e.__scopeMenu),c=Fe(t,o),u=p.useRef(!1),f=()=>{const d=o.current;if(!r&&d){const h=new CustomEvent(z_,{bubbles:!0,cancelable:!0});d.addEventListener(z_,m=>n==null?void 0:n(m),{once:!0}),ny(d,h),h.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(hk,{...s,ref:c,disabled:r,onClick:xe(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:xe(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:xe(e.onKeyDown,d=>{const h=l.searchRef.current!=="";r||h&&d.key===" "||Sv.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});uh.displayName=nf;var hk=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=e,a=s0(nf,r),l=ak(r),c=p.useRef(null),u=Fe(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[o.children]),i.jsx(nc.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:i.jsx(IV,{asChild:!0,...l,focusable:!n,children:i.jsx(Re.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:xe(e.onPointerMove,sc(g=>{n?a.onItemLeave(g):(a.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(e.onPointerLeave,sc(g=>a.onItemLeave(g))),onFocus:xe(e.onFocus,()=>d(!0)),onBlur:xe(e.onBlur,()=>d(!1))})})})}),O7="MenuCheckboxItem",pk=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(yk,{scope:e.__scopeMenu,checked:r,children:i.jsx(uh,{role:"menuitemcheckbox","aria-checked":sf(r)?"mixed":r,...s,ref:t,"data-state":l0(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(sf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});pk.displayName=O7;var mk="MenuRadioGroup",[D7,$7]=Uo(mk,{value:void 0,onValueChange:()=>{}}),gk=p.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,o=gr(n);return i.jsx(D7,{scope:e.__scopeMenu,value:r,onValueChange:o,children:i.jsx(i0,{...s,ref:t})})});gk.displayName=mk;var vk="MenuRadioItem",xk=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=$7(vk,e.__scopeMenu),o=r===s.value;return i.jsx(yk,{scope:e.__scopeMenu,checked:o,children:i.jsx(uh,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":l0(o),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});xk.displayName=vk;var a0="MenuItemIndicator",[yk,M7]=Uo(a0,{checked:!1}),bk=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,o=M7(a0,r);return i.jsx(Fr,{present:n||sf(o.checked)||o.checked===!0,children:i.jsx(Re.span,{...s,ref:t,"data-state":l0(o.checked)})})});bk.displayName=a0;var L7="MenuSeparator",wk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Re.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});wk.displayName=L7;var F7="MenuArrow",jk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=ch(r);return i.jsx(wT,{...s,...n,ref:t})});jk.displayName=F7;var B7="MenuSub",[Woe,_k]=Uo(B7),sl="MenuSubTrigger",Sk=p.forwardRef((e,t)=>{const r=Vo(sl,e.__scopeMenu),n=Fc(sl,e.__scopeMenu),s=_k(sl,e.__scopeMenu),o=s0(sl,e.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(r0,{asChild:!0,...u,children:i.jsx(hk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Ck(r.open),...e,ref:Lf(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(e.onPointerMove,sc(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:xe(e.onPointerLeave,sc(d=>{var m,g;f();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=r.content)==null?void 0:g.dataset.side,x=v==="right",b=x?-5:5,y=h[x?"left":"right"],w=h[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:xe(e.onKeyDown,d=>{var m;const h=o.searchRef.current!=="";e.disabled||h&&d.key===" "||b7[n.dir].includes(d.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),d.preventDefault())})})})});Sk.displayName=sl;var Nk="MenuSubContent",Ek=p.forwardRef((e,t)=>{const r=ck(Ir,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Vo(Ir,e.__scopeMenu),a=Fc(Ir,e.__scopeMenu),l=_k(Nk,e.__scopeMenu),c=p.useRef(null),u=Fe(t,c);return i.jsx(nc.Provider,{scope:e.__scopeMenu,children:i.jsx(Fr,{present:n||o.open,children:i.jsx(nc.Slot,{scope:e.__scopeMenu,children:i.jsx(o0,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;a.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:xe(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:xe(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:xe(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=w7[a.dir].includes(f.key);d&&h&&(o.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});Ek.displayName=Nk;function Ck(e){return e?"open":"closed"}function sf(e){return e==="indeterminate"}function l0(e){return sf(e)?"indeterminate":e?"checked":"unchecked"}function z7(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function U7(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function V7(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=U7(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function q7(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o],c=t[a],u=l.x,f=l.y,d=c.x,h=c.y;f>n!=h>n&&r<(d-u)*(n-f)/(h-f)+u&&(s=!s)}return s}function W7(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return q7(r,t)}function sc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var H7=lk,G7=r0,K7=uk,Y7=dk,J7=i0,X7=fk,Q7=uh,Z7=pk,e9=gk,t9=xk,r9=bk,n9=wk,s9=jk,o9=Sk,i9=Ek,dh="DropdownMenu",[a9,Hoe]=nn(dh,[ik]),Wt=ik(),[l9,Pk]=a9(dh),Tk=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=e,c=Wt(t),u=p.useRef(null),[f,d]=Lo({prop:s,defaultProp:o??!1,onChange:a,caller:dh});return i.jsx(l9,{scope:t,triggerId:xo(),triggerRef:u,contentId:xo(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(H7,{...c,open:f,onOpenChange:d,dir:n,modal:l,children:r})})};Tk.displayName=dh;var kk="DropdownMenuTrigger",Ak=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,o=Pk(kk,r),a=Wt(r);return i.jsx(G7,{asChild:!0,...a,children:i.jsx(Re.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Lf(t,o.triggerRef),onPointerDown:xe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:xe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ak.displayName=kk;var c9="DropdownMenuPortal",Rk=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Wt(t);return i.jsx(K7,{...n,...r})};Rk.displayName=c9;var Ik="DropdownMenuContent",Ok=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Pk(Ik,r),o=Wt(r),a=p.useRef(!1);return i.jsx(Y7,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:t,onCloseAutoFocus:xe(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:xe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ok.displayName=Ik;var u9="DropdownMenuGroup",d9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(J7,{...s,...n,ref:t})});d9.displayName=u9;var f9="DropdownMenuLabel",Dk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(X7,{...s,...n,ref:t})});Dk.displayName=f9;var h9="DropdownMenuItem",$k=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(Q7,{...s,...n,ref:t})});$k.displayName=h9;var p9="DropdownMenuCheckboxItem",Mk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(Z7,{...s,...n,ref:t})});Mk.displayName=p9;var m9="DropdownMenuRadioGroup",g9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(e9,{...s,...n,ref:t})});g9.displayName=m9;var v9="DropdownMenuRadioItem",Lk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(t9,{...s,...n,ref:t})});Lk.displayName=v9;var x9="DropdownMenuItemIndicator",Fk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(r9,{...s,...n,ref:t})});Fk.displayName=x9;var y9="DropdownMenuSeparator",Bk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(n9,{...s,...n,ref:t})});Bk.displayName=y9;var b9="DropdownMenuArrow",w9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(s9,{...s,...n,ref:t})});w9.displayName=b9;var j9="DropdownMenuSubTrigger",zk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(o9,{...s,...n,ref:t})});zk.displayName=j9;var _9="DropdownMenuSubContent",Uk=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Wt(r);return i.jsx(i9,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Uk.displayName=_9;var S9=Tk,N9=Ak,E9=Rk,Vk=Ok,qk=Dk,Wk=$k,Hk=Mk,Gk=Lk,Kk=Fk,Yk=Bk,Jk=zk,Xk=Uk;const Qk=S9,Zk=N9,C9=J.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs(Jk,{ref:s,className:he("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(Wn,{className:"ml-auto h-4 w-4"})]}));C9.displayName=Jk.displayName;const P9=J.forwardRef(({className:e,...t},r)=>i.jsx(Xk,{ref:r,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));P9.displayName=Xk.displayName;const c0=J.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(E9,{children:i.jsx(Vk,{ref:n,sideOffset:t,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));c0.displayName=Vk.displayName;const oc=J.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(Wk,{ref:n,className:he("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));oc.displayName=Wk.displayName;const T9=J.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(Hk,{ref:s,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Kk,{children:i.jsx($n,{className:"h-4 w-4"})})}),t]}));T9.displayName=Hk.displayName;const k9=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Gk,{ref:n,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Kk,{children:i.jsx(p3,{className:"h-2 w-2 fill-current"})})}),t]}));k9.displayName=Gk.displayName;const u0=J.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(qk,{ref:n,className:he("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));u0.displayName=qk.displayName;const d0=J.forwardRef(({className:e,...t},r)=>i.jsx(Yk,{ref:r,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));d0.displayName=Yk.displayName;function fh(){const[e,t]=p.useState({width:void 0,height:void 0});return p.useEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}const A9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class f0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class R9 extends f0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U_ extends f0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class V_ extends f0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Nv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Nv||(Nv={}));class I9{constructor(t,{headers:r={},customFetch:n,region:s=Nv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=A9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ge(this,arguments,void 0,function*(r,n={}){var s;let o,a;try{const{headers:l,method:c,body:u,signal:f,timeout:d}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let x=f;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),f?(x=a.signal,f.addEventListener("abort",()=>a.abort())):x=a.signal);const b=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:x}).catch(_=>{throw new R9(_)}),y=b.headers.get("x-relay-error");if(y&&y==="true")throw new U_(b);if(!b.ok)throw new V_(b);let w=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield b.json():w==="application/octet-stream"||w==="application/pdf"?j=yield b.blob():w==="text/event-stream"?j=b:w==="multipart/form-data"?j=yield b.formData():j=yield b.text(),{data:j,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof V_||l instanceof U_?l.context:void 0}}finally{o&&clearTimeout(o)}})}}var Ft={};const ma=N$(BV);var Pu={},Tu={},ku={},Au={},Ru={},Iu={},q_;function eA(){if(q_)return Iu;q_=1,Object.defineProperty(Iu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Iu.default=e,Iu}var W_;function tA(){if(W_)return Ru;W_=1,Object.defineProperty(Ru,"__esModule",{value:!0});const t=ma.__importDefault(eA());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,d,h;let m=null,g=null,v=null,x=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const w=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),j=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&j&&j.length>1&&(v=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,x=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await c.text();try{m=JSON.parse(w),Array.isArray(m)&&c.status===404&&(g=[],m=null,x=200,b="OK")}catch{c.status===404&&w===""?(x=204,b="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,x=200,b="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:v,status:x,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,d;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=c==null?void 0:c.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Ru.default=r,Ru}var H_;function rA(){if(H_)return Au;H_=1,Object.defineProperty(Au,"__esModule",{value:!0});const t=ma.__importDefault(tA());class r extends t.default{select(s){let o=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const d=[s?"analyze":null,o?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Au.default=r,Au}var G_;function h0(){if(G_)return ku;G_=1,Object.defineProperty(ku,"__esModule",{value:!0});const t=ma.__importDefault(rA()),r=new RegExp("[,()]");class n extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${f}.${a}`),this}match(o){return Object.entries(o).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(o,a,l){return this.url.searchParams.append(o,`not.${a}.${l}`),this}or(o,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,l){return this.url.searchParams.append(o,`${a}.${l}`),this}}return ku.default=n,ku}var K_;function nA(){if(K_)return Tu;K_=1,Object.defineProperty(Tu,"__esModule",{value:!0});const t=ma.__importDefault(h0());class r{constructor(s,{headers:o={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=l}select(s,o){const{head:a=!1,count:l}=o??{},c=a?"HEAD":"GET";let u=!1;const f=(s??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var a;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Tu.default=r,Tu}var Y_;function O9(){if(Y_)return Pu;Y_=1,Object.defineProperty(Pu,"__esModule",{value:!0});const e=ma,t=e.__importDefault(nA()),r=e.__importDefault(h0());class n{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){var f;let d;const h=new URL(`${this.url}/rpc/${o}`);let m;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([v,x])=>x!==void 0).map(([v,x])=>[v,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([v,x])=>{h.searchParams.append(v,x)})):(d="POST",m=a);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:g,schema:this.schemaName,body:m,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Pu.default=n,Pu}Object.defineProperty(Ft,"__esModule",{value:!0});var sA=Ft.PostgrestError=pA=Ft.PostgrestBuilder=fA=Ft.PostgrestTransformBuilder=uA=Ft.PostgrestFilterBuilder=lA=Ft.PostgrestQueryBuilder=iA=Ft.PostgrestClient=void 0;const ga=ma,oA=ga.__importDefault(O9());var iA=Ft.PostgrestClient=oA.default;const aA=ga.__importDefault(nA());var lA=Ft.PostgrestQueryBuilder=aA.default;const cA=ga.__importDefault(h0());var uA=Ft.PostgrestFilterBuilder=cA.default;const dA=ga.__importDefault(rA());var fA=Ft.PostgrestTransformBuilder=dA.default;const hA=ga.__importDefault(tA());var pA=Ft.PostgrestBuilder=hA.default;const mA=ga.__importDefault(eA());sA=Ft.PostgrestError=mA.default;var gA=Ft.default={PostgrestClient:oA.default,PostgrestQueryBuilder:aA.default,PostgrestFilterBuilder:cA.default,PostgrestTransformBuilder:dA.default,PostgrestBuilder:hA.default,PostgrestError:mA.default};const D9=ZS({__proto__:null,get PostgrestBuilder(){return pA},get PostgrestClient(){return iA},get PostgrestError(){return sA},get PostgrestFilterBuilder(){return uA},get PostgrestQueryBuilder(){return lA},get PostgrestTransformBuilder(){return fA},default:gA},[Ft]),{PostgrestClient:$9,PostgrestQueryBuilder:Goe,PostgrestFilterBuilder:Koe,PostgrestTransformBuilder:Yoe,PostgrestBuilder:Joe,PostgrestError:Xoe}=gA||D9;class M9{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const L9="2.81.0",F9=`realtime-js/${L9}`,vA="1.0.0",B9="2.0.0",J_=vA,Ev=1e4,z9=1e3,U9=100;var no;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(no||(no={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var Er;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Er||(Er={}));var Cv;(function(e){e.websocket="websocket"})(Cv||(Cv={}));var so;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(so||(so={}));class V9{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){const{join_ref:r,ref:n,event:s,topic:o,payload:a}=t,l=this.META_LENGTH+r.length+n.length+o.length+s.length,c=new ArrayBuffer(this.HEADER_LENGTH+l);let u=new DataView(c),f=0;u.setUint8(f++,this.KINDS.push),u.setUint8(f++,r.length),u.setUint8(f++,n.length),u.setUint8(f++,o.length),u.setUint8(f++,s.length),Array.from(r,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(n,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(o,h=>u.setUint8(f++,h.charCodeAt(0))),Array.from(s,h=>u.setUint8(f++,h.charCodeAt(0)));var d=new Uint8Array(c.byteLength+a.byteLength);return d.set(new Uint8Array(c),0),d.set(new Uint8Array(a),c.byteLength),d.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const{join_ref:s,ref:o,topic:a}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+a.length+l.length,f=new ArrayBuffer(this.HEADER_LENGTH+u);let d=new DataView(f),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,s.length),d.setUint8(h++,o.length),d.setUint8(h++,a.length),d.setUint8(h++,l.length),d.setUint8(h++,this.BINARY_ENCODING),Array.from(s,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>d.setUint8(h++,g.charCodeAt(0))),Array.from(l,g=>d.setUint8(h++,g.charCodeAt(0)));var m=new Uint8Array(f.byteLength+c.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(c),f.byteLength),m.buffer}_encodeJsonUserBroadcastPush(t){var r,n;const{join_ref:s,ref:o,topic:a}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+a.length+l.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,s.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,l.length),m.setUint8(g++,this.JSON_ENCODING),Array.from(s,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(o,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(a,x=>m.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>m.setUint8(g++,x.charCodeAt(0)));var v=new Uint8Array(h.byteLength+f.byteLength);return v.set(new Uint8Array(h),0),v.set(new Uint8Array(f),h.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,o,a,l,c]=n;return r({join_ref:s,ref:o,topic:a,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,s);case this.KINDS.reply:return this._decodeReply(t,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodePush(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+s));l=l+s;const u=n.decode(t.slice(l,l+o));l=l+o;const f=n.decode(t.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:f,payload:d}}_decodeReply(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+s));c=c+s;const f=n.decode(t.slice(c,c+o));c=c+o;const d=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+l));c=c+l;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:h,response:m};return{join_ref:u,ref:f,topic:d,event:Er.reply,payload:g}}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const f=n.decode(t.slice(c,c+o));c=c+o;const d=n.decode(t.slice(c,c+a));c=c+a;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:f,payload:m};return a>0&&(g.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class xA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Be||(Be={}));const X_=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=q9(a,e,t,s),o),{}):{}},q9=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=r[e];return o&&!n.includes(o)?yA(o,a):Pv(a)},yA=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return K9(t,r)}switch(e){case Be.bool:return W9(t);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return H9(t);case Be.json:case Be.jsonb:return G9(t);case Be.timestamp:return Y9(t);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return Pv(t);default:return Pv(t)}},Pv=e=>e,W9=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},H9=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},G9=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},K9=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const a=e.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>yA(t,l))}return e},Y9=e=>typeof e=="string"?e.replace(" ","T"):e,bA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class lm{constructor(t,r,n={},s=Ev){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Q_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Q_||(Q_={}));class Nl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=Nl.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Nl.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(o,(u,f)=>{a[u]||(c[u]=f)}),this.map(a,(u,f)=>{const d=o[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Z_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Z_||(Z_={}));var El;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(El||(El={}));var Pn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Pn||(Pn={}));class p0{constructor(t,r={config:{}},n){var s,o;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new lm(this,Er.join,this.params,this.timeout),this.rejoinTimer=new xA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Er.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Nl(this),this.broadcastEndpointURL=bA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[El.PRESENCE]&&this.bindings[El.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Pn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Pn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(Pn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,b=[];for(let y=0;y<x;y++){const w=v[y],{filter:{event:j,schema:_,table:S,filter:N}}=w,E=m&&m[y];if(E&&E.event===j&&E.schema===_&&E.table===S&&E.filter===N)b.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(Pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Pn.SUBSCRIBED);return}}).receive("error",m=>{this.state=ft.errored,t==null||t(Pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ft.joined&&t===El.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Er.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new lm(this,Er.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new lm(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>U9){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Er;if(n&&[l,c,u,f].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(m=>m.callback(h,n)):(o=this.bindings[a])===null||o===void 0||o.filter(m=>{var g,v,x,b,y,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const j=m.id,_=(g=m.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(y=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:b,type:y,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:b,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&p0.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Er.close,{},t)}_onError(t){this._on(Er.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=X_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=X_(t.columns,t.old_record)),r}}const cm=()=>{},Ou={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J9=[1e3,2e3,5e3,1e4],X9=1e4,Q9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Z9{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ev,this.transport=null,this.heartbeatIntervalMs=Ou.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cm,this.ref=0,this.reconnectTimer=null,this.vsn=J_,this.logger=cm,this.conn=null,this.sendBuffer=[],this.serializer=new V9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Cv.websocket}`,this.httpEndpoint=bA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=M9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case no.connecting:return so.Connecting;case no.open:return so.Open;case no.closing:return so.Closing;default:return so.Closed}}isConnected(){return this.connectionState()===so.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new p0(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(z9,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ou.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:a}=r,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===no.open||this.conn.readyState===no.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Er.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Q9],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:F9};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Er.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ou.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,o,a,l,c,u,f,d,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ev,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ou.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:cm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:J_,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>J9[g-1]||X9,this.vsn){case vA:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:(g,v)=>v(JSON.stringify(g)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(g,v)=>v(JSON.parse(g));break;case B9:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class m0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class eq extends m0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tv extends m0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const g0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tq=()=>Response,kv=e=>{if(Array.isArray(e))return e.map(r=>kv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=kv(n)}),t},rq=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},um=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},nq=(e,t,r)=>ge(void 0,void 0,void 0,function*(){const n=yield tq();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,a=(s==null?void 0:s.statusCode)||o+"";t(new eq(um(s),o,a))}).catch(s=>{t(new Tv(um(s),s))}):t(new Tv(um(e),e))}),sq=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(rq(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Bc(e,t,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,sq(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>nq(c,l,n))})})}function ic(e,t,r,n){return ge(this,void 0,void 0,function*(){return Bc(e,"GET",t,r,n)})}function Hr(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Bc(e,"POST",t,n,s,r)})}function Av(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Bc(e,"PUT",t,n,s,r)})}function oq(e,t,r,n){return ge(this,void 0,void 0,function*(){return Bc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function v0(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return Bc(e,"DELETE",t,n,s,r)})}class iq{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ge(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}var wA;class aq{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[wA]="BlobDownloadBuilder",this.promise=null}asStream(){return new iq(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ge(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}wA=Symbol.toStringTag;const lq=aq,cq={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uq{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=g0(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ge(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},e1),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?Av:Hr)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ge(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:e1.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield Av(this.fetch,l.toString(),c,{headers:f});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ge(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Hr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new m0("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}update(t,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ge(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield Hr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ge(this,void 0,void 0,function*(){try{const s=yield Hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>ic(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new lq(c,this.shouldThrowOnError)}info(t){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ic(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:kv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}exists(t){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield oq(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n)&&n instanceof Tv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ge(this,void 0,void 0,function*(){try{return{data:yield v0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}list(t,r,n){return ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},cq),r),{prefix:t||""});return{data:yield Hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}listV2(t,r){return ge(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const jA="2.81.0",_A={"X-Client-Info":`storage-js/${jA}`};class dq{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_A),r),this.fetch=g0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ge(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ic(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield ic(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}createBucket(t){return ge(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Hr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return ge(this,void 0,void 0,function*(){try{return{data:yield Av(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield v0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class fq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_A),r),this.fetch=g0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBuckets(t){return ge(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ic(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield v0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}}const x0={"X-Client-Info":`storage-js/${jA}`,"Content-Type":"application/json"};class SA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ar(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class dm extends SA{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hq extends SA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var t1;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(t1||(t1={}));const y0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pq=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},r1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mq=(e,t,r)=>ge(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,o=e;if(typeof o.json=="function")o.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new dm(r1(a),s,l))}).catch(()=>{const a=s+"",l=o.statusText||`HTTP ${s} error`;t(new dm(l,s,a))});else{const a=s+"",l=o.statusText||`HTTP ${s} error`;t(new dm(l,s,a))}}else t(new hq(r1(e),e))}),gq=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(pq(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function vq(e,t,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,gq(t,n,s,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>mq(c,l,n))})})}function lr(e,t,r,n,s){return ge(this,void 0,void 0,function*(){return vq(e,"POST",t,n,s,r)})}class xq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x0),r),this.fetch=y0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ge(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ar(n))return{data:null,error:n};throw n}})}listIndexes(t){return ge(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ge(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ar(n))return{data:null,error:n};throw n}})}}class yq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x0),r),this.fetch=y0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield lr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getVectors(t){return ge(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}listVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield lr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}queryVectors(t){return ge(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ge(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield lr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}}class bq{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x0),r),this.fetch=y0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}listBuckets(){return ge(this,arguments,void 0,function*(t={}){try{return{data:yield lr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ge(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}}class wq extends bq{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new jq(this.url,this.headers,t,this.fetch)}}class jq extends xq{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ge(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ge(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ge(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ge(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new _q(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class _q extends yq{constructor(t,r,n,s,o){super(t,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ge(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ge(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ge(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ge(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ge(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Sq extends dq{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new uq(this.url,this.headers,t,this.fetch)}get vectors(){return new wq(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fq(this.url+"/iceberg",this.headers,this.fetch)}}const Nq="2.81.0";let ol="";typeof Deno<"u"?ol="deno":typeof document<"u"?ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ol="react-native":ol="node";const Eq={"X-Client-Info":`supabase-js-${ol}/${Nq}`},Cq={headers:Eq},Pq={schema:"public"},Tq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kq={},Aq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Rq=()=>Headers,Iq=(e,t,r)=>{const n=Aq(r),s=Rq();return async(o,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:u}))}};function Oq(e){return e.endsWith("/")?e:e+"/"}function Dq(e,t){var r,n;const{db:s,auth:o,realtime:a,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function $q(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Oq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NA="2.81.0",li=30*1e3,Rv=3,fm=Rv*li,Mq="http://localhost:9999",Lq="supabase.auth.token",Fq={"X-Client-Info":`gotrue-js/${NA}`},Iv="X-Supabase-Api-Version",EA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zq=10*60*1e3;class ac extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Uq extends ac{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Vq(e){return be(e)&&e.name==="AuthApiError"}class oo extends ac{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Us extends ac{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Vr extends Us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qq(e){return be(e)&&e.name==="AuthSessionMissingError"}class Zo extends Us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Du extends Us{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $u extends Us{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wq(e){return be(e)&&e.name==="AuthImplicitGrantRedirectError"}class n1 extends Us{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ov extends Us{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function hm(e){return be(e)&&e.name==="AuthRetryableFetchError"}class s1 extends Us{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Dv extends Us{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),o1=` 	
\r=`.split(""),Hq=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<o1.length;t+=1)e[o1[t].charCodeAt(0)]=-2;for(let t=0;t<of.length;t+=1)e[of[t].charCodeAt(0)]=t;return e})();function i1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(of[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(of[n]),t.queuedBits-=6}}function CA(e,t,r){const n=Hq[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a1(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{Yq(a,n,r)};for(let a=0;a<e.length;a+=1)CA(e.charCodeAt(a),s,o);return t.join("")}function Gq(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Kq(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Gq(n,t)}}function Yq(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Bi(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)CA(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Jq(e){const t=[];return Kq(e,r=>t.push(r)),new Uint8Array(t)}function fo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>i1(s,r,n)),i1(null,r,n),t.join("")}function Xq(e){return Math.round(Date.now()/1e3)+e}function Qq(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",Hs={tested:!1,writable:!1},PA=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hs.tested)return Hs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Hs.tested=!0,Hs.writable=!0}catch{Hs.tested=!0,Hs.writable=!1}return Hs.writable};function Zq(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const TA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eW=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ci=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Gs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rs=async(e,t)=>{await e.removeItem(t)};class hh{constructor(){this.promise=new hh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}hh.promiseConstructor=Promise;function pm(e){const t=e.split(".");if(t.length!==3)throw new Dv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Bq.test(t[n]))throw new Dv("JWT not in base64url format");return{header:JSON.parse(a1(t[0])),payload:JSON.parse(a1(t[1])),signature:Bi(t[2]),raw:{header:t[0],payload:t[1]}}}async function tW(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rW(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){n(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function nW(e){return("0"+e.toString(16)).substr(-2)}function sW(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,nW).join("")}async function oW(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function iW(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await oW(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ei(e,t,r=!1){const n=sW();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ci(e,`${t}-code-verifier`,s);const o=await iW(n);return[o,n===o?"plain":"s256"]}const aW=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lW(e){const t=e.headers.get(Iv);if(!t||!t.match(aW))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function cW(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uW(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dW=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ti(e){if(!dW.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mm(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fW(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function l1(e){return JSON.parse(JSON.stringify(e))}const eo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hW=[502,503,504];async function c1(e){var t;if(!eW(e))throw new Ov(eo(e),0);if(hW.includes(e.status))throw new Ov(eo(e),e.status);let r;try{r=await e.json()}catch(o){throw new oo(eo(o),o)}let n;const s=lW(e);if(s&&s.getTime()>=EA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new s1(eo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Vr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new s1(eo(r),e.status,r.weak_password.reasons);throw new Uq(eo(r),e.status||500,n)}const pW=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Se(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Iv]||(o[Iv]=EA["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await mW(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function mW(e,t,r,n,s,o){const a=pW(t,n,s,o);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Ov(eo(c),0)}if(l.ok||await c1(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await c1(c)}}function qr(e){var t;let r=null;xW(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Xq(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function u1(e){const t=qr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ds(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gW(e){return{data:e,error:null}}function vW(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=_n(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function d1(e){return e}function xW(e){return e.access_token&&e.refresh_token&&e.expires_in}const gm=["global","local","others"];class yW{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=TA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=gm[0]){if(gm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gm.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ds})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=_n(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vW,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ds})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:d1});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ti(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ds})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ti(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ds})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ti(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ds})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ti(t.userId);try{const{data:r,error:n}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ti(t.userId),ti(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:d1});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}}function f1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ri={debug:!!(globalThis&&PA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class bW extends kA{}async function wW(e,t,r){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ri.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bW(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ri.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function jW(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function AA(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function _W(e){return parseInt(e,16)}function SW(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function NW(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:f,uri:d,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=AA(e.address),g=f?`${f}://${n}`:n,v=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${m}

${v}`;let b=`URI: ${d}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(b+=`
Expiration Time: ${s.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}b+=y}return`${x}
${b}`}class lt extends Error{constructor({message:t,code:r,cause:n,name:s}){var o;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class af extends lt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function EW({error:e,options:t}){var r,n,s;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(RA(a)){if(o.rp.id!==a)return new lt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function CW({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(RA(n)){if(r.rpId!==n)return new lt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class PW{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const TW=new PW;function kW(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=_n(e,["challenge","user","excludeCredentials"]),o=Bi(t).buffer,a=Object.assign(Object.assign({},r),{id:Bi(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Bi(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function AW(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=_n(e,["challenge","allowCredentials"]),s=Bi(t).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Bi(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function RW(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:fo(new Uint8Array(e.response.attestationObject)),clientDataJSON:fo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function IW(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:fo(new Uint8Array(s.authenticatorData)),clientDataJSON:fo(new Uint8Array(s.clientDataJSON)),signature:fo(new Uint8Array(s.signature)),userHandle:s.userHandle?fo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function RA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function h1(){var e,t;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function OW(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new af("Browser returned unexpected credential type",t)}:{data:null,error:new af("Empty credential response",t)}}catch(t){return{data:null,error:EW({error:t,options:e})}}}async function DW(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new af("Browser returned unexpected credential type",t)}:{data:null,error:new af("Empty credential response",t)}}catch(t){return{data:null,error:CW({error:t,options:e})}}}const $W={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},MW={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(t(a)){const l=n[o];t(l)?n[o]=lf(l,a):n[o]=lf(a)}else n[o]=a}return n}function LW(e,t){return lf($W,e,t||{})}function FW(e,t){return lf(MW,e,t||{})}class BW{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},o){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:l};const c=s??TW.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=LW(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:d}=await OW({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=FW(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:d}=await DW(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new oo("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new ac("rpId is required for WebAuthn authentication")};try{if(!h1())return{data:null,error:new oo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new oo("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new ac("rpId is required for WebAuthn registration")};try{if(!h1())return{data:null,error:new oo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return be(a)?{data:null,error:a}:{data:null,error:new oo("Unexpected error in register",a)}}}}jW();const zW={url:Mq,storageKey:Lq,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fq,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function p1(e,t,r){return await r()}const ni={};class lc{get jwks(){var t,r;return(r=(t=ni[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ni[this.storageKey]=Object.assign(Object.assign({},ni[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ni[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ni[this.storageKey]=Object.assign(Object.assign({},ni[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},zW),t);if(this.storageKey=o.storageKey,this.instanceID=(r=lc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,lc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new yW({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=TA(o.fetch),this.lock=o.lock||p1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Tt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wW:this.lock=p1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BW(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:PA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=f1(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=f1(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${NA}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Tt()&&(r=Zq(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Tt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Wq(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?this._returnResult({error:r}):this._returnResult({error:new oo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qr}),{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ei(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:qr})}else if("phone"in t){const{phone:f,password:d,options:h}=t;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:qr})}else throw new Du("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:a,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:u1})}else if("phone"in t){const{phone:o,password:a,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:u1})}else throw new Du("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const o=new Zo;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,o,a,l,c,u,f,d,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:b,options:y}=t;let w;if(Tt())if(typeof x=="object")w=x;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")w=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const j=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),_=await w.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=AA(_[0]);let N=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const C=await w.request({method:"eth_chainId"});N=_W(C)}const E={domain:j.host,address:S,statement:b,uri:j.href,version:"1",chainId:N,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=y==null?void 0:y.signInWithEthereum)===null||f===void 0?void 0:f.resources};m=NW(E),g=await w.request({method:"personal_sign",params:[SW(m),S]})}try{const{data:v,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:qr});if(x)throw x;if(!v||!v.session||!v.user){const b=new Zo;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(be(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,o,a,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:b,statement:y,options:w}=t;let j;if(Tt())if(typeof b=="object")j=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=b}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:x,error:b}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:fo(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:qr});if(b)throw b;if(!x||!x.session||!x.user){const y=new Zo;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(be(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await Gs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:a}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qr});if(await rs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const l=new Zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const f=new Zo;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ei(this.storage,this.storageKey));const{error:d}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Du("You must provide either an email or phone number.")}catch(l){if(be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:qr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,a=null;this.flowType==="pkce"&&([o,a]=await ei(this.storage,this.storageKey));const l=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:gW});return this._returnResult(l)}catch(o){if(be(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Vr;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:a}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:a,error:l}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Du("You must provide either an email or phone number and a type")}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Gs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<fm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Gs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=mm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=fW(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ds}):await this._useSession(async r=>{var n,s,o;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vr}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ds})})}catch(r){if(be(r))return qq(r)&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Vr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ei(this.storage,this.storageKey));const{data:u,error:f}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:ds});if(f)throw f;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(be(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vr;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:a}=pm(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Vr;const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Tt())throw new $u("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $u(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new n1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $u("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n1("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new $u("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=li&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(o);if(x)throw x;const b={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Gs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Vq(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Qq(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ei(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(be(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var a,l,c,u,f;const{data:d,error:h}=o;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Tt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(be(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:f}=t,d=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qr}),{data:h,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Zo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(s){if(be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)throw a;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rW(async s=>(s>0&&await tW(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qr})),(s,o)=>{const a=200*Math.pow(2,s);return o&&hm(o)&&Date.now()+a-n<li})}catch(n){if(this._debug(r,"error",n),be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Gs(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Gs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ci(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:mm()}else if(s&&!s.user&&!s.user){const a=await Gs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await rs(this.storage,this.storageKey+"-user"),await ci(this.storage,this.storageKey,s)):s.user=mm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fm;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${fm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),hm(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new hh;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Vr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),be(o)){const a={data:null,error:o};return hm(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ci(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=l1(s);await ci(this.storage,this.storageKey,o)}else{const s=l1(r);await ci(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await rs(this.storage,this.storageKey),await rs(this.storage,this.storageKey+"-code-verifier"),await rs(this.storage,this.storageKey+"-user"),this.userStorage&&await rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),li);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/li);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${li}ms, refresh threshold is ${Rv} ticks`),s<=Rv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof kA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await ei(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?RW(t.webauthn.credential_response):IW(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kW(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:AW(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pm(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Vr})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Vr});const a=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Vr});const a=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+zq>s)return n;const{data:o,error:a}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=pm(n);r!=null&&r.allowExpired||cW(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:o,header:s,signature:a},error:null}}const f=uW(s.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,a,Jq(`${l}.${c}`)))throw new Dv("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}}lc.nextInstanceID={};const UW=lc;class VW extends UW{constructor(t){super(t)}}class qW{constructor(t,r,n){var s,o,a;this.supabaseUrl=t,this.supabaseKey=r;const l=$q(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Pq,realtime:kq,auth:Object.assign(Object.assign({},Tq),{storageKey:c}),global:Cq},f=Dq(n??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=Iq(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new $9(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Sq(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new I9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:a,flowType:l,lock:c,debug:u,throwOnError:f},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VW({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:u,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Z9(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const WW=(e,t,r)=>new qW(e,t,r);function HW(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}HW()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const IA={}.VITE_SUPABASE_URL,OA={}.VITE_SUPABASE_ANON_KEY;if(!IA||!OA)throw new Error("Missing Supabase environment variables. Please check your .env file.");const T=WW(IA,OA,{auth:{storage:window.localStorage,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit",storageKey:"sb-yscwpxwgnhqbhkqzipag-auth-token"},db:{schema:"public"}}),m1={debug:"#6366f1",info:"#3b82f6",warn:"#f59e0b",error:"#ef4444"},g1=()=>new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),P={debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{console.warn(`%c[${g1()}] WARN`,`color: ${m1.warn}; font-weight: bold`,...e)},error:(...e)=>{console.error(`%c[${g1()}] ERROR`,`color: ${m1.error}; font-weight: bold`,...e)}},DA=p.createContext(null),GW=({children:e})=>{const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(null),u=p.useCallback(async()=>{try{s(!0),a(null);const{data:{session:d}}=await T.auth.getSession();if(!d){P.debug("UsersContext: No active session, skipping fetch"),r([]),s(!1);return}const{data:h,error:m}=await T.rpc("get_accessible_users");if(m)throw P.error("UsersContext RPC error:",m),m;P.debug("UsersContext loaded",{count:(h==null?void 0:h.length)||0}),r(h||[]),c(new Date)}catch(d){P.error(" UsersContext fetch error:",d),a(d.message)}finally{s(!1)}},[]);p.useEffect(()=>{u()},[u]),p.useEffect(()=>{const{data:{subscription:d}}=T.auth.onAuthStateChange(h=>{h==="SIGNED_IN"?u():h==="SIGNED_OUT"&&(r([]),c(null))});return()=>d.unsubscribe()},[u]);const f={users:t,loading:n,error:o,refetch:u,lastFetch:l};return i.jsx(DA.Provider,{value:f,children:e})},b0=()=>{const e=p.useContext(DA);return e||{users:[],loading:!0,error:null,refetch:()=>{},lastFetch:null}};function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function sn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Rt(e){sn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ta(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var KW={};function YW(){return KW}function v1(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function ld(e,t){sn(2,arguments);var r=Rt(e),n=Rt(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function JW(e,t){sn(2,arguments);var r=Rt(e),n=Rt(t),s=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return s*12+o}function XW(e,t){return sn(2,arguments),Rt(e).getTime()-Rt(t).getTime()}var x1={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},QW="trunc";function ZW(e){return e?x1[e]:x1[QW]}function eH(e){sn(1,arguments);var t=Rt(e);return t.setHours(23,59,59,999),t}function tH(e){sn(1,arguments);var t=Rt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function rH(e){sn(1,arguments);var t=Rt(e);return eH(t).getTime()===tH(t).getTime()}function nH(e,t){sn(2,arguments);var r=Rt(e),n=Rt(t),s=ld(r,n),o=Math.abs(JW(r,n)),a;if(o<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*o);var l=ld(r,n)===-s;rH(Rt(e))&&o===1&&ld(e,n)===1&&(l=!1),a=s*(o-Number(l))}return a===0?0:a}function sH(e,t,r){sn(2,arguments);var n=XW(e,t)/1e3;return ZW(r==null?void 0:r.roundingMethod)(n)}var oH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iH=function(t,r,n){var s,o=oH[t];return typeof o=="string"?s=o:r===1?s=o.one:s=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};const aH=iH;function zi(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var lH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dH={date:zi({formats:lH,defaultWidth:"full"}),time:zi({formats:cH,defaultWidth:"full"}),dateTime:zi({formats:uH,defaultWidth:"full"})};const fH=dH;var hH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pH=function(t,r,n,s){return hH[t]};const mH=pH;function hn(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):o;s=e.formattingValues[a]||e.formattingValues[o]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var gH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jH=function(t,r){var n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_H={ordinalNumber:jH,era:hn({values:gH,defaultWidth:"wide"}),quarter:hn({values:vH,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:hn({values:xH,defaultWidth:"wide"}),day:hn({values:yH,defaultWidth:"wide"}),dayPeriod:hn({values:bH,defaultWidth:"wide",formattingValues:wH,defaultFormattingWidth:"wide"})};const SH=_H;function pn(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;var a=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?EH(l,function(d){return d.test(a)}):NH(l,function(d){return d.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var f=t.slice(a.length);return{value:u,rest:f}}}function NH(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function EH(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function $A(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var s=n[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}var CH=/^(\d+)(th|st|nd|rd)?/i,PH=/\d+/i,TH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kH={any:[/^b/i,/^(a|c)/i]},AH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RH={any:[/1/i,/2/i,/3/i,/4/i]},IH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},DH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$H={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},MH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FH={ordinalNumber:$A({matchPattern:CH,parsePattern:PH,valueCallback:function(t){return parseInt(t,10)}}),era:pn({matchPatterns:TH,defaultMatchWidth:"wide",parsePatterns:kH,defaultParseWidth:"any"}),quarter:pn({matchPatterns:AH,defaultMatchWidth:"wide",parsePatterns:RH,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:pn({matchPatterns:IH,defaultMatchWidth:"wide",parsePatterns:OH,defaultParseWidth:"any"}),day:pn({matchPatterns:DH,defaultMatchWidth:"wide",parsePatterns:$H,defaultParseWidth:"any"}),dayPeriod:pn({matchPatterns:MH,defaultMatchWidth:"any",parsePatterns:LH,defaultParseWidth:"any"})};const BH=FH;var zH={code:"en-US",formatDistance:aH,formatLong:fH,formatRelative:mH,localize:SH,match:BH,options:{weekStartsOn:0,firstWeekContainsDate:1}};const UH=zH;function MA(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function VH(e){return MA({},e)}var y1=1440,qH=2520,vm=43200,WH=86400;function HH(e,t,r){var n,s;sn(2,arguments);var o=YW(),a=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:o.locale)!==null&&n!==void 0?n:UH;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=ld(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=MA(VH(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),u,f;l>0?(u=Rt(t),f=Rt(e)):(u=Rt(e),f=Rt(t));var d=sH(f,u),h=(v1(f)-v1(u))/1e3,m=Math.round((d-h)/60),g;if(m<2)return r!=null&&r.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,c):d<10?a.formatDistance("lessThanXSeconds",10,c):d<20?a.formatDistance("lessThanXSeconds",20,c):d<40?a.formatDistance("halfAMinute",0,c):d<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):m===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",m,c);if(m<45)return a.formatDistance("xMinutes",m,c);if(m<90)return a.formatDistance("aboutXHours",1,c);if(m<y1){var v=Math.round(m/60);return a.formatDistance("aboutXHours",v,c)}else{if(m<qH)return a.formatDistance("xDays",1,c);if(m<vm){var x=Math.round(m/y1);return a.formatDistance("xDays",x,c)}else if(m<WH)return g=Math.round(m/vm),a.formatDistance("aboutXMonths",g,c)}if(g=nH(f,u),g<12){var b=Math.round(m/vm);return a.formatDistance("xMonths",b,c)}else{var y=g%12,w=Math.floor(g/12);return y<3?a.formatDistance("aboutXYears",w,c):y<9?a.formatDistance("overXYears",w,c):a.formatDistance("almostXYears",w+1,c)}}function GH(e,t){return sn(1,arguments),HH(e,Date.now(),t)}function KH(e,t){if(ta(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ta(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YH(e){var t=KH(e,"string");return ta(t)=="symbol"?t:t+""}function JH(e,t,r){return(t=YH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var XH={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},QH=function(t,r,n){var s,o=XH[t];return typeof o=="string"?s=o:r===1?s=o.one:s=o.other.replace("{{count}}",String(r)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+s:"il y a "+s:s};const ZH=QH;var eG={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},tG={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},rG={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nG={date:zi({formats:eG,defaultWidth:"full"}),time:zi({formats:tG,defaultWidth:"full"}),dateTime:zi({formats:rG,defaultWidth:"full"})};const sG=nG;var oG={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},iG=function(t,r,n,s){return oG[t]};const aG=iG;var lG={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},cG={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},uG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},dG={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},fG={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},hG=function(t,r){var n=Number(t),s=r==null?void 0:r.unit;if(n===0)return"0";var o=["year","week","hour","minute","second"],a;return n===1?a=s&&o.includes(s)?"re":"er":a="me",n+a},pG={ordinalNumber:hG,era:hn({values:lG,defaultWidth:"wide"}),quarter:hn({values:cG,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:hn({values:uG,defaultWidth:"wide"}),day:hn({values:dG,defaultWidth:"wide"}),dayPeriod:hn({values:fG,defaultWidth:"wide"})};const mG=pG;var gG=/^(\d+)(ime|re|me|er|e)?/i,vG=/\d+/i,xG={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},yG={any:[/^av/i,/^ap/i]},bG={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},wG={any:[/1/i,/2/i,/3/i,/4/i]},jG={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},_G={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},SG={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},NG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},EG={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},CG={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},PG={ordinalNumber:$A({matchPattern:gG,parsePattern:vG,valueCallback:function(t){return parseInt(t)}}),era:pn({matchPatterns:xG,defaultMatchWidth:"wide",parsePatterns:yG,defaultParseWidth:"any"}),quarter:pn({matchPatterns:bG,defaultMatchWidth:"wide",parsePatterns:wG,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:pn({matchPatterns:jG,defaultMatchWidth:"wide",parsePatterns:_G,defaultParseWidth:"any"}),day:pn({matchPatterns:SG,defaultMatchWidth:"wide",parsePatterns:NG,defaultParseWidth:"any"}),dayPeriod:pn({matchPatterns:EG,defaultMatchWidth:"any",parsePatterns:CG,defaultParseWidth:"any"})};const TG=PG;var kG={code:"fr",formatDistance:ZH,formatLong:sG,formatRelative:aG,localize:mG,match:TG,options:{weekStartsOn:1,firstWeekContainsDate:4}};const AG=kG,RG=[{name:"Pipeline",path:"/admin/pipeline",icon:fy,adminOnly:!1},{name:"Agenda",path:"/admin/agenda",icon:dy,adminOnly:!1},{name:"Contacts",path:"/admin/contacts",icon:Eo,adminOnly:!1},{name:"Charly AI",path:"/admin/charly",icon:Yl,adminOnly:!1},{name:"Workflow V2",path:"/admin/workflow-v2-config",icon:nv,adminOnly:!0},{name:"Configuration IA",path:"/admin/configuration-ia",icon:uP,adminOnly:!0},{name:"Landing Page",path:"/admin/landing-page",icon:w3,adminOnly:!0}],IG=()=>{const{width:e}=fh(),t=e<768,[r,n]=p.useState(!1),{notifications:s,markNotificationAsRead:o,activeAdminUser:a,switchActiveAdminUser:l,brandName:c,logoUrl:u}=Ve();b0();const f=Te();Mf();const d=p.useMemo(()=>{const x=(a==null?void 0:a.role)==="Global Admin"||(a==null?void 0:a.role)==="Admin"||(a==null?void 0:a.role)==="platform_admin";return RG.filter(b=>!b.adminOnly||x)},[a==null?void 0:a.role]),h=s.filter(x=>!x.read),m=J.useMemo(()=>{const x={};return h.forEach(b=>{const y=b.projectName===" Message partenaire",w=b.projectName===" Message interne",j=`${b.prospectId}-${b.projectType}${y?"-partner":w?"-internal":""}`;x[j]||(x[j]={prospectId:b.prospectId,prospectName:b.prospectName,projectType:b.projectType,projectName:b.projectName,notifications:[],totalCount:0,latestTimestamp:b.timestamp}),x[j].notifications.push(b),x[j].totalCount+=b.count||1,new Date(b.timestamp)>new Date(x[j].latestTimestamp)&&(x[j].latestTimestamp=b.timestamp)}),Object.values(x).sort((b,y)=>new Date(y.latestTimestamp)-new Date(b.latestTimestamp))},[h]),g=x=>{x.notifications.forEach(j=>{o(j.id)});const b=x.projectName===" Message partenaire",y=x.projectName===" Message interne",w=b?"&channel=partner":y?"&channel=internal":"";f(`/admin/pipeline?project=${x.projectType}&prospect=${x.prospectId}${w}`)},v=()=>i.jsx(Co,{children:r&&i.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1),children:i.jsxs(ae.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-4/5 max-w-sm bg-background p-6 shadow-xl",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("span",{className:"font-bold text-xl",children:"Menu Pro"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:i.jsx(Fo,{className:"h-6 w-6"})})]}),i.jsxs("nav",{className:"flex flex-col space-y-2",children:[d.map(x=>i.jsxs(Fd,{to:x.path,onClick:()=>n(!1),className:({isActive:b})=>`flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors ${b?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(x.icon,{className:"h-6 w-6"}),i.jsx("span",{children:x.name})]},x.name)),i.jsx("div",{className:"pt-4 mt-4 border-t",children:i.jsxs(go,{to:"/admin/parametres",onClick:()=>n(!1),className:"flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors text-gray-600 hover:bg-gray-50",children:[i.jsx(uP,{className:"h-6 w-6"}),i.jsx("span",{children:"Paramtres"})]})})]})]})})});return i.jsx(i.Fragment,{children:i.jsxs(ae.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-background/80 backdrop-blur-md shadow-sm sticky top-0 z-40 border-b border-gray-100",children:[i.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx(go,{to:"/admin",className:"flex items-center",children:i.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[c||"Admin"," ",i.jsx("span",{className:"font-light text-blue-600",children:"Pro"})]})})}),i.jsx("nav",{className:"hidden md:flex items-center space-x-2 bg-gray-100 p-1 rounded-full",children:d.map(x=>i.jsxs(Fd,{to:x.path,className:({isActive:b})=>`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${b?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[i.jsx(x.icon,{className:"h-4 w-4"}),i.jsx("span",{children:x.name})]},x.name))}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Qk,{children:[i.jsx(Zk,{asChild:!0,children:i.jsxs(H,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-100 relative",children:[i.jsx(Ud,{className:"h-5 w-5 text-gray-600"}),m.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:m.reduce((x,b)=>x+b.totalCount,0)})]})}),i.jsxs(c0,{align:"end",className:"w-80",children:[i.jsx(u0,{children:"Notifications"}),i.jsx(d0,{}),m.length>0?m.map((x,b)=>i.jsx(oc,{onClick:()=>g(x),className:"cursor-pointer",children:i.jsxs("div",{className:"flex items-start space-x-3 py-2 w-full",children:[x.projectName===" Message interne"?i.jsx("div",{className:"bg-purple-100 rounded-full p-2",children:i.jsx(Di,{className:"h-4 w-4 text-purple-600"})}):x.projectName===" Message partenaire"?i.jsx("div",{className:"bg-orange-100 rounded-full p-2",children:i.jsx(Di,{className:"h-4 w-4 text-orange-600"})}):i.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:i.jsx(Di,{className:"h-4 w-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-800",children:x.projectName===" Message interne"?x.totalCount>1?` ${x.totalCount} messages internes  ${x.prospectName}`:` Message interne  ${x.prospectName}`:x.projectName===" Message partenaire"?x.totalCount>1?` ${x.totalCount} messages partenaire  ${x.prospectName}`:` Message partenaire  ${x.prospectName}`:x.totalCount>1?`${x.totalCount} nouveaux messages de ${x.prospectName}`:`Nouveau message de ${x.prospectName}`}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Projet: ",x.projectType]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(x.latestTimestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})},`${x.prospectId}-${x.projectType}-${b}`)):i.jsx(oc,{disabled:!0,children:i.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Aucune nouvelle notification"})})]})]}),i.jsx(go,{to:"/admin/profil",children:i.jsx("div",{className:"w-8 h-8 gradient-green rounded-full flex items-center justify-center cursor-pointer",children:i.jsx(Tc,{className:"h-4 w-4 text-white"})})}),t&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!0),className:"rounded-full hover:bg-gray-100",children:i.jsx(lP,{className:"h-6 w-6"})})]})]})}),t&&i.jsx(v,{})]})})},OG=()=>{const e=t=>{F({title:` Action rapide "${t}" non implmente.`,description:"Vous pouvez demander son dveloppement ! "})};return i.jsxs("div",{className:"w-full flex-shrink-0 bg-white rounded-3xl shadow-soft flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-20 bg-gradient-to-br from-teal-400 to-green-500 rounded-t-3xl"}),i.jsx("div",{className:"relative pt-6 px-6 flex justify-center",children:i.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-white shadow-lg overflow-hidden flex items-center justify-center",children:i.jsx("img",{className:"w-full h-auto object-contain rounded-full",alt:"Avatar de Charly, conseiller virtuel Evatime",src:"https://horizons-cdn.hostinger.com/43725989-d002-4543-b65c-278701925e7e/4e3f809791e357819f31c585852d3a99.png"})})})]}),i.jsxs("div",{className:"p-4 text-center",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Bonjour "}),i.jsx("p",{className:"text-gray-600 text-xs",children:"Je suis Charly, enchant de vous connaitre !!  Posez-moi une question ou lancez une action."})]}),i.jsxs("div",{className:"px-4 grid grid-cols-2 gap-2",children:[i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("RDV"),children:[i.jsx(dy,{className:"h-4 w-4 text-blue-500"})," ",i.jsx("span",{children:"RDV"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("Appel"),children:[i.jsx(Pc,{className:"h-4 w-4 text-green-500"})," ",i.jsx("span",{children:"Appel"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("SMS"),children:[i.jsx(Di,{className:"h-4 w-4 text-purple-500"})," ",i.jsx("span",{children:"SMS"})]}),i.jsxs(H,{variant:"outline",className:"flex items-center justify-start space-x-2 text-xs h-9",onClick:()=>e("Email"),children:[i.jsx(en,{className:"h-4 w-4 text-orange-500"})," ",i.jsx("span",{children:"Email"})]})]}),i.jsx("div",{className:"p-4 mt-auto",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"crire  Charly",className:"w-full px-4 py-2 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),i.jsx(H,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-green-600 h-8 w-8",onClick:()=>F({title:"Le chat n'est pas encore fonctionnel."}),children:i.jsx(cP,{className:"h-5 w-5"})})]})})]})},DG=({isDesktop:e})=>{const[t,r]=p.useState(!1),n=({onClose:s,isMobile:o})=>i.jsxs(ae.div,{initial:o?{opacity:0,y:"100%"}:{opacity:0,x:"20px"},animate:{opacity:1,y:0,x:0},exit:o?{opacity:0,y:"100%"}:{opacity:0,x:"20px"},transition:{duration:.5,ease:[.22,1,.36,1]},className:o?"fixed inset-0 bg-white z-50 flex flex-col":"w-full",children:[i.jsx(OG,{}),o&&i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"rounded-full bg-black/20 text-white hover:bg-black/40",children:i.jsx(Fo,{className:"h-5 w-5"})})})]});return e?i.jsx(n,{onClose:()=>{},isMobile:!1}):i.jsxs(i.Fragment,{children:[i.jsx(ae.div,{className:"fixed bottom-6 right-6 z-40",initial:{scale:0},animate:{scale:1},transition:{delay:.5},children:i.jsx(H,{onClick:()=>r(!0),className:"w-16 h-16 rounded-full gradient-green shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:i.jsx("img",{className:"w-full h-auto object-contain",alt:"Ouvrir le chat avec Charly",src:"https://horizons-cdn.hostinger.com/43725989-d002-4543-b65c-278701925e7e/4e3f809791e357819f31c585852d3a99.png"})})})}),i.jsx(Co,{children:t&&i.jsx(n,{onClose:()=>r(!1),isMobile:!0})})]})},$G=e=>{const[t,r]=p.useState(null),[n,s]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null);return p.useEffect(()=>{if(!e){r(null),s(null),a(null),c(null),f(!1);return}(async()=>{try{f(!0),h(null),r(null),s(null),a(null),c(null),P.info("[useBranding] Chargement branding pour organization:",e);const{data:g,error:v}=await T.rpc("get_organization_settings_for_org",{p_organization_id:e});if(v){P.warn("[useBranding] Erreur lors du chargement (table organization_settings peut ne pas exister):",v),f(!1);return}const x=g||null;if(!x){P.info("[useBranding] Aucun paramtre de branding trouv, utilisation des valeurs par dfaut"),f(!1);return}P.info("[useBranding] Branding charg:",x),r(x.display_name),s(x.logo_url),a(x.primary_color),c(x.secondary_color),f(!1)}catch(g){P.warn("[useBranding] Exception lors du chargement, fallback vers valeurs par dfaut:",g),f(!1)}})()},[e]),{brandName:t,logoUrl:n,primaryColor:o,secondaryColor:l,brandingLoading:u,brandingError:d}},w0=p.createContext(null),on=()=>{const e=p.useContext(w0);if(!e)throw new Error("useOrganization must be used within OrganizationProvider");return e},MG=({children:e})=>{const[t,r]=p.useState(null),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(!1),[u,f]=p.useState(null),d=p.useRef(!1),[h,m]=p.useState(!1);p.useEffect(()=>{T.auth.getSession().then(({data:{session:_}})=>{var N;const S=((N=_==null?void 0:_.user)==null?void 0:N.id)||null;f(S)});const{data:{subscription:j}}=T.auth.onAuthStateChange((_,S)=>{var E;const N=((E=S==null?void 0:S.user)==null?void 0:E.id)||null;f(C=>N!==C?N:C)});return()=>j.unsubscribe()},[]),p.useEffect(()=>{let _=null,S=!1;const N=(C,k=!1,I=null)=>{S||(_&&(clearTimeout(_),_=null),r(C),c(k),I&&a(I),!d.current&&!I&&(d.current=!0,m(!0)),s(!1))};return(async()=>{var C,k,I;try{s(!0),a(null),c(!1),_=setTimeout(()=>{S||(P.error("[OrganizationContext] Timeout rsolution organisation (10s)"),a("Dlai de connexion dpass. Le serveur ne rpond pas."),s(!1))},1e4);const O=window.location.hostname;P.info("[OrganizationContext] Hostname actuel:",O);let M=null;const{data:D,error:z}=await T.rpc("resolve_organization_from_host",{host:O});if(S)return;if(!z&&D&&(M=(D==null?void 0:D.id)||Array.isArray(D)&&((C=D[0])==null?void 0:C.id)||D,M&&typeof M=="string"?P.info("[OrganizationContext] Organization rsolue depuis hostname:",M):M=null),u){P.info("[OrganizationContext] User authentifi, vrification organization_id");const{data:A}=await T.from("users").select("organization_id").eq("user_id",u).maybeSingle();if(S)return;if(A!=null&&A.organization_id){P.info("[OrganizationContext] Organization rsolue depuis user admin:",A.organization_id),N(A.organization_id,!1);return}if(M){const{data:W}=await T.from("prospects").select("id, organization_id").eq("user_id",u).eq("organization_id",M).maybeSingle();if(S)return;if(W){P.info("[OrganizationContext] Client dj li  l'org du hostname:",M),N(M,!1);return}const{data:{session:V}}=await T.auth.getSession();if(S)return;const re=(k=V==null?void 0:V.user)==null?void 0:k.email;if(re){const{data:ve,error:se}=await T.rpc("link_user_to_prospect_in_org",{p_user_id:u,p_email:re,p_organization_id:M});if(S)return;if(!se&&ve){P.info("[OrganizationContext] Client li au prospect dans l'org du hostname:",M),N(M,!1);return}else se&&P.warn("[OrganizationContext] Erreur liaison prospect:",se.message)}}const{data:R}=await T.from("prospects").select("organization_id").eq("user_id",u).limit(1).maybeSingle();if(S)return;if(R!=null&&R.organization_id){P.info("[OrganizationContext] Organization rsolue depuis prospect (user_id):",R.organization_id),N(R.organization_id,!1);return}const{data:{session:$}}=await T.auth.getSession();if(S)return;const L=(I=$==null?void 0:$.user)==null?void 0:I.email;if(L){const{data:W}=await T.from("prospects").select("organization_id").eq("email",L).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(S)return;if(W!=null&&W.organization_id){P.info("[OrganizationContext] Organization rsolue depuis prospect par EMAIL:",W.organization_id),N(W.organization_id,!1);return}}}if(M){P.info("[OrganizationContext] Pas de user, utilisation hostname org:",M),N(M,!1);return}P.warn("[OrganizationContext] Aucune organisation trouve, fallback vers organisation plateforme");const{data:B,error:q}=await T.from("organizations").select("id").eq("is_platform",!0).limit(1).maybeSingle();if(S)return;if(!q&&B){const A=B.id||(B==null?void 0:B.organization_id)||B;A?(P.info("[OrganizationContext] Fallback vers organisation plateforme:",A),N(A,!0)):(P.warn("[OrganizationContext] Platform organization query returned no id, leaving organizationId null"),N(null,!0))}else P.warn("[OrganizationContext] Impossible de rcuprer l'organisation plateforme, leaving organizationId null",q),N(null,!0)}catch(O){if(_&&clearTimeout(_),S)return;P.error("[OrganizationContext] Exception lors de la rsolution:",O),P.warn("[OrganizationContext] Fallback vers organizationId = null (mode dgrad)"),N(null,!0)}})(),()=>{S=!0,_&&clearTimeout(_)}},[u]);const{brandName:g,logoUrl:v,primaryColor:x,secondaryColor:b,brandingLoading:y,brandingError:w}=$G(t);return p.useEffect(()=>{g&&(document.title=g)},[g]),p.useEffect(()=>{x&&document.documentElement.style.setProperty("--primary",x),b&&document.documentElement.style.setProperty("--secondary",b)},[x,b]),p.useEffect(()=>{},[t,u]),i.jsx(w0.Provider,{value:{organizationId:t,organizationLoading:n,organizationError:o,organizationReady:h,isPlatformOrg:l,brandName:g,logoUrl:v,primaryColor:x,secondaryColor:b,brandingLoading:y,brandingError:w},children:e})};class LA extends p.Component{constructor(r){super(r);qs(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})});qs(this,"handleGoBack",()=>{window.history.length>1?window.history.back():window.location.href="/"});qs(this,"handleGoHome",()=>{window.location.href="/admin/pipeline"});this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(r){const n=`ERR-${Date.now()}-${Math.random().toString(36).slice(2,6).toUpperCase()}`;return{hasError:!0,error:r,errorId:n}}componentDidCatch(r,n){const{name:s="Module"}=this.props,{errorId:o}=this.state;P.error(`[ModuleBoundary] Crash dans "${s}"`,{errorId:o,module:s,message:r==null?void 0:r.message,stack:r==null?void 0:r.stack,componentStack:n==null?void 0:n.componentStack}),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(r,{tags:{module:s,errorId:o},extra:{componentStack:n==null?void 0:n.componentStack}}),this.setState({errorInfo:n})}render(){const{hasError:r,error:n,errorId:s}=this.state,{children:o,name:a="Module"}=this.props;return r?i.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-8",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-red-100 p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(cy,{className:"w-8 h-8 text-red-500"})}),i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:['Module "',a,'" a rencontr une erreur']}),i.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Une erreur inattendue s'est produite. Vous pouvez ressayer ou retourner  l'accueil."}),i.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2 mb-6",children:i.jsx("code",{className:"text-xs text-gray-500 font-mono",children:s})}),!1,i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsxs(H,{variant:"outline",onClick:this.handleGoHome,className:"flex items-center gap-2",children:[i.jsx(aP,{className:"w-4 h-4"}),"Accueil"]}),i.jsxs(H,{onClick:this.handleRetry,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:[i.jsx(qf,{className:"w-4 h-4"}),"Ressayer"]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Si le problme persiste, contactez le support avec le code ci-dessus."})]})}):o}}const LG=()=>{const{width:e}=fh(),{activeAdminUser:t,setActiveAdminUser:r,adminReady:n,bootStatus:s,BOOT_STATUS:o}=Ve(),{organizationId:a,organizationLoading:l,organizationError:c}=on(),u=e<768,f=e>=1024,d=nr(),h=Te();d.pathname.startsWith("/admin/charly"),d.pathname.startsWith("/admin/agenda"),d.pathname.startsWith("/admin/profil"),d.pathname.startsWith("/admin/pipeline")||d.pathname,d.pathname.startsWith("/admin/contacts");const m=d.pathname.startsWith("/admin/configuration-ia");d.pathname.startsWith("/admin/workflows-charly");const g=d.pathname.startsWith("/admin/landing-page"),v=m||g,x=(t==null?void 0:t.role)==="Global Admin"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="platform_admin";return c?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connexion au serveur impossible"}),i.jsx("p",{className:"text-gray-600 mb-6",children:c}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Ressayer"}),i.jsx("button",{onClick:()=>h("/"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour  l'accueil"})]})]})}):l||!a?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:"Connexion..."})]})}):v&&!x&&!(!n&&!t)?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux administrateurs (Global Admin, Admin)."}),i.jsx("button",{onClick:()=>h("/admin/pipeline"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retour au Pipeline"})]})}):(p.useEffect(()=>{(async()=>{const{data:{user:w}}=await T.auth.getUser();if(w&&!t){const{data:j}=await T.from("prospects").select("id").eq("user_id",w.id).single();j&&(console.warn(" Client dtect sur espace admin  dconnexion automatique"),await T.auth.signOut(),h("/"))}})()},[t,h]),p.useEffect(()=>{if(!(t!=null&&t.id))return;const y=T.channel(`admin-user-${t.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"users",filter:`id=eq.${t.id}`},w=>{const j={id:w.new.id,userId:w.new.user_id,name:w.new.name,email:w.new.email,role:w.new.role,phone:w.new.phone,avatarUrl:w.new.avatar_url,managerId:w.new.manager_id,accessRights:w.new.access_rights,createdAt:w.new.created_at,updatedAt:w.new.updated_at};r(j)}).subscribe();return()=>{T.removeChannel(y)}},[t==null?void 0:t.id,r]),i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[i.jsx(IG,{}),i.jsxs("div",{className:"flex flex-1 w-full",children:[i.jsx("main",{className:"flex-1 min-w-0 p-4 sm:p-6 lg:p-8",children:i.jsx(LA,{name:"Admin Page",children:i.jsx($f,{})})}),m&&f&&i.jsx("aside",{className:"w-[300px] flex-shrink-0 p-6 pr-10 hidden lg:block",children:i.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-sm ring-1 ring-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Configurer Charly"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:"Personnalisez les projets, workflows, formulaires et contrats pour automatiser le suivi de vos clients."}),i.jsx("a",{href:"/admin/projects-management",className:"flex items-center justify-center gap-2 w-full rounded-lg bg-blue-600 px-5 py-3 text-base font-medium text-white transition-colors hover:bg-blue-700",children:" Configurer"})]})})]}),!f&&!u&&i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsx(DG,{isDesktop:!1})})]}))},b1=[{name:"Tableau de bord",path:"/dashboard",icon:fy,end:!0},{name:"Offres & Produits",path:"/dashboard/offres",icon:dP},{name:"Parrainage",path:"/dashboard/parrainage",icon:ev}],FG=()=>{const{width:e}=fh(),t=e<768,[r,n]=p.useState(!1),{companyLogo:s,clientNotifications:o,markClientNotificationAsRead:a,projectsData:l,brandName:c,logoUrl:u}=Ve(),f=Te(),d=o.filter(x=>!x.read),h=J.useMemo(()=>{const x={};return d.forEach(b=>{const y=`${b.projectType}`;x[y]||(x[y]={projectType:b.projectType,projectName:b.projectName,notifications:[],totalCount:0,latestTimestamp:b.timestamp}),x[y].notifications.push(b),x[y].totalCount+=b.count||1,new Date(b.timestamp)>new Date(x[y].latestTimestamp)&&(x[y].latestTimestamp=b.timestamp)}),Object.values(x).sort((b,y)=>new Date(y.latestTimestamp)-new Date(b.latestTimestamp))},[d]),m=x=>{x.notifications.forEach(b=>{a(b.id)}),f("/dashboard",{state:{openProjectType:x.projectType}})},g=()=>{f("/dashboard/profil")},v=()=>i.jsx(Co,{children:r&&i.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1),children:i.jsxs(ae.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-4/5 max-w-sm bg-background p-6 shadow-xl",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("span",{className:"font-bold text-xl",children:"Menu"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:i.jsx(Fo,{className:"h-6 w-6"})})]}),i.jsx("nav",{className:"flex flex-col space-y-2",children:b1.map(x=>i.jsxs(Fd,{to:x.path,end:x.end,onClick:()=>n(!1),className:({isActive:b})=>`flex items-center space-x-3 p-3 rounded-lg text-lg font-medium transition-colors ${b?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(x.icon,{className:"h-6 w-6"}),i.jsx("span",{children:x.name})]},x.name))})]})})});return i.jsxs("header",{className:"bg-background/80 backdrop-blur-md shadow-sm sticky top-0 z-40 border-b border-gray-100",children:[i.jsx("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx(go,{to:"/dashboard",className:"flex items-center",children:u?i.jsx("img",{src:u,alt:c||"Logo",className:"h-14 w-auto object-contain"}):s&&s.startsWith("data:video/mp4")?i.jsx("video",{src:s,className:"h-14 w-auto object-contain",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",style:{display:"block",background:"transparent"}}):s?i.jsx("img",{src:s,alt:"Logo",className:"h-14 w-auto object-contain"}):i.jsx("div",{className:"w-10 h-10 gradient-green rounded-xl flex items-center justify-center shadow-card",children:i.jsx("span",{className:"text-white font-bold text-lg",children:c?c.charAt(0).toUpperCase():"C"})})})}),!t&&i.jsx("nav",{className:"flex items-center space-x-2 bg-gray-100 p-1 rounded-full",children:b1.map(x=>i.jsxs(Fd,{to:x.path,end:x.end,className:({isActive:b})=>`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${b?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[i.jsx(x.icon,{className:"h-4 w-4"}),i.jsx("span",{children:x.name})]},x.name))}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Qk,{children:[i.jsx(Zk,{asChild:!0,children:i.jsxs(H,{variant:"ghost",size:"icon",className:"relative rounded-full hover:bg-gray-100",children:[i.jsx(Ud,{className:"h-5 w-5 text-gray-600"}),h.length>0&&i.jsx("span",{className:"absolute top-1 right-1 h-4 w-4 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:h.reduce((x,b)=>x+b.totalCount,0)})]})}),i.jsxs(c0,{align:"end",className:"w-80",children:[i.jsx(u0,{children:"Notifications"}),i.jsx(d0,{}),h.length>0?h.map((x,b)=>i.jsxs(oc,{onClick:()=>m(x),className:"cursor-pointer flex flex-col items-start py-3",children:[i.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[i.jsx("span",{className:"font-semibold text-blue-600",children:x.projectName}),i.jsx("span",{className:"text-xs text-gray-400",children:new Date(x.latestTimestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("p",{className:"text-sm text-gray-600",children:x.totalCount>1?`${x.totalCount} nouveaux messages`:x.notifications[0].message})]},`${x.projectType}-${b}`)):i.jsx(oc,{disabled:!0,className:"text-center py-4",children:"Aucune nouvelle notification"})]})]}),i.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-100",onClick:g,children:i.jsx("div",{className:"w-8 h-8 gradient-blue rounded-full flex items-center justify-center",children:i.jsx(Tc,{className:"h-4 w-4 text-white"})})}),t&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(!0),className:"rounded-full hover:bg-gray-100",children:i.jsx(lP,{className:"h-6 w-6"})})]})]})}),t&&i.jsx(v,{})]})},w1=()=>{fh();const{currentUser:e,setCurrentUser:t,companyLogo:r}=Ve();Te();const[n,s]=p.useState(!1);return p.useEffect(()=>{(async()=>{if(!(e!=null&&e.email)){s(!0);return}const{data:{session:a}}=await T.auth.getSession();if(!a){const l=`${window.location.origin}/dashboard`,{error:c}=await T.auth.signInWithOtp({email:e.email,options:{shouldCreateUser:!0,emailRedirectTo:l}});c?P.error("Erreur envoi magic link",{error:c.message}):F({title:" Activation requise",description:`Un lien de connexion a t envoy  ${e.email}. Cliquez dessus pour activer toutes les fonctionnalits.`,duration:1e4})}s(!0)})()},[e==null?void 0:e.email]),p.useEffect(()=>{if(!(e!=null&&e.id)||!n)return;const o=T.channel(`prospect-${e.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"prospects",filter:`id=eq.${e.id}`},a=>{const l={id:a.new.id,userId:a.new.user_id,name:a.new.name,email:a.new.email,phone:a.new.phone,company:a.new.company_name,address:a.new.address,tags:a.new.tags||[],status:a.new.status,ownerId:a.new.owner_id,hasAppointment:a.new.has_appointment,affiliateName:a.new.affiliate_name};t(l)}).subscribe();return()=>{T.removeChannel(o)}},[e==null?void 0:e.id,t]),i.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[i.jsx(FG,{}),i.jsx("div",{className:"flex flex-1 max-w-screen-xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-6 md:py-8 pb-24 md:pb-8",children:i.jsx("main",{className:"flex-1 min-w-0",children:i.jsx(LA,{name:"Espace Client",children:i.jsx($f,{})})})})]})},BG=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState(null);return p.useEffect(()=>{(async()=>{try{const{data:{user:a},error:l}=await T.auth.getUser();if(l||!a){e("/platform-login");return}const{data:c,error:u}=await T.from("platform_admins").select("user_id, email").eq("user_id",a.id).maybeSingle();if(u){console.error("[PlatformLayout] Error querying platform_admins:",u),await T.auth.signOut(),e("/platform-login");return}if(!c){console.error("[PlatformLayout] User not in platform_admins"),r(!1),s(null);return}s(c),r(!1)}catch(a){console.error("[PlatformLayout] Error checking access:",a),e("/platform-login")}})()},[e]),t?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:"Vrification des accs plateforme..."})]})}):n?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"EVATIME Platform"})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-gray-600",children:(n==null?void 0:n.name)||(n==null?void 0:n.email)}),i.jsx("span",{className:"text-xs bg-gray-900 text-white px-2 py-1 rounded",children:"Platform Admin"})]})]})})}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsx($f,{})})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Votre compte n'est pas autoris  accder  la plateforme EVATIME. Contactez un administrateur si vous pensez que c'est une erreur."}),i.jsx("button",{onClick:async()=>{await T.auth.signOut(),e("/platform-login")},className:"w-full bg-gray-900 text-white py-2 px-4 rounded hover:bg-gray-800 transition-colors",children:"Retour  la connexion"})]})})};function zG(){const[e,t]=p.useState(0),[r,n]=p.useState({}),[s,o]=p.useState(!0),a=p.useRef(null),l=p.useRef([]);return p.useEffect(()=>{let c=!0;(async()=>{try{const{data:{user:d},error:h}=await T.auth.getUser();if(h||!d){o(!1);return}const{data:m,error:g}=await T.from("partners").select("id").eq("user_id",d.id).single();if(g||!m){o(!1);return}a.current=m.id;const{data:v,error:x}=await T.from("missions").select("prospect_id, project_type").eq("partner_id",m.id).in("status",["pending","in_progress"]);if(x)throw x;const b=(v||[]).map(E=>({prospectId:E.prospect_id,projectType:E.project_type})),y=[...new Set(b.map(E=>E.prospectId))];if(l.current=y,b.length===0){c&&(t(0),n({}),o(!1));return}const{data:w,error:j}=await T.from("chat_messages").select("id, prospect_id, project_type").eq("channel","partner").neq("sender","partner").eq("read",!1).in("prospect_id",y);if(j)throw j;if(!c)return;const _=new Set(b.map(E=>`${E.prospectId}__${E.projectType}`)),S=(w||[]).filter(E=>_.has(`${E.prospect_id}__${E.project_type}`)),N={};for(const E of S){const C=`${E.prospect_id}__${E.project_type}`;N[C]=(N[C]||0)+1}n(N),t(S.length),o(!1)}catch(d){P.error("usePartnerUnreadCount: erreur init",{err:d.message}),c&&o(!1)}})();const f=T.channel(`partner-unread-${Math.random().toString(36).slice(2)}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},d=>{if(!c)return;const h=d.new;if(!h||h.channel!=="partner"||!l.current.includes(h.prospect_id))return;const m=`${h.prospect_id}__${h.project_type}`;d.eventType==="INSERT"?h.sender!=="partner"&&h.read===!1&&(n(g=>({...g,[m]:(g[m]||0)+1})),t(g=>g+1)):d.eventType==="UPDATE"&&h.read===!0&&h.sender!=="partner"&&(n(g=>{const v=g[m]||0;if(v<=1){const x={...g};return delete x[m],x}return{...g,[m]:v-1}}),t(g=>Math.max(0,g-1)))}).subscribe();return()=>{c=!1,T.removeChannel(f)}},[]),{totalUnread:e,unreadByConversation:r,loading:s}}const UG=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState(!1);return p.useEffect(()=>{(async()=>{try{const{data:{user:l},error:c}=await T.auth.getUser();if(c||!l){P.debug("PartnerLayout: Pas d'utilisateur authentifi"),e("/partner/login");return}const{data:u,error:f}=await T.from("partners").select("id, active").eq("user_id",l.id).single();if(f||!u){P.warn("PartnerLayout: Utilisateur non-partenaire tente d'accder",{userId:l.id}),await T.auth.signOut(),e("/partner/login");return}if(!u.active){P.warn("PartnerLayout: Partenaire inactif",{partnerId:u.id}),await T.auth.signOut(),e("/partner/login");return}s(!0)}catch(l){P.error("PartnerLayout: Erreur vrification accs",{error:l.message}),e("/partner/login")}finally{r(!1)}})();const{data:{subscription:a}}=T.auth.onAuthStateChange(l=>{l==="SIGNED_OUT"&&e("/partner/login")});return()=>{a==null||a.unsubscribe()}},[e]),t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(De,{className:"w-8 h-8 text-orange-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Vrification de l'accs..."})]})}):n?i.jsx(VG,{}):null},j1=[{path:"/partner/missions",label:"MISSIONS",icon:fy},{path:"/partner/contacts",label:"CONTACTS",icon:Eo},{path:"/partner/charly",label:"CHARLY",icon:Di},{path:"/partner/preuves",label:"PREUVES",icon:Vd}],VG=()=>{var s;const e=Te(),t=nr(),{totalUnread:r}=zG(),n=((s=j1.find(o=>t.pathname.startsWith(o.path)))==null?void 0:s.path)||"/partner/missions";return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[i.jsx("main",{className:"flex-1 overflow-y-auto pb-20",children:i.jsx($f,{})}),i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 safe-area-bottom",children:i.jsx("div",{className:"max-w-lg mx-auto flex justify-around items-center h-16 px-2",children:j1.map(({path:o,label:a,icon:l})=>{const c=n===o,u=o==="/partner/charly"&&r>0;return i.jsxs("button",{onClick:()=>e(o),className:`relative flex flex-col items-center justify-center gap-1 flex-1 py-2 transition-colors ${c?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx(l,{className:"w-5 h-5",strokeWidth:c?2.5:1.5}),u&&i.jsx("span",{className:"absolute -top-1.5 -right-2.5 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 animate-pulse shadow-sm",children:r>99?"99+":r})]}),i.jsx("span",{className:`text-[10px] tracking-wide ${c?"font-bold":"font-medium"}`,children:a})]},o)})})})]})},pe=J.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:he("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));pe.displayName="Input";function FA(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ph="Checkbox",[qG,Qoe]=nn(ph),[WG,j0]=qG(ph);function HG(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:o,form:a,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Lo({prop:r,defaultProp:s??!1,onChange:c,caller:ph}),[g,v]=p.useState(null),[x,b]=p.useState(null),y=p.useRef(!1),w=g?!!a||!!g.closest("form"):!0,j={checked:h,disabled:o,setChecked:m,control:g,setControl:v,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Cs(s)?!1:s,isFormControl:w,bubbleInput:x,setBubbleInput:b};return i.jsx(WG,{scope:t,...j,children:GG(d)?d(j):n})}var BA="CheckboxTrigger",zA=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:o,value:a,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=j0(BA,e),v=Fe(s,f),x=p.useRef(c);return p.useEffect(()=>{const b=o==null?void 0:o.form;if(b){const y=()=>d(x.current);return b.addEventListener("reset",y),()=>b.removeEventListener("reset",y)}},[o,d]),i.jsx(Re.button,{type:"button",role:"checkbox","aria-checked":Cs(c)?"mixed":c,"aria-required":u,"data-state":HA(c),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:v,onKeyDown:xe(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:xe(r,b=>{d(y=>Cs(y)?!0:!y),g&&m&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});zA.displayName=BA;var _0=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(HG,{__scopeCheckbox:r,checked:s,defaultChecked:o,disabled:l,required:a,onCheckedChange:u,name:n,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(zA,{...d,ref:t,__scopeCheckbox:r}),h&&i.jsx(WA,{__scopeCheckbox:r})]})})});_0.displayName=ph;var UA="CheckboxIndicator",VA=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,o=j0(UA,r);return i.jsx(Fr,{present:n||Cs(o.checked)||o.checked===!0,children:i.jsx(Re.span,{"data-state":HA(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});VA.displayName=UA;var qA="CheckboxBubbleInput",WA=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:a,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=j0(qA,e),g=Fe(r,m),v=FA(o),x=Hy(n);p.useEffect(()=>{const y=h;if(!y)return;const w=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(w,"checked").set,S=!s.current;if(v!==o&&_){const N=new Event("click",{bubbles:S});y.indeterminate=Cs(o),_.call(y,Cs(o)?!1:o),y.dispatchEvent(N)}},[h,v,o,s]);const b=p.useRef(Cs(o)?!1:o);return i.jsx(Re.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??b.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});WA.displayName=qA;function GG(e){return typeof e=="function"}function Cs(e){return e==="indeterminate"}function HA(e){return Cs(e)?"indeterminate":e?"checked":"unchecked"}const rr=J.forwardRef(({className:e,...t},r)=>i.jsx(_0,{ref:r,className:he("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(VA,{className:he("flex items-center justify-center text-current"),children:i.jsx($n,{className:"h-4 w-4"})})}));rr.displayName=_0.displayName;var KG="Label",GA=p.forwardRef((e,t)=>i.jsx(Re.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));GA.displayName=KG;var KA=GA;const YG=Bf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=J.forwardRef(({className:e,...t},r)=>i.jsx(KA,{ref:r,className:he(YG(),e),...t}));Q.displayName=KA.displayName;const ho=p.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:he("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ho.displayName="Textarea";let YA,JA,XA,QA,ZA,eR,tR;try{const e=require("@/components/ui/dialog");YA=e.Dialog,JA=e.DialogContent,XA=e.DialogHeader,QA=e.DialogTitle,ZA=e.DialogDescription,eR=e.DialogFooter,tR=e.DialogClose}catch{console.warn("Dialog components not available, using fallback")}const JG=({open:e,onOpenChange:t,children:r})=>e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-auto",children:r})}):null,XG=({children:e,className:t})=>i.jsx("div",{className:t,children:e}),QG=({children:e})=>i.jsx("div",{className:"p-6 pb-4",children:e}),ZG=({children:e})=>i.jsx("h2",{className:"text-lg font-semibold",children:e}),eK=({children:e})=>i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e}),tK=({children:e})=>i.jsx("div",{className:"flex justify-end gap-2 p-6 pt-4",children:e}),rK=({children:e,asChild:t,...r})=>t?J.cloneElement(e,r):i.jsx("button",{...r,children:e}),nK=({open:e,onOpenChange:t,onAddProspect:r})=>{const{currentUser:n,activeAdminUser:s,projectsData:o={},formContactConfig:a=[]}=Ve(),l=Object.values(o).filter(k=>k.isPublic),c=()=>{const k=a.reduce((I,O)=>(I[O.id]="",I),{});return k.tags=[],k},[u,f]=p.useState(c()),[d,h]=p.useState(!0);p.useEffect(()=>{e&&(f(c()),h(!0))},[e,a]);const m=k=>{const{id:I,value:O}=k.target;f(M=>({...M,[I]:O}))},g=k=>{f(I=>{const O=I.tags.includes(k)?I.tags.filter(M=>M!==k):[...I.tags,k];return{...I,tags:O}})},v=k=>{if(!k.show_if_conditions||k.show_if_conditions.length===0)return!0;const I=k.condition_operator||"AND",O=k.show_if_conditions.map(M=>{const D=u[M.field];return M.equals==="has_value"?D&&D.trim()!=="":D===M.equals});return I==="AND"?O.every(M=>M):O.some(M=>M)},x=()=>{const k=[];return a.forEach((I,O)=>{if(I.is_repeater&&I.type==="select"&&u[I.id]){const M=parseInt(u[I.id])||0,D=I.repeats_fields||[];for(let z=0;z<M;z++)D.forEach(B=>{const q=a.find(A=>A.id===B);q&&k.push({...q,id:`${B}_repeat_${z}`,name:`${q.name} (${z+1})`,isRepeated:!0,originalId:B,repeatIndex:z})})}}),k},b=[...a,...x()],y=async k=>{k.preventDefault();const I=a.find(D=>D.required);if(I&&!u[I.id]){F({title:"Champs requis",description:`Le champ "${I.name.replace("*","")}" est obligatoire.`,variant:"destructive"});return}if(!u.email){F({title:"Champs requis",description:"L'email est obligatoire.",variant:"destructive"});return}const O=d&&u.email&&u.email.trim()!=="";console.log("[SafeAddProspectModal]  Submit check:",{sendInvitationCheckbox:d,email:u.email,sendInvitationFinal:O});const M={...u,tags:u.tags,hasAppointment:!1,sendInvitation:O};await r(M),t(!1)},w=YA||JG,j=JA||XG,_=XA||QG,S=QA||ZG,N=ZA||eK,E=eR||tK,C=tR||rK;return i.jsx(w,{open:e,onOpenChange:t,children:i.jsxs(j,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs(_,{children:[i.jsx(S,{children:"Ajouter un nouveau prospect"}),i.jsx(N,{children:"Remplissez les informations pour crer un nouveau prospect."})]}),i.jsxs("form",{onSubmit:y,children:[i.jsxs("div",{className:"grid gap-4 py-4 px-6",children:[b.filter(k=>!k.isRepeated||k.isRepeated).map(k=>!k.isRepeated&&!v(k)?null:i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Q,{htmlFor:k.id,className:"text-right",children:k.name}),k.type==="select"?i.jsxs("select",{id:k.id,value:u[k.id]||"",onChange:m,className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",required:k.required,children:[i.jsx("option",{value:"",children:"-- Slectionner --"}),(k.options||[]).map((I,O)=>i.jsx("option",{value:I,children:I},O))]}):k.type==="textarea"?i.jsx(ho,{id:k.id,value:u[k.id]||"",onChange:m,placeholder:k.placeholder,className:"col-span-3",rows:4,required:k.required}):k.type==="file"?i.jsx(pe,{id:k.id,type:"file",onChange:I=>{var M;const O=(M=I.target.files)==null?void 0:M[0];O&&f(D=>({...D,[k.id]:O}))},className:"col-span-3",required:k.required}):i.jsx(pe,{id:k.id,type:k.type,value:u[k.id]||"",onChange:m,placeholder:k.placeholder,className:"col-span-3",required:k.required})]},k.id)),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Q,{htmlFor:"sendInvitation",className:"text-right",children:"Invitation"}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(rr,{id:"sendInvitation",checked:d,onCheckedChange:k=>{console.log("[SafeAddProspectModal] sendInvitation changed to:",k),h(!!k)},disabled:!u.email||u.email.trim()===""}),i.jsxs(Q,{htmlFor:"sendInvitation",className:`font-normal cursor-pointer ${!u.email||u.email.trim()===""?"text-gray-400":""}`,children:["Envoyer une invitation au client",(!u.email||u.email.trim()==="")&&i.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(email requis)"})]})]})]}),l.length>0&&i.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[i.jsx(Q,{className:"text-right pt-2",children:"Projets"}),i.jsx("div",{className:"col-span-3 grid grid-cols-2 gap-2",children:l.map(k=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(rr,{id:`tag-${k.type}`,checked:u.tags.includes(k.type),onCheckedChange:()=>g(k.type)}),i.jsx(Q,{htmlFor:`tag-${k.type}`,className:"font-normal",children:k.title})]},k.type))})]})]}),i.jsxs(E,{children:[i.jsx(C,{asChild:!0,children:i.jsx(H,{type:"button",variant:"secondary",onClick:()=>t(!1),children:"Annuler"})}),i.jsx(H,{type:"submit",children:"Crer le prospect"})]})]})]})})};var mh="Dialog",[rR,nR]=nn(mh),[sK,an]=rR(mh),sR=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Lo({prop:n,defaultProp:s??!1,onChange:o,caller:mh});return i.jsx(sK,{scope:t,triggerRef:l,contentRef:c,contentId:xo(),titleId:xo(),descriptionId:xo(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:a,children:r})};sR.displayName=mh;var oR="DialogTrigger",iR=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=an(oR,r),o=Fe(t,s.triggerRef);return i.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":E0(s.open),...n,ref:o,onClick:xe(e.onClick,s.onOpenToggle)})});iR.displayName=oR;var S0="DialogPortal",[oK,aR]=rR(S0,{forceMount:void 0}),lR=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=an(S0,t);return i.jsx(oK,{scope:t,forceMount:r,children:p.Children.map(n,a=>i.jsx(Fr,{present:r||o.open,children:i.jsx(Ec,{asChild:!0,container:s,children:a})}))})};lR.displayName=S0;var cf="DialogOverlay",cR=p.forwardRef((e,t)=>{const r=aR(cf,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=an(cf,e.__scopeDialog);return o.modal?i.jsx(Fr,{present:n||o.open,children:i.jsx(aK,{...s,ref:t})}):null});cR.displayName=cf;var iK=No("DialogOverlay.RemoveScroll"),aK=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=an(cf,r);return i.jsx(t0,{as:iK,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Re.div,{"data-state":E0(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),To="DialogContent",uR=p.forwardRef((e,t)=>{const r=aR(To,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=an(To,e.__scopeDialog);return i.jsx(Fr,{present:n||o.open,children:o.modal?i.jsx(lK,{...s,ref:t}):i.jsx(cK,{...s,ref:t})})});uR.displayName=To;var lK=p.forwardRef((e,t)=>{const r=an(To,e.__scopeDialog),n=p.useRef(null),s=Fe(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return $c(o)},[]),i.jsx(dR,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault())})}),cK=p.forwardRef((e,t)=>{const r=an(To,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(dR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),dR=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=an(To,r),c=p.useRef(null),u=Fe(t,c);return Fy(),i.jsxs(i.Fragment,{children:[i.jsx(eh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Nc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":E0(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(dK,{titleId:l.titleId}),i.jsx(hK,{contentRef:c,descriptionId:l.descriptionId})]})]})}),N0="DialogTitle",fR=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=an(N0,r);return i.jsx(Re.h2,{id:s.titleId,...n,ref:t})});fR.displayName=N0;var hR="DialogDescription",pR=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=an(hR,r);return i.jsx(Re.p,{id:s.descriptionId,...n,ref:t})});pR.displayName=hR;var mR="DialogClose",gR=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=an(mR,r);return i.jsx(Re.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});gR.displayName=mR;function E0(e){return e?"open":"closed"}var vR="DialogTitleWarning",[uK,xR]=x6(vR,{contentName:To,titleName:N0,docsSlug:"dialog"}),dK=({titleId:e})=>{const t=xR(vR),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},fK="DialogDescriptionWarning",hK=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xR(fK).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},yR=sR,bR=iR,wR=lR,C0=cR,P0=uR,T0=fR,k0=pR,gh=gR;const vh=yR,Zoe=bR,pK=wR,eie=gh,jR=J.forwardRef(({className:e,...t},r)=>i.jsx(C0,{ref:r,className:he("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));jR.displayName=C0.displayName;const zc=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(pK,{children:[i.jsx(jR,{}),i.jsxs(P0,{ref:n,className:he("fixed left-1/2 top-1/2 z-50 flex w-full max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-h-[90vh]",e),...r,children:[t,i.jsxs(gh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Fo,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zc.displayName=P0.displayName;const Uc=({className:e,...t})=>i.jsx("div",{className:he("flex flex-col space-y-1.5 text-center sm:text-left p-6",e),...t});Uc.displayName="DialogHeader";const _R=({className:e,...t})=>i.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 p-6 border-t",e),...t});_R.displayName="DialogFooter";const Vc=J.forwardRef(({className:e,...t},r)=>i.jsx(T0,{ref:r,className:he("text-lg font-semibold leading-none tracking-tight",e),...t}));Vc.displayName=T0.displayName;const xh=J.forwardRef(({className:e,...t},r)=>i.jsx(k0,{ref:r,className:he("text-sm text-muted-foreground",e),...t}));xh.displayName=k0.displayName;let SR;SR=nK;const mK={ACC:"bg-blue-100 text-blue-800",Autonomie:"bg-green-100 text-green-800",Centrale:"bg-orange-100 text-orange-800",Investissement:"bg-teal-100 text-teal-800",ProducteurPro:"bg-purple-100 text-purple-800"},gK=({open:e,onOpenChange:t,onAddProspect:r})=>{const{formContactConfig:n=[],projectsData:s={},activeAdminUser:o}=Ve(),[a,l]=p.useState({}),[c,u]=p.useState([]),f=Object.values(s).filter(g=>g.isPublic);p.useEffect(()=>{if(e){const g={};n.forEach(v=>{g[v.id]=""}),l(g),u([])}},[e,n]);const d=g=>{const{id:v,value:x}=g.target;l(b=>({...b,[v]:x}))},h=g=>{u(v=>v.includes(g)?v.filter(b=>b!==g):[...v,g])},m=g=>{if(g.preventDefault(),!a.name||!a.email){F({title:"Champs requis",description:"Le nom et l'email sont obligatoires.",variant:"destructive"});return}const v={id:`prospect-${Date.now()}`,...a,tags:c,hasAppointment:!1,ownerId:(o==null?void 0:o.id)||"user-1"};r(v),F({title:" Prospect ajout !",description:`${v.name} a t ajout  la colonne "Intress".`}),t(!1)};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un nouveau prospect"}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.map(g=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:g.name}),i.jsx(pe,{id:g.id,type:g.type,value:a[g.id]||"",onChange:d,placeholder:g.placeholder,required:g.required})]},g.id)),f.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projets"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(g=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(rr,{id:`tag-${g.type}`,checked:c.includes(g.type),onCheckedChange:()=>h(g.type)}),i.jsx("label",{htmlFor:`tag-${g.type}`,className:"text-sm",children:g.title})]},g.type))})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),i.jsx(H,{type:"submit",children:"Crer le prospect"})]})]})]})})}):null},vK=()=>{var ue;const e=Ve(),{activeAdminUser:t,projectsData:r={},globalPipelineSteps:n=[],prospects:s,prospectsLoading:o,addProspect:a,updateProspect:l,deleteProspect:c}=e||{},{users:u,loading:f}=b0(),d=p.useMemo(()=>u.reduce((Y,U)=>(Y[U.user_id]=U,Y),{}),[u]),[h,m]=p.useState([]),[g,v]=p.useState(null),[x,b]=p.useState(!1),[y,w]=p.useState(""),[j,_]=p.useState([]),[S,N]=p.useState(null),[E,C]=p.useState(!1),[k,I]=p.useState(!1),O=p.useRef(null),M=p.useRef(null),D=j.length===0?"Tags":j.length===1?((ue=r[j[0]])==null?void 0:ue.title)||j[0]:`${j.length} tags`,z=Te();nr(),p.useMemo(()=>(s==null?void 0:s.find(Y=>Y.id===g))||null,[s,g]);const B=p.useMemo(()=>!t||!u?[]:(t.role==="Global Admin"||t.role==="Admin",u),[t,u]),q=p.useMemo(()=>{var Y;return S?((Y=B.find(U=>U.user_id===S))==null?void 0:Y.name)||"Utilisateur inconnu":B.length===1?B[0].name:"Tous les utilisateurs"},[S,B]);p.useEffect(()=>{t&&S===null&&(B.length===1?N(B[0].user_id):B.length>1&&N(null))},[t,S,B]);const A=p.useMemo(()=>{const Y=new Set;s.forEach(ce=>{(ce.tags||[]).forEach(_e=>Y.add(_e))});const U=Array.from(Y),ee=Object.keys(r);return U.length>0?U:ee},[s,r]),R=p.useMemo(()=>s.filter(U=>{var ke,dt;const ee=((ke=U.name)==null?void 0:ke.toLowerCase().includes(y.toLowerCase()))||((dt=U.email)==null?void 0:dt.toLowerCase().includes(y.toLowerCase())),ce=j.length===0||U.tags&&j.some(ln=>U.tags.includes(ln)),_e=!S||U.ownerId===S;return ee&&ce&&_e}),[s,y,j,S,t]);p.useEffect(()=>{if(!E&&!k)return;const Y=U=>{var _e,ke;const ee=(_e=O.current)==null?void 0:_e.contains(U.target),ce=(ke=M.current)==null?void 0:ke.contains(U.target);ee||C(!1),ce||I(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[E,k]);const $=Y=>{m(Y?R.map(U=>U.id):[])},L=(Y,U)=>{m(U?[...h,Y]:h.filter(ee=>ee!==Y))},W=Y=>{F({title:` L'action "${Y}" n'est pas encore implmente.`,description:"Ceci est une maquette cliquable. La fonctionnalit peut tre demande. "})},V=Y=>{_(U=>U.includes(Y)?U.filter(ee=>ee!==Y):[...U,Y])},re=Y=>{N(Y),I(!1)},ve=Y=>{const U=Y.tags&&Y.tags.length>0?Y.tags[0]:"ACC";z(`/admin/pipeline?project=${U}&prospect=${Y.id}`)},se=async Y=>{var U,ee;try{const ce=((U=n[0])==null?void 0:U.step_id)||((ee=n[0])==null?void 0:ee.id),_e=await a({...Y,status:ce,ownerId:t==null?void 0:t.user_id});if(Y.sendInvitation&&_e.email)try{const ke=`${window.location.origin}/dashboard`;P.info("[Contacts] Envoi Magic Link",{email:_e.email,org:organizationId});const{error:dt}=await T.auth.signInWithOtp({email:_e.email.trim(),options:{shouldCreateUser:!0,emailRedirectTo:ke,data:{organization_id:organizationId}}});dt?(P.error("[Contacts] Erreur Magic Link",dt),F({title:"Contact cr",description:` Invitation non envoye: ${dt.message}`,variant:"warning"})):(P.info("[Contacts] Magic Link envoy",{email:_e.email}),F({title:" Contact cr",description:`Invitation envoye  ${_e.email}`,className:"bg-green-500 text-white"}))}catch(ke){P.error("[Contacts] Exception Magic Link",ke),F({title:"Contact cr",description:` Erreur envoi invitation: ${ke.message}`,variant:"warning"})}b(!1)}catch{F({title:"Erreur",description:"Impossible d'ajouter le contact.",variant:"destructive"})}},Z=SR||gK;return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 rounded-lg shadow-soft",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contacts"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(Eo,{className:"w-4 h-4"}),i.jsxs("span",{children:[R.length," contact",R.length>1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{ref:O,className:"relative inline-block text-left",children:[i.jsxs(H,{type:"button",variant:"outline",className:"flex items-center space-x-2 bg-white",onClick:()=>C(Y=>!Y),children:[i.jsx("span",{children:D}),i.jsx(Rs,{className:"h-4 w-4"})]}),E&&i.jsx("div",{className:"absolute z-50 mt-1 w-44 origin-top-right rounded-md border border-gray-200 bg-white shadow-soft",children:i.jsxs("div",{className:"py-1",children:[A.map(Y=>{var U;return i.jsxs("label",{className:"flex items-center px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:j.includes(Y),onChange:()=>V(Y),className:"mr-3 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:((U=r[Y])==null?void 0:U.title)||Y})]},Y)}),j.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-gray-200 my-1"}),i.jsx("button",{onClick:()=>_([]),className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Effacer la slection"})]})]})})]}),i.jsxs("div",{ref:M,className:"relative inline-block text-left",children:[i.jsxs(H,{type:"button",variant:"outline",className:"flex items-center space-x-2 bg-white",onClick:()=>I(Y=>!Y),disabled:!B.length,children:[i.jsx("span",{children:q}),i.jsx(Rs,{className:"h-4 w-4"})]}),k&&i.jsx("div",{className:"absolute z-50 mt-1 w-52 origin-top-right rounded-md border border-gray-200 bg-white shadow-soft",children:i.jsxs("div",{className:"py-1",children:[B.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm hover:bg-gray-100 ${S?"":"bg-gray-50 font-medium"}`,onClick:()=>re(null),children:"Tous les utilisateurs"}),i.jsx("div",{className:"border-t border-gray-100 my-1"})]}),B.map(Y=>i.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm hover:bg-gray-100 ${S===Y.user_id?"bg-gray-50 font-medium":""}`,onClick:()=>re(Y.user_id),children:Y.name},Y.id))]})})]}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(Wf,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(pe,{placeholder:"Rechercher...",className:"pl-10 bg-white",value:y,onChange:Y=>w(Y.target.value)})]}),i.jsxs(H,{onClick:()=>b(!0),className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Rr,{className:"mr-2 h-4 w-4"})," Nouveau"]})]})]})}),i.jsx(Co,{children:h.length>0&&i.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white p-3 rounded-lg shadow-soft flex flex-col sm:flex-row items-center justify-between",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 sm:mb-0",children:[h.length," contact",h.length>1?"s":""," slectionn",h.length>1?"s":""]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>W("Envoyer SMS"),children:[i.jsx(Di,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"SMS"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>W("Envoyer Email"),children:[i.jsx(en,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Email"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>W("Appel par Charly"),children:[i.jsx(Yl,{className:"h-4 w-4 sm:mr-2"})," ",i.jsx("span",{className:"hidden sm:inline",children:"Appel IA"})]})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-soft overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-4",children:i.jsx(rr,{onCheckedChange:$,checked:h.length===R.length&&R.length>0,"aria-label":"Select all contacts"})}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nom"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Tlphone"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden lg:table-cell",children:"Email"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden sm:table-cell",children:"Tags"}),i.jsx("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Utilisateur"})]})}),i.jsx("tbody",{children:R.map(Y=>{var U;return i.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50 cursor-pointer",onClick:()=>ve(Y),children:[i.jsx("td",{className:"w-4 p-4",onClick:ee=>ee.stopPropagation(),children:i.jsx(rr,{onCheckedChange:ee=>L(Y.id,ee),checked:h.includes(Y.id),"aria-labelledby":`contact-name-${Y.id}`})}),i.jsx("td",{id:`contact-name-${Y.id}`,className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:Y.name}),i.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:Y.phone}),i.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:Y.email}),i.jsx("td",{className:"px-6 py-4 hidden sm:table-cell",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:(Y.tags||[]).map(ee=>{var ke,dt;const ce=((ke=r[ee])==null?void 0:ke.color)||mK[ee]||"bg-gray-100 text-gray-800",_e=((dt=r[ee])==null?void 0:dt.title)||ee;return i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce}`,children:_e},ee)})})}),i.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:((U=d[Y.ownerId])==null?void 0:U.name)||"Non assign"})]},Y.id)})})]})}),i.jsx(Z,{open:x,onOpenChange:b,onAddProspect:se})]})};var NR="AlertDialog",[xK,tie]=nn(NR,[nR]),Qn=nR(),ER=e=>{const{__scopeAlertDialog:t,...r}=e,n=Qn(t);return i.jsx(yR,{...n,...r,modal:!0})};ER.displayName=NR;var yK="AlertDialogTrigger",CR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Qn(r);return i.jsx(bR,{...s,...n,ref:t})});CR.displayName=yK;var bK="AlertDialogPortal",PR=e=>{const{__scopeAlertDialog:t,...r}=e,n=Qn(t);return i.jsx(wR,{...n,...r})};PR.displayName=bK;var wK="AlertDialogOverlay",TR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Qn(r);return i.jsx(C0,{...s,...n,ref:t})});TR.displayName=wK;var Ui="AlertDialogContent",[jK,_K]=xK(Ui),SK=j6("AlertDialogContent"),kR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,o=Qn(r),a=p.useRef(null),l=Fe(t,a),c=p.useRef(null);return i.jsx(uK,{contentName:Ui,titleName:AR,docsSlug:"alert-dialog",children:i.jsx(jK,{scope:r,cancelRef:c,children:i.jsxs(P0,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:xe(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(SK,{children:n}),i.jsx(EK,{contentRef:a})]})})})});kR.displayName=Ui;var AR="AlertDialogTitle",RR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Qn(r);return i.jsx(T0,{...s,...n,ref:t})});RR.displayName=AR;var IR="AlertDialogDescription",OR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Qn(r);return i.jsx(k0,{...s,...n,ref:t})});OR.displayName=IR;var NK="AlertDialogAction",DR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Qn(r);return i.jsx(gh,{...s,...n,ref:t})});DR.displayName=NK;var $R="AlertDialogCancel",MR=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=_K($R,r),o=Qn(r),a=Fe(t,s);return i.jsx(gh,{...o,...n,ref:a})});MR.displayName=$R;var EK=({contentRef:e})=>{const t=`\`${Ui}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ui}\` by passing a \`${IR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ui}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},CK=ER,PK=CR,TK=PR,LR=TR,FR=kR,BR=DR,zR=MR,UR=RR,VR=OR;const qc=CK,yh=PK,kK=TK,qR=J.forwardRef(({className:e,...t},r)=>i.jsx(LR,{className:he("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));qR.displayName=LR.displayName;const va=J.forwardRef(({className:e,...t},r)=>i.jsxs(kK,{children:[i.jsx(qR,{}),i.jsx(FR,{ref:r,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));va.displayName=FR.displayName;const xa=({className:e,...t})=>i.jsx("div",{className:he("flex flex-col space-y-2 text-center sm:text-left",e),...t});xa.displayName="AlertDialogHeader";const ya=({className:e,...t})=>i.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ya.displayName="AlertDialogFooter";const ba=J.forwardRef(({className:e,...t},r)=>i.jsx(UR,{ref:r,className:he("text-lg font-semibold",e),...t}));ba.displayName=UR.displayName;const wa=J.forwardRef(({className:e,...t},r)=>i.jsx(VR,{ref:r,className:he("text-sm text-muted-foreground",e),...t}));wa.displayName=VR.displayName;const ja=J.forwardRef(({className:e,...t},r)=>i.jsx(BR,{ref:r,className:he(Ly(),e),...t}));ja.displayName=BR.displayName;const _a=J.forwardRef(({className:e,...t},r)=>i.jsx(zR,{ref:r,className:he(Ly({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));_a.displayName=zR.displayName;function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},je.apply(null,arguments)}function _1(e,[t,r]){return Math.min(r,Math.max(t,e))}function vt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function A0(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[e][c])||l,x=p.useMemo(()=>g,Object.values(g));return p.createElement(v.Provider,{value:x},m)}function f(d,h){const m=(h==null?void 0:h[e][c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,AK(s,...t)]}function AK(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function RK(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function WR(...e){return t=>e.forEach(r=>RK(r,t))}function Ot(...e){return p.useCallback(WR(...e),e)}const cc=p.forwardRef((e,t)=>{const{children:r,...n}=e,s=p.Children.toArray(r),o=s.find(OK);if(o){const a=o.props.children,l=s.map(c=>c===o?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return p.createElement($v,je({},n,{ref:t}),p.isValidElement(a)?p.cloneElement(a,void 0,l):null)}return p.createElement($v,je({},n,{ref:t}),r)});cc.displayName="Slot";const $v=p.forwardRef((e,t)=>{const{children:r,...n}=e;return p.isValidElement(r)?p.cloneElement(r,{...DK(n,r.props),ref:t?WR(t,r.ref):r.ref}):p.Children.count(r)>1?p.Children.only(null):null});$v.displayName="SlotClone";const IK=({children:e})=>p.createElement(p.Fragment,null,e);function OK(e){return p.isValidElement(e)&&e.type===IK}function DK(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{o(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function $K(e){const t=e+"CollectionProvider",[r,n]=A0(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:g,children:v}=m,x=J.useRef(null),b=J.useRef(new Map).current;return J.createElement(s,{scope:g,itemMap:b,collectionRef:x},v)},l=e+"CollectionSlot",c=J.forwardRef((m,g)=>{const{scope:v,children:x}=m,b=o(l,v),y=Ot(g,b.collectionRef);return J.createElement(cc,{ref:y},x)}),u=e+"CollectionItemSlot",f="data-radix-collection-item",d=J.forwardRef((m,g)=>{const{scope:v,children:x,...b}=m,y=J.useRef(null),w=Ot(g,y),j=o(u,v);return J.useEffect(()=>(j.itemMap.set(y,{ref:y,...b}),()=>void j.itemMap.delete(y))),J.createElement(cc,{[f]:"",ref:w},x)});function h(m){const g=o(e+"CollectionConsumer",m);return J.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((j,_)=>b.indexOf(j.ref.current)-b.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},h,n]}const MK=p.createContext(void 0);function LK(e){const t=p.useContext(MK);return e||t||"ltr"}const FK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Et=FK.reduce((e,t)=>{const r=p.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?cc:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,je({},a,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function BK(e,t){e&&br.flushSync(()=>e.dispatchEvent(t))}function Yn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function zK(e,t=globalThis==null?void 0:globalThis.document){const r=Yn(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const Mv="dismissableLayer.update",UK="dismissableLayer.pointerDownOutside",VK="dismissableLayer.focusOutside";let S1;const qK=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),WK=p.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...u}=e,f=p.useContext(qK),[d,h]=p.useState(null),m=(r=d==null?void 0:d.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,g]=p.useState({}),v=Ot(t,E=>h(E)),x=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(b),w=d?x.indexOf(d):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,_=w>=y,S=HK(E=>{const C=E.target,k=[...f.branches].some(I=>I.contains(C));!_||k||(o==null||o(E),l==null||l(E),E.defaultPrevented||c==null||c())},m),N=GK(E=>{const C=E.target;[...f.branches].some(I=>I.contains(C))||(a==null||a(E),l==null||l(E),E.defaultPrevented||c==null||c())},m);return zK(E=>{w===f.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},m),p.useEffect(()=>{if(d)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(S1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),N1(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=S1)}},[d,m,n,f]),p.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),N1())},[d,f]),p.useEffect(()=>{const E=()=>g({});return document.addEventListener(Mv,E),()=>document.removeEventListener(Mv,E)},[]),p.createElement(Et.div,je({},u,{ref:v,style:{pointerEvents:j?_?"auto":"none":void 0,...e.style},onFocusCapture:vt(e.onFocusCapture,N.onFocusCapture),onBlurCapture:vt(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:vt(e.onPointerDownCapture,S.onPointerDownCapture)}))});function HK(e,t=globalThis==null?void 0:globalThis.document){const r=Yn(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let u=function(){HR(UK,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function GK(e,t=globalThis==null?void 0:globalThis.document){const r=Yn(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&HR(VK,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function N1(){const e=new CustomEvent(Mv);document.dispatchEvent(e)}function HR(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?BK(s,o):s.dispatchEvent(o)}let xm=0;function KK(){p.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:E1()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:E1()),xm++,()=>{xm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),xm--}},[])}function E1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const ym="focusScope.autoFocusOnMount",bm="focusScope.autoFocusOnUnmount",C1={bubbles:!1,cancelable:!0},YK=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=Yn(s),f=Yn(o),d=p.useRef(null),h=Ot(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:os(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||os(d.current,{select:!0}))},b=function(w){const j=document.activeElement;for(const _ of w)_.removedNodes.length>0&&(l!=null&&l.contains(j)||os(l))};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),y.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){T1.add(m);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(ym,C1);l.addEventListener(ym,u),l.dispatchEvent(b),b.defaultPrevented||(JK(tY(GR(l)),{select:!0}),document.activeElement===v&&os(l))}return()=>{l.removeEventListener(ym,u),setTimeout(()=>{const b=new CustomEvent(bm,C1);l.addEventListener(bm,f),l.dispatchEvent(b),b.defaultPrevented||os(v??document.body,{select:!0}),l.removeEventListener(bm,f),T1.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(x&&b){const y=v.currentTarget,[w,j]=XK(y);w&&j?!v.shiftKey&&b===j?(v.preventDefault(),r&&os(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&os(j,{select:!0})):b===y&&v.preventDefault()}},[r,n,m.paused]);return p.createElement(Et.div,je({tabIndex:-1},a,{ref:h,onKeyDown:g}))});function JK(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(os(n,{select:t}),document.activeElement!==r)return}function XK(e){const t=GR(e),r=P1(t,e),n=P1(t.reverse(),e);return[r,n]}function GR(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function P1(e,t){for(const r of e)if(!QK(r,{upTo:t}))return r}function QK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ZK(e){return e instanceof HTMLInputElement&&"select"in e}function os(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ZK(e)&&t&&e.select()}}const T1=eY();function eY(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=k1(e,t),e.unshift(t)},remove(t){var r;e=k1(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function k1(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function tY(e){return e.filter(t=>t.tagName!=="A")}const Mr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},rY=yc["useId".toString()]||(()=>{});let nY=0;function KR(e){const[t,r]=p.useState(rY());return Mr(()=>{e||r(n=>n??String(nY++))},[e]),e||(t?`radix-${t}`:"")}function sY(e){const[t,r]=p.useState(void 0);return Mr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const YR="Popper",[JR,XR]=A0(YR),[oY,QR]=JR(YR),iY=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return p.createElement(oY,{scope:t,anchor:n,onAnchorChange:s},r)},aY="PopperAnchor",lY=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=QR(aY,r),a=p.useRef(null),l=Ot(t,a);return p.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:p.createElement(Et.div,je({},s,{ref:l}))}),ZR="PopperContent",[cY,rie]=JR(ZR),uY=p.forwardRef((e,t)=>{var r,n,s,o,a,l,c,u;const{__scopePopper:f,side:d="bottom",sideOffset:h=0,align:m="center",alignOffset:g=0,arrowPadding:v=0,collisionBoundary:x=[],collisionPadding:b=0,sticky:y="partial",hideWhenDetached:w=!1,avoidCollisions:j=!0,onPlaced:_,...S}=e,N=QR(ZR,f),[E,C]=p.useState(null),k=Ot(t,ke=>C(ke)),[I,O]=p.useState(null),M=sY(I),D=(r=M==null?void 0:M.width)!==null&&r!==void 0?r:0,z=(n=M==null?void 0:M.height)!==null&&n!==void 0?n:0,B=d+(m!=="center"?"-"+m:""),q=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},A=Array.isArray(x)?x:[x],R=A.length>0,$={padding:q,boundary:A.filter(dY),altBoundary:R},{refs:L,floatingStyles:W,placement:V,isPositioned:re,middlewareData:ve}=tT({strategy:"fixed",placement:B,whileElementsMounted:Z2,elements:{reference:N.anchor},middleware:[rT({mainAxis:h+z,alignmentAxis:g}),j&&nT({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?sT():void 0,...$}),j&&oT({...$}),iT({...$,apply:({elements:ke,rects:dt,availableWidth:ln,availableHeight:Sn})=>{const{width:Ta,height:Zn}=dt.reference,Go=ke.floating.style;Go.setProperty("--radix-popper-available-width",`${ln}px`),Go.setProperty("--radix-popper-available-height",`${Sn}px`),Go.setProperty("--radix-popper-anchor-width",`${Ta}px`),Go.setProperty("--radix-popper-anchor-height",`${Zn}px`)}}),I&&lT({element:I,padding:v}),fY({arrowWidth:D,arrowHeight:z}),w&&aT({strategy:"referenceHidden"})]}),[se,Z]=eI(V),ue=Yn(_);Mr(()=>{re&&(ue==null||ue())},[re,ue]);const Y=(s=ve.arrow)===null||s===void 0?void 0:s.x,U=(o=ve.arrow)===null||o===void 0?void 0:o.y,ee=((a=ve.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[ce,_e]=p.useState();return Mr(()=>{E&&_e(window.getComputedStyle(E).zIndex)},[E]),p.createElement("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:re?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(l=ve.transformOrigin)===null||l===void 0?void 0:l.x,(c=ve.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},p.createElement(cY,{scope:f,placedSide:se,onArrowChange:O,arrowX:Y,arrowY:U,shouldHideArrow:ee},p.createElement(Et.div,je({"data-side":se,"data-align":Z},S,{ref:k,style:{...S.style,animation:re?void 0:"none",opacity:(u=ve.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function dY(e){return e!==null}const fY=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,o,a;const{placement:l,rects:c,middlewareData:u}=t,d=((r=u.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=d?0:e.arrowWidth,m=d?0:e.arrowHeight,[g,v]=eI(l),x={start:"0%",center:"50%",end:"100%"}[v],b=((n=(s=u.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,y=((o=(a=u.arrow)===null||a===void 0?void 0:a.y)!==null&&o!==void 0?o:0)+m/2;let w="",j="";return g==="bottom"?(w=d?x:`${b}px`,j=`${-m}px`):g==="top"?(w=d?x:`${b}px`,j=`${c.floating.height+m}px`):g==="right"?(w=`${-m}px`,j=d?x:`${y}px`):g==="left"&&(w=`${c.floating.width+m}px`,j=d?x:`${y}px`),{data:{x:w,y:j}}}});function eI(e){const[t,r="center"]=e.split("-");return[t,r]}const hY=iY,pY=lY,mY=uY,gY=p.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?Of.createPortal(p.createElement(Et.div,je({},s,{ref:t})),n):null});function A1({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=vY({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=Yn(r),c=p.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[a,c]}function vY({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,s=p.useRef(n),o=Yn(t);return p.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}function xY(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const yY=p.forwardRef((e,t)=>p.createElement(Et.span,je({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var tI=Qy(),wm=function(){},bh=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:wm,onWheelCapture:wm,onTouchMoveCapture:wm}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,y=_n(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,j=Xy([r,t]),_=Qe(Qe({},y),s);return p.createElement(p.Fragment,null,f&&p.createElement(w,{sideCar:tI,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:r}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},_),{ref:j})):p.createElement(b,Qe({},_,{className:c,ref:j}),l))});bh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bh.classNames={fullWidth:Li,zeroRight:Mi};var Lv=!1;if(typeof window<"u")try{var Mu=Object.defineProperty({},"passive",{get:function(){return Lv=!0,!0}});window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Lv=!1}var si=Lv?{passive:!1}:!1,bY=function(e){return e.tagName==="TEXTAREA"},rI=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!bY(e)&&r[t]==="visible")},wY=function(e){return rI(e,"overflowY")},jY=function(e){return rI(e,"overflowX")},R1=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=nI(e,r);if(n){var s=sI(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},_Y=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},SY=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},nI=function(e,t){return e==="v"?wY(t):jY(t)},sI=function(e,t){return e==="v"?_Y(t):SY(t)},NY=function(e,t){return e==="h"&&t==="rtl"?-1:1},EY=function(e,t,r,n,s){var o=NY(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{var m=sI(e,l),g=m[0],v=m[1],x=m[2],b=v-x-o*g;(g||b)&&nI(e,l)&&(d+=b,h+=g),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&d===0||!s&&a>d)||!f&&(s&&h===0||!s&&-a>h))&&(u=!0),u},Lu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},I1=function(e){return[e.deltaX,e.deltaY]},O1=function(e){return e&&"current"in e?e.current:e},CY=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PY=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TY=0,oi=[];function kY(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(TY++)[0],o=p.useState(function(){return lh()})[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Mc([e.lockRef.current],(e.shards||[]).map(O1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2)return!a.current.allowPinchZoom;var b=Lu(v),y=r.current,w="deltaX"in v?v.deltaX:y[0]-b[0],j="deltaY"in v?v.deltaY:y[1]-b[1],_,S=v.target,N=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&N==="h"&&S.type==="range")return!1;var E=R1(N,S);if(!E)return!0;if(E?_=N:(_=N==="v"?"h":"v",E=R1(N,S)),!E)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var C=n.current||_;return EY(C,x,v,C==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!oi.length||oi[oi.length-1]!==o)){var b="deltaY"in x?I1(x):Lu(x),y=t.current.filter(function(_){return _.name===x.type&&_.target===x.target&&CY(_.delta,b)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(O1).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,b,y){var w={name:v,delta:x,target:b,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=Lu(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,I1(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Lu(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return oi.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,si),document.addEventListener("touchmove",c,si),document.addEventListener("touchstart",f,si),function(){oi=oi.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,si),document.removeEventListener("touchmove",c,si),document.removeEventListener("touchstart",f,si)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:PY(s)}):null,m?p.createElement(e0,{gapMode:"margin"}):null)}const AY=Zy(tI,kY);var oI=p.forwardRef(function(e,t){return p.createElement(bh,Qe({},e,{ref:t,sideCar:AY}))});oI.classNames=bh.classNames;const RY=oI,IY=[" ","Enter","ArrowUp","ArrowDown"],OY=[" ","Enter"],wh="Select",[jh,_h,DY]=$K(wh),[Sa,nie]=A0(wh,[DY,XR]),R0=XR(),[$Y,qo]=Sa(wh),[MY,LY]=Sa(wh),FY=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m}=e,g=R0(t),[v,x]=p.useState(null),[b,y]=p.useState(null),[w,j]=p.useState(!1),_=LK(u),[S=!1,N]=A1({prop:n,defaultProp:s,onChange:o}),[E,C]=A1({prop:a,defaultProp:l,onChange:c}),k=p.useRef(null),I=v?!!v.closest("form"):!0,[O,M]=p.useState(new Set),D=Array.from(O).map(z=>z.props.value).join(";");return p.createElement(hY,g,p.createElement($Y,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:KR(),value:E,onValueChange:C,open:S,onOpenChange:N,dir:_,triggerPointerDownPosRef:k,disabled:h},p.createElement(jh.Provider,{scope:t},p.createElement(MY,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{M(B=>new Set(B).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{M(B=>{const q=new Set(B);return q.delete(z),q})},[])},r)),I?p.createElement(cI,{key:D,"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:E,onChange:z=>C(z.target.value),disabled:h},E===void 0?p.createElement("option",{value:""}):null,Array.from(O)):null))},BY="SelectTrigger",zY=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=R0(r),a=qo(BY,r),l=a.disabled||n,c=Ot(t,a.onTriggerChange),u=_h(r),[f,d,h]=uI(g=>{const v=u().filter(y=>!y.disabled),x=v.find(y=>y.value===a.value),b=dI(v,g,x);b!==void 0&&a.onValueChange(b.value)}),m=()=>{l||(a.onOpenChange(!0),h())};return p.createElement(pY,je({asChild:!0},o),p.createElement(Et.button,je({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":a.value===void 0?"":void 0},s,{ref:c,onClick:vt(s.onClick,g=>{g.currentTarget.focus()}),onPointerDown:vt(s.onPointerDown,g=>{const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&(m(),a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)},g.preventDefault())}),onKeyDown:vt(s.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&d(g.key),!(v&&g.key===" ")&&IY.includes(g.key)&&(m(),g.preventDefault())})})))}),UY="SelectValue",VY=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a,...l}=e,c=qo(UY,r),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,d=Ot(t,c.onValueNodeChange);return Mr(()=>{u(f)},[u,f]),p.createElement(Et.span,je({},l,{ref:d,style:{pointerEvents:"none"}}),c.value===void 0&&a!==void 0?a:o)}),qY=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return p.createElement(Et.span,je({"aria-hidden":!0},s,{ref:t}),n||"")}),WY=e=>p.createElement(gY,je({asChild:!0},e)),ra="SelectContent",HY=p.forwardRef((e,t)=>{const r=qo(ra,e.__scopeSelect),[n,s]=p.useState();if(Mr(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?br.createPortal(p.createElement(iI,{scope:e.__scopeSelect},p.createElement(jh.Slot,{scope:e.__scopeSelect},p.createElement("div",null,e.children))),o):null}return p.createElement(GY,je({},e,{ref:t}))}),Tn=10,[iI,Wo]=Sa(ra),GY=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...b}=e,y=qo(ra,r),[w,j]=p.useState(null),[_,S]=p.useState(null),N=Ot(t,Z=>j(Z)),[E,C]=p.useState(null),[k,I]=p.useState(null),O=_h(r),[M,D]=p.useState(!1),z=p.useRef(!1);p.useEffect(()=>{if(w)return $c(w)},[w]),KK();const B=p.useCallback(Z=>{const[ue,...Y]=O().map(ce=>ce.ref.current),[U]=Y.slice(-1),ee=document.activeElement;for(const ce of Z)if(ce===ee||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===ue&&_&&(_.scrollTop=0),ce===U&&_&&(_.scrollTop=_.scrollHeight),ce==null||ce.focus(),document.activeElement!==ee))return},[O,_]),q=p.useCallback(()=>B([E,w]),[B,E,w]);p.useEffect(()=>{M&&q()},[M,q]);const{onOpenChange:A,triggerPointerDownPosRef:R}=y;p.useEffect(()=>{if(w){let Z={x:0,y:0};const ue=U=>{var ee,ce,_e,ke;Z={x:Math.abs(Math.round(U.pageX)-((ee=(ce=R.current)===null||ce===void 0?void 0:ce.x)!==null&&ee!==void 0?ee:0)),y:Math.abs(Math.round(U.pageY)-((_e=(ke=R.current)===null||ke===void 0?void 0:ke.y)!==null&&_e!==void 0?_e:0))}},Y=U=>{Z.x<=10&&Z.y<=10?U.preventDefault():w.contains(U.target)||A(!1),document.removeEventListener("pointermove",ue),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Y,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Y,{capture:!0})}}},[w,A,R]),p.useEffect(()=>{const Z=()=>A(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[A]);const[$,L]=uI(Z=>{const ue=O().filter(ee=>!ee.disabled),Y=ue.find(ee=>ee.ref.current===document.activeElement),U=dI(ue,Z,Y);U&&setTimeout(()=>U.ref.current.focus())}),W=p.useCallback((Z,ue,Y)=>{const U=!z.current&&!Y;(y.value!==void 0&&y.value===ue||U)&&(C(Z),U&&(z.current=!0))},[y.value]),V=p.useCallback(()=>w==null?void 0:w.focus(),[w]),re=p.useCallback((Z,ue,Y)=>{const U=!z.current&&!Y;(y.value!==void 0&&y.value===ue||U)&&I(Z)},[y.value]),ve=n==="popper"?D1:KY,se=ve===D1?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return p.createElement(iI,{scope:r,content:w,viewport:_,onViewportChange:S,itemRefCallback:W,selectedItem:E,onItemLeave:V,itemTextRefCallback:re,focusSelectedItem:q,selectedItemText:k,position:n,isPositioned:M,searchRef:$},p.createElement(RY,{as:cc,allowPinchZoom:!0},p.createElement(YK,{asChild:!0,trapped:y.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:vt(s,Z=>{var ue;(ue=y.trigger)===null||ue===void 0||ue.focus({preventScroll:!0}),Z.preventDefault()})},p.createElement(WK,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},p.createElement(ve,je({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Z=>Z.preventDefault()},b,se,{onPlaced:()=>D(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:vt(b.onKeyDown,Z=>{const ue=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ue&&Z.key.length===1&&L(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let U=O().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const ee=Z.target,ce=U.indexOf(ee);U=U.slice(ce+1)}setTimeout(()=>B(U)),Z.preventDefault()}})}))))))}),KY=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=qo(ra,r),a=Wo(ra,r),[l,c]=p.useState(null),[u,f]=p.useState(null),d=Ot(t,N=>f(N)),h=_h(r),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:b,focusSelectedItem:y}=a,w=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&v&&x&&b){const N=o.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(o.dir!=="rtl"){const ee=k.left-E.left,ce=C.left-ee,_e=N.left-ce,ke=N.width+_e,dt=Math.max(ke,E.width),ln=window.innerWidth-Tn,Sn=_1(ce,[Tn,ln-dt]);l.style.minWidth=ke+"px",l.style.left=Sn+"px"}else{const ee=E.right-k.right,ce=window.innerWidth-C.right-ee,_e=window.innerWidth-N.right-ce,ke=N.width+_e,dt=Math.max(ke,E.width),ln=window.innerWidth-Tn,Sn=_1(ce,[Tn,ln-dt]);l.style.minWidth=ke+"px",l.style.right=Sn+"px"}const I=h(),O=window.innerHeight-Tn*2,M=v.scrollHeight,D=window.getComputedStyle(u),z=parseInt(D.borderTopWidth,10),B=parseInt(D.paddingTop,10),q=parseInt(D.borderBottomWidth,10),A=parseInt(D.paddingBottom,10),R=z+B+M+A+q,$=Math.min(x.offsetHeight*5,R),L=window.getComputedStyle(v),W=parseInt(L.paddingTop,10),V=parseInt(L.paddingBottom,10),re=N.top+N.height/2-Tn,ve=O-re,se=x.offsetHeight/2,Z=x.offsetTop+se,ue=z+B+Z,Y=R-ue;if(ue<=re){const ee=x===I[I.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-v.offsetTop-v.offsetHeight,_e=Math.max(ve,se+(ee?V:0)+ce+q),ke=ue+_e;l.style.height=ke+"px"}else{const ee=x===I[0].ref.current;l.style.top="0px";const _e=Math.max(re,z+v.offsetTop+(ee?W:0)+se)+Y;l.style.height=_e+"px",v.scrollTop=ue-re+v.offsetTop}l.style.margin=`${Tn}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,o.trigger,o.valueNode,l,u,v,x,b,o.dir,n]);Mr(()=>w(),[w]);const[j,_]=p.useState();Mr(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const S=p.useCallback(N=>{N&&g.current===!0&&(w(),y==null||y(),g.current=!1)},[w,y]);return p.createElement(YY,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S},p.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},p.createElement(Et.div,je({},s,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),D1=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Tn,...o}=e,a=R0(r);return p.createElement(mY,je({},a,o,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[YY,I0]=Sa(ra,{}),$1="SelectViewport",JY=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Wo($1,r),o=I0($1,r),a=Ot(t,s.onViewportChange),l=p.useRef(0);return p.createElement(p.Fragment,null,p.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),p.createElement(jh.Slot,{scope:r},p.createElement(Et.div,je({"data-radix-select-viewport":"",role:"presentation"},n,{ref:a,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:vt(n.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=o;if(d!=null&&d.current&&f){const h=Math.abs(l.current-u.scrollTop);if(h>0){const m=window.innerHeight-Tn*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(g,v);if(x<m){const b=x+h,y=Math.min(m,b),w=b-y;f.style.height=y+"px",f.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})}))))}),XY="SelectGroup",[sie,QY]=Sa(XY),ZY="SelectLabel",eJ=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=QY(ZY,r);return p.createElement(Et.div,je({id:s.id},n,{ref:t}))}),Fv="SelectItem",[tJ,aI]=Sa(Fv),rJ=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=qo(Fv,r),c=Wo(Fv,r),u=l.value===n,[f,d]=p.useState(o??""),[h,m]=p.useState(!1),g=Ot(t,b=>{var y;return(y=c.itemRefCallback)===null||y===void 0?void 0:y.call(c,b,n,s)}),v=KR(),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};return p.createElement(tJ,{scope:r,value:n,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{d(y=>{var w;return y||((w=b==null?void 0:b.textContent)!==null&&w!==void 0?w:"").trim()})},[])},p.createElement(jh.ItemSlot,{scope:r,value:n,disabled:s,textValue:f},p.createElement(Et.div,je({role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},a,{ref:g,onFocus:vt(a.onFocus,()=>m(!0)),onBlur:vt(a.onBlur,()=>m(!1)),onPointerUp:vt(a.onPointerUp,x),onPointerMove:vt(a.onPointerMove,b=>{if(s){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}else b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:vt(a.onPointerLeave,b=>{if(b.currentTarget===document.activeElement){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}}),onKeyDown:vt(a.onKeyDown,b=>{var y;((y=c.searchRef)===null||y===void 0?void 0:y.current)!==""&&b.key===" "||(OY.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})}))))}),Fu="SelectItemText",nJ=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=qo(Fu,r),l=Wo(Fu,r),c=aI(Fu,r),u=LY(Fu,r),[f,d]=p.useState(null),h=Ot(t,b=>d(b),c.onItemTextChange,b=>{var y;return(y=l.itemTextRefCallback)===null||y===void 0?void 0:y.call(l,b,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>p.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Mr(()=>(v(g),()=>x(g)),[v,x,g]),p.createElement(p.Fragment,null,p.createElement(Et.span,je({id:c.textId},o,{ref:h})),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?br.createPortal(o.children,a.valueNode):null)}),sJ="SelectItemIndicator",oJ=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return aI(sJ,r).isSelected?p.createElement(Et.span,je({"aria-hidden":!0},n,{ref:t})):null}),M1="SelectScrollUpButton",iJ=p.forwardRef((e,t)=>{const r=Wo(M1,e.__scopeSelect),n=I0(M1,e.__scopeSelect),[s,o]=p.useState(!1),a=Ot(t,n.onScrollButtonChange);return Mr(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollTop>0;o(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?p.createElement(lI,je({},e,{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),L1="SelectScrollDownButton",aJ=p.forwardRef((e,t)=>{const r=Wo(L1,e.__scopeSelect),n=I0(L1,e.__scopeSelect),[s,o]=p.useState(!1),a=Ot(t,n.onScrollButtonChange);return Mr(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<u;o(f)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?p.createElement(lI,je({},e,{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),lI=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=Wo("SelectScrollButton",r),a=p.useRef(null),l=_h(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Mr(()=>{var u;const f=l().find(d=>d.ref.current===document.activeElement);f==null||(u=f.ref.current)===null||u===void 0||u.scrollIntoView({block:"nearest"})},[l]),p.createElement(Et.div,je({"aria-hidden":!0},s,{ref:t,style:{flexShrink:0,...s.style},onPointerDown:vt(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:vt(s.onPointerMove,()=>{var u;(u=o.onItemLeave)===null||u===void 0||u.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:vt(s.onPointerLeave,()=>{c()})}))}),lJ=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return p.createElement(Et.div,je({"aria-hidden":!0},n,{ref:t}))}),cI=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=p.useRef(null),o=Ot(t,s),a=xY(r);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&f){const d=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(d)}},[a,r]),p.createElement(yY,{asChild:!0},p.createElement("select",je({},n,{ref:o,defaultValue:r})))});cI.displayName="BubbleSelect";function uI(e){const t=Yn(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function dI(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=cJ(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function cJ(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const uJ=FY,fI=zY,dJ=VY,fJ=qY,hJ=WY,hI=HY,pJ=JY,pI=eJ,mI=rJ,mJ=nJ,gJ=oJ,vJ=iJ,xJ=aJ,gI=lJ,Yt=uJ,Jt=dJ,Bt=J.forwardRef(({className:e,children:t,iconClassName:r,...n},s)=>i.jsxs(fI,{ref:s,className:he("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:[t,i.jsx(fJ,{asChild:!0,children:i.jsx(Rs,{className:he("h-4 w-4 opacity-50",r)})})]}));Bt.displayName=fI.displayName;const zt=J.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(hJ,{children:i.jsxs(hI,{ref:s,className:he("relative z-50 min-w-[8rem] rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(vJ,{className:"hidden",children:i.jsx(f3,{className:"h-4 w-4"})}),i.jsx(pJ,{className:he("p-1 max-h-[300px] overflow-y-auto",r==="popper"&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(xJ,{className:"hidden",children:i.jsx(Rs,{className:"h-4 w-4"})})]})}));zt.displayName=hI.displayName;const yJ=J.forwardRef(({className:e,...t},r)=>i.jsx(pI,{ref:r,className:he("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));yJ.displayName=pI.displayName;const Pe=J.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(mI,{ref:n,className:he("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(gJ,{children:i.jsx($n,{className:"h-4 w-4"})})}),i.jsx(mJ,{children:t})]}));Pe.displayName=mI.displayName;const bJ=J.forwardRef(({className:e,...t},r)=>i.jsx(gI,{ref:r,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));bJ.displayName=gI.displayName;function vI({organizationId:e=null,enabled:t=!0}={}){const[r,n]=p.useState({}),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=h=>{const m={};return h.forEach(g=>{m[g.prompt_id]={id:g.prompt_id,name:g.name,tone:g.tone,projectId:g.project_id,stepsConfig:g.steps_config||{},createdAt:new Date(g.created_at).getTime(),updatedAt:new Date(g.updated_at).getTime()}}),m};return p.useEffect(()=>{if(!t||!e){n({}),o(!1);return}(async()=>{try{o(!0);const{data:g,error:v}=await T.rpc("get_prompts_for_org",{p_organization_id:e});if(v)throw v;const x=c(g||[]);P.debug("Prompts loaded",{count:Object.keys(x).length}),n(x),l(null)}catch(g){P.error(" Error loading prompts:",g),l(g.message)}finally{o(!1)}})();const m=T.channel(`prompts-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"prompts",filter:`organization_id=eq.${e}`},g=>{var v;if(P.debug("Real-time prompts event",{eventType:g.eventType}),!((v=g.new)!=null&&v.organization_id&&g.new.organization_id!==e))if(g.eventType==="INSERT"){const x=g.new;n(b=>({...b,[x.prompt_id]:{id:x.prompt_id,name:x.name,tone:x.tone,projectId:x.project_id,stepsConfig:x.steps_config||{},createdAt:new Date(x.created_at).getTime(),updatedAt:new Date(x.updated_at).getTime()}}))}else if(g.eventType==="UPDATE"){const x=g.new;n(b=>({...b,[x.prompt_id]:{id:x.prompt_id,name:x.name,tone:x.tone,projectId:x.project_id,stepsConfig:x.steps_config||{},createdAt:new Date(x.created_at).getTime(),updatedAt:new Date(x.updated_at).getTime()}}))}else g.eventType==="DELETE"&&n(x=>{const b={...x};return delete b[g.old.prompt_id],b})}).subscribe(g=>{});return()=>{T.removeChannel(m)}},[e,t]),{prompts:r,loading:s,error:a,savePrompt:async(h,m)=>{try{if(!e)throw new Error("organization_id requis pour enregistrer un prompt");const g={prompt_id:h,name:m.name,tone:m.tone,project_id:m.projectId,steps_config:m.stepsConfig||{},organization_id:e},{data:v,error:x}=await T.from("prompts").upsert(g,{onConflict:"prompt_id"}).select().single();if(x)throw x;return P.debug("Prompt saved to Supabase",{promptId:v==null?void 0:v.prompt_id}),v&&n(b=>({...b,[v.prompt_id]:{id:v.prompt_id,name:v.name,tone:v.tone,projectId:v.project_id,stepsConfig:v.steps_config||{},createdAt:new Date(v.created_at).getTime(),updatedAt:new Date(v.updated_at).getTime()}})),{success:!0,data:v}}catch(g){return P.error("Error saving prompt:",g),{success:!1,error:g.message}}},deletePrompt:async h=>{try{const{error:m}=await T.from("prompts").delete().eq("prompt_id",h);if(m)throw m;return n(g=>{const v={...g};return delete v[h],v}),P.debug("Prompt deleted from Supabase",{promptId:h}),{success:!0}}catch(m){return P.error(" Error deleting prompt:",m),{success:!1,error:m.message}}},refresh:async()=>{if(e)try{const{data:h,error:m}=await T.rpc("get_prompts_for_org",{p_organization_id:e});if(m)throw m;const g=c(h||[]);n(g)}catch(h){P.error(" Error refreshing prompts:",h)}}}}function wJ(e=null){const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=d=>d.map(h=>({id:h.id,name:h.name,projectType:h.project_type,contentHtml:h.content_html,version:h.version,isActive:h.is_active,createdAt:h.created_at,updatedAt:h.updated_at}));return p.useEffect(()=>{if(!e){r([]),s(!1);return}(async()=>{try{s(!0);const{data:m,error:g}=await T.from("contract_templates").select("*").eq("organization_id",e).order("created_at",{ascending:!1});if(g)throw g;const v=l(m||[]);r(v),a(null)}catch(m){P.error("Erreur chargement contract_templates:",{error:m.message}),a(m.message)}finally{s(!1)}})();const h=T.channel(`contract-templates-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"contract_templates",filter:`organization_id=eq.${e}`},m=>{var g;if(!((g=m.new)!=null&&g.organization_id&&m.new.organization_id!==e))if(m.eventType==="INSERT"){const v={id:m.new.id,name:m.new.name,projectType:m.new.project_type,contentHtml:m.new.content_html,version:m.new.version,isActive:m.new.is_active,createdAt:m.new.created_at,updatedAt:m.new.updated_at};r(x=>[v,...x])}else if(m.eventType==="UPDATE"){const v={id:m.new.id,name:m.new.name,projectType:m.new.project_type,contentHtml:m.new.content_html,version:m.new.version,isActive:m.new.is_active,createdAt:m.new.created_at,updatedAt:m.new.updated_at};r(x=>x.map(b=>b.id===v.id?v:b))}else m.eventType==="DELETE"&&r(v=>v.filter(x=>x.id!==m.old.id))}).subscribe();return()=>{T.removeChannel(h)}},[e]),{templates:t,loading:n,error:o,createTemplate:async d=>{try{if(!e)throw new Error("organization_id requis pour crer un template");const h={name:d.name,project_type:d.projectType||"ACC",content_html:d.contentHtml||"",version:1,is_active:!0,organization_id:e},{data:m,error:g}=await T.from("contract_templates").insert(h).select().single();if(g)throw g;return{success:!0,data:m}}catch(h){return P.error("Erreur cration contract_template:",{error:h.message}),{success:!1,error:h.message}}},updateTemplate:async(d,h)=>{try{const m={name:h.name,project_type:h.projectType,content_html:h.contentHtml},{data:g,error:v}=await T.from("contract_templates").update(m).eq("id",d).select().single();if(v)throw v;return{success:!0,data:g}}catch(m){return P.error("Erreur mise  jour contract_template:",{error:m.message}),{success:!1,error:m.message}}},deactivateTemplate:async d=>{try{const{data:h,error:m}=await T.from("contract_templates").update({is_active:!1}).eq("id",d).select().single();if(m)throw m;return{success:!0,data:h}}catch(h){return P.error("Erreur dsactivation contract_template:",{error:h.message}),{success:!1,error:h.message}}}}}function O0(e=null){const[t,r]=p.useState({}),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=f=>{const d={};return f.forEach(h=>{d[h.form_id]={id:h.form_id,name:h.name,fields:h.fields||[],projectIds:h.project_ids||[],audience:h.audience||"client",createdAt:new Date(h.created_at).getTime(),updatedAt:new Date(h.updated_at).getTime()}}),d};return p.useEffect(()=>{if(!e){r({}),s(!1);return}(async()=>{try{s(!0);const{data:h,error:m}=await T.from("forms").select("*").or(`organization_id.eq.${e},organization_id.is.null`).order("created_at",{ascending:!1});if(m)throw m;const g=l(h||[]);r(g),a(null)}catch(h){P.error("Erreur chargement forms:",{error:h.message}),a(h.message)}finally{s(!1)}})();const d=T.channel(`forms-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"forms",filter:`organization_id=eq.${e}`},h=>{if(h.eventType==="INSERT"){const m=h.new;r(g=>({...g,[m.form_id]:{id:m.form_id,name:m.name,fields:m.fields||[],projectIds:m.project_ids||[],audience:m.audience||"client",createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()}}))}else if(h.eventType==="UPDATE"){const m=h.new;r(g=>({...g,[m.form_id]:{id:m.form_id,name:m.name,fields:m.fields||[],projectIds:m.project_ids||[],audience:m.audience||"client",createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()}}))}else h.eventType==="DELETE"&&r(m=>{const g={...m};return delete g[h.old.form_id],g})}).subscribe();return()=>{T.removeChannel(d)}},[e]),{forms:t,loading:n,error:o,saveForm:async(f,d)=>{if(!e)return{success:!1,error:"organization_id requis"};try{const h={form_id:f,name:d.name,fields:d.fields||[],project_ids:d.projectIds||[],audience:d.audience||"client",organization_id:e},{data:m,error:g}=await T.from("forms").upsert(h,{onConflict:"form_id"}).select().single();if(g)throw g;return{success:!0,data:m}}catch(h){return P.error("Erreur sauvegarde form:",{error:h.message}),{success:!1,error:h.message}}},deleteForm:async f=>{try{const{error:d}=await T.from("forms").delete().eq("form_id",f);if(d)throw d;return{success:!0}}catch(d){return P.error("Erreur suppression form:",{error:d.message}),{success:!1,error:d.message}}}}}const D0=(e,t=!0)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useCallback(async()=>{try{o(!0),l(null);const{data:d,error:h}=await T.from("partners").select("*").order("created_at",{ascending:!1});if(h)throw h;const{data:m,error:g}=await T.from("missions").select("partner_id");if(g)throw g;const v=(m||[]).reduce((b,y)=>(b[y.partner_id]=(b[y.partner_id]||0)+1,b),{}),x=(d||[]).map(b=>({id:b.id,userId:b.user_id,organizationId:b.organization_id,companyName:b.company_name,contactFirstName:b.contact_first_name,contactLastName:b.contact_last_name,contactEmail:b.email,name:b.company_name,email:b.email,phone:b.phone,avatarUrl:b.avatar_url,specialty:b.specialty,active:b.active,isActive:b.active,createdAt:b.created_at,updatedAt:b.updated_at,missionsCount:v[b.id]||0}));n(x)}catch(d){console.error("[useSupabasePartners] Erreur:",d),l(d.message)}finally{o(!1)}},[]),u=p.useCallback(async(d,h)=>{try{const{error:m}=await T.from("partners").update({active:h,updated_at:new Date().toISOString()}).eq("id",d);if(m)throw m;return n(g=>g.map(v=>v.id===d?{...v,active:h}:v)),{success:!0}}catch(m){return console.error("[useSupabasePartners] Erreur toggle:",m),{success:!1,error:m.message}}},[]),f=p.useCallback(async d=>{try{const{data:h,error:m}=await T.from("partners").select("*").eq("id",d).single();if(m)throw m;const{data:g,error:v}=await T.from("missions").select(`
          id,
          title,
          status,
          source,
          project_type,
          step_name,
          due_date,
          completed_at,
          created_at
        `).eq("partner_id",d).order("created_at",{ascending:!1});if(v)throw v;return{partner:{id:h.id,userId:h.user_id,organizationId:h.organization_id,name:h.name,email:h.email,phone:h.phone,avatarUrl:h.avatar_url,specialty:h.specialty,active:h.active,createdAt:h.created_at,updatedAt:h.updated_at},missions:(g||[]).map(x=>({id:x.id,title:x.title,status:x.status,source:x.source,projectType:x.project_type,stepName:x.step_name,dueDate:x.due_date,completedAt:x.completed_at,createdAt:x.created_at}))}}catch(h){return console.error("[useSupabasePartners] Erreur getPartnerWithMissions:",h),{partner:null,missions:[],error:h.message}}},[]);return p.useEffect(()=>{if(!t||!e)return;c();const d=T.channel(`partners-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"partners",filter:`organization_id=eq.${e}`},()=>{c()}).subscribe();return()=>{T.removeChannel(d)}},[c,t,e]),{partners:r,loading:s,error:a,refetch:c,togglePartnerActive:u,getPartnerWithMissions:f}},gn=({activeModule:e})=>{const t=nr(),r=[{id:"workflows",path:"/admin/workflows-charly",label:"Workflows",icon:"",color:"bg-green-600 hover:bg-green-700",activeColor:"bg-green-600"},{id:"projets",path:"/admin/projects-management",label:"Projets",icon:"",color:"bg-blue-600 hover:bg-blue-700",activeColor:"bg-blue-600"},{id:"formulaires",path:"/admin/forms-management",label:"Formulaires",icon:"",color:"bg-teal-600 hover:bg-teal-700",activeColor:"bg-teal-600"},{id:"contrats",path:"/admin/contract-templates",label:"Contrats",icon:"",color:"bg-purple-600 hover:bg-purple-700",activeColor:"bg-purple-600"},{id:"catalogue",path:"/admin/project-display",label:"Catalogue Client",icon:"",color:"bg-indigo-600 hover:bg-indigo-700",activeColor:"bg-indigo-600"},{id:"partenaires",path:"/admin/partners",label:"Partenaires",icon:"",color:"bg-orange-600 hover:bg-orange-700",activeColor:"bg-orange-600"}];return i.jsx("div",{className:"px-6 pt-4 pb-2",children:i.jsx("div",{className:"flex items-center justify-center gap-3",children:r.map(n=>{const s=e===n.id||t.pathname===n.path;return i.jsxs(go,{to:n.path,className:`
                flex items-center gap-2.5 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200
                ${s?`${n.activeColor} text-white shadow-lg scale-105`:"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800 hover:scale-102"}
              `,children:[i.jsx("span",{className:"text-lg",children:n.icon}),i.jsx("span",{children:n.label})]},n.path)})})})},jJ=({action:e,onChange:t,onDelete:r,forms:n,contractTemplates:s,partners:o=[]})=>{const a=(f,d)=>{t({...e,[f]:d})},l=()=>{const f=[...e.checklist||[],{id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:""}];a("checklist",f)},c=(f,d)=>{const h=[...e.checklist||[]];h[f].text=d,a("checklist",h)},u=f=>{const d=[...e.checklist||[]];d.splice(f,1),a("checklist",d)};return i.jsxs("div",{className:"p-4 bg-white rounded-lg border space-y-4",children:[e.order!==void 0&&e.waitForPrevious&&i.jsx("div",{className:"flex items-center gap-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("span",{className:"text-sm text-blue-700",children:[" ",i.jsxs("strong",{children:["Action #",e.order+1]})," - S'enverra automatiquement aprs validation de l'action prcdente"]})}),e.order!==void 0&&!e.waitForPrevious&&i.jsx("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("span",{className:"text-sm text-green-700",children:[" ",i.jsxs("strong",{children:["Action #",e.order+1]})," - S'enverra immdiatement"]})}),i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Type d'action"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{a("hasClientAction",!0),e.type==="partner_task"&&(a("type","none"),a("partnerId",null),a("partnerInstructions",null),a("isBlocking",null))},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.hasClientAction===!0&&e.type!=="partner_task"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au client"})]})}),i.jsx("button",{type:"button",onClick:()=>{a("hasClientAction",!1),e.type==="partner_task"&&(a("type","none"),a("partnerId",null),a("partnerInstructions",null),a("isBlocking",null))},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.hasClientAction===!1&&e.type!=="partner_task"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au commercial"})]})}),i.jsx("button",{type:"button",onClick:()=>{console.log(" Clic sur Associe au partenaire",{action:e,partners:o}),t({...e,type:"partner_task",hasClientAction:null,formId:null,templateId:null,documentType:null})},className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.type==="partner_task"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Associe au partenaire"})]})})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:r,className:"ml-2",children:i.jsx(Mn,{className:"h-4 w-4 text-red-500"})})]}),e.type==="partner_task"?i.jsxs("div",{className:"space-y-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[!o||o.filter(f=>f.isActive).length===0?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Aucun partenaire disponible"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Invitez-en un depuis l'onglet Partenaires."})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Partenaire assign"}),i.jsxs(Yt,{value:e.partnerId||"",onValueChange:f=>a("partnerId",f),children:[i.jsx(Bt,{children:i.jsx(Jt,{placeholder:"Slectionner un partenaire"})}),i.jsx(zt,{children:o.filter(f=>f.isActive).map(f=>i.jsxs(Pe,{value:f.id,children:[f.companyName," (",f.contactEmail,")"]},f.id))})]}),!e.partnerId&&i.jsx("p",{className:"text-xs text-red-500",children:" Partenaire obligatoire pour sauvegarder"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Instructions pour le partenaire"}),i.jsx(ho,{value:e.partnerInstructions||"",onChange:f=>a("partnerInstructions",f.target.value),placeholder:"Ex: Effectuer la visite technique et remplir le rapport...",className:"min-h-[100px]"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ces instructions seront visibles par le partenaire dans sa vue mobile"})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[i.jsx(rr,{id:`blocking-${e.id}`,checked:e.isBlocking!==!1,onCheckedChange:f=>a("isBlocking",f)}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Q,{htmlFor:`blocking-${e.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Action bloquante"}),i.jsx("p",{className:"text-xs text-gray-500",children:e.isBlocking!==!1?" Le projet ne peut pas avancer tant que le partenaire n'a pas termin":" Le projet peut continuer mme si la mission n'est pas termine"})]})]})]}):e.hasClientAction!==!1?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Message  dire"}),i.jsx(ho,{placeholder:"Ex: Bonjour, merci de complter les informations...",value:e.message,onChange:f=>a("message",f.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Action  associer"}),i.jsxs(Yt,{value:e.type,onValueChange:f=>a("type",f),children:[i.jsx(Bt,{children:i.jsx(Jt,{placeholder:"Choisir une action"})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"none",children:"Aucune"}),i.jsx(Pe,{value:"show_form",children:"Afficher un formulaire"}),i.jsx(Pe,{value:"start_signature",children:"Lancer une signature"}),i.jsx(Pe,{value:"request_document",children:"Demander un document"}),i.jsx(Pe,{value:"open_payment",children:"Ouvrir un paiement"})]})]})]}),i.jsxs(Co,{children:[e.type==="show_form"&&i.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Formulaire  afficher"}),i.jsxs(Yt,{value:e.formId,onValueChange:f=>a("formId",f),children:[i.jsx(Bt,{children:i.jsx(Jt,{placeholder:"Choisir un formulaire"})}),i.jsx(zt,{children:Object.values(n).filter(f=>f.audience==="client"||!f.audience).map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id))})]})]}),e.type==="request_document"&&i.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Type de document attendu"}),i.jsx("input",{type:"text",value:e.documentType||"",onChange:f=>a("documentType",f.target.value),placeholder:"Ex: Facture EDF, RIB, Titre de proprit...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.type==="start_signature"&&i.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[i.jsx(Q,{children:"Template de contrat  utiliser"}),i.jsxs(Yt,{value:e.templateId,onValueChange:f=>a("templateId",f),children:[i.jsx(Bt,{children:i.jsx(Jt,{placeholder:"Slectionner un template"})}),i.jsx(zt,{children:s.filter(f=>f.isActive).map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id))})]}),!e.templateId&&i.jsx("p",{className:"text-xs text-red-500",children:" Template obligatoire pour sauvegarder"})]}),e.type==="start_signature"&&i.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden border-t pt-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"font-semibold text-gray-700",children:"Formulaire source des donnes"}),i.jsxs(Yt,{value:e.formId||"",onValueChange:f=>a("formId",f),children:[i.jsx(Bt,{className:"w-full",children:i.jsx(Jt,{placeholder:"Slectionner un formulaire"})}),i.jsxs(zt,{children:[Array.isArray(n)&&n.map(f=>i.jsx(Pe,{value:f.id,children:f.name},f.id)),(!Array.isArray(n)||n.length===0)&&i.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500",children:"Aucun formulaire disponible"})]})]}),i.jsx("p",{className:"text-xs text-blue-600",children:" Les donnes du formulaire seront injectes directement dans le contrat"})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Mode de gestion"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>a("managementMode","automatic"),className:`flex-1 p-3 rounded-lg border-2 transition-all ${(e.managementMode||"automatic")==="automatic"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Gr par l'IA"})]})}),i.jsx("button",{type:"button",onClick:()=>a("managementMode","manual"),className:`flex-1 p-3 rounded-lg border-2 transition-all ${e.managementMode==="manual"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Gr par commercial"})]})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(e.managementMode||"automatic")==="automatic"?" Envoy automatiquement par Charly AI":" Le commercial devra envoyer manuellement"}),i.jsx(Co,{children:e.managementMode==="manual"&&i.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pt-3 border-t overflow-hidden space-y-3",children:[i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(rr,{id:`create-task-${e.id}`,checked:e.createTask!==!1,onCheckedChange:f=>a("createTask",f)}),i.jsxs("div",{className:"space-y-1 flex-1",children:[i.jsx(Q,{htmlFor:`create-task-${e.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Crer automatiquement une tche pour le commercial"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Une tche sera envoye au commercial ds que cette tape devient l'tape en cours."})]})]}),e.createTask!==!1&&i.jsxs("div",{className:"space-y-2 ml-6",children:[i.jsx(Q,{className:"text-sm",children:"Titre de la tche"}),i.jsx("input",{type:"text",value:e.taskTitle||"Action requise pour ce client",onChange:f=>a("taskTitle",f.target.value),placeholder:"Action requise pour ce client",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})]}),e.type==="show_form"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{children:"Mode de vrification"}),i.jsxs(Yt,{value:e.verificationMode||"human",onValueChange:f=>a("verificationMode",f),children:[i.jsx(Bt,{children:i.jsx(Jt,{placeholder:"Choisir le mode de vrification"})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"none",children:"Pas de vrification (auto-validation)"}),i.jsx(Pe,{value:"ai",children:"IA automatique"}),i.jsx(Pe,{value:"human",children:"Humain (commercial vrifie)"})]})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e.verificationMode==="none"&&" Valid automatiquement ds que le client termine",e.verificationMode==="ai"&&" L'IA analysera et validera automatiquement",(!e.verificationMode||e.verificationMode==="human")&&" Une tche sera cre pour que le commercial vrifie"]}),(!e.verificationMode||e.verificationMode==="human")&&i.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:" Message si valid"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ce message sera envoy automatiquement dans le chat quand le commercial valide le formulaire"}),i.jsx(ho,{value:e.approvalMessage||"Merci ! Votre formulaire a t valid.",onChange:f=>a("approvalMessage",f.target.value),placeholder:"Merci ! Votre formulaire a t valid.",className:"min-h-[60px]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:" Message si rejet"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Message prdfini affich au commercial. Il pourra ajouter sa raison de refus avant d'envoyer dans le chat."}),i.jsx(ho,{value:e.rejectionMessage||"Oups !! Votre formulaire a t rejet pour la raison suivante :",onChange:f=>a("rejectionMessage",f.target.value),placeholder:"Oups !! Votre formulaire a t rejet pour la raison suivante :",className:"min-h-[60px]"})]})]})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Checklist de tches pour le commercial"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Liste des tches  effectuer manuellement pour cette action"}),i.jsx("div",{className:"space-y-2",children:(e.checklist||[]).map((f,d)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:f.text,onChange:h=>c(d,h.target.value),placeholder:"Ex: Vrifier le document",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>u(d),className:"h-8 w-8",children:i.jsx(Mn,{className:"h-4 w-4 text-red-500"})})]},f.id))}),i.jsxs(H,{variant:"outline",size:"sm",onClick:l,className:"w-full border-dashed",children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"})," Ajouter une tche"]})]})]})},_J=()=>{var q;const{projectsData:e={}}=Ve(),{organizationId:t}=on(),{forms:r,loading:n}=O0(t),s=p.useMemo(()=>Object.values(r||{}),[r]),{prompts:o,loading:a,savePrompt:l,deletePrompt:c}=vI({organizationId:t}),{templates:u,loading:f}=wJ(t),{partners:d,loading:h}=D0(t),m=p.useMemo(()=>o,[o]),[g,v]=p.useState(null),[x,b]=p.useState(!1),[y,w]=p.useState({name:"",tone:"",projectId:null,stepsConfig:{}}),[j,_]=p.useState(null);p.useEffect(()=>{w(g?JSON.parse(JSON.stringify(g)):{name:"",tone:"",projectId:null,stepsConfig:{}})},[g]);const S=p.useMemo(()=>Object.values(e||{}).map(A=>({value:A.type,label:A.title})),[e]),N=p.useMemo(()=>{var A;return y.projectId?((A=e==null?void 0:e[y.projectId])==null?void 0:A.steps)||[]:[]},[y.projectId,e]),E=A=>{w(R=>({...R,projectId:A,stepsConfig:{}})),_(null)},C=A=>{_(j===A?null:A)},k=(A,R,$)=>{const L={...y.stepsConfig};L[A]||(L[A]={actions:[],autoCompleteStep:!1}),L[A].actions[R]=$,w(W=>({...W,stepsConfig:L}))},I=A=>{const R={...y.stepsConfig};R[A]||(R[A]={actions:[],autoCompleteStep:!1});const L=(R[A].actions||[]).length;R[A].actions.push({id:`action-${Date.now()}`,message:"",type:"none",hasClientAction:!0,order:L,waitForPrevious:L>0}),w(W=>({...W,stepsConfig:R}))},O=(A,R)=>{const $={...y.stepsConfig};$[A]&&$[A].actions.splice(R,1),w(L=>({...L,stepsConfig:$}))},M=(A,R,$)=>{const L={...y.stepsConfig};L[A]||(L[A]={actions:[],autoCompleteStep:!1}),L[A][R]=$,w(W=>({...W,stepsConfig:L}))},D=async()=>{if(!y.name||!y.tone||!y.projectId){F({title:"Champs manquants",description:"Veuillez remplir le nom, le ton et le projet.",variant:"destructive"});return}b(!0);const A={...y,id:(g==null?void 0:g.id)||`prompt-${Date.now()}`},R=A.id||`prompt-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;try{const $=await l(R,{name:A.name,tone:A.tone,projectId:A.projectId,stepsConfig:A.stepsConfig||{}});$.success?(F({title:" Prompt enregistr !",description:`Le prompt "${A.name}" a t sauvegard dans Supabase.`,className:"bg-green-500 text-white"}),v(null)):F({title:" Erreur",description:`Impossible d'enregistrer le prompt : ${$.error}`,variant:"destructive"})}finally{b(!1)}},z=async A=>{const R=await c(A);R.success?F({title:" Prompt supprim !",description:"Le prompt a t supprim de Supabase.",className:"bg-green-500 text-white"}):F({title:" Erreur",description:`Impossible de supprimer le prompt : ${R.error}`,variant:"destructive"})},B=A=>{v(A)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"workflows"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Workflows Charly"}),i.jsxs(H,{onClick:()=>B(null),className:"bg-indigo-600 hover:bg-indigo-700 w-full",children:[i.jsx(Rr,{className:"mr-2 h-4 w-4"})," Crer un nouveau prompt"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:Object.values(m).length>0?Object.values(m).map(A=>{var R;return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(g==null?void 0:g.id)===A.id?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>B(A),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Yl,{className:"h-5 w-5 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:A.name}),i.jsx("p",{className:"text-xs text-gray-500",children:((R=e[A.projectId])==null?void 0:R.title)||"Projet inconnu"})]})]}),i.jsxs(qc,{children:[i.jsx(yh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:$=>$.stopPropagation(),children:i.jsx(Mn,{className:"h-4 w-4"})})}),i.jsxs(va,{children:[i.jsxs(xa,{children:[i.jsxs(ba,{children:['Supprimer "',A.name,'" ?']}),i.jsx(wa,{children:"Cette action est irrversible."})]}),i.jsxs(ya,{children:[i.jsx(_a,{children:"Annuler"}),i.jsx(ja,{onClick:()=>z(A.id),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},A.id)}):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(Yl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun prompt cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:g?"Modifier le prompt":"Crer un nouveau prompt"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Paramtrez votre prompt pour gnrer des communications personnalises."})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-name",children:"Nom du prompt"}),i.jsx(pe,{id:"prompt-name",placeholder:"Ex: Relance aprs RDV",value:y.name,onChange:A=>w(R=>({...R,name:A.target.value}))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-tone",children:"Ton"}),i.jsxs(Yt,{value:y.tone,onValueChange:A=>w(R=>({...R,tone:A})),children:[i.jsx(Bt,{id:"prompt-tone",children:i.jsx(Jt,{placeholder:"Choisir un ton"})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"professionnel",children:"Professionnel"}),i.jsx(Pe,{value:"detendu",children:"Dtendu"}),i.jsx(Pe,{value:"humain",children:"Humain"})]})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"prompt-project",children:"Projet"}),i.jsxs(Yt,{value:y.projectId,onValueChange:E,children:[i.jsx(Bt,{id:"prompt-project",children:i.jsx(Jt,{placeholder:"Choisir un projet"})}),i.jsx(zt,{children:S.map(A=>i.jsx(Pe,{value:A.value,children:A.label},A.value))})]})]})]}),y.projectId&&i.jsxs(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"pt-4 border-t",children:[i.jsxs("h4",{className:"font-semibold text-gray-700 mb-3",children:['tapes du projet "',(q=e[y.projectId])==null?void 0:q.title,'"']}),i.jsx("div",{className:"space-y-2",children:N.map((A,R)=>{var $,L;return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>C(R),className:"w-full flex items-center justify-between gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-lg",children:A.icon}),i.jsx("span",{className:"text-sm font-medium text-gray-800",children:A.name})]}),j===R?i.jsx(Rs,{className:"h-5 w-5"}):i.jsx(Wn,{className:"h-5 w-5"})]}),i.jsx(Co,{children:j===R&&i.jsx(ae.div,{initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:"0.5rem"},exit:{opacity:0,height:0,marginTop:0},className:"pl-8 bg-gray-50/50 rounded-b-md",children:i.jsxs("div",{className:"p-4 space-y-4",children:[((($=y.stepsConfig[R])==null?void 0:$.actions)||[]).map((W,V)=>i.jsx(jJ,{action:W,onChange:re=>k(R,V,re),onDelete:()=>O(R,V),forms:s||[],contractTemplates:u||[],partners:d||[]},W.id)),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>I(R),className:"w-full border-dashed",children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"})," Ajouter un message + action"]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t mt-4",children:[i.jsx(rr,{id:`form-complete-step-${R}`,checked:((L=y.stepsConfig[R])==null?void 0:L.autoCompleteStep)||!1,onCheckedChange:W=>M(R,"autoCompleteStep",W)}),i.jsx(Q,{htmlFor:`form-complete-step-${R}`,className:"text-sm text-gray-600",children:"Si action valide, passer automatiquement  l'tape suivante"})]})]})})})]},R)})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:()=>v(null),disabled:x,children:"Annuler"}),i.jsx(H,{onClick:D,className:"bg-green-600 hover:bg-green-700",disabled:x,children:x?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le prompt"})]})]})]})})]})]})},il=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:he("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));il.displayName="Card";const al=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:he("flex flex-col space-y-1.5 p-6",e),...t}));al.displayName="CardHeader";const ll=p.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:he("text-2xl font-semibold leading-none tracking-tight",e),...t}));ll.displayName="CardTitle";const xI=p.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:he("text-sm text-muted-foreground",e),...t}));xI.displayName="CardDescription";const cl=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:he("p-6 pt-0",e),...t}));cl.displayName="CardContent";const SJ=p.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:he("flex items-center p-6 pt-0",e),...t}));SJ.displayName="CardFooter";var Sh="Switch",[NJ,oie]=nn(Sh),[EJ,CJ]=NJ(Sh),yI=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=Fe(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[b,y]=Lo({prop:s,defaultProp:o??!1,onChange:u,caller:Sh});return i.jsxs(EJ,{scope:r,checked:b,disabled:l,children:[i.jsx(Re.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":_I(b),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:xe(e.onClick,w=>{y(j=>!j),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(jI,{control:h,bubbles:!v.current,name:n,value:c,checked:b,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});yI.displayName=Sh;var bI="SwitchThumb",wI=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=CJ(bI,r);return i.jsx(Re.span,{"data-state":_I(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});wI.displayName=bI;var PJ="SwitchBubbleInput",jI=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},o)=>{const a=p.useRef(null),l=Fe(a,o),c=FA(r),u=Hy(t);return p.useEffect(()=>{const f=a.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(f,r),f.dispatchEvent(g)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jI.displayName=PJ;function _I(e){return e?"checked":"unchecked"}var SI=yI,TJ=wI;const Nh=J.forwardRef(({className:e,...t},r)=>i.jsx(SI,{className:he("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(TJ,{className:he("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Nh.displayName=SI.displayName;const En=({value:e,onSave:t,placeholder:r="Cliquez pour modifier...",className:n="",inputClassName:s="",multiline:o=!1,as:a="span",disabled:l=!1})=>{const[c,u]=p.useState(!1),[f,d]=p.useState(e||""),[h,m]=p.useState(!1),g=p.useRef(null);p.useEffect(()=>{c||d(e||"")},[e,c]),p.useEffect(()=>{c&&g.current&&(g.current.focus(),o||g.current.select())},[c,o]);const v=()=>{!l&&!c&&u(!0)},x=async()=>{if(f===e){u(!1);return}try{m(!0),await t(f),u(!1)}catch(N){console.error("InlineEditable save error:",N)}finally{m(!1)}},b=()=>{d(e||""),u(!1)},y=N=>{N.key==="Enter"&&!o?(N.preventDefault(),x()):N.key==="Escape"&&b()},w=N=>{var E,C;((C=(E=N.relatedTarget)==null?void 0:E.dataset)==null?void 0:C.action)!=="cancel"&&x()},j=a,_=e||r,S=!e;if(c){const N=o?"textarea":"input";return i.jsxs("div",{className:"inline-flex items-center gap-2 w-full",children:[i.jsx(N,{ref:g,type:"text",value:f,onChange:E=>d(E.target.value),onKeyDown:y,onBlur:w,disabled:h,className:he("flex-1 px-3 py-2 border border-blue-400 rounded-lg","focus:outline-none focus:ring-2 focus:ring-blue-500","bg-white text-gray-900",o&&"min-h-[80px] resize-y",h&&"opacity-50 cursor-not-allowed",s),placeholder:r,rows:o?3:void 0}),i.jsx("button",{type:"button",onClick:x,disabled:h,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Enregistrer",children:h?i.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):i.jsx($n,{className:"w-4 h-4"})}),i.jsx("button",{type:"button","data-action":"cancel",onClick:b,disabled:h,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Annuler",children:i.jsx(Fo,{className:"w-4 h-4"})})]})}return i.jsxs(j,{onClick:v,className:he("group cursor-pointer inline-flex items-center gap-2","hover:bg-blue-50 rounded-lg px-2 py-1 -mx-2 -my-1","transition-colors duration-150",S&&"text-gray-400 italic",l&&"cursor-not-allowed opacity-50",n),title:l?void 0:"Cliquez pour modifier",children:[i.jsx("span",{children:_}),!l&&i.jsx(N3,{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})},kJ=({value:e,onSave:t,className:r="",disabled:n=!1})=>{const[s,o]=p.useState(!1),[a,l]=p.useState(e||""),c=p.useRef(null),u=["","","","","","","","","","","","","","","","","","","","","","","",""];p.useEffect(()=>{s||l(e||"")},[e,s]),p.useEffect(()=>{if(s){const d=h=>{c.current&&!c.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)}},[s]);const f=async d=>{try{await t(d),l(d),o(!1)}catch(h){console.error("InlineEditableIcon save error:",h)}};return s?i.jsxs("div",{className:"relative inline-block",ref:c,children:[i.jsx("button",{type:"button",className:"text-4xl",children:a}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 bg-white rounded-xl shadow-xl border border-gray-200 z-50 grid grid-cols-8 gap-2 min-w-[280px]",children:u.map(d=>i.jsx("button",{type:"button",onClick:()=>f(d),className:"w-8 h-8 flex items-center justify-center text-xl hover:bg-blue-50 hover:scale-125 rounded-lg transition-all duration-150",children:d},d))})]}):i.jsx("button",{type:"button",onClick:()=>!n&&o(!0),disabled:n,className:he("text-4xl hover:scale-110 transition-transform cursor-pointer",n&&"cursor-not-allowed opacity-50",r),title:n?void 0:"Cliquez pour changer l'icne",children:e||""})},AJ=e=>{const[t,r]=p.useState(null),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=p.useRef(!1),c=()=>({hero_title:"",hero_subtitle:"Suivez l'avancement de votre projet en temps rel",hero_cta_text:"Je dmarre mon projet",hero_cta_link:"/inscription",show_how_it_works:!0,how_it_works_title:"Comment a marche ?",how_it_works_subtitle:"",blocks:u()}),u=()=>[{id:1,icon:"1",title:"tude",description:"Analyse de votre projet",tag:""},{id:2,icon:"2",title:"Installation",description:"Ralisation des travaux",tag:""},{id:3,icon:"3",title:"Suivi",description:"Accompagnement continu",tag:""}],f=async()=>{if(!e){s(!1);return}try{s(!0);const{data:b,error:y}=await T.from("organization_settings").select("*").eq("organization_id",e).single();if(y&&y.code!=="PGRST116")throw y;r(b),a(null)}catch(b){P.error("[useLandingPageConfig] Erreur chargement:",{error:b.message}),a(b.message)}finally{s(!1)}};p.useEffect(()=>{f()},[e]),p.useEffect(()=>{if(!e)return;const b=T.channel(`org-settings-landing-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organization_settings",filter:`organization_id=eq.${e}`},y=>{r(w=>JSON.stringify(w)===JSON.stringify(y.new)?w:(l.current=!1,y.new))}).subscribe();return()=>{T.removeChannel(b)}},[e]);const d=()=>{const b=(t==null?void 0:t.landing_page_config)||{},y=c();return{hero_title:b.hero_title||y.hero_title,hero_subtitle:b.hero_subtitle||y.hero_subtitle,hero_cta_text:b.hero_cta_text||y.hero_cta_text,hero_cta_link:b.hero_cta_link||y.hero_cta_link,show_how_it_works:b.show_how_it_works!==void 0?b.show_how_it_works:y.show_how_it_works,how_it_works_title:b.how_it_works_title||y.how_it_works_title,how_it_works_subtitle:b.how_it_works_subtitle||y.how_it_works_subtitle,blocks:b.blocks||y.blocks}},h=async(b,y)=>{if(!e)return P.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const j={...(t==null?void 0:t.landing_page_config)||{},[b]:y},{error:_}=await T.from("organization_settings").update({landing_page_config:j,updated_at:new Date().toISOString()}).eq("organization_id",e);if(_)throw l.current=!1,_;return r(S=>({...S,landing_page_config:j,updated_at:new Date().toISOString()})),!0}catch(w){return P.error("[useLandingPageConfig] Erreur update field:",{error:w.message,field:b}),F({title:"Erreur",description:"Impossible de sauvegarder la modification.",variant:"destructive"}),!1}},m=async(b,y)=>{if(!e)return P.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const w=(t==null?void 0:t.landing_page_config)||{},_=(w.blocks||u()).map(E=>E.id===b?{...E,...y}:E),S={...w,blocks:_},{error:N}=await T.from("organization_settings").update({landing_page_config:S,updated_at:new Date().toISOString()}).eq("organization_id",e);if(N)throw l.current=!1,N;return r(E=>({...E,landing_page_config:S,updated_at:new Date().toISOString()})),!0}catch(w){return P.error("[useLandingPageConfig] Erreur update block:",{error:w.message,blockId:b}),F({title:"Erreur",description:"Impossible de sauvegarder le bloc.",variant:"destructive"}),!1}},g=async b=>{if(!e)return P.error("[useLandingPageConfig] Pas d'organizationId"),!1;try{l.current=!0;const{error:y}=await T.from("organization_settings").update({landing_page_config:b,updated_at:new Date().toISOString()}).eq("organization_id",e);if(y)throw l.current=!1,y;return r(w=>({...w,landing_page_config:b,updated_at:new Date().toISOString()})),F({title:"Sauvegard !",description:"La configuration de la landing page a t mise  jour.",className:"bg-green-500 text-white"}),!0}catch(y){return P.error("[useLandingPageConfig] Erreur save config:",{error:y.message}),F({title:"Erreur",description:"Impossible de sauvegarder la configuration.",variant:"destructive"}),!1}},v=async()=>g(c()),x=d();return{settings:t,loading:n,error:o,landingConfig:x,getLandingConfig:d,updateLandingField:h,updateLandingBlock:m,saveLandingConfig:g,resetToDefaults:v,refetch:f}},RJ=()=>{const{organizationId:e,logoUrl:t,brandName:r}=on(),{loading:n,getLandingConfig:s,updateLandingField:o,updateLandingBlock:a,resetToDefaults:l}=AJ(e),[c,u]=p.useState(!0),[f,d]=p.useState(!1),h=s(),m=h.hero_title||`Bienvenue chez ${r||"votre entreprise"}`,g=h.hero_subtitle||"Suivez l'avancement de votre projet en temps rel",v=async(y,w)=>{await o(y,w)&&F({title:" Sauvegard",description:"Modification enregistre.",className:"bg-green-500 text-white",duration:2e3})},x=async(y,w,j)=>{const _=h.blocks.find(N=>N.id===y);await a(y,{..._,[w]:j})&&F({title:" Sauvegard",description:"Bloc mis  jour.",className:"bg-green-500 text-white",duration:2e3})},b=async()=>{confirm("tes-vous sr de vouloir rinitialiser la landing page aux valeurs par dfaut ?")&&(d(!0),await l(),d(!1),F({title:" Rinitialis",description:"La landing page a t rinitialise.",className:"bg-blue-500 text-white"}))};return n?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement de la configuration..."})]})}):i.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Landing Page"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Personnalisez la page d'accueil publique de votre entreprise. Cliquez sur n'importe quel texte pour le modifier."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(H,{variant:"outline",onClick:()=>u(!c),className:"gap-2",children:[c?i.jsx(Jl,{className:"w-4 h-4"}):i.jsx(Xl,{className:"w-4 h-4"}),c?"Masquer preview":"Afficher preview"]}),i.jsxs(H,{variant:"outline",onClick:b,disabled:f,className:"gap-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[f?i.jsx(De,{className:"w-4 h-4 animate-spin"}):i.jsx(E3,{className:"w-4 h-4"}),"Rinitialiser"]})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:i.jsxs("p",{className:"text-blue-800 text-sm",children:[" ",i.jsx("strong",{children:"Astuce :"})," Cliquez directement sur les textes pour les modifier. Les modifications sont sauvegardes automatiquement. Le logo utilis est celui configur dans les paramtres de votre organisation."]})}),c&&i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[t?i.jsx("img",{src:t,alt:r||"Logo",className:"h-10 w-auto object-contain"}):i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold",children:(r==null?void 0:r.charAt(0))||"E"})}),i.jsx("span",{className:"font-semibold text-gray-700",children:r||"Votre entreprise"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-4 py-2 rounded-full bg-[#22c55e] text-white text-sm font-medium",children:"Espace Pro"}),i.jsx("span",{className:"px-4 py-2 rounded-full bg-[#0ea5e9] text-white text-sm font-medium",children:"Espace Client"})]})]}),i.jsxs("div",{className:"relative px-8 py-16 bg-gradient-to-b from-white to-green-50/30",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-green-100/50 rounded-full blur-3xl"})}),i.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center space-y-6",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 leading-tight",children:i.jsx(En,{value:m,onSave:y=>v("hero_title",y),placeholder:`Bienvenue chez ${r||"votre entreprise"}`,className:"text-4xl md:text-5xl font-bold",inputClassName:"text-3xl font-bold text-center"})}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 italic",children:i.jsx(En,{value:g,onSave:y=>v("hero_subtitle",y),placeholder:"Suivez l'avancement de votre projet en temps rel",className:"text-xl md:text-2xl text-gray-600 italic",inputClassName:"text-xl italic text-center"})}),i.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4",children:[i.jsx("button",{className:"px-8 py-4 bg-[#22c55e] hover:bg-[#16a34a] text-white rounded-full font-semibold text-lg transition-colors",children:i.jsx(En,{value:h.hero_cta_text,onSave:y=>v("hero_cta_text",y),placeholder:"Texte du bouton...",className:"text-white font-semibold",inputClassName:"text-center"})}),h.show_how_it_works!==!1&&i.jsx("span",{className:"text-[#22c55e] font-medium cursor-pointer hover:text-[#16a34a]",children:i.jsx(En,{value:h.how_it_works_title,onSave:y=>v("how_it_works_title",y),placeholder:"Comment a marche ?",className:"text-[#22c55e] font-medium",inputClassName:"text-center"})})]}),i.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"Le bouton redirige toujours vers la cration de compte"})]})]}),i.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:'Section "Comment a marche"'}),i.jsx("p",{className:"text-sm text-gray-500",children:"Afficher les 3 blocs explicatifs sur la landing page"})]}),i.jsx(Nh,{checked:h.show_how_it_works!==!1,onCheckedChange:y=>v("show_how_it_works",y)})]})}),h.show_how_it_works!==!1&&i.jsx("div",{className:"px-8 py-16 bg-white",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-12",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:i.jsx(En,{value:h.how_it_works_title,onSave:y=>v("how_it_works_title",y),placeholder:"Titre de la section...",className:"text-3xl font-bold",inputClassName:"text-2xl font-bold text-center"})}),i.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:i.jsx(En,{value:h.how_it_works_subtitle,onSave:y=>v("how_it_works_subtitle",y),placeholder:"Description de la section...",className:"text-gray-600",inputClassName:"text-center",multiline:!0})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.blocks.map(y=>i.jsxs(il,{className:"text-center hover:shadow-lg transition-shadow",children:[i.jsxs(al,{className:"pb-2",children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsx(kJ,{value:y.icon,onSave:w=>x(y.id,"icon",w)})}),i.jsx(ll,{className:"text-lg",children:i.jsx(En,{value:y.title,onSave:w=>x(y.id,"title",w),placeholder:"Titre du bloc...",className:"text-lg font-semibold",inputClassName:"text-center font-semibold"})})]}),i.jsxs(cl,{className:"space-y-3",children:[i.jsx(xI,{children:i.jsx(En,{value:y.description,onSave:w=>x(y.id,"description",w),placeholder:"Description du bloc...",className:"text-gray-600 text-sm",inputClassName:"text-center text-sm",multiline:!0})}),i.jsx("div",{className:"inline-block px-3 py-1 bg-gray-100 rounded-full text-xs text-gray-600",children:i.jsx(En,{value:y.tag,onSave:w=>x(y.id,"tag",w),placeholder:"Tag du bloc...",className:"text-xs",inputClassName:"text-xs text-center"})})]})]},y.id))})]})}),i.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 text-center text-sm text-gray-500",children:"Prvisualisation de votre landing page  Les modifications sont sauvegardes en temps rel"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(il,{children:[i.jsx(al,{className:"pb-2",children:i.jsx(ll,{className:"text-sm font-medium text-gray-600",children:"Hero Section"})}),i.jsxs(cl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2 textes"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Titre + sous-titre + 2 CTAs"})]})]}),i.jsxs(il,{children:[i.jsx(al,{className:"pb-2",children:i.jsx(ll,{className:"text-sm font-medium text-gray-600",children:"Comment a marche"})}),i.jsxs(cl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"3 blocs"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Icne + titre + description + tag"})]})]}),i.jsxs(il,{children:[i.jsx(al,{className:"pb-2",children:i.jsx(ll,{className:"text-sm font-medium text-gray-600",children:"Branding"})}),i.jsxs(cl,{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r||"Non dfini"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Logo depuis les paramtres org"})]})]})]})]})};var Eh="Popover",[NI,iie]=nn(Eh,[oh]),Wc=oh(),[IJ,Vs]=NI(Eh),EI=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,l=Wc(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Lo({prop:n,defaultProp:s??!1,onChange:o,caller:Eh});return i.jsx(yT,{...l,children:i.jsx(IJ,{scope:t,contentId:xo(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:a,children:r})})};EI.displayName=Eh;var CI="PopoverAnchor",OJ=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Vs(CI,r),o=Wc(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(Yy,{...o,...n,ref:t})});OJ.displayName=CI;var PI="PopoverTrigger",TI=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Vs(PI,r),o=Wc(r),a=Fe(t,s.triggerRef),l=i.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":OI(s.open),...n,ref:a,onClick:xe(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Yy,{asChild:!0,...o,children:l})});TI.displayName=PI;var $0="PopoverPortal",[DJ,$J]=NI($0,{forceMount:void 0}),kI=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=Vs($0,t);return i.jsx(DJ,{scope:t,forceMount:r,children:i.jsx(Fr,{present:r||o.open,children:i.jsx(Ec,{asChild:!0,container:s,children:n})})})};kI.displayName=$0;var na="PopoverContent",AI=p.forwardRef((e,t)=>{const r=$J(na,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=Vs(na,e.__scopePopover);return i.jsx(Fr,{present:n||o.open,children:o.modal?i.jsx(LJ,{...s,ref:t}):i.jsx(FJ,{...s,ref:t})})});AI.displayName=na;var MJ=No("PopoverContent.RemoveScroll"),LJ=p.forwardRef((e,t)=>{const r=Vs(na,e.__scopePopover),n=p.useRef(null),s=Fe(t,n),o=p.useRef(!1);return p.useEffect(()=>{const a=n.current;if(a)return $c(a)},[]),i.jsx(t0,{as:MJ,allowPinchZoom:!0,children:i.jsx(RI,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),FJ=p.forwardRef((e,t)=>{const r=Vs(na,e.__scopePopover),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(RI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),RI=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Vs(na,r),m=Wc(r);return Fy(),i.jsx(eh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Nc,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(bT,{"data-state":OI(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),II="PopoverClose",BJ=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Vs(II,r);return i.jsx(Re.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});BJ.displayName=II;var zJ="PopoverArrow",UJ=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Wc(r);return i.jsx(wT,{...s,...n,ref:t})});UJ.displayName=zJ;function OI(e){return e?"open":"closed"}var VJ=EI,qJ=TI,WJ=kI,DI=AI;const $I=VJ,MI=qJ,M0=J.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(WJ,{children:i.jsx(DI,{ref:s,align:t,sideOffset:r,className:he("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));M0.displayName=DI.displayName;function F1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function B1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F1(Object(r),!0).forEach(function(n){JH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var z1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jm=function(){return Math.random().toString(36).substring(7).split("").join(".")},U1={INIT:"@@redux/INIT"+jm(),REPLACE:"@@redux/REPLACE"+jm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jm()}};function HJ(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function LI(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Gt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Gt(1));return r(LI)(e,t)}if(typeof e!="function")throw new Error(Gt(2));var s=e,o=t,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function f(){if(c)throw new Error(Gt(3));return o}function d(v){if(typeof v!="function")throw new Error(Gt(4));if(c)throw new Error(Gt(5));var x=!0;return u(),l.push(v),function(){if(x){if(c)throw new Error(Gt(6));x=!1,u();var y=l.indexOf(v);l.splice(y,1),a=null}}}function h(v){if(!HJ(v))throw new Error(Gt(7));if(typeof v.type>"u")throw new Error(Gt(8));if(c)throw new Error(Gt(9));try{c=!0,o=s(o,v)}finally{c=!1}for(var x=a=l,b=0;b<x.length;b++){var y=x[b];y()}return v}function m(v){if(typeof v!="function")throw new Error(Gt(10));s=v,h({type:U1.REPLACE})}function g(){var v,x=d;return v={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Gt(11));function w(){y.next&&y.next(f())}w();var j=x(w);return{unsubscribe:j}}},v[z1]=function(){return this},v}return h({type:U1.INIT}),n={dispatch:h,subscribe:d,getState:f,replaceReducer:m},n[z1]=g,n}function V1(e,t){return function(){return t(e.apply(this,arguments))}}function q1(e,t){if(typeof e=="function")return V1(e,t);if(typeof e!="object"||e===null)throw new Error(Gt(16));var r={};for(var n in e){var s=e[n];typeof s=="function"&&(r[n]=V1(s,t))}return r}function FI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function GJ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),o=function(){throw new Error(Gt(15))},a={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(c){return c(a)});return o=FI.apply(void 0,l)(s.dispatch),B1(B1({},s),{},{dispatch:o})}}}var BI={exports:{}},zI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=p;function KJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YJ=typeof Object.is=="function"?Object.is:KJ,JJ=sa.useState,XJ=sa.useEffect,QJ=sa.useLayoutEffect,ZJ=sa.useDebugValue;function eX(e,t){var r=t(),n=JJ({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return QJ(function(){s.value=r,s.getSnapshot=t,_m(s)&&o({inst:s})},[e,r,t]),XJ(function(){return _m(s)&&o({inst:s}),e(function(){_m(s)&&o({inst:s})})},[e]),ZJ(r),r}function _m(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!YJ(e,r)}catch{return!0}}function tX(e,t){return t()}var rX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tX:eX;zI.useSyncExternalStore=sa.useSyncExternalStore!==void 0?sa.useSyncExternalStore:rX;BI.exports=zI;var UI=BI.exports,nX={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch=p,sX=UI;function oX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iX=typeof Object.is=="function"?Object.is:oX,aX=sX.useSyncExternalStore,lX=Ch.useRef,cX=Ch.useEffect,uX=Ch.useMemo,dX=Ch.useDebugValue;nX.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=lX(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=uX(function(){function c(m){if(!u){if(u=!0,f=m,m=n(m),s!==void 0&&a.hasValue){var g=a.value;if(s(g,m))return d=g}return d=m}if(g=d,iX(f,m))return g;var v=n(m);return s!==void 0&&s(g,v)?(f=m,g):(f=m,d=v)}var u=!1,f,d,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=aX(e,o[0],o[1]);return cX(function(){a.hasValue=!0,a.value=l},[l]),dX(l),l};function fX(e){e()}let VI=fX;const hX=e=>VI=e,pX=()=>VI,W1=Symbol.for("react-redux-context"),H1=typeof globalThis<"u"?globalThis:{};function mX(){var e;if(!p.createContext)return{};const t=(e=H1[W1])!=null?e:H1[W1]=new Map;let r=t.get(p.createContext);return r||(r=p.createContext(null),t.set(p.createContext,r)),r}const qI=mX(),gX=()=>{throw new Error("uSES not initialized!")};function WI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HI={exports:{}},Me={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,L0=wt?Symbol.for("react.element"):60103,F0=wt?Symbol.for("react.portal"):60106,Ph=wt?Symbol.for("react.fragment"):60107,Th=wt?Symbol.for("react.strict_mode"):60108,kh=wt?Symbol.for("react.profiler"):60114,Ah=wt?Symbol.for("react.provider"):60109,Rh=wt?Symbol.for("react.context"):60110,B0=wt?Symbol.for("react.async_mode"):60111,Ih=wt?Symbol.for("react.concurrent_mode"):60111,Oh=wt?Symbol.for("react.forward_ref"):60112,Dh=wt?Symbol.for("react.suspense"):60113,vX=wt?Symbol.for("react.suspense_list"):60120,$h=wt?Symbol.for("react.memo"):60115,Mh=wt?Symbol.for("react.lazy"):60116,xX=wt?Symbol.for("react.block"):60121,yX=wt?Symbol.for("react.fundamental"):60117,bX=wt?Symbol.for("react.responder"):60118,wX=wt?Symbol.for("react.scope"):60119;function wr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case L0:switch(e=e.type,e){case B0:case Ih:case Ph:case kh:case Th:case Dh:return e;default:switch(e=e&&e.$$typeof,e){case Rh:case Oh:case Mh:case $h:case Ah:return e;default:return t}}case F0:return t}}}function GI(e){return wr(e)===Ih}Me.AsyncMode=B0;Me.ConcurrentMode=Ih;Me.ContextConsumer=Rh;Me.ContextProvider=Ah;Me.Element=L0;Me.ForwardRef=Oh;Me.Fragment=Ph;Me.Lazy=Mh;Me.Memo=$h;Me.Portal=F0;Me.Profiler=kh;Me.StrictMode=Th;Me.Suspense=Dh;Me.isAsyncMode=function(e){return GI(e)||wr(e)===B0};Me.isConcurrentMode=GI;Me.isContextConsumer=function(e){return wr(e)===Rh};Me.isContextProvider=function(e){return wr(e)===Ah};Me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===L0};Me.isForwardRef=function(e){return wr(e)===Oh};Me.isFragment=function(e){return wr(e)===Ph};Me.isLazy=function(e){return wr(e)===Mh};Me.isMemo=function(e){return wr(e)===$h};Me.isPortal=function(e){return wr(e)===F0};Me.isProfiler=function(e){return wr(e)===kh};Me.isStrictMode=function(e){return wr(e)===Th};Me.isSuspense=function(e){return wr(e)===Dh};Me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ph||e===Ih||e===kh||e===Th||e===Dh||e===vX||typeof e=="object"&&e!==null&&(e.$$typeof===Mh||e.$$typeof===$h||e.$$typeof===Ah||e.$$typeof===Rh||e.$$typeof===Oh||e.$$typeof===yX||e.$$typeof===bX||e.$$typeof===wX||e.$$typeof===xX)};Me.typeOf=wr;HI.exports=Me;var jX=HI.exports,z0=jX,_X={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},SX={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},NX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},KI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},U0={};U0[z0.ForwardRef]=NX;U0[z0.Memo]=KI;function G1(e){return z0.isMemo(e)?KI:U0[e.$$typeof]||_X}var EX=Object.defineProperty,CX=Object.getOwnPropertyNames,K1=Object.getOwnPropertySymbols,PX=Object.getOwnPropertyDescriptor,TX=Object.getPrototypeOf,Y1=Object.prototype;function YI(e,t,r){if(typeof t!="string"){if(Y1){var n=TX(t);n&&n!==Y1&&YI(e,n,r)}var s=CX(t);K1&&(s=s.concat(K1(t)));for(var o=G1(e),a=G1(t),l=0;l<s.length;++l){var c=s[l];if(!SX[c]&&!(r&&r[c])&&!(a&&a[c])&&!(o&&o[c])){var u=PX(t,c);try{EX(e,c,u)}catch{}}}}return e}var kX=YI;const J1=Io(kX);var JI={exports:{}},Le={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=Symbol.for("react.element"),q0=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),zh=Symbol.for("react.provider"),Uh=Symbol.for("react.context"),AX=Symbol.for("react.server_context"),Vh=Symbol.for("react.forward_ref"),qh=Symbol.for("react.suspense"),Wh=Symbol.for("react.suspense_list"),Hh=Symbol.for("react.memo"),Gh=Symbol.for("react.lazy"),RX=Symbol.for("react.offscreen"),XI;XI=Symbol.for("react.module.reference");function Br(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case V0:switch(e=e.type,e){case Lh:case Bh:case Fh:case qh:case Wh:return e;default:switch(e=e&&e.$$typeof,e){case AX:case Uh:case Vh:case Gh:case Hh:case zh:return e;default:return t}}case q0:return t}}}Le.ContextConsumer=Uh;Le.ContextProvider=zh;Le.Element=V0;Le.ForwardRef=Vh;Le.Fragment=Lh;Le.Lazy=Gh;Le.Memo=Hh;Le.Portal=q0;Le.Profiler=Bh;Le.StrictMode=Fh;Le.Suspense=qh;Le.SuspenseList=Wh;Le.isAsyncMode=function(){return!1};Le.isConcurrentMode=function(){return!1};Le.isContextConsumer=function(e){return Br(e)===Uh};Le.isContextProvider=function(e){return Br(e)===zh};Le.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===V0};Le.isForwardRef=function(e){return Br(e)===Vh};Le.isFragment=function(e){return Br(e)===Lh};Le.isLazy=function(e){return Br(e)===Gh};Le.isMemo=function(e){return Br(e)===Hh};Le.isPortal=function(e){return Br(e)===q0};Le.isProfiler=function(e){return Br(e)===Bh};Le.isStrictMode=function(e){return Br(e)===Fh};Le.isSuspense=function(e){return Br(e)===qh};Le.isSuspenseList=function(e){return Br(e)===Wh};Le.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Lh||e===Bh||e===Fh||e===qh||e===Wh||e===RX||typeof e=="object"&&e!==null&&(e.$$typeof===Gh||e.$$typeof===Hh||e.$$typeof===zh||e.$$typeof===Uh||e.$$typeof===Vh||e.$$typeof===XI||e.getModuleId!==void 0)};Le.typeOf=Br;JI.exports=Le;var IX=JI.exports;const OX=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function DX(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:a}){let l=!1,c,u,f,d,h;function m(y,w){return c=y,u=w,f=e(c,u),d=t(n,u),h=r(f,d,u),l=!0,h}function g(){return f=e(c,u),t.dependsOnOwnProps&&(d=t(n,u)),h=r(f,d,u),h}function v(){return e.dependsOnOwnProps&&(f=e(c,u)),t.dependsOnOwnProps&&(d=t(n,u)),h=r(f,d,u),h}function x(){const y=e(c,u),w=!a(y,f);return f=y,w&&(h=r(f,d,u)),h}function b(y,w){const j=!o(w,u),_=!s(y,c,w,u);return c=y,u=w,j&&_?g():j?v():_?x():h}return function(w,j){return l?b(w,j):m(w,j)}}function $X(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:s}=t,o=WI(t,OX);const a=r(e,o),l=n(e,o),c=s(e,o);return DX(a,l,c,e,o)}function MX(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function Bv(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function X1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function QI(e,t){return function(n,{displayName:s}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=X1(e);let u=o(l,c);return typeof u=="function"&&(o.mapToProps=u,o.dependsOnOwnProps=X1(u),u=o(l,c)),u},o}}function W0(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function LX(e){return e&&typeof e=="object"?Bv(t=>MX(e,t)):e?typeof e=="function"?QI(e):W0(e,"mapDispatchToProps"):Bv(t=>({dispatch:t}))}function FX(e){return e?typeof e=="function"?QI(e):W0(e,"mapStateToProps"):Bv(()=>({}))}function BX(e,t,r){return je({},r,e,t)}function zX(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,a;return function(c,u,f){const d=e(c,u,f);return o?s(d,a)||(a=d):(o=!0,a=d),a}}}function UX(e){return e?typeof e=="function"?zX(e):W0(e,"mergeProps"):()=>BX}function VX(){const e=pX();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const Q1={notify(){},get:()=>[]};function ZI(e,t){let r,n=Q1,s=0,o=!1;function a(v){f();const x=n.subscribe(v);let b=!1;return()=>{b||(b=!0,x(),d())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return o}function f(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=VX())}function d(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Q1)}function h(){o||(o=!0,f())}function m(){o&&(o=!1,d())}const g={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}const qX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uf=qX?p.useLayoutEffect:p.useEffect;function Z1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Sm(e,t){if(Z1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Z1(e[r[s]],t[r[s]]))return!1;return!0}const WX=["reactReduxForwardedRef"];let eO=gX;const HX=e=>{eO=e},GX=[null,null];function KX(e,t,r){uf(()=>e(...t),r)}function YX(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function JX(e,t,r,n,s,o,a,l,c,u,f){if(!e)return()=>{};let d=!1,h=null;const m=()=>{if(d||!l.current)return;const v=t.getState();let x,b;try{x=n(v,s.current)}catch(y){b=y,h=y}b||(h=null),x===o.current?a.current||u():(o.current=x,c.current=x,a.current=!0,f())};return r.onStateChange=m,r.trySubscribe(),m(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function XX(e,t){return e===t}function tO(e,t,r,{pure:n,areStatesEqual:s=XX,areOwnPropsEqual:o=Sm,areStatePropsEqual:a=Sm,areMergedPropsEqual:l=Sm,forwardRef:c=!1,context:u=qI}={}){const f=u,d=FX(e),h=LX(t),m=UX(r),g=!!e;return x=>{const b=x.displayName||x.name||"Component",y=`Connect(${b})`,w={shouldHandleStateChanges:g,displayName:y,wrappedComponentName:b,WrappedComponent:x,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:m,areStatesEqual:s,areStatePropsEqual:a,areOwnPropsEqual:o,areMergedPropsEqual:l};function j(N){const[E,C,k]=p.useMemo(()=>{const{reactReduxForwardedRef:ce}=N,_e=WI(N,WX);return[N.context,ce,_e]},[N]),I=p.useMemo(()=>E&&E.Consumer&&IX.isContextConsumer(p.createElement(E.Consumer,null))?E:f,[E,f]),O=p.useContext(I),M=!!N.store&&!!N.store.getState&&!!N.store.dispatch,D=!!O&&!!O.store,z=M?N.store:O.store,B=D?O.getServerState:z.getState,q=p.useMemo(()=>$X(z.dispatch,w),[z]),[A,R]=p.useMemo(()=>{if(!g)return GX;const ce=ZI(z,M?void 0:O.subscription),_e=ce.notifyNestedSubs.bind(ce);return[ce,_e]},[z,M,O]),$=p.useMemo(()=>M?O:je({},O,{subscription:A}),[M,O,A]),L=p.useRef(),W=p.useRef(k),V=p.useRef(),re=p.useRef(!1);p.useRef(!1);const ve=p.useRef(!1),se=p.useRef();uf(()=>(ve.current=!0,()=>{ve.current=!1}),[]);const Z=p.useMemo(()=>()=>V.current&&k===W.current?V.current:q(z.getState(),k),[z,k]),ue=p.useMemo(()=>_e=>A?JX(g,z,A,q,W,L,re,ve,V,R,_e):()=>{},[A]);KX(YX,[W,L,re,k,V,R]);let Y;try{Y=eO(ue,Z,B?()=>q(B(),k):Z)}catch(ce){throw se.current&&(ce.message+=`
The error may be correlated with this previous error:
${se.current.stack}

`),ce}uf(()=>{se.current=void 0,V.current=void 0,L.current=Y});const U=p.useMemo(()=>p.createElement(x,je({},Y,{ref:C})),[C,x,Y]);return p.useMemo(()=>g?p.createElement(I.Provider,{value:$},U):U,[I,U,$])}const S=p.memo(j);if(S.WrappedComponent=x,S.displayName=j.displayName=y,c){const E=p.forwardRef(function(k,I){return p.createElement(S,je({},k,{reactReduxForwardedRef:I}))});return E.displayName=y,E.WrappedComponent=x,J1(E,x)}return J1(S,x)}}function QX({store:e,context:t,children:r,serverState:n,stabilityCheck:s="once",noopCheck:o="once"}){const a=p.useMemo(()=>{const u=ZI(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:s,noopCheck:o}},[e,n,s,o]),l=p.useMemo(()=>e.getState(),[e]);uf(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,l]);const c=t||qI;return p.createElement(c.Provider,{value:a},r)}HX(UI.useSyncExternalStore);hX(br.unstable_batchedUpdates);function ZX(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function rO(e,t){var r=p.useState(function(){return{inputs:t,result:e()}})[0],n=p.useRef(!0),s=p.useRef(r),o=n.current||!!(t&&s.current.inputs&&ZX(t,s.current.inputs)),a=o?s.current:{inputs:t,result:e()};return p.useEffect(function(){n.current=!1,s.current=a},[a]),a.result}function eQ(e,t){return rO(function(){return e},t)}var Ae=rO,ye=eQ,tQ=!0,Nm="Invariant failed";function rQ(e,t){if(!e){if(tQ)throw new Error(Nm);var r=typeof t=="function"?t():t,n=r?"".concat(Nm,": ").concat(r):Nm;throw new Error(n)}}var Jr=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,a=n-o,l=s-r,c={top:r,right:n,bottom:s,left:o,width:a,height:l,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return c},H0=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},eS=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},nQ=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Em={top:0,right:0,bottom:0,left:0},G0=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?Em:n,o=t.border,a=o===void 0?Em:o,l=t.padding,c=l===void 0?Em:l,u=Jr(H0(r,s)),f=Jr(eS(r,a)),d=Jr(eS(f,c));return{marginBox:u,borderBox:Jr(r),paddingBox:f,contentBox:d,margin:s,border:a,padding:c}},Sr=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&rQ(!1),s},sQ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},df=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,a=t.padding,l=nQ(n,r);return G0({borderBox:l,border:s,margin:o,padding:a})},ff=function(t,r){return r===void 0&&(r=sQ()),df(t,r)},nO=function(t,r){var n={top:Sr(r.marginTop),right:Sr(r.marginRight),bottom:Sr(r.marginBottom),left:Sr(r.marginLeft)},s={top:Sr(r.paddingTop),right:Sr(r.paddingRight),bottom:Sr(r.paddingBottom),left:Sr(r.paddingLeft)},o={top:Sr(r.borderTopWidth),right:Sr(r.borderRightWidth),bottom:Sr(r.borderBottomWidth),left:Sr(r.borderLeftWidth)};return G0({borderBox:t,margin:n,padding:s,border:o})},sO=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return nO(r,n)},tS=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function oQ(e,t){return!!(e===t||tS(e)&&tS(t))}function iQ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!oQ(e[r],t[r]))return!1;return!0}function yt(e,t){t===void 0&&(t=iQ);var r=null;function n(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var a=e.apply(this,s);return r={lastResult:a,lastArgs:s,lastThis:this},a}return n.clear=function(){r=null},n}var aQ=function(t){var r=[],n=null,s=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const uc=aQ;function oO(e,t){}oO.bind(null,"warn");oO.bind(null,"error");function Ps(){}function lQ(e,t){return{...e,...t}}function kr(e,t,r){const n=t.map(s=>{const o=lQ(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const cQ="Invariant failed";class hf extends Error{}hf.prototype.toString=function(){return this.message};function ne(e,t){if(!e)throw new hf(cQ)}let uQ=class extends J.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Ps,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof hf&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=kr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof hf){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const dQ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,pf=e=>e+1,fQ=e=>`
  You have lifted an item in position ${pf(e.source.index)}
`,iO=(e,t)=>{const r=e.droppableId===t.droppableId,n=pf(e.index),s=pf(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},aO=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,hQ=e=>{const t=e.destination;if(t)return iO(e.source,t);const r=e.combine;return r?aO(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},rS=e=>`
  The item has returned to its starting position
  of ${pf(e.index)}
`,pQ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${rS(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${iO(e.source,t)}
    `:r?`
      You have dropped the item.
      ${aO(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${rS(e.source)}
  `},mQ={dragHandleUsageInstructions:dQ,onDragStart:fQ,onDragUpdate:hQ,onDragEnd:pQ};var cd=mQ;const bt={x:0,y:0},_t=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ur=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ts=(e,t)=>e.x===t.x&&e.y===t.y,Na=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ko=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},dc=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),nS=(e,t)=>Math.min(...t.map(r=>dc(e,r))),lO=e=>t=>({x:e(t.x),y:e(t.y)});var gQ=(e,t)=>{const r=Jr({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Hc=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),sS=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],vQ={top:0,right:0,bottom:0,left:0},xQ=(e,t)=>t?Hc(e,t.scroll.diff.displacement):e,yQ=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,bQ=(e,t)=>t&&t.shouldClipSubject?gQ(t.pageMarginBox,e):Jr(e);var oa=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=xQ(e.marginBox,n),o=yQ(s,r,t),a=bQ(o,n);return{page:e,withPlaceholder:t,active:a}},K0=(e,t)=>{e.frame||ne(!1);const r=e.frame,n=ur(t,r.scroll.initial),s=Na(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},a=oa({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:a}};const cO=yt(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),uO=yt(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Kh=yt(e=>Object.values(e)),wQ=yt(e=>Object.values(e));var Ea=yt((e,t)=>wQ(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function Y0(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Yh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Jh=yt((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),jQ=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!Y0(s))return null;function a(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return{...s,at:g}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=Jh(t,n);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const f=u.findIndex(m=>m.descriptor.id===c);f===-1&&ne(!1);const d=f-1;if(d<0)return null;const h=u[d];return a(h.descriptor.id)},Ca=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const dO={point:bt,value:0},fc={invisible:{},visible:{},all:[]},_Q={displaced:fc,displacedBy:dO,at:null};var SQ=_Q,Or=(e,t)=>r=>e<=r&&r<=t,fO=e=>{const t=Or(e.top,e.bottom),r=Or(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(o&&a)return!0;const c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return c&&u?!0:c&&a||u&&o}},NQ=e=>{const t=Or(e.top,e.bottom),r=Or(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const J0={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},hO={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var EQ=e=>t=>{const r=Or(t.top,t.bottom),n=Or(t.left,t.right);return s=>e===J0?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const CQ=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:bt;return Hc(e,r)},PQ=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,TQ=(e,t,r)=>r(t)(e),X0=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?CQ(e,t):e;return PQ(o,t,s)&&TQ(o,r,s)},kQ=e=>X0({...e,isVisibleThroughFrameFn:fO}),pO=e=>X0({...e,isVisibleThroughFrameFn:NQ}),AQ=e=>X0({...e,isVisibleThroughFrameFn:EQ(e.destination.axis)}),RQ=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function IQ(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Jr(H0(r,n))}function hc({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(l,c){const u=IQ(c,r),f=c.descriptor.id;if(l.all.push(f),!kQ({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const h=RQ(f,o,s),m={draggableId:f,shouldAnimate:h};return l.visible[f]=m,l},{all:[],visible:{},invisible:{}})}function OQ(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function oS({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=OQ(e,{inHomeList:t});return{displaced:fc,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function mf({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:a,forceShouldAnimate:l}){const c=Ca(e,r);if(a==null)return oS({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const u=t.find(g=>g.descriptor.index===a);if(!u)return oS({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const f=Jh(e,t),d=t.indexOf(u),h=f.slice(d);return{displaced:hc({afterDragging:h,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Ms(e,t){return!!t.effected[e]}var DQ=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,l=r[o].descriptor.index;return Ms(o,s)?e?l:l-1:e?l+1:l},$Q=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<a||o>c?null:o},MQ=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||ne(!1),u.type==="REORDER"){const d=$Q({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:o});return d==null?null:mf({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}const f=DQ({isMovingForward:e,destination:s,displaced:a.displaced,draggables:n,combine:u.combine,afterCritical:c});return f==null?null:mf({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:f})},LQ=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return Ms(r,t)?s?bt:Na(n.point):s?n.point:bt},FQ=({afterCritical:e,impact:t,draggables:r})=>{const n=Yh(t);n||ne(!1);const s=n.draggableId,o=r[s].page.borderBox.center,a=LQ({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return _t(o,a)};const mO=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,BQ=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Q0=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,iS=({axis:e,moveRelativeTo:t,isMoving:r})=>ko(e.line,t.marginBox[e.end]+mO(e,r),Q0(e,t.marginBox,r)),aS=({axis:e,moveRelativeTo:t,isMoving:r})=>ko(e.line,t.marginBox[e.start]-BQ(e,r),Q0(e,t.marginBox,r)),zQ=({axis:e,moveInto:t,isMoving:r})=>ko(e.line,t.contentBox[e.start]+mO(e,r),Q0(e,t.contentBox,r));var UQ=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=Ea(n.descriptor.id,r),a=t.page,l=n.axis;if(!o.length)return zQ({axis:l,moveInto:n.page,isMoving:a});const{displaced:c,displacedBy:u}=e,f=c.all[0];if(f){const h=r[f];if(Ms(f,s))return aS({axis:l,moveRelativeTo:h.page,isMoving:a});const m=df(h.page,u.point);return aS({axis:l,moveRelativeTo:m,isMoving:a})}const d=o[o.length-1];if(d.descriptor.id===t.descriptor.id)return a.borderBox.center;if(Ms(d.descriptor.id,s)){const h=df(d.page,Na(s.displacedBy.point));return iS({axis:l,moveRelativeTo:h,isMoving:a})}return iS({axis:l,moveRelativeTo:d.page,isMoving:a})},zv=(e,t)=>{const r=e.frame;return r?_t(t,r.scroll.diff.displacement):t};const VQ=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,a=e.at;return!r||!a?o:a.type==="REORDER"?UQ({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):FQ({impact:e,draggables:n,afterCritical:s})};var Xh=e=>{const t=VQ(e),r=e.droppable;return r?zv(r,t):t},gO=(e,t)=>{const r=ur(t,e.scroll.initial),n=Na(r);return{frame:Jr({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function lS(e,t){return e.map(r=>t[r])}function qQ(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var WQ=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=gO(t,_t(t.scroll.current,s)),a=r.frame?K0(r,_t(r.frame.scroll.current,s)):r,l=e.displaced,c=hc({afterDragging:lS(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=hc({afterDragging:lS(l.all,n),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),f={},d={},h=[l,c,u];return l.all.forEach(g=>{const v=qQ(g,h);if(v){d[g]=v;return}f[g]=!0}),{...e,displaced:{all:l.all,invisible:f,visible:d}}},HQ=(e,t)=>_t(e.scroll.diff.displacement,t),Z0=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=HQ(r,e),s=ur(n,t.page.borderBox.center);return _t(t.client.borderBox.center,s)},vO=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const a=ur(r,e.page.borderBox.center),c={target:Hc(e.page.borderBox,a),destination:t,withDroppableDisplacement:s,viewport:n};return o?AQ(c):pO(c)},GQ=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const u=Ea(r.descriptor.id,n),f=Ca(t,r),d=jQ({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||MQ({isMovingForward:e,isInHomeList:f,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!d)return null;const h=Xh({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:c});if(vO({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Z0({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:d,scrollJumpRequest:null};const g=ur(h,a),v=WQ({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:l,impact:v,scrollJumpRequest:g}};const Dt=e=>{const t=e.subject.active;return t||ne(!1),t};var KQ=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const a=r.axis,l=Or(o[a.start],o[a.end]),c=Kh(n).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>fO(s.frame)(Dt(f))).filter(f=>{const d=Dt(f);return e?o[a.crossAxisEnd]<d[a.crossAxisEnd]:d[a.crossAxisStart]<o[a.crossAxisStart]}).filter(f=>{const d=Dt(f),h=Or(d[a.start],d[a.end]);return l(d[a.start])||l(d[a.end])||h(o[a.start])||h(o[a.end])}).sort((f,d)=>{const h=Dt(f)[a.crossAxisStart],m=Dt(d)[a.crossAxisStart];return e?h-m:m-h}).filter((f,d,h)=>Dt(f)[a.crossAxisStart]===Dt(h[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(f=>Or(Dt(f)[a.start],Dt(f)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((f,d)=>Dt(f)[a.start]-Dt(d)[a.start])[0]:c.sort((f,d)=>{const h=nS(t,sS(Dt(f))),m=nS(t,sS(Dt(d)));return h!==m?h-m:Dt(f)[a.start]-Dt(d)[a.start]})[0]};const cS=(e,t)=>{const r=e.page.borderBox.center;return Ms(e.descriptor.id,t)?ur(r,t.displacedBy.point):r},YQ=(e,t)=>{const r=e.page.borderBox;return Ms(e.descriptor.id,t)?Hc(r,Na(t.displacedBy.point)):r};var JQ=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(a=>pO({target:YQ(a,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=dc(e,zv(r,cS(a,s))),u=dc(e,zv(r,cS(l,s)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Gc=yt(function(t,r){const n=r[t.line];return{value:n,point:ko(t.line,n)}});const XQ=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return ko(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],c=Ea(e.descriptor.id,r).reduce((u,f)=>u+f.client.marginBox[n.size],0)+t[n.line]-s;return c<=0?null:ko(n.line,c)},xO=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),yO=(e,t,r)=>{const n=e.frame;Ca(t,e)&&ne(!1),e.subject.withPlaceholder&&ne(!1);const s=Gc(e.axis,t.displaceBy).point,o=XQ(e,s,r),a={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const f=oa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:f}}const l=o?_t(n.scroll.max,o):n.scroll.max,c=xO(n,l),u=oa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},QQ=e=>{const t=e.subject.withPlaceholder;t||ne(!1);const r=e.frame;if(!r){const a=oa({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const n=t.oldFrameMaxScroll;n||ne(!1);const s=xO(r,n),o=oa({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var ZQ=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:a,afterCritical:l})=>{if(!t){if(r.length)return null;const d={displaced:fc,displacedBy:dO,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=Xh({impact:d,draggable:n,droppable:o,draggables:s,afterCritical:l}),m=Ca(n,o)?o:yO(o,n,s);return vO({draggable:n,destination:m,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],u=(()=>{const d=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?d:d+1})(),f=Gc(o.axis,n.displaceBy);return mf({draggable:n,insideDestination:r,destination:o,viewport:a,displacedBy:f,last:fc,index:u})},eZ=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:a,afterCritical:l})=>{const c=KQ({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:a});if(!c)return null;const u=Ea(c.descriptor.id,s),f=JQ({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),d=ZQ({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:s,moveRelativeTo:f,insideDestination:u,viewport:a,afterCritical:l});if(!d)return null;const h=Xh({impact:d,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:Z0({pageBorderBoxCenter:h,draggable:r,viewport:a}),impact:d,scrollJumpRequest:null}},hr=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const tZ=(e,t)=>{const r=hr(e);return r?t[r]:null};var rZ=({state:e,type:t})=>{const r=tZ(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,a=o.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:d,droppables:h}=e.dimensions;return l?GQ({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,destination:o,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):eZ({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,isOver:o,draggables:d,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function to(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function bO(e){const t=Or(e.top,e.bottom),r=Or(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function nZ(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function sZ({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const a=o.axis,l=ko(o.axis.line,e.center[a.line],o.page.borderBox.center[a.crossAxisLine]);return{id:o.descriptor.id,distance:dc(n,l)}}).sort((o,a)=>a.distance-o.distance);return s[0]?s[0].id:null}function oZ({pageBorderBox:e,draggable:t,droppables:r}){const n=Kh(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!nZ(e,o))return!1;if(bO(o)(e.center))return!0;const a=s.axis,l=o.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],f=Or(o[a.crossAxisStart],o[a.crossAxisEnd]),d=f(c),h=f(u);return!d&&!h?!0:d?c<l:u>l});return n.length?n.length===1?n[0].descriptor.id:sZ({pageBorderBox:e,draggable:t,candidates:n}):null}const wO=(e,t)=>Jr(Hc(e,t));var iZ=(e,t)=>{const r=e.frame;return r?wO(t,r.scroll.diff.value):t};function jO({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function aZ({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var lZ=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:a})=>{const l=r.axis,c=Gc(r.axis,t.displaceBy),u=c.value,f=e[l.start],d=e[l.end],m=Jh(t,n).find(v=>{const x=v.descriptor.id,b=v.page.borderBox.center[l.line],y=Ms(x,a),w=jO({displaced:s,id:x});return y?w?d<=b:f<b-u:w?d<=b+u:f<b})||null,g=aZ({draggable:t,closest:m,inHomeList:Ca(t,r)});return mf({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:c,index:g})};const cZ=4;var uZ=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const a=n.axis,l=Gc(n.axis,e.displaceBy),c=l.value,u=t[a.start],f=t[a.end],h=Jh(e,s).find(g=>{const v=g.descriptor.id,x=g.page.borderBox,y=x[a.size]/cZ,w=Ms(v,o),j=jO({displaced:r.displaced,id:v});return w?j?f>x[a.start]+y&&f<x[a.end]-y:u>x[a.start]-c+y&&u<x[a.end]-c-y:j?f>x[a.start]+c+y&&f<x[a.end]+c-y:u>x[a.start]+y&&u<x[a.end]-y});return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},_O=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:a})=>{const l=wO(t.page.borderBox,e),c=oZ({pageBorderBox:l,draggable:t,droppables:n});if(!c)return SQ;const u=n[c],f=Ea(u.descriptor.id,r),d=iZ(u,l);return uZ({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:s,destination:u,insideDestination:f,afterCritical:a})||lZ({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:u,insideDestination:f,last:s.displaced,viewport:o,afterCritical:a})},eb=(e,t)=>({...e,[t.descriptor.id]:t});const dZ=({previousImpact:e,impact:t,droppables:r})=>{const n=hr(e),s=hr(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const a=QQ(o);return eb(r,a)};var fZ=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=dZ({previousImpact:n,impact:s,droppables:r}),a=hr(s);if(!a)return o;const l=r[a];if(Ca(e,l)||l.subject.withPlaceholder)return o;const c=yO(l,e,t);return eb(o,c)},Cl=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const a=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,u=ur(c,e.initial.client.selection),f={offset:u,selection:c,borderBoxCenter:_t(e.initial.client.borderBoxCenter,u)},d={selection:_t(f.selection,a.scroll.current),borderBoxCenter:_t(f.borderBoxCenter,a.scroll.current),offset:_t(f.offset,a.scroll.diff.value)},h={client:f,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:h};const m=l.draggables[e.critical.draggable.id],g=s||_O({pageOffset:d.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),v=fZ({draggable:m,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:h,dimensions:{draggables:l.draggables,droppables:v},impact:g,viewport:a,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function hZ(e,t){return e.map(r=>t[r])}var SO=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,a=hZ(o.all,r),l=hc({afterDragging:a,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:l}},NO=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const a=Xh({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return Z0({pageBorderBoxCenter:a,draggable:t,viewport:s})},EO=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&ne(!1);const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:a,droppables:l}=o,c=a[e.critical.draggable.id],u=hr(n);u||ne(!1);const f=l[u],d=SO({impact:n,viewport:s,destination:f,draggables:a}),h=NO({impact:d,draggable:c,droppable:f,draggables:a,viewport:s,afterCritical:e.afterCritical});return Cl({impact:d,clientSelection:h,state:e,dimensions:o,viewport:s})},pZ=e=>({index:e.index,droppableId:e.droppableId}),CO=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=Gc(t.axis,e.displaceBy),o=Ea(t.descriptor.id,r),a=o.indexOf(e);a===-1&&ne(!1);const l=o.slice(a+1),c=l.reduce((h,m)=>(h[m.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:hc({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:pZ(e.descriptor)}},afterCritical:u}},mZ=(e,t)=>({draggables:e.draggables,droppables:eb(e.droppables,t)}),gZ=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=df(e.client,t),s=ff(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},vZ=e=>{const t=e.frame;return t||ne(!1),t},xZ=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,a=t[o],c=vZ(a).scroll.diff.value,u=_t(n,c);return gZ({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},yZ=({state:e,published:t})=>{const r=t.modified.map(b=>{const y=e.dimensions.droppables[b.droppableId];return K0(y,b.scroll)}),n={...e.dimensions.droppables,...cO(r)},s=uO(xZ({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(b=>{delete o[b]});const a={droppables:n,draggables:o},l=hr(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],f=a.droppables[e.critical.droppable.id],{impact:d,afterCritical:h}=CO({draggable:u,home:f,draggables:o,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:d,g=_O({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:h}),v={...e,phase:"DRAGGING",impact:g,onLiftImpact:d,dimensions:a,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Uv=e=>e.movementMode==="SNAP",Cm=(e,t,r)=>{const n=mZ(e.dimensions,t);return!Uv(e)||r?Cl({state:e,dimensions:n}):EO({state:e,dimensions:n})};function Pm(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const uS={phase:"IDLE",completed:null,shouldFlush:!1};var bZ=(e=uS,t)=>{if(t.type==="FLUSH")return{...uS,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ne(!1);const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:a}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:n,borderBoxCenter:l.client.borderBox.center,offset:bt},f={client:u,page:{selection:_t(u.selection,s.scroll.initial),borderBoxCenter:_t(u.selection,s.scroll.initial),offset:_t(u.selection,s.scroll.diff.value)}},d=Kh(o.droppables).every(v=>!v.isFixedOnPage),{impact:h,afterCritical:m}=CO({draggable:l,home:c,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:o,initial:f,current:f,isWindowScrollAllowed:d,impact:h,afterCritical:m,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ne(!1),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ne(!1),yZ({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;to(e)||ne(!1);const{client:r}=t.payload;return Ts(r,e.current.client.selection)?e:Cl({state:e,clientSelection:r,impact:Uv(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Pm(e);to(e)||ne(!1);const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=K0(s,n);return Cm(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;to(e)||ne(!1);const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||ne(!1),s.isEnabled===n&&ne(!1);const o={...s,isEnabled:n};return Cm(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;to(e)||ne(!1);const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||ne(!1),s.isCombineEnabled===n&&ne(!1);const o={...s,isCombineEnabled:n};return Cm(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;to(e)||ne(!1),e.isWindowScrollAllowed||ne(!1);const r=t.payload.newScroll;if(Ts(e.viewport.scroll.current,r))return Pm(e);const n=gO(e.viewport,r);return Uv(e)?EO({state:e,viewport:n}):Cl({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!to(e))return e;const r=t.payload.maxScroll;if(Ts(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ne(!1);const r=rZ({state:e,type:t.type});return r?Cl({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&ne(!1),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ne(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};const wZ=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),jZ=e=>({type:"LIFT",payload:e}),_Z=e=>({type:"INITIAL_PUBLISH",payload:e}),SZ=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),NZ=()=>({type:"COLLECTION_STARTING",payload:null}),EZ=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),CZ=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),PZ=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),PO=e=>({type:"MOVE",payload:e}),TZ=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),kZ=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),AZ=()=>({type:"MOVE_UP",payload:null}),RZ=()=>({type:"MOVE_DOWN",payload:null}),IZ=()=>({type:"MOVE_RIGHT",payload:null}),OZ=()=>({type:"MOVE_LEFT",payload:null}),tb=()=>({type:"FLUSH",payload:null}),DZ=e=>({type:"DROP_ANIMATE",payload:e}),rb=e=>({type:"DROP_COMPLETE",payload:e}),TO=e=>({type:"DROP",payload:e}),$Z=e=>({type:"DROP_PENDING",payload:e}),kO=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var MZ=e=>({getState:t,dispatch:r})=>n=>s=>{if(s.type!=="LIFT"){n(s);return}const{id:o,clientSelection:a,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&r(rb({completed:c.completed})),t().phase!=="IDLE"&&ne(!1),r(tb()),r(wZ({draggableId:o,movementMode:l}));const f={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:d,dimensions:h,viewport:m}=e.startPublishing(f);r(_Z({critical:d,dimensions:h,clientSelection:a,movementMode:l,viewport:m}))},LZ=e=>()=>t=>r=>{r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)};const nb={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},pc={opacity:{drop:0,combining:.7},scale:{drop:.75}},AO={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ks=`${AO.outOfTheWay}s ${nb.outOfTheWay}`,Pl={fluid:`opacity ${Ks}`,snap:`transform ${Ks}, opacity ${Ks}`,drop:e=>{const t=`${e}s ${nb.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ks}`,placeholder:`height ${Ks}, width ${Ks}, margin ${Ks}`},dS=e=>Ts(e,bt)?void 0:`translate(${e.x}px, ${e.y}px)`,Vv={moveTo:dS,drop:(e,t)=>{const r=dS(e);if(r)return t?`${r} scale(${pc.scale.drop})`:r}},{minDropTime:qv,maxDropTime:RO}=AO,FZ=RO-qv,fS=1500,BZ=.6;var zZ=({current:e,destination:t,reason:r})=>{const n=dc(e,t);if(n<=0)return qv;if(n>=fS)return RO;const s=n/fS,o=qv+FZ*s,a=r==="CANCEL"?o*BZ:o;return Number(a.toFixed(2))},UZ=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:a}=r,l=hr(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],f=NO({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:c||u,viewport:n});return ur(f,t.client.borderBox.center)},VZ=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:SO({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:fc},didDropInsideDroppable:!0};const qZ=({getState:e,dispatch:t})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t($Z({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&ne(!1),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||ne(!1);const l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:f,didDropInsideDroppable:d}=VZ({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=d?Y0(f):null,m=d?Yh(f):null,g={index:l.draggable.index,droppableId:l.droppable.id},v={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:s.movementMode,destination:h,combine:m},x=UZ({impact:f,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),b={critical:s.critical,afterCritical:s.afterCritical,result:v,impact:f};if(!(!Ts(s.current.client.offset,x)||!!v.combine)){t(rb({completed:b}));return}const w=zZ({current:s.current.client.offset,destination:x,reason:o});t(DZ({newHomeClientOffset:x,dropDuration:w,completed:b}))};var WZ=qZ,IO=()=>({x:window.pageXOffset,y:window.pageYOffset});function HZ(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function GZ({onWindowScroll:e}){function t(){e(IO())}const r=uc(t),n=HZ(r);let s=Ps;function o(){return s!==Ps}function a(){o()&&ne(!1),s=kr(window,[n])}function l(){o()||ne(!1),r.cancel(),s(),s=Ps}return{start:a,stop:l,isActive:o}}const KZ=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",YZ=e=>{const t=GZ({onWindowScroll:r=>{e.dispatch(TZ({newScroll:r}))}});return r=>n=>{!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&KZ(n)&&t.stop(),r(n)}};var JZ=YZ,XZ=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},QZ=()=>{const e=[],t=s=>{const o=e.findIndex(l=>l.timerId===s);o===-1&&ne(!1);const[a]=e.splice(o,1);a.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),a={timerId:o,callback:s};e.push(a)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const ZZ=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,eee=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,tee=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},Ga=(e,t)=>{t()},Bu=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Tm(e,t,r,n){if(!e){r(n(t));return}const s=XZ(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var ree=(e,t)=>{const r=QZ();let n=null;const s=(d,h)=>{n&&ne(!1),Ga("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:d,mode:h})})},o=(d,h)=>{n&&ne(!1),Ga("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Bu(d,h))})},a=(d,h)=>{n&&ne(!1);const m=Bu(d,h);n={mode:h,lastCritical:d,lastLocation:m.source,lastCombine:null},r.add(()=>{Ga("onDragStart",()=>Tm(e().onDragStart,m,t,cd.onDragStart))})},l=(d,h)=>{const m=Y0(h),g=Yh(h);n||ne(!1);const v=!tee(d,n.lastCritical);v&&(n.lastCritical=d);const x=!ZZ(n.lastLocation,m);x&&(n.lastLocation=m);const b=!eee(n.lastCombine,g);if(b&&(n.lastCombine=g),!v&&!x&&!b)return;const y={...Bu(d,n.mode),combine:g,destination:m};r.add(()=>{Ga("onDragUpdate",()=>Tm(e().onDragUpdate,y,t,cd.onDragUpdate))})},c=()=>{n||ne(!1),r.flush()},u=d=>{n||ne(!1),n=null,Ga("onDragEnd",()=>Tm(e().onDragEnd,d,t,cd.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:a,update:l,flush:c,drop:u,abort:()=>{if(!n)return;const d={...Bu(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(d)}}},nee=(e,t)=>{const r=ree(e,t);return n=>s=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),s(o),r.start(l,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),o.type==="FLUSH"){r.abort();return}const a=n.getState();a.phase==="DRAGGING"&&r.update(a.critical,a.impact)}};const see=e=>t=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&ne(!1),e.dispatch(rb({completed:n.completed}))};var oee=see;const iee=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),s(o),o.type!=="DROP_ANIMATE")return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(kO())}};r=requestAnimationFrame(()=>{r=null,t=kr(window,[a])})}};var aee=iee,lee=e=>()=>t=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)},cee=e=>{let t=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const uee=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var dee=e=>t=>r=>n=>{if(uee(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const s=t.getState();s.phase!=="DRAGGING"&&ne(!1),e.start(s);return}r(n),e.scroll(t.getState())};const fee=e=>t=>r=>{if(t(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(TO({reason:n.reason})))};var hee=fee;const pee=FI;var mee=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>LI(bZ,pee(GJ(LZ(r),lee(e),MZ(e),WZ,oee,aee,hee,dee(o),JZ,cee(t),nee(n,s))));const km=()=>({additions:{},removals:{},modified:{}});function gee({registry:e,callbacks:t}){let r=km(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:u,modified:f}=r,d=Object.keys(c).map(g=>e.draggable.getById(g).getDimension(bt)).sort((g,v)=>g.descriptor.index-v.descriptor.index),h=Object.keys(f).map(g=>{const x=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:x}}),m={additions:d,removals:Object.keys(u),modified:h};r=km(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;r.additions[u]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:c=>{const u=c.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=km())}}}var OO=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=ur({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},DO=()=>{const e=document.documentElement;return e||ne(!1),e},$O=()=>{const e=DO();return OO({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},vee=()=>{const e=IO(),t=$O(),r=e.y,n=e.x,s=DO(),o=s.clientWidth,a=s.clientHeight,l=n+o,c=r+a;return{frame:Jr({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:bt,displacement:bt}}}},xee=({critical:e,scrollOptions:t,registry:r})=>{const n=vee(),s=n.scroll.current,o=e.droppable,a=r.droppable.getAllByType(o.type).map(f=>f.callbacks.getDimensionAndWatchScroll(s,t)),l=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(s));return{dimensions:{draggables:uO(l),droppables:cO(a)},critical:e,viewport:n}};function hS(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var yee=(e,t)=>{let r=null;const n=gee({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,m)=>{e.droppable.exists(h)||ne(!1),r&&t.updateDroppableIsEnabled({id:h,isEnabled:m})},o=(h,m)=>{r&&(e.droppable.exists(h)||ne(!1),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:m}))},a=(h,m)=>{r&&(e.droppable.exists(h)||ne(!1),t.updateDroppableScroll({id:h,newScroll:m}))},l=(h,m)=>{r&&e.droppable.getById(h).callbacks.scroll(m)},c=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(m=>m.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||ne(!1);const m=r.critical.draggable;h.type==="ADDITION"&&hS(e,m,h.value)&&n.add(h.value),h.type==="REMOVAL"&&hS(e,m,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:a,startPublishing:h=>{r&&ne(!1);const m=e.draggable.getById(h.draggableId),g=e.droppable.getById(m.descriptor.droppableId),v={draggable:m.descriptor,droppable:g.descriptor},x=e.subscribe(u);return r={critical:v,unsubscribe:x},xee({critical:v,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:c}},MO=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",bee=e=>{window.scrollBy(e.x,e.y)};const wee=yt(e=>Kh(e).filter(t=>!(!t.isEnabled||!t.frame))),jee=(e,t)=>wee(t).find(n=>(n.frame||ne(!1),bO(n.frame.pageMarginBox)(e)))||null;var _ee=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return jee(e,r)};const mc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var See=(e,t,r=()=>mc)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},LO=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},sb=1,Nee=(e,t,r=()=>mc)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return sb;const o=1-LO({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=n.maxPixelScroll*n.ease(o);return Math.ceil(a)},Eee=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,a=t,l=o,u=Date.now()-a;if(u>=o)return e;if(u<s)return sb;const f=LO({startOfRange:s,endOfRange:l,current:u}),d=e*n.ease(f);return Math.ceil(d)},pS=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=Nee(e,t,s);return o===0?0:n?Math.max(Eee(o,r,s),sb):o},mS=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=See(e,n,o);return t[n.end]<t[n.start]?pS({distanceToEdge:t[n.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*pS({distanceToEdge:t[n.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},Cee=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const Pee=lO(e=>e===0?0:e);var FO=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=mS({container:t,distanceToEdges:a,dragStartTime:e,axis:J0,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),c=mS({container:t,distanceToEdges:a,dragStartTime:e,axis:hO,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),u=Pee({x:c,y:l});if(Ts(u,bt))return null;const f=Cee({container:t,subject:r,proposedScroll:u});return f?Ts(f,bt)?null:f:null};const Tee=lO(e=>e===0?0:e>0?1:-1),ob=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=_t(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return Ts(o,bt)?null:o}})(),BO=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=Tee(r),o=ob({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},ib=(e,t)=>BO({current:e.scroll.current,max:e.scroll.max,change:t}),kee=(e,t)=>{if(!ib(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return ob({current:n,max:r,change:t})},ab=(e,t)=>{const r=e.frame;return r?BO({current:r.scroll.current,max:r.scroll.max,change:t}):!1},Aee=(e,t)=>{const r=e.frame;return!r||!ab(e,t)?null:ob({current:r.scroll.current,max:r.scroll.max,change:t})};var Ree=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=FO({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return a&&ib(e,a)?a:null},Iee=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const a=e.frame;if(!a)return null;const l=FO({dragStartTime:n,container:a.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&ab(e,l)?l:null},gS=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,h=Ree({dragStartTime:t,viewport:d,subject:c,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const u=_ee({center:a,destination:hr(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=Iee({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:o});f&&s(u.descriptor.id,f)},Oee=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>mc})=>{const n=uc(e),s=uc(t);let o=null;const a=u=>{o||ne(!1);const{shouldUseTimeDampening:f,dragStartTime:d}=o;gS({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:u=>{o&&ne(!1);const f=Date.now();let d=!1;const h=()=>{d=!0};gS({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:f,shouldUseTimeDampening:d},d&&a(u)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:a}},Dee=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const u=_t(l.current.client.selection,c);e({client:u})},s=(l,c)=>{if(!ab(l,c))return c;const u=Aee(l,c);if(!u)return t(l.descriptor.id,c),null;const f=ur(c,u);return t(l.descriptor.id,f),ur(c,f)},o=(l,c,u)=>{if(!l||!ib(c,u))return u;const f=kee(c,u);if(!f)return r(u),null;const d=ur(u,f);return r(d),ur(u,d)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=hr(l.impact);u||ne(!1);const f=s(l.dimensions.droppables[u],c);if(!f)return;const d=l.viewport,h=o(l.isWindowScrollAllowed,d,f);h&&n(l,h)}},$ee=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=Oee({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=Dee({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:s.start,stop:s.stop}};const ia="data-rfd",aa=(()=>{const e=`${ia}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Wv=(()=>{const e=`${ia}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Mee=(()=>{const e=`${ia}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),vS={contextId:`${ia}-scroll-container-context-id`},Lee=e=>t=>`[${t}="${e}"]`,Ka=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),Fee="pointer-events: none;";var Bee=e=>{const t=Lee(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(aa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Fee,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${Pl.outOfTheWay};
    `;return{selector:t(Wv.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(Mee.contextId),styles:{always:"overflow-anchor: none;"}},a=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ka(a,"always"),resting:Ka(a,"resting"),dragging:Ka(a,"dragging"),dropAnimating:Ka(a,"dropAnimating"),userCancel:Ka(a,"userCancel")}};const zee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?p.useLayoutEffect:p.useEffect;var pr=zee;const Am=()=>{const e=document.querySelector("head");return e||ne(!1),e},xS=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Uee(e,t){const r=Ae(()=>Bee(e),[e]),n=p.useRef(null),s=p.useRef(null),o=ye(yt(d=>{const h=s.current;h||ne(!1),h.textContent=d}),[]),a=ye(d=>{const h=n.current;h||ne(!1),h.textContent=d},[]);pr(()=>{!n.current&&!s.current||ne(!1);const d=xS(t),h=xS(t);return n.current=d,s.current=h,d.setAttribute(`${ia}-always`,e),h.setAttribute(`${ia}-dynamic`,e),Am().appendChild(d),Am().appendChild(h),a(r.always),o(r.resting),()=>{const m=g=>{const v=g.current;v||ne(!1),Am().removeChild(v),g.current=null};m(n),m(s)}},[t,a,o,r.always,r.resting,e]);const l=ye(()=>o(r.dragging),[o,r.dragging]),c=ye(d=>{if(d==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),u=ye(()=>{s.current&&o(r.resting)},[o,r.resting]);return Ae(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function zO(e,t){return Array.from(e.querySelectorAll(t))}var UO=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Qh(e){return e instanceof UO(e).HTMLElement}function Vee(e,t){const r=`[${aa.contextId}="${e}"]`,n=zO(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute(aa.draggableId)===t);return!s||!Qh(s)?null:s}function qee(e){const t=p.useRef({}),r=p.useRef(null),n=p.useRef(null),s=p.useRef(!1),o=ye(function(h,m){const g={id:h,focus:m};return t.current[h]=g,function(){const x=t.current;x[h]!==g&&delete x[h]}},[]),a=ye(function(h){const m=Vee(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=ye(function(h,m){r.current===h&&(r.current=m)},[]),c=ye(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&a(h)}))},[a]),u=ye(function(h){r.current=null;const m=document.activeElement;m&&m.getAttribute(aa.draggableId)===h&&(r.current=h)},[]);return pr(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),Ae(()=>({register:o,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,u,c,l])}function Wee(){const e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){const m=t.indexOf(d);m!==-1&&t.splice(m,1)}}function n(d){t.length&&t.forEach(h=>h(d))}function s(d){return e.draggables[d]||null}function o(d){const h=s(d);return h||ne(!1),h}const a={register:d=>{e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,h)=>{const m=e.draggables[h.descriptor.id];m&&m.uniqueId===d.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,m=s(h);m&&d.uniqueId===m.uniqueId&&(delete e.draggables[h],e.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:o,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(e.draggables).filter(h=>h.descriptor.type===d)};function l(d){return e.droppables[d]||null}function c(d){const h=l(d);return h||ne(!1),h}const u={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const h=l(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:l,exists:d=>!!l(d),getAllByType:d=>Object.values(e.droppables).filter(h=>h.descriptor.type===d)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:r,clean:f}}function Hee(){const e=Ae(Wee,[]);return p.useEffect(()=>function(){J.version.startsWith("16")||J.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var lb=J.createContext(null),gf=()=>{const e=document.body;return e||ne(!1),e};const Gee={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Kee=Gee;const Yee=e=>`rfd-announcement-${e}`;function Jee(e){const t=Ae(()=>Yee(e),[e]),r=p.useRef(null);return p.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),je(o.style,Kee),gf().appendChild(o),function(){setTimeout(function(){const c=gf();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),ye(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}let Xee=0;const VO={separator:"::"};function Qee(e,t=VO){return Ae(()=>`${e}${t.separator}${Xee++}`,[t.separator,e])}function Zee(e,t=VO){const r=J.useId();return Ae(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var cb="useId"in J?Zee:Qee;function ete({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function tte({contextId:e,text:t}){const r=cb("hidden-text",{separator:"-"}),n=Ae(()=>ete({contextId:e,uniqueId:r}),[r,e]);return p.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",gf().appendChild(o),function(){const l=gf();l.contains(o)&&l.removeChild(o)}},[n,t]),n}var Zh=J.createContext(null);function qO(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),t}function rte(){let e=null;function t(){return!!e}function r(a){return a===e}function n(a){e&&ne(!1);const l={abandon:a};return e=l,l}function s(){e||ne(!1),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function gc(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const nte=9,ste=13,ub=27,WO=32,ote=33,ite=34,ate=35,lte=36,cte=37,ute=38,dte=39,fte=40,hte={[ste]:!0,[nte]:!0};var HO=e=>{hte[e.keyCode]&&e.preventDefault()};const pte=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})();var ep=pte;const GO=0,yS=5;function mte(e,t){return Math.abs(t.x-e.x)>=yS||Math.abs(t.y-e.y)>=yS}const bS={type:"IDLE"};function gte({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:a,clientY:l}=s;if(o!==GO)return;const c={x:a,y:l},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&ne(!1);const f=u.point;if(!mte(f,c))return;s.preventDefault();const d=u.actions.fluidLift(c);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===ub){s.preventDefault(),e();return}HO(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&ne(!1),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:ep,fn:e}]}function vte(e){const t=p.useRef(bS),r=p.useRef(Ps),n=Ae(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==GO||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=e.findClosestDraggableId(d);if(!h)return;const m=e.tryGetLock(h,a,{sourceEvent:d});if(!m)return;d.preventDefault();const g={x:d.clientX,y:d.clientY};r.current(),u(m,g)}}),[e]),s=Ae(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const d=e.findClosestDraggableId(f);if(!d)return;const h=e.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||e.canGetLock(d)&&f.preventDefault())}}),[e]),o=ye(function(){const d={passive:!1,capture:!0};r.current=kr(window,[s,n],d)},[s,n]),a=ye(()=>{t.current.type!=="IDLE"&&(t.current=bS,r.current(),o())},[o]),l=ye(()=>{const f=t.current;a(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[a]),c=ye(function(){const d={capture:!0,passive:!1},h=gte({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});r.current=kr(window,h,d)},[l,a]),u=ye(function(d,h){t.current.type!=="IDLE"&&ne(!1),t.current={type:"PENDING",point:h,actions:d},c()},[c]);pr(function(){return o(),function(){r.current()}},[o])}function xte(){}const yte={[ite]:!0,[ote]:!0,[lte]:!0,[ate]:!0};function bte(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===ub){s.preventDefault(),r();return}if(s.keyCode===WO){s.preventDefault(),n();return}if(s.keyCode===fte){s.preventDefault(),e.moveDown();return}if(s.keyCode===ute){s.preventDefault(),e.moveUp();return}if(s.keyCode===dte){s.preventDefault(),e.moveRight();return}if(s.keyCode===cte){s.preventDefault(),e.moveLeft();return}if(yte[s.keyCode]){s.preventDefault();return}HO(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ep,fn:r}]}function wte(e){const t=p.useRef(xte),r=Ae(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==WO)return;const a=e.findClosestDraggableId(o);if(!a)return;const l=e.tryGetLock(a,f,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const u=l.snapLift();t.current();function f(){c||ne(!1),c=!1,t.current(),n()}t.current=kr(window,bte(u,f),{capture:!0,passive:!1})}}),[e]),n=ye(function(){const o={passive:!1,capture:!0};t.current=kr(window,[r],o)},[r]);pr(function(){return n(),function(){t.current()}},[n])}const Rm={type:"IDLE"},jte=120,_te=.15;function Ste({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===ub&&r.preventDefault(),e()}},{eventName:ep,fn:e}]}function Nte({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:a}=n.touches[0],l={x:o,y:a};n.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&ne(!1);const o=n.touches[0];if(!o||!(o.force>=_te))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:ep,fn:e}]}function Ete(e){const t=p.useRef(Rm),r=p.useRef(Ps),n=ye(function(){return t.current},[]),s=ye(function(m){t.current=m},[]),o=Ae(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const v=e.tryGetLock(g,l,{sourceEvent:m});if(!v)return;const x=m.touches[0],{clientX:b,clientY:y}=x,w={x:b,y};r.current(),d(v,w)}}),[e]),a=ye(function(){const m={capture:!0,passive:!1};r.current=kr(window,[o],m)},[o]),l=ye(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(Rm),r.current(),a())},[a,s]),c=ye(()=>{const h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=ye(function(){const m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},v=kr(window,Nte(g),m),x=kr(window,Ste(g),m);r.current=function(){v(),x()}},[c,n,l]),f=ye(function(){const m=n();m.type!=="PENDING"&&ne(!1);const g=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),d=ye(function(m,g){n().type!=="IDLE"&&ne(!1);const v=setTimeout(f,jte);s({type:"PENDING",point:g,actions:m,longPressTimerId:v}),u()},[u,n,s,f]);pr(function(){return a(),function(){r.current();const g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(Rm))}},[n,a,s]),pr(function(){return kr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Cte=["input","button","textarea","select","option","optgroup","video","audio"];function KO(e,t){if(t==null)return!1;if(Cte.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:KO(e,t.parentElement)}function Pte(e,t){const r=t.target;return Qh(r)?KO(e,r):!1}var Tte=e=>Jr(e.getBoundingClientRect()).center;function kte(e){return e instanceof UO(e).Element}const Ate=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function YO(e,t){return e==null?null:e[Ate](t)?e:YO(e.parentElement,t)}function Rte(e,t){return e.closest?e.closest(t):YO(e,t)}function Ite(e){return`[${aa.contextId}="${e}"]`}function Ote(e,t){const r=t.target;if(!kte(r))return null;const n=Ite(e),s=Rte(r,n);return!s||!Qh(s)?null:s}function Dte(e,t){const r=Ote(e,t);return r?r.getAttribute(aa.draggableId):null}function $te(e,t){const r=`[${Wv.contextId}="${e}"]`,s=zO(document,r).find(o=>o.getAttribute(Wv.id)===t);return!s||!Qh(s)?null:s}function Mte(e){e.preventDefault()}function zu({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function JO({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!MO(t.getState(),n))}function Lte({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:a}){if(!JO({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const c=n.draggable.getById(s),u=$te(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&Pte(u,a))return null;const f=e.claim(o||Ps);let d="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function m(){return e.isActive(f)}function g(_,S){zu({expected:_,phase:d,isLockActive:m,shouldWarn:!0})&&r.dispatch(S())}const v=g.bind(null,"DRAGGING");function x(_){function S(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(S(),ne(!1)),r.dispatch(jZ(_.liftActionArgs)),d="DRAGGING";function N(E,C={shouldBlockNextClick:!1}){if(_.cleanup(),C.shouldBlockNextClick){const k=kr(window,[{eventName:"click",fn:Mte,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(k)}S(),r.dispatch(TO({reason:E}))}return{isActive:()=>zu({expected:"DRAGGING",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:h,drop:E=>N("DROP",E),cancel:E=>N("CANCEL",E),..._.actions}}function b(_){const S=uc(E=>{v(()=>PO({client:E}))});return{...x({liftActionArgs:{id:s,clientSelection:_,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function y(){const _={moveUp:()=>v(AZ),moveRight:()=>v(IZ),moveDown:()=>v(RZ),moveLeft:()=>v(OZ)};return x({liftActionArgs:{id:s,clientSelection:Tte(u),movementMode:"SNAP"},cleanup:Ps,actions:_})}function w(){zu({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>zu({expected:"PRE_DRAG",phase:d,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:y,abort:w}}const Fte=[vte,wte,Ete];function Bte({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?Fte:[],...n||[]],a=p.useState(()=>rte())[0],l=ye(function(x,b){gc(x)&&!gc(b)&&a.tryAbandon()},[a]);pr(function(){let x=t.getState();return t.subscribe(()=>{const y=t.getState();l(x,y),x=y})},[a,t,l]),pr(()=>a.tryAbandon,[a.tryAbandon]);const c=ye(v=>JO({lockAPI:a,registry:r,store:t,draggableId:v}),[a,r,t]),u=ye((v,x,b)=>Lte({lockAPI:a,registry:r,contextId:e,store:t,draggableId:v,forceSensorStop:x||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,a,r,t]),f=ye(v=>Dte(e,v),[e]),d=ye(v=>{const x=r.draggable.findById(v);return x?x.options:null},[r.draggable]),h=ye(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(tb()))},[a,t]),m=ye(()=>a.isClaimed(),[a]),g=Ae(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:m}),[c,u,f,d,h,m]);for(let v=0;v<o.length;v++)o[v](g)}const zte=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};J.version.startsWith("16")||J.version.startsWith("17")?r():br.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Ute=e=>({...mc,...e.autoScrollerOptions,durationDampening:{...mc.durationDampening,...e.autoScrollerOptions}});function Ya(e){return e.current||ne(!1),e.current}function Vte(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,a=p.useRef(null),l=qO(e),c=ye(()=>zte(l.current),[l]),u=ye(()=>Ute(l.current),[l]),f=Jee(t),d=tte({contextId:t,text:o}),h=Uee(t,s),m=ye(k=>{Ya(a).dispatch(k)},[]),g=Ae(()=>q1({publishWhileDragging:SZ,updateDroppableScroll:EZ,updateDroppableIsEnabled:CZ,updateDroppableIsCombineEnabled:PZ,collectionStarting:NZ},m),[m]),v=Hee(),x=Ae(()=>yee(v,g),[v,g]),b=Ae(()=>$ee({scrollWindow:bee,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:u,...q1({move:PO},m)}),[x.scrollDroppable,m,u]),y=qee(t),w=Ae(()=>mee({announce:f,autoScroller:b,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:h}),[f,b,x,y,c,h]);a.current=w;const j=ye(()=>{const k=Ya(a);k.getState().phase!=="IDLE"&&k.dispatch(tb())},[]),_=ye(()=>{const k=Ya(a).getState();return k.phase==="DROP_ANIMATING"?!0:k.phase==="IDLE"?!1:k.isDragging},[]),S=Ae(()=>({isDragging:_,tryAbort:j}),[_,j]);r(S);const N=ye(k=>MO(Ya(a).getState(),k),[]),E=ye(()=>to(Ya(a).getState()),[]),C=Ae(()=>({marshal:x,focus:y,contextId:t,canLift:N,isMovementAllowed:E,dragHandleUsageInstructionsId:d,registry:v}),[t,x,d,y,N,E,v]);return Bte({contextId:t,store:w,registry:v,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),p.useEffect(()=>j,[j]),J.createElement(Zh.Provider,{value:C},J.createElement(QX,{context:lb,store:w},e.children))}let qte=0;function Wte(){return Ae(()=>`${qte++}`,[])}function Hte(){return J.useId()}var Gte="useId"in J?Hte:Wte;function Kte(e){const t=Gte(),r=e.dragHandleUsageInstructions||cd.dragHandleUsageInstructions;return J.createElement(uQ,null,n=>J.createElement(Vte,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const wS={dragging:5e3,dropAnimating:4500},Yte=(e,t)=>t?Pl.drop(t.duration):e?Pl.snap:Pl.fluid,Jte=(e,t)=>{if(e)return t?pc.opacity.drop:pc.opacity.combining},Xte=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Qte(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,a=!!s,l=Xte(e),c=!!o,u=c?Vv.drop(n,a):Vv.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Yte(l,o),transform:u,opacity:Jte(a,c),zIndex:c?wS.dropAnimating:wS.dragging,pointerEvents:"none"}}function Zte(e){return{transform:Vv.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function ere(e){return e.type==="DRAGGING"?Qte(e):Zte(e)}function tre(e,t,r=bt){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=nO(s,n),a=ff(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:a}}function rre(e){const t=cb("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}=e,c=Ae(()=>({canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}),[o,l,a]),u=ye(m=>{const g=s();return g||ne(!1),tre(r,g,m)},[r,s]),f=Ae(()=>({uniqueId:t,descriptor:r,options:c,getDimension:u}),[r,u,c,t]),d=p.useRef(f),h=p.useRef(!0);pr(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),pr(()=>{if(h.current){h.current=!1;return}const m=d.current;d.current=f,n.draggable.update(f,m)},[f,n.draggable])}var db=J.createContext(null);function vf(e){const t=p.useContext(e);return t||ne(!1),t}function nre(e){e.preventDefault()}const sre=e=>{const t=p.useRef(null),r=ye((S=null)=>{t.current=S},[]),n=ye(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:a}=vf(Zh),{type:l,droppableId:c}=vf(db),u=Ae(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:f,draggableId:d,isEnabled:h,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:v,mapped:x,dropAnimationFinished:b}=e;if(!v){const S=Ae(()=>({descriptor:u,registry:a,getDraggableRef:n,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:h}),[u,a,n,g,m,h]);rre(S)}const y=Ae(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:nre}:null,[s,o,d,h]),w=ye(S=>{x.type==="DRAGGING"&&x.dropping&&S.propertyName==="transform"&&(J.version.startsWith("16")||J.version.startsWith("17")?b():br.flushSync(b))},[b,x]),j=Ae(()=>{const S=ere(x),N=x.type==="DRAGGING"&&x.dropping?w:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:S,onTransitionEnd:N},dragHandleProps:y}},[s,y,d,x,w,r]),_=Ae(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return J.createElement(J.Fragment,null,f(j,x.snapshot,_))};var ore=sre,XO=(e,t)=>e===t,QO=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const ire=e=>e.combine?e.combine.draggableId:null,are=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function lre(){const e=yt((s,o)=>({x:s,y:o})),t=yt((s,o,a=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:a,combineWith:l,combineTargetFor:null})),r=yt((s,o,a,l,c=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:o,offset:s,dimension:a,forceShouldAnimate:f,snapshot:t(o,l,c,u,null)}}));return(s,o)=>{if(gc(s)){if(s.critical.draggable.id!==o.draggableId)return null;const a=s.current.client.offset,l=s.dimensions.draggables[o.draggableId],c=hr(s.impact),u=are(s.impact),f=s.forceShouldAnimate;return r(e(a.x,a.y),s.movementMode,l,o.isClone,c,u,f)}if(s.phase==="DROP_ANIMATING"){const a=s.completed;if(a.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=s.dimensions.draggables[o.draggableId],u=a.result,f=u.mode,d=QO(u),h=ire(u),g={duration:s.dropDuration,curve:nb.drop,moveTo:s.newHomeClientOffset,opacity:h?pc.opacity.drop:null,scale:h?pc.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:g,draggingOver:d,combineWith:h,mode:f,forceShouldAnimate:null,snapshot:t(f,l,d,h,g)}}}return null}}function ZO(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const cre={mapped:{type:"SECONDARY",offset:bt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ZO(null)}};function ure(){const e=yt((a,l)=>({x:a,y:l})),t=yt(ZO),r=yt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=a=>a?r(bt,a,!0):null,s=(a,l,c,u)=>{const f=c.displaced.visible[a],d=!!(u.inVirtualList&&u.effected[a]),h=Yh(c),m=h&&h.draggableId===a?l:null;if(!f){if(!d)return n(m);if(c.displaced.invisible[a])return null;const x=Na(u.displacedBy.point),b=e(x.x,x.y);return r(b,m,!0)}if(d)return n(m);const g=c.displacedBy.point,v=e(g.x,g.y);return r(v,m,f.shouldAnimate)};return(a,l)=>{if(gc(a))return a.critical.draggable.id===l.draggableId?null:s(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const dre=()=>{const e=lre(),t=ure();return(n,s)=>e(n,s)||t(n,s)||cre},fre={dropAnimationFinished:kO},hre=tO(dre,fre,null,{context:lb,areStatePropsEqual:XO})(ore);var pre=hre;function eD(e){return vf(db).isUsingCloneFor===e.draggableId&&!e.isClone?null:J.createElement(pre,e)}function mre(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return J.createElement(eD,je({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const tD=e=>t=>e===t,gre=tD("scroll"),vre=tD("auto"),jS=(e,t)=>t(e.overflowX)||t(e.overflowY),xre=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return jS(r,gre)||jS(r,vre)},yre=()=>!1,rD=e=>e==null?null:e===document.body?yre()?e:null:e===document.documentElement?null:xre(e)?e:rD(e.parentElement);var Hv=e=>({x:e.scrollLeft,y:e.scrollTop});const nD=e=>e?window.getComputedStyle(e).position==="fixed"?!0:nD(e.parentElement):!1;var bre=e=>{const t=rD(e),r=nD(e);return{closestScrollable:t,isFixedOnPage:r}},wre=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:h,client:m}=l,g=OO({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:bt,displacement:bt}}}})(),u=s==="vertical"?J0:hO,f=oa({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:o,page:a,frame:c,subject:f}};const jre=(e,t)=>{const r=sO(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,a=s+t.scrollWidth,c=H0({top:n,right:a,bottom:o,left:s},r.border);return G0({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var _re=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:a,shouldClipSubject:l})=>{const c=r.closestScrollable,u=jre(e,c),f=ff(u,n),d=(()=>{if(!c)return null;const m=sO(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:ff(m,n),scroll:Hv(c),scrollSize:g,shouldClipSubject:l}})();return wre({descriptor:t,isEnabled:!o,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:f,closest:d})};const Sre={passive:!1},Nre={passive:!0};var _S=e=>e.shouldPublishImmediately?Sre:Nre;const Uu=e=>e&&e.env.closestScrollable||null;function Ere(e){const t=p.useRef(null),r=vf(Zh),n=cb("droppable"),{registry:s,marshal:o}=r,a=qO(e),l=Ae(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=p.useRef(l),u=Ae(()=>yt((j,_)=>{t.current||ne(!1);const S={x:j,y:_};o.updateDroppableScroll(l.id,S)}),[l.id,o]),f=ye(()=>{const j=t.current;return!j||!j.env.closestScrollable?bt:Hv(j.env.closestScrollable)},[]),d=ye(()=>{const j=f();u(j.x,j.y)},[f,u]),h=Ae(()=>uc(d),[d]),m=ye(()=>{const j=t.current,_=Uu(j);if(j&&_||ne(!1),j.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),g=ye((j,_)=>{t.current&&ne(!1);const S=a.current,N=S.getDroppableRef();N||ne(!1);const E=bre(N),C={ref:N,descriptor:l,env:E,scrollOptions:_};t.current=C;const k=_re({ref:N,descriptor:l,env:E,windowScroll:j,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),I=E.closestScrollable;return I&&(I.setAttribute(vS.contextId,r.contextId),I.addEventListener("scroll",m,_S(C.scrollOptions))),k},[r.contextId,l,m,a]),v=ye(()=>{const j=t.current,_=Uu(j);return j&&_||ne(!1),Hv(_)},[]),x=ye(()=>{const j=t.current;j||ne(!1);const _=Uu(j);t.current=null,_&&(h.cancel(),_.removeAttribute(vS.contextId),_.removeEventListener("scroll",m,_S(j.scrollOptions)))},[m,h]),b=ye(j=>{const _=t.current;_||ne(!1);const S=Uu(_);S||ne(!1),S.scrollTop+=j.y,S.scrollLeft+=j.x},[]),y=Ae(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:x,scroll:b}),[x,g,v,b]),w=Ae(()=>({uniqueId:n,descriptor:l,callbacks:y}),[y,l,n]);pr(()=>(c.current=w.descriptor,s.droppable.register(w),()=>{t.current&&x(),s.droppable.unregister(w)}),[y,l,x,w,o,s.droppable]),pr(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),pr(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Im(){}const SS={width:0,height:0,margin:vQ},Cre=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?SS:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Pre=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=Cre({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Pl.placeholder:null}},Tre=e=>{const t=p.useRef(null),r=ye(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:a}=e,[l,c]=p.useState(e.animate==="open");p.useEffect(()=>l?n!=="open"?(r(),c(!1),Im):t.current?Im:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):Im,[n,l,r]);const u=ye(d=>{d.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),f=Pre({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return J.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var kre=J.memo(Tre);class Are extends J.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Rre=e=>{const t=p.useContext(Zh);t||ne(!1);const{contextId:r,isMovementAllowed:n}=t,s=p.useRef(null),o=p.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:f,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:m,snapshot:g,useClone:v,updateViewportMaxScroll:x,getContainerForClone:b}=e,y=ye(()=>s.current,[]),w=ye((I=null)=>{s.current=I},[]);ye(()=>o.current,[]);const j=ye((I=null)=>{o.current=I},[]),_=ye(()=>{n()&&x({maxScroll:$O()})},[n,x]);Ere({droppableId:l,type:c,mode:u,direction:f,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:d,getDroppableRef:y});const S=Ae(()=>J.createElement(Are,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:I,data:O,animate:M})=>J.createElement(kre,{placeholder:O,onClose:I,innerRef:j,animate:M,contextId:r,onTransitionEnd:_})),[r,_,e.placeholder,e.shouldAnimatePlaceholder,j]),N=Ae(()=>({innerRef:w,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,S,w]),E=v?v.dragging.draggableId:null,C=Ae(()=>({droppableId:l,type:c,isUsingCloneFor:E}),[l,E,c]);function k(){if(!v)return null;const{dragging:I,render:O}=v,M=J.createElement(eD,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(D,z)=>O(D,z,I));return Of.createPortal(M,b())}return J.createElement(db.Provider,{value:C},a(N,g),k())};var Ire=Rre;function Ore(){return document.body||ne(!1),document.body}const NS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Ore},sD=e=>{let t={...e},r;for(r in NS)e[r]===void 0&&(t={...t,[r]:NS[r]});return t},Om=(e,t)=>e===t.droppable.type,ES=(e,t)=>t.draggables[e.draggable.id],Dre=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=yt(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=yt((o,a,l,c,u,f)=>{const d=u.descriptor.id;if(u.descriptor.droppableId===o){const g=f?{render:f,dragging:r(u.descriptor)}:null,v={isDraggingOver:l,draggingOverWith:l?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:g}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(o,a)=>{const l=sD(a),c=l.droppableId,u=l.type,f=!l.isDropDisabled,d=l.renderClone;if(gc(o)){const h=o.critical;if(!Om(u,h))return t;const m=ES(h,o.dimensions),g=hr(o.impact)===c;return n(c,f,g,g,m,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!Om(u,h.critical))return t;const m=ES(h.critical,o.dimensions);return n(c,f,QO(h.result)===c,hr(h.impact)===c,m,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!Om(u,h.critical))return t;const m=hr(h.impact)===c,g=!!(h.impact.at&&h.impact.at.type==="COMBINE"),v=h.critical.droppable.id===c;return m?g?e:t:v?e:t}return t}},$re={updateViewportMaxScroll:kZ},Mre=tO(Dre,$re,(e,t,r)=>({...sD(r),...e,...t}),{context:lb,areStatePropsEqual:XO})(Ire);var Lre=Mre;const Fre=["","","","","","","","","","","","","","","","","","","","","","",""],Dm=({value:e,onChange:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pe,{value:e,onChange:r=>t(r.target.value),className:"w-16 text-center text-xl"}),i.jsxs($I,{children:[i.jsx(MI,{asChild:!0,children:i.jsx(H,{type:"button",variant:"outline",size:"sm",className:"h-10 w-10 p-0",title:"Choisir un emoji",children:i.jsx(Rs,{className:"h-4 w-4"})})}),i.jsx(M0,{className:"w-72 p-3",align:"start",children:i.jsx("div",{className:"flex flex-wrap gap-1 max-h-96 overflow-y-auto",children:Fre.map(r=>i.jsx("button",{type:"button",onClick:()=>t(r),className:"w-10 h-10 flex items-center justify-center text-xl hover:bg-gray-100 rounded-md transition-colors",children:r},r))})})]})]}),Bre=[{value:"bg-blue-100 text-blue-800",label:"Bleu",preview:"bg-blue-100"},{value:"bg-green-100 text-green-800",label:"Vert",preview:"bg-green-100"},{value:"bg-yellow-100 text-yellow-800",label:"Jaune",preview:"bg-yellow-100"},{value:"bg-red-100 text-red-800",label:"Rouge",preview:"bg-red-100"},{value:"bg-purple-100 text-purple-800",label:"Violet",preview:"bg-purple-100"},{value:"bg-pink-100 text-pink-800",label:"Rose",preview:"bg-pink-100"},{value:"bg-indigo-100 text-indigo-800",label:"Indigo",preview:"bg-indigo-100"},{value:"bg-orange-100 text-orange-800",label:"Orange",preview:"bg-orange-100"},{value:"bg-teal-100 text-teal-800",label:"Turquoise",preview:"bg-teal-100"},{value:"bg-gray-100 text-gray-800",label:"Gris",preview:"bg-gray-100"}],oD=({project:e,onSave:t,onCancel:r,globalPipelineSteps:n=[],isSaving:s=!1})=>{var _;const{organizationReady:o}=on(),a=()=>{var E;const S=e?JSON.parse(JSON.stringify(e)):{type:"",title:"",clientTitle:"",icon:"",color:"gradient-blue",steps:[],isPublic:!0},N=((E=n&&n[0])==null?void 0:E.id)??null;return S.steps=Array.isArray(S.steps)?S.steps.map(C=>({...C,id:C.id||`step-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,globalStepId:C.globalStepId??N})):[],S},[l,c]=p.useState(null),[u,f]=p.useState(""),[d,h]=p.useState(""),m=p.useMemo(()=>!n||!Array.isArray(n)?[]:n.map(S=>i.jsx(Pe,{value:S.id,children:S.label},S.id)),[n]);p.useEffect(()=>{!o||!n||!Array.isArray(n)||(c(a()),f(""),h(""))},[e,n,o]),p.useEffect(()=>{!o||!n||n.length===0||l!=null&&l.steps&&c(S=>{var I;const N=new Set(n.map(O=>O.id)),E=((I=n[0])==null?void 0:I.id)??null;let C=!1;const k=(S.steps||[]).map(O=>{const D=O.globalStepId&&N.has(O.globalStepId)?O.globalStepId:E??null;return D!==O.globalStepId?(C=!0,{...O,globalStepId:D}):O});return C?{...S,steps:k}:S})},[n,o,(_=l==null?void 0:l.steps)==null?void 0:_.length]);const g=p.useCallback((S,N,E)=>{c(C=>{const k=[...C.steps];return k[S]={...k[S],[N]:E},{...C,steps:k}})},[]),v=p.useCallback(()=>{var E;if(!u.trim())return;const S=((E=n[0])==null?void 0:E.id)??null,N={id:`step-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:u,status:"pending",icon:d,descriptions:{},globalStepId:S};c(C=>({...C,steps:[...C.steps,N]})),f(""),h("")},[u,d,n]),x=p.useCallback(S=>{c(N=>({...N,steps:N.steps.filter((E,C)=>C!==S)}))},[]),b=S=>{if(!S.destination)return;const N=Array.from(l.steps),[E]=N.splice(S.source.index,1);N.splice(S.destination.index,0,E),c(C=>({...C,steps:N}))},y=()=>{typeof document<"u"&&(document.body.style.overflow="hidden")},w=S=>{typeof document<"u"&&(document.body.style.overflow=""),b(S)},j=()=>{const S=e&&e.type,N={...l,type:S?l.type:v6(l.title)||`project-${Date.now()}`,id:l.id||Date.now()};if(!N.title){F({title:"Titre manquant",description:"Veuillez donner un titre  votre projet.",variant:"destructive"});return}N.clientTitle||(N.clientTitle=N.title),t(N)};return l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Paramtres du Projet"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Nh,{id:"isPublic",checked:l.isPublic,onCheckedChange:S=>c(N=>({...N,isPublic:S}))}),i.jsx(Q,{htmlFor:"isPublic",children:"En ligne"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-title",children:"Titre du Projet (Interne)"}),i.jsx(pe,{id:"project-title",value:l.title,onChange:S=>c(N=>({...N,title:S.target.value}))})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-client-title",children:"Nom affich au client"}),i.jsx(pe,{id:"project-client-title",value:l.clientTitle,onChange:S=>c(N=>({...N,clientTitle:S.target.value}))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-icon",children:"Icne (Emoji)"}),i.jsx(Dm,{value:l.icon,onChange:S=>c(N=>({...N,icon:S}))})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-color",children:"Couleur du Badge"}),i.jsxs(Yt,{value:l.color||"bg-blue-100 text-blue-800",onValueChange:S=>c(N=>({...N,color:S})),children:[i.jsx(Bt,{id:"project-color",children:i.jsx(Jt,{placeholder:"Choisir une couleur"})}),i.jsx(zt,{children:Bre.map(S=>i.jsx(Pe,{value:S.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`w-4 h-4 rounded-full ${S.preview} border border-gray-300`}),S.label]})},S.value))})]})]})]}),i.jsx("h3",{className:"text-md font-semibold text-gray-700 pt-4 border-t",children:"tapes de la Timeline"}),i.jsx(Kte,{onDragStart:y,onDragEnd:w,children:i.jsx(Lre,{droppableId:"steps",children:S=>i.jsxs("div",{...S.droppableProps,ref:S.innerRef,className:"space-y-3",children:[l.steps.map((N,E)=>i.jsx(mre,{draggableId:N.id,index:E,children:(C,k)=>{const I=k.isDragging?{...C.draggableProps.style,position:"relative",left:"auto",top:"auto"}:C.draggableProps.style;return i.jsx("div",{ref:C.innerRef,...C.draggableProps,style:I,className:`rounded-xl border border-gray-200 bg-white p-3 shadow-sm transition-all ${k.isDragging?"ring-2 ring-purple-200 shadow-lg":""}`,children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 md:flex-1",children:[i.jsx("div",{...C.dragHandleProps,className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:i.jsx(j3,{className:"h-5 w-5"})}),i.jsx(Dm,{value:N.icon,onChange:O=>g(E,"icon",O)}),i.jsx(pe,{value:N.name,onChange:O=>g(E,"name",O.target.value),placeholder:"Nom de l'tape",className:"flex-1"})]}),i.jsxs("div",{className:"flex items-center gap-2 md:w-72",children:[i.jsxs(Yt,{value:N.globalStepId??"",onValueChange:O=>g(E,"globalStepId",O||null),children:[i.jsx(Bt,{className:"bg-white",children:i.jsx(Jt,{placeholder:"Associer  une tape globale"})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"",children:"Non assigne"}),m]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x(E),children:i.jsx(Mn,{className:"h-4 w-4 text-red-500"})})]})]})})}},N.id)),S.placeholder]})})}),i.jsxs("div",{className:"flex items-end gap-2 pt-4 border-t",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{children:"Ajouter une tape"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Dm,{value:d,onChange:h}),i.jsx(pe,{value:u,onChange:S=>f(S.target.value),placeholder:"Nom de la nouvelle tape",className:"flex-1"})]})]}),i.jsx(H,{onClick:v,children:i.jsx(Rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:r,disabled:s,children:"Annuler"}),i.jsx(H,{onClick:j,className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le projet"})]})]}):i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})},zre=({open:e,onOpenChange:t,onSave:r,globalPipelineSteps:n=[],isSaving:s=!1})=>{const{projectsData:o={}}=Ve(),[a,l]=p.useState(1),[c,u]=p.useState(null),f=g=>{const v=o==null?void 0:o[g];if(!v){F({title:"Modle introuvable",description:"Le modle de projet n'existe plus.",variant:"destructive"});return}const x={...JSON.parse(JSON.stringify(v)),title:`${v.title} (Copie)`,clientTitle:`${v.clientTitle} (Copie)`,type:`${v.type}-copie-${Date.now()}`,isPublic:!0};u(x),l(2)},d=()=>{var v;const g=((v=n[0])==null?void 0:v.id)??null;u({type:"",title:"",clientTitle:"",icon:"",color:"gradient-blue",steps:[{name:"Nouvelle tape",status:"pending",icon:"",descriptions:{},globalStepId:g}],isPublic:!0}),l(2)},h=g=>{r(g),l(1),u(null),t(!1)},m=()=>{l(1),u(null),t(!1)};return i.jsx(vh,{open:e,onOpenChange:g=>{g?t(!0):m()},children:i.jsxs(zc,{className:"sm:max-w-2xl",children:[i.jsxs(Uc,{children:[i.jsx(Vc,{children:a===1?"Crer un nouveau projet":"Modifier le projet"}),i.jsx(xh,{children:a===1?"Choisissez un modle de base ou partez de zro.":"Personnalisez le titre, l'icne et les tapes de votre nouveau projet."})]}),a===1&&i.jsxs("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[Object.values(o).map(g=>i.jsxs(ae.button,{onClick:()=>f(g.type),className:"p-4 border rounded-lg hover:shadow-lg hover:border-blue-500 transition-all text-center space-y-2",whileHover:{y:-5},children:[i.jsx("span",{className:"text-4xl",children:g.icon}),i.jsx("p",{className:"font-semibold",children:g.title})]},g.type)),i.jsxs(ae.button,{onClick:d,className:"p-4 border border-dashed rounded-lg hover:shadow-lg hover:border-green-500 transition-all text-center space-y-2 flex flex-col items-center justify-center",whileHover:{y:-5},children:[i.jsx(Rr,{className:"h-10 w-10 text-gray-400 mb-2"}),i.jsx("p",{className:"font-semibold",children:"Partir de zro"})]})]}),a===2&&c&&i.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:i.jsx(oD,{project:c,onSave:h,onCancel:m,globalPipelineSteps:n,isSaving:s})})]})})},Ure=()=>{const{projectsData:e={},setProjectsData:t,deleteProjectTemplate:r,globalPipelineSteps:n=[]}=Ve(),[s,o]=p.useState(!1),[a,l]=p.useState(null),[c,u]=p.useState(!1),f=async g=>{l(null),u(!0);const v={...e||{},[g.type]:g};t(v).then(()=>{F({title:"Projet enregistr !",description:`Le projet "${g.title}" a t sauvegard.`,className:"bg-green-500 text-white"})}).catch(x=>{F({title:"Erreur !",description:"Impossible de sauvegarder le projet. Rechargez la page.",variant:"destructive"})}).finally(()=>{u(!1)})},d=g=>{const v=e==null?void 0:e[g];if(v!=null&&v.isPublic){F({title:"Impossible de supprimer",description:"Dsactivez ce projet avant de le supprimer.",variant:"destructive"});return}h(g)},h=async g=>{try{const v=e==null?void 0:e[g];if(!v||!v.id)throw new Error("Template introuvable ou ID manquant");await r(v.id),F({title:"Projet supprim !",description:`Le projet "${v.title}" a t supprim de la base de donnes.`,className:"bg-green-500 text-white"})}catch(v){P.error("Erreur suppression projet",{error:v.message}),F({title:"Erreur !",description:v.message||"Impossible de supprimer le projet.",variant:"destructive"})}},m=g=>{l(g)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"projets"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Gestion des Projets"}),i.jsxs(H,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 w-full",children:[i.jsx(Rr,{className:"mr-2 h-4 w-4"})," Crer un projet"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:Object.values(e||{}).length>0?Object.values(e||{}).map(g=>i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(a==null?void 0:a.type)===g.type?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>m(g),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:g.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:g.title}),i.jsx("p",{className:"text-xs text-gray-500",children:g.isPublic?" En ligne":" Hors ligne"})]})]}),i.jsxs(qc,{children:[i.jsx(yh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:v=>v.stopPropagation(),children:i.jsx(Mn,{className:"h-4 w-4"})})}),i.jsxs(va,{children:[i.jsxs(xa,{children:[i.jsxs(ba,{children:['Supprimer "',g.title,'" ?']}),i.jsx(wa,{children:"Cette action est irrversible et supprimera ce modle de projet."})]}),i.jsxs(ya,{children:[i.jsx(_a,{children:"Annuler"}),i.jsx(ja,{onClick:()=>d(g.type),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},g.type)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(tv,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun projet cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:a?`Modifier "${a.title}"`:"Slectionnez un projet"}),i.jsx("p",{className:"text-sm text-gray-500",children:a?"Personnalisez les paramtres de votre projet et grez ses tapes.":"Cliquez sur un projet dans la liste pour le modifier."})]}),a?i.jsx(oD,{project:a,onSave:f,onCancel:()=>l(null),globalPipelineSteps:n,isSaving:c}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(tv,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un projet  modifier"}),i.jsx("p",{className:"text-sm mt-2",children:"ou crez-en un nouveau"})]})]})})]}),i.jsx(zre,{open:s,onOpenChange:o,onSave:f,globalPipelineSteps:n,isSaving:c})]})};var CS=1,Vre=.9,qre=.8,Wre=.17,$m=.1,Mm=.999,Hre=.9999,Gre=.99,Kre=/[\\\/_+.#"@\[\(\{&]/,Yre=/[\\\/_+.#"@\[\(\{&]/g,Jre=/[\s-]/,iD=/[\s-]/g;function Gv(e,t,r,n,s,o,a){if(o===t.length)return s===e.length?CS:Gre;var l=`${s},${o}`;if(a[l]!==void 0)return a[l];for(var c=n.charAt(o),u=r.indexOf(c,s),f=0,d,h,m,g;u>=0;)d=Gv(e,t,r,n,u+1,o+1,a),d>f&&(u===s?d*=CS:Kre.test(e.charAt(u-1))?(d*=qre,m=e.slice(s,u-1).match(Yre),m&&s>0&&(d*=Math.pow(Mm,m.length))):Jre.test(e.charAt(u-1))?(d*=Vre,g=e.slice(s,u-1).match(iD),g&&s>0&&(d*=Math.pow(Mm,g.length))):(d*=Wre,s>0&&(d*=Math.pow(Mm,u-s))),e.charAt(u)!==t.charAt(o)&&(d*=Hre)),(d<$m&&r.charAt(u-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(u-1)!==n.charAt(o))&&(h=Gv(e,t,r,n,u+1,o+2,a),h*$m>d&&(d=h*$m)),d>f&&(f=d),u=r.indexOf(c,u+1);return a[l]=f,f}function PS(e){return e.toLowerCase().replace(iD," ")}function Xre(e,t){return Gv(e,t,PS(e),PS(t),0,0,{})}function Vi(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Qre(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function aD(...e){return t=>e.forEach(r=>Qre(r,t))}function Kc(...e){return p.useCallback(aD(...e),e)}function Zre(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[e][c])||l,x=p.useMemo(()=>g,Object.values(g));return p.createElement(v.Provider,{value:x},m)}function f(d,h){const m=(h==null?void 0:h[e][c])||l,g=p.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,ene(s,...t)]}function ene(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}const Kv=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},tne=yc["useId".toString()]||(()=>{});let rne=0;function Lm(e){const[t,r]=p.useState(tne());return Kv(()=>{e||r(n=>n??String(rne++))},[e]),e||(t?`radix-${t}`:"")}function Ao(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function nne({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=sne({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=Ao(r),c=p.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[a,c]}function sne({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,s=p.useRef(n),o=Ao(t);return p.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}const fb=p.forwardRef((e,t)=>{const{children:r,...n}=e,s=p.Children.toArray(r),o=s.find(ine);if(o){const a=o.props.children,l=s.map(c=>c===o?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return p.createElement(Yv,je({},n,{ref:t}),p.isValidElement(a)?p.cloneElement(a,void 0,l):null)}return p.createElement(Yv,je({},n,{ref:t}),r)});fb.displayName="Slot";const Yv=p.forwardRef((e,t)=>{const{children:r,...n}=e;return p.isValidElement(r)?p.cloneElement(r,{...ane(n,r.props),ref:aD(t,r.ref)}):p.Children.count(r)>1?p.Children.only(null):null});Yv.displayName="SlotClone";const one=({children:e})=>p.createElement(p.Fragment,null,e);function ine(e){return p.isValidElement(e)&&e.type===one}function ane(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?r[n]=(...l)=>{o==null||o(...l),s==null||s(...l)}:n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}const lne=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],tp=lne.reduce((e,t)=>{const r=p.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?fb:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,je({},a,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function cne(e,t){e&&br.flushSync(()=>e.dispatchEvent(t))}function une(e){const t=Ao(e);p.useEffect(()=>{const r=n=>{n.key==="Escape"&&t(n)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t])}const Jv="dismissableLayer.update",dne="dismissableLayer.pointerDownOutside",fne="dismissableLayer.focusOutside";let TS;const hne=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pne=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(hne),[f,d]=p.useState(null),[,h]=p.useState({}),m=Kc(t,S=>d(S)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),b=f?g.indexOf(f):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=x,j=mne(S=>{const N=S.target,E=[...u.branches].some(C=>C.contains(N));!w||E||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())}),_=gne(S=>{const N=S.target;[...u.branches].some(C=>C.contains(N))||(o==null||o(S),a==null||a(S),S.defaultPrevented||l==null||l())});return une(S=>{b===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))}),p.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(TS=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),kS(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=TS)}},[f,r,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),kS())},[f,u]),p.useEffect(()=>{const S=()=>h({});return document.addEventListener(Jv,S),()=>document.removeEventListener(Jv,S)},[]),p.createElement(tp.div,je({},c,{ref:m,style:{pointerEvents:y?w?"auto":"none":void 0,...e.style},onFocusCapture:Vi(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Vi(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Vi(e.onPointerDownCapture,j.onPointerDownCapture)}))});function mne(e){const t=Ao(e),r=p.useRef(!1),n=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){lD(dne,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(document.removeEventListener("click",n.current),n.current=c,document.addEventListener("click",n.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{document.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),document.removeEventListener("pointerdown",s),document.removeEventListener("click",n.current)}},[t]),{onPointerDownCapture:()=>r.current=!0}}function gne(e){const t=Ao(e),r=p.useRef(!1);return p.useEffect(()=>{const n=s=>{s.target&&!r.current&&lD(fne,t,{originalEvent:s},{discrete:!1})};return document.addEventListener("focusin",n),()=>document.removeEventListener("focusin",n)},[t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function kS(){const e=new CustomEvent(Jv);document.dispatchEvent(e)}function lD(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?cne(s,o):s.dispatchEvent(o)}const Fm="focusScope.autoFocusOnMount",Bm="focusScope.autoFocusOnUnmount",AS={bubbles:!1,cancelable:!0},vne=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=Ao(s),f=Ao(o),d=p.useRef(null),h=Kc(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(b){if(m.paused||!l)return;const y=b.target;l.contains(y)?d.current=y:ro(d.current,{select:!0})},x=function(b){m.paused||!l||l.contains(b.relatedTarget)||ro(d.current,{select:!0})};return document.addEventListener("focusin",v),document.addEventListener("focusout",x),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x)}}},[n,l,m.paused]),p.useEffect(()=>{if(l){IS.add(m);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Fm,AS);l.addEventListener(Fm,u),l.dispatchEvent(b),b.defaultPrevented||(xne(_ne(cD(l)),{select:!0}),document.activeElement===v&&ro(l))}return()=>{l.removeEventListener(Fm,u),setTimeout(()=>{const b=new CustomEvent(Bm,AS);l.addEventListener(Bm,f),l.dispatchEvent(b),b.defaultPrevented||ro(v??document.body,{select:!0}),l.removeEventListener(Bm,f),IS.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!r&&!n||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(x&&b){const y=v.currentTarget,[w,j]=yne(y);w&&j?!v.shiftKey&&b===j?(v.preventDefault(),r&&ro(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&ro(j,{select:!0})):b===y&&v.preventDefault()}},[r,n,m.paused]);return p.createElement(tp.div,je({tabIndex:-1},a,{ref:h,onKeyDown:g}))});function xne(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ro(n,{select:t}),document.activeElement!==r)return}function yne(e){const t=cD(e),r=RS(t,e),n=RS(t.reverse(),e);return[r,n]}function cD(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function RS(e,t){for(const r of e)if(!bne(r,{upTo:t}))return r}function bne(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wne(e){return e instanceof HTMLInputElement&&"select"in e}function ro(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&wne(e)&&t&&e.select()}}const IS=jne();function jne(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=OS(e,t),e.unshift(t)},remove(t){var r;e=OS(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function OS(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function _ne(e){return e.filter(t=>t.tagName!=="A")}const Sne=p.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?Of.createPortal(p.createElement(tp.div,je({},s,{ref:t})),n):null});function Nne(e,t){return p.useReducer((r,n)=>{const s=t[r][n];return s??r},e)}const rp=e=>{const{present:t,children:r}=e,n=Ene(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=Kc(n.ref,s.ref);return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};rp.displayName="Presence";function Ene(e){const[t,r]=p.useState(),n=p.useRef({}),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=Nne(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Vu(n.current);o.current=l==="mounted"?u:"none"},[l]),Kv(()=>{const u=n.current,f=s.current;if(f!==e){const h=o.current,m=Vu(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Kv(()=>{if(t){const u=d=>{const m=Vu(n.current).includes(d.animationName);d.target===t&&m&&br.flushSync(()=>c("ANIMATION_END"))},f=d=>{d.target===t&&(o.current=Vu(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Vu(e){return(e==null?void 0:e.animationName)||"none"}let zm=0;function Cne(){p.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:DS()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:DS()),zm++,()=>{zm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),zm--}},[])}function DS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var uD=Qy(),Um=function(){},np=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Um,onWheelCapture:Um,onTouchMoveCapture:Um}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,y=_n(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,j=Xy([r,t]),_=Qe(Qe({},y),s);return p.createElement(p.Fragment,null,f&&p.createElement(w,{sideCar:uD,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:r}),a?p.cloneElement(p.Children.only(l),Qe(Qe({},_),{ref:j})):p.createElement(b,Qe({},_,{className:c,ref:j}),l))});np.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};np.classNames={fullWidth:Li,zeroRight:Mi};var Xv=!1;if(typeof window<"u")try{var qu=Object.defineProperty({},"passive",{get:function(){return Xv=!0,!0}});window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{Xv=!1}var ii=Xv?{passive:!1}:!1,Pne=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},Tne=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},$S=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=dD(e,r);if(n){var s=fD(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},kne=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Ane=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},dD=function(e,t){return e==="v"?Pne(t):Tne(t)},fD=function(e,t){return e==="v"?kne(t):Ane(t)},Rne=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ine=function(e,t,r,n,s){var o=Rne(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{var m=fD(e,l),g=m[0],v=m[1],x=m[2],b=v-x-o*g;(g||b)&&dD(e,l)&&(d+=b,h+=g),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&d===0||!s&&a>d)||!f&&(s&&h===0||!s&&-a>h))&&(u=!0),u},Wu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},MS=function(e){return[e.deltaX,e.deltaY]},LS=function(e){return e&&"current"in e?e.current:e},One=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Dne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$ne=0,ai=[];function Mne(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState($ne++)[0],o=p.useState(function(){return lh()})[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Mc([e.lockRef.current],(e.shards||[]).map(LS),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2)return!a.current.allowPinchZoom;var b=Wu(v),y=r.current,w="deltaX"in v?v.deltaX:y[0]-b[0],j="deltaY"in v?v.deltaY:y[1]-b[1],_,S=v.target,N=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&N==="h"&&S.type==="range")return!1;var E=$S(N,S);if(!E)return!0;if(E?_=N:(_=N==="v"?"h":"v",E=$S(N,S)),!E)return!1;if(!n.current&&"changedTouches"in v&&(w||j)&&(n.current=_),!_)return!0;var C=n.current||_;return Ine(C,x,v,C==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!ai.length||ai[ai.length-1]!==o)){var b="deltaY"in x?MS(x):Wu(x),y=t.current.filter(function(_){return _.name===x.type&&_.target===x.target&&One(_.delta,b)})[0];if(y&&y.should){x.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(LS).filter(Boolean).filter(function(_){return _.contains(x.target)}),j=w.length>0?l(x,w[0]):!a.current.noIsolation;j&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,b,y){var w={name:v,delta:x,target:b,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){r.current=Wu(v),n.current=void 0},[]),d=p.useCallback(function(v){u(v.type,MS(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Wu(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return ai.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ii),document.addEventListener("touchmove",c,ii),document.addEventListener("touchstart",f,ii),function(){ai=ai.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,ii),document.removeEventListener("touchmove",c,ii),document.removeEventListener("touchstart",f,ii)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:Dne(s)}):null,m?p.createElement(e0,{gapMode:"margin"}):null)}const Lne=Zy(uD,Mne);var hD=p.forwardRef(function(e,t){return p.createElement(np,Qe({},e,{ref:t,sideCar:Lne}))});hD.classNames=np.classNames;const Fne=hD,pD="Dialog",[mD,lie]=Zre(pD),[Bne,Ho]=mD(pD),zne=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u=!1,f]=nne({prop:n,defaultProp:s,onChange:o});return p.createElement(Bne,{scope:t,triggerRef:l,contentRef:c,contentId:Lm(),titleId:Lm(),descriptionId:Lm(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:a},r)},gD="DialogPortal",[Une,vD]=mD(gD,{forceMount:void 0}),Vne=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Ho(gD,t);return p.createElement(Une,{scope:t,forceMount:r},p.Children.map(n,a=>p.createElement(rp,{present:r||o.open},p.createElement(Sne,{asChild:!0,container:s},a))))},Qv="DialogOverlay",qne=p.forwardRef((e,t)=>{const r=vD(Qv,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Ho(Qv,e.__scopeDialog);return o.modal?p.createElement(rp,{present:n||o.open},p.createElement(Wne,je({},s,{ref:t}))):null}),Wne=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ho(Qv,r);return p.createElement(Fne,{as:fb,allowPinchZoom:!0,shards:[s.contentRef]},p.createElement(tp.div,je({"data-state":yD(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),vc="DialogContent",Hne=p.forwardRef((e,t)=>{const r=vD(vc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Ho(vc,e.__scopeDialog);return p.createElement(rp,{present:n||o.open},o.modal?p.createElement(Gne,je({},s,{ref:t})):p.createElement(Kne,je({},s,{ref:t})))}),Gne=p.forwardRef((e,t)=>{const r=Ho(vc,e.__scopeDialog),n=p.useRef(null),s=Kc(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return $c(o)},[]),p.createElement(xD,je({},e,{ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vi(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Vi(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:Vi(e.onFocusOutside,o=>o.preventDefault())}))}),Kne=p.forwardRef((e,t)=>{const r=Ho(vc,e.__scopeDialog),n=p.useRef(!1);return p.createElement(xD,je({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,s),!s.defaultPrevented){var a;n.current||(a=r.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}n.current=!1},onInteractOutside:s=>{var o,a;(o=e.onInteractOutside)===null||o===void 0||o.call(e,s),s.defaultPrevented||(n.current=!0);const l=s.target;((a=r.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault()}}))}),xD=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=Ho(vc,r),c=p.useRef(null),u=Kc(t,c);return Cne(),p.createElement(p.Fragment,null,p.createElement(vne,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o},p.createElement(pne,je({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":yD(l.open)},a,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function yD(e){return e?"open":"closed"}const Yne=zne,Jne=Vne,Xne=qne,Qne=Hne;var Zne='[cmdk-list-sizer=""]',Ja='[cmdk-group=""]',Vm='[cmdk-group-items=""]',ese='[cmdk-group-heading=""]',hb='[cmdk-item=""]',FS=`${hb}:not([aria-disabled="true"])`,Zv="cmdk-item-select",kn="data-value",tse=(e,t)=>Xre(e,t),bD=p.createContext(void 0),Yc=()=>p.useContext(bD),wD=p.createContext(void 0),pb=()=>p.useContext(wD),jD=p.createContext(void 0),_D=p.forwardRef((e,t)=>{let r=p.useRef(null),n=ui(()=>{var $,L,W;return{search:"",value:(W=(L=e.value)!=null?L:($=e.defaultValue)==null?void 0:$.toLowerCase())!=null?W:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=ui(()=>new Set),o=ui(()=>new Map),a=ui(()=>new Map),l=ui(()=>new Set),c=SD(e),{label:u,children:f,value:d,onValueChange:h,filter:m,shouldFilter:g,vimBindings:v=!0,...x}=e,b=p.useId(),y=p.useId(),w=p.useId(),j=fse();Pa(()=>{if(d!==void 0){let $=d.trim().toLowerCase();n.current.value=$,j(6,I),_.emit()}},[d]);let _=p.useMemo(()=>({subscribe:$=>(l.current.add($),()=>l.current.delete($)),snapshot:()=>n.current,setState:($,L,W)=>{var V,re,ve;if(!Object.is(n.current[$],L)){if(n.current[$]=L,$==="search")k(),E(),j(1,C);else if($==="value")if(((V=c.current)==null?void 0:V.value)!==void 0){let se=L??"";(ve=(re=c.current).onValueChange)==null||ve.call(re,se);return}else W||j(5,I);_.emit()}},emit:()=>{l.current.forEach($=>$())}}),[]),S=p.useMemo(()=>({value:($,L)=>{L!==a.current.get($)&&(a.current.set($,L),n.current.filtered.items.set($,N(L)),j(2,()=>{E(),_.emit()}))},item:($,L)=>(s.current.add($),L&&(o.current.has(L)?o.current.get(L).add($):o.current.set(L,new Set([$]))),j(3,()=>{k(),E(),n.current.value||C(),_.emit()}),()=>{a.current.delete($),s.current.delete($),n.current.filtered.items.delete($);let W=O();j(4,()=>{k(),(W==null?void 0:W.getAttribute("id"))===$&&C(),_.emit()})}),group:$=>(o.current.has($)||o.current.set($,new Set),()=>{a.current.delete($),o.current.delete($)}),filter:()=>c.current.shouldFilter,label:u||e["aria-label"],commandRef:r,listId:b,inputId:w,labelId:y}),[]);function N($){var L,W;let V=(W=(L=c.current)==null?void 0:L.filter)!=null?W:tse;return $?V($,n.current.search):0}function E(){if(!r.current||!n.current.search||c.current.shouldFilter===!1)return;let $=n.current.filtered.items,L=[];n.current.filtered.groups.forEach(V=>{let re=o.current.get(V),ve=0;re.forEach(se=>{let Z=$.get(se);ve=Math.max(Z,ve)}),L.push([V,ve])});let W=r.current.querySelector(Zne);M().sort((V,re)=>{var ve,se;let Z=V.getAttribute(kn),ue=re.getAttribute(kn);return((ve=$.get(ue))!=null?ve:0)-((se=$.get(Z))!=null?se:0)}).forEach(V=>{let re=V.closest(Vm);re?re.appendChild(V.parentElement===re?V:V.closest(`${Vm} > *`)):W.appendChild(V.parentElement===W?V:V.closest(`${Vm} > *`))}),L.sort((V,re)=>re[1]-V[1]).forEach(V=>{let re=r.current.querySelector(`${Ja}[${kn}="${V[0]}"]`);re==null||re.parentElement.appendChild(re)})}function C(){let $=M().find(W=>!W.ariaDisabled),L=$==null?void 0:$.getAttribute(kn);_.setState("value",L||void 0)}function k(){if(!n.current.search||c.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let $=0;for(let L of s.current){let W=a.current.get(L),V=N(W);n.current.filtered.items.set(L,V),V>0&&$++}for(let[L,W]of o.current)for(let V of W)if(n.current.filtered.items.get(V)>0){n.current.filtered.groups.add(L);break}n.current.filtered.count=$}function I(){var $,L,W;let V=O();V&&((($=V.parentElement)==null?void 0:$.firstChild)===V&&((W=(L=V.closest(Ja))==null?void 0:L.querySelector(ese))==null||W.scrollIntoView({block:"nearest"})),V.scrollIntoView({block:"nearest"}))}function O(){var $;return($=r.current)==null?void 0:$.querySelector(`${hb}[aria-selected="true"]`)}function M(){return Array.from(r.current.querySelectorAll(FS))}function D($){let L=M()[$];L&&_.setState("value",L.getAttribute(kn))}function z($){var L;let W=O(),V=M(),re=V.findIndex(se=>se===W),ve=V[re+$];(L=c.current)!=null&&L.loop&&(ve=re+$<0?V[V.length-1]:re+$===V.length?V[0]:V[re+$]),ve&&_.setState("value",ve.getAttribute(kn))}function B($){let L=O(),W=L==null?void 0:L.closest(Ja),V;for(;W&&!V;)W=$>0?use(W,Ja):dse(W,Ja),V=W==null?void 0:W.querySelector(FS);V?_.setState("value",V.getAttribute(kn)):z($)}let q=()=>D(M().length-1),A=$=>{$.preventDefault(),$.metaKey?q():$.altKey?B(1):z(1)},R=$=>{$.preventDefault(),$.metaKey?D(0):$.altKey?B(-1):z(-1)};return p.createElement("div",{ref:Jc([r,t]),...x,"cmdk-root":"",onKeyDown:$=>{var L;if((L=x.onKeyDown)==null||L.call(x,$),!$.defaultPrevented)switch($.key){case"n":case"j":{v&&$.ctrlKey&&A($);break}case"ArrowDown":{A($);break}case"p":case"k":{v&&$.ctrlKey&&R($);break}case"ArrowUp":{R($);break}case"Home":{$.preventDefault(),D(0);break}case"End":{$.preventDefault(),q();break}case"Enter":if(!$.nativeEvent.isComposing){$.preventDefault();let W=O();if(W){let V=new Event(Zv);W.dispatchEvent(V)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:hse},u),p.createElement(wD.Provider,{value:_},p.createElement(bD.Provider,{value:S},f)))}),rse=p.forwardRef((e,t)=>{var r,n;let s=p.useId(),o=p.useRef(null),a=p.useContext(jD),l=Yc(),c=SD(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:a==null?void 0:a.forceMount;Pa(()=>l.item(s,a==null?void 0:a.id),[]);let f=ND(s,o,[e.value,e.children,o]),d=pb(),h=Ro(_=>_.value&&_.value===f.current),m=Ro(_=>u||l.filter()===!1?!0:_.search?_.filtered.items.get(s)>0:!0);p.useEffect(()=>{let _=o.current;if(!(!_||e.disabled))return _.addEventListener(Zv,g),()=>_.removeEventListener(Zv,g)},[m,e.onSelect,e.disabled]);function g(){var _,S;v(),(S=(_=c.current).onSelect)==null||S.call(_,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:b,onSelect:y,forceMount:w,...j}=e;return p.createElement("div",{ref:Jc([o,t]),...j,id:s,"cmdk-item":"",role:"option","aria-disabled":x||void 0,"aria-selected":h||void 0,"data-disabled":x||void 0,"data-selected":h||void 0,onPointerMove:x?void 0:v,onClick:x?void 0:g},e.children)}),nse=p.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...o}=e,a=p.useId(),l=p.useRef(null),c=p.useRef(null),u=p.useId(),f=Yc(),d=Ro(g=>s||f.filter()===!1?!0:g.search?g.filtered.groups.has(a):!0);Pa(()=>f.group(a),[]),ND(a,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:a,forceMount:s}),[s]),m=p.createElement(jD.Provider,{value:h},n);return p.createElement("div",{ref:Jc([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},r&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},m))}),sse=p.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=p.useRef(null),o=Ro(a=>!a.search);return!r&&!o?null:p.createElement("div",{ref:Jc([s,t]),...n,"cmdk-separator":"",role:"separator"})}),ose=p.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=e.value!=null,o=pb(),a=Ro(f=>f.search),l=Ro(f=>f.value),c=Yc(),u=p.useMemo(()=>{var f;let d=(f=c.commandRef.current)==null?void 0:f.querySelector(`${hb}[${kn}="${l}"]`);return d==null?void 0:d.getAttribute("id")},[l,c.commandRef]);return p.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),p.createElement("input",{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:s?e.value:a,onChange:f=>{s||o.setState("search",f.target.value),r==null||r(f.target.value)}})}),ise=p.forwardRef((e,t)=>{let{children:r,...n}=e,s=p.useRef(null),o=p.useRef(null),a=Yc();return p.useEffect(()=>{if(o.current&&s.current){let l=o.current,c=s.current,u,f=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let d=l.offsetHeight;c.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return f.observe(l),()=>{cancelAnimationFrame(u),f.unobserve(l)}}},[]),p.createElement("div",{ref:Jc([s,t]),...n,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:a.listId,"aria-labelledby":a.inputId},p.createElement("div",{ref:o,"cmdk-list-sizer":""},r))}),ase=p.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:o,container:a,...l}=e;return p.createElement(Yne,{open:r,onOpenChange:n},p.createElement(Jne,{container:a},p.createElement(Xne,{"cmdk-overlay":"",className:s}),p.createElement(Qne,{"aria-label":e.label,"cmdk-dialog":"",className:o},p.createElement(_D,{ref:t,...l}))))}),lse=p.forwardRef((e,t)=>{let r=p.useRef(!0),n=Ro(s=>s.filtered.count===0);return p.useEffect(()=>{r.current=!1},[]),r.current||!n?null:p.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),cse=p.forwardRef((e,t)=>{let{progress:r,children:n,...s}=e;return p.createElement("div",{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},p.createElement("div",{"aria-hidden":!0},n))}),sr=Object.assign(_D,{List:ise,Item:rse,Input:ose,Group:nse,Separator:sse,Dialog:ase,Empty:lse,Loading:cse});function use(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function dse(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function SD(e){let t=p.useRef(e);return Pa(()=>{t.current=e}),t}var Pa=typeof window>"u"?p.useEffect:p.useLayoutEffect;function ui(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Jc(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Ro(e){let t=pb(),r=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,r,r)}function ND(e,t,r){let n=p.useRef(),s=Yc();return Pa(()=>{var o;let a=(()=>{var l;for(let c of r){if(typeof c=="string")return c.trim().toLowerCase();if(typeof c=="object"&&"current"in c)return c.current?(l=c.current.textContent)==null?void 0:l.trim().toLowerCase():n.current}})();s.value(e,a),(o=t.current)==null||o.setAttribute(kn,a),n.current=a}),n}var fse=()=>{let[e,t]=p.useState(),r=ui(()=>new Map);return Pa(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,s)=>{r.current.set(n,s),t({})}},hse={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ED=J.forwardRef(({className:e,...t},r)=>i.jsx(sr,{ref:r,className:he("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));ED.displayName=sr.displayName;const CD=J.forwardRef(({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(Wf,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(sr.Input,{ref:r,className:he("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));CD.displayName=sr.Input.displayName;const PD=J.forwardRef(({className:e,...t},r)=>i.jsx(sr.List,{ref:r,className:he("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));PD.displayName=sr.List.displayName;const TD=J.forwardRef((e,t)=>i.jsx(sr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));TD.displayName=sr.Empty.displayName;const kD=J.forwardRef(({className:e,...t},r)=>i.jsx(sr.Group,{ref:r,className:he("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));kD.displayName=sr.Group.displayName;const AD=J.forwardRef(({className:e,...t},r)=>i.jsx(sr.Separator,{ref:r,className:he("-mx-1 h-px bg-border",e),...t}));AD.displayName=sr.Separator.displayName;const ex=J.forwardRef(({className:e,...t},r)=>i.jsx(sr.Item,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));ex.displayName=sr.Item.displayName;const pse=Bf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function yo({className:e,variant:t,...r}){return i.jsx("div",{className:he(pse({variant:t}),e),...r})}const mse=({options:e,selected:t,onChange:r,placeholder:n,searchPlaceholder:s,emptyText:o,className:a,showSelectAll:l=!1,selectAllText:c="Tout slectionner"})=>{const[u,f]=p.useState(!1),d=m=>{r(t.filter(g=>g.value!==m.value))},h=()=>{t.length===e.length?r([]):r(e)};return i.jsxs($I,{open:u,onOpenChange:f,children:[i.jsx(MI,{asChild:!0,children:i.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":u,className:he("w-full justify-between",a),onClick:()=>f(!u),children:[i.jsx("div",{className:"flex gap-1 flex-wrap",children:t.length>0?t.map(m=>i.jsxs(yo,{variant:"secondary",className:"mr-1",onClick:g=>{g.stopPropagation(),d(m)},children:[m.label,i.jsx("span",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:i.jsx(Fo,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},m.value)):i.jsx("span",{children:n})}),i.jsx(h3,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(M0,{className:"w-[--radix-popover-trigger-width] p-0",children:i.jsxs(ED,{children:[i.jsx(CD,{placeholder:s}),i.jsxs(PD,{children:[i.jsx(TD,{children:o}),i.jsxs(kD,{children:[l&&i.jsxs(i.Fragment,{children:[i.jsxs(ex,{onSelect:h,children:[i.jsx($n,{className:he("mr-2 h-4 w-4",t.length===e.length?"opacity-100":"opacity-0")}),c]}),i.jsx(AD,{})]}),e.map(m=>i.jsxs(ex,{onSelect:()=>{const g=t.some(v=>v.value===m.value);r(g?t.filter(v=>v.value!==m.value):[...t,m])},children:[i.jsx($n,{className:he("mr-2 h-4 w-4",t.some(g=>g.value===m.value)?"opacity-100":"opacity-0")}),m.label]},m.value))]})]})]})})]})},gse=({form:e,onSave:t,onCancel:r,isSaving:n=!1})=>{const{projectsData:s}=Ve(),[o,a]=p.useState(e?JSON.parse(JSON.stringify(e)):{name:"",fields:[],projectIds:[]}),[l,c]=p.useState(""),[u,f]=p.useState("text"),d=p.useMemo(()=>Object.values(s).map(b=>({value:b.type,label:b.title})),[s]),h=p.useMemo(()=>(o.projectIds||[]).map(b=>d.find(y=>y.value===b)).filter(Boolean),[o.projectIds,d]);p.useEffect(()=>{e&&a(JSON.parse(JSON.stringify(e)))},[e]);const m=(b,y,w)=>{const j=[...o.fields];j[b]={...j[b],[y]:w},a(_=>({..._,fields:j}))},g=()=>{if(!l.trim())return;const b={id:`field-${Date.now()}`,label:l,type:u,placeholder:""};a(y=>({...y,fields:[...y.fields||[],b]})),c(""),f("text")},v=b=>{const y=(o.fields||[]).filter((w,j)=>j!==b);a(w=>({...w,fields:y}))},x=()=>{if(!o.name.trim()){F({title:"Nom manquant",description:"Veuillez nommer votre formulaire.",variant:"destructive"});return}const b={...o,id:o.id||`form-${Date.now()}`};t(b)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"form-name",children:"Nom du formulaire (Interne)"}),i.jsx(pe,{id:"form-name",value:o.name,onChange:b=>a(y=>({...y,name:b.target.value}))})]}),i.jsxs("div",{children:[i.jsx(Q,{children:" qui est destin ce formulaire ?"}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"audience-client",name:"audience",value:"client",checked:(o.audience||"client")==="client",onChange:b=>a(y=>({...y,audience:b.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),i.jsx(Q,{htmlFor:"audience-client",className:"font-normal cursor-pointer",children:"Client"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"audience-internal",name:"audience",value:"internal",checked:o.audience==="internal",onChange:b=>a(y=>({...y,audience:b.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),i.jsx(Q,{htmlFor:"audience-internal",className:"font-normal cursor-pointer",children:"Interne (quipe)"})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(o.audience||"client")==="client"?"Ce formulaire sera envoyable au client via le chat":"Ce formulaire sera visible uniquement dans la fiche prospect (quipe)"})]}),i.jsxs("div",{children:[i.jsx(Q,{children:"Projets associs"}),i.jsx(mse,{options:d,selected:h,onChange:b=>a(y=>({...y,projectIds:b.map(w=>w.value)})),placeholder:"Slectionner des projets...",searchPlaceholder:"Rechercher un projet...",emptyText:"Aucun projet trouv.",className:"mt-1"})]}),i.jsx("h3",{className:"text-md font-semibold text-gray-700 pt-4 border-t",children:"Champs du formulaire"}),i.jsx("div",{className:"space-y-3",children:(o.fields||[]).map((b,y)=>i.jsxs("div",{className:"flex flex-col gap-2 bg-gray-50 p-3 rounded-md",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pe,{value:b.label,onChange:w=>m(y,"label",w.target.value),placeholder:"Nom du champ"}),i.jsxs(Yt,{value:b.type,onValueChange:w=>m(y,"type",w),children:[i.jsx(Bt,{className:"w-[180px]",children:i.jsx(Jt,{})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"text",children:"Texte"}),i.jsx(Pe,{value:"email",children:"Email"}),i.jsx(Pe,{value:"phone",children:"Tlphone"}),i.jsx(Pe,{value:"number",children:"Nombre"}),i.jsx(Pe,{value:"select",children:"Liste droulante"}),i.jsx(Pe,{value:"file",children:"Fichier"})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>v(y),children:i.jsx(Mn,{className:"h-4 w-4 text-red-500"})})]}),b.type==="select"&&i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-blue-300",children:[i.jsx(Q,{className:"text-xs font-semibold text-blue-700",children:"Options du menu droulant :"}),i.jsx("div",{className:"space-y-1",children:(b.options||[]).map((w,j)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pe,{value:w,onChange:_=>{const S=[...b.options||[]];S[j]=_.target.value,m(y,"options",S)},placeholder:`Option ${j+1}`,className:"flex-1"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>{const _=(b.options||[]).filter((S,N)=>N!==j);m(y,"options",_)},children:i.jsx(Mn,{className:"h-3 w-3 text-red-500"})})]},j))}),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const w=[...b.options||[],""];m(y,"options",w)},className:"text-xs",children:[i.jsx(Rr,{className:"h-3 w-3 mr-1"})," Ajouter une option"]})]}),i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-purple-300",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Q,{className:"text-xs font-semibold text-purple-700",children:"Conditions d'affichage :"}),b.show_if_conditions&&b.show_if_conditions.length>1&&i.jsxs(Yt,{value:b.condition_operator||"AND",onValueChange:w=>m(y,"condition_operator",w),children:[i.jsx(Bt,{className:"w-[100px] h-7 text-xs",children:i.jsx(Jt,{})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"AND",children:"ET (toutes)"}),i.jsx(Pe,{value:"OR",children:"OU (au moins une)"})]})]})]}),(b.show_if_conditions||[]).map((w,j)=>i.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 p-2 rounded",children:[i.jsxs(Yt,{value:`${w.field}::${w.equals}`,onValueChange:_=>{const[S,N]=_.split("::"),E=[...b.show_if_conditions||[]];E[j]={field:S,equals:N},m(y,"show_if_conditions",E)},children:[i.jsx(Bt,{className:"flex-1 h-8 text-xs",children:i.jsx(Jt,{})}),i.jsx(zt,{children:(o.fields||[]).slice(0,y).filter(_=>_.type==="text"||_.type==="email"||_.type==="phone"||_.type==="select").map(_=>_.type==="select"&&_.options&&_.options.length>0?_.options.map(S=>i.jsxs(Pe,{value:`${_.id}::${S}`,children:['"',_.label,'" = "',S,'"']},`${_.id}::${S}`)):i.jsxs(Pe,{value:`${_.id}::has_value`,children:['"',_.label,'" rempli']},_.id)).flat()})]}),i.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{const _=(b.show_if_conditions||[]).filter((S,N)=>N!==j);m(y,"show_if_conditions",_.length>0?_:void 0)},children:i.jsx(Mn,{className:"h-3 w-3 text-red-500"})})]},j)),i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const w=[...b.show_if_conditions||[],{field:"",equals:""}];m(y,"show_if_conditions",w)},className:"text-xs w-full",children:[i.jsx(Rr,{className:"h-3 w-3 mr-1"})," Ajouter une condition"]}),(!b.show_if_conditions||b.show_if_conditions.length===0)&&i.jsx("p",{className:"text-xs text-gray-500 italic",children:"Toujours visible (aucune condition)"})]}),b.type==="select"&&i.jsxs("div",{className:"pl-2 space-y-2 border-l-2 border-green-300 mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Q,{className:"text-xs font-semibold text-green-700",children:"Rptition de champs :"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:`repeater-${b.id}`,checked:b.is_repeater||!1,onChange:w=>m(y,"is_repeater",w.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),i.jsx(Q,{htmlFor:`repeater-${b.id}`,className:"text-xs font-normal cursor-pointer",children:"Utiliser comme compteur de rptition"})]})]}),b.is_repeater&&i.jsxs("div",{className:"space-y-2 bg-green-50 p-3 rounded",children:[i.jsx(Q,{className:"text-xs",children:"Champs  rpter :"}),i.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Slectionnez les champs qui doivent tre rpts N fois (o N = valeur choisie dans le menu droulant)"}),i.jsx("div",{className:"space-y-1",children:(o.fields||[]).slice(y+1).map((w,j)=>{const _=(b.repeats_fields||[]).includes(w.id);return i.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded border",children:[i.jsx("input",{type:"checkbox",id:`repeat-${b.id}-${w.id}`,checked:_,onChange:S=>{const N=b.repeats_fields||[],E=S.target.checked?[...N,w.id]:N.filter(C=>C!==w.id);m(y,"repeats_fields",E)},className:"h-4 w-4 text-green-600 focus:ring-green-500"}),i.jsxs(Q,{htmlFor:`repeat-${b.id}-${w.id}`,className:"text-xs font-normal cursor-pointer flex-1",children:[w.label," (",w.type,")"]})]},w.id)})}),(o.fields||[]).slice(y+1).length===0&&i.jsx("p",{className:"text-xs text-orange-600 italic",children:"Ajoutez des champs aprs celui-ci pour pouvoir les rpter"})]}),!b.is_repeater&&i.jsx("p",{className:"text-xs text-gray-500 italic",children:"Activez cette option pour gnrer automatiquement N copies des champs suivants"})]})]},b.id))}),i.jsxs("div",{className:"flex items-end gap-2 pt-4 border-t",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx(Q,{children:"Ajouter un champ"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(pe,{value:l,onChange:b=>c(b.target.value),placeholder:"Nom du nouveau champ"}),i.jsxs(Yt,{value:u,onValueChange:f,children:[i.jsx(Bt,{className:"w-[180px]",children:i.jsx(Jt,{})}),i.jsxs(zt,{children:[i.jsx(Pe,{value:"text",children:"Texte"}),i.jsx(Pe,{value:"email",children:"Email"}),i.jsx(Pe,{value:"phone",children:"Tlphone"}),i.jsx(Pe,{value:"number",children:"Nombre"}),i.jsx(Pe,{value:"select",children:"Liste droulante"}),i.jsx(Pe,{value:"file",children:"Fichier"})]})]})]})]}),i.jsx(H,{onClick:g,children:i.jsx(Rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(H,{variant:"outline",onClick:r,disabled:n,children:"Annuler"}),i.jsx(H,{onClick:x,className:"bg-green-600 hover:bg-green-700",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer le formulaire"})]})]})},vse=()=>{const e=nr();Ve();const{organizationId:t}=on(),{forms:r,loading:n,saveForm:s,deleteForm:o}=O0(t),a=p.useMemo(()=>r,[r]),[l,c]=p.useState(null),[u,f]=p.useState(!1);p.useEffect(()=>{var v;const g=(v=e.state)==null?void 0:v.prefilledForm;g&&(c(g),F({title:" Formulaire pr-rempli",description:`${g.fields.length} champs dtects depuis le template. Vous pouvez les ajuster avant de sauvegarder.`,className:"bg-blue-500 text-white",duration:5e3}),window.history.replaceState({},document.title))},[e.state]);const d=async g=>{f(!0);const v=g.id||`form-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;try{const x=await s(v,{name:g.name,fields:g.fields||[],projectIds:g.projectIds||[],audience:g.audience||"client"});x.success?(F({title:" Formulaire enregistr !",description:`Le formulaire "${g.name}" a t sauvegard dans Supabase.`,className:"bg-green-500 text-white"}),c(null)):F({title:" Erreur",description:`Impossible d'enregistrer le formulaire : ${x.error}`,variant:"destructive"})}finally{f(!1)}},h=async g=>{const v=await o(g);v.success?F({title:" Formulaire supprim !",description:"Le formulaire a t supprim de Supabase.",className:"bg-green-500 text-white"}):F({title:" Erreur",description:`Impossible de supprimer le formulaire : ${v.error}`,variant:"destructive"})},m=g=>{c(g)};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"formulaires"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Gestion des Formulaires"}),i.jsxs(H,{onClick:()=>c({name:"",fields:[],projectIds:[]}),className:"bg-teal-600 hover:bg-teal-700 w-full",children:[i.jsx(Rr,{className:"mr-2 h-4 w-4"})," Crer un formulaire"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:n?i.jsx("div",{className:"text-center text-gray-500 py-8",children:"Chargement..."}):Object.values(a).length>0?Object.values(a).map(g=>i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(l==null?void 0:l.id)===g.id?"bg-teal-50 border-2 border-teal-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>m(g),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(yl,{className:"h-5 w-5 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:g.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[g.audience==="internal"?" Interne":" Client","  ",(g.fields||[]).length," champs"]})]})]}),i.jsxs(qc,{children:[i.jsx(yh,{asChild:!0,children:i.jsx(H,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:v=>v.stopPropagation(),children:i.jsx(Mn,{className:"h-4 w-4"})})}),i.jsxs(va,{children:[i.jsxs(xa,{children:[i.jsxs(ba,{children:['Supprimer "',g.name,'" ?']}),i.jsx(wa,{children:"Cette action est irrversible."})]}),i.jsxs(ya,{children:[i.jsx(_a,{children:"Annuler"}),i.jsx(ja,{onClick:()=>h(g.id),className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})]})]},`${g.id}-${g.name}-${g.updatedAt||g.createdAt}`)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(yl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun formulaire cr. Cliquez sur le bouton pour en ajouter un."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:l?l.id?`Modifier "${l.name}"`:"Crer un nouveau formulaire":"Slectionnez un formulaire"}),i.jsx("p",{className:"text-sm text-gray-500",children:l?"Configurez les champs, les conditions d'affichage et les projets associs.":"Cliquez sur un formulaire dans la liste pour le modifier."})]}),l?i.jsx(gse,{form:l,onSave:d,onCancel:()=>c(null),isSaving:u}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(yl,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un formulaire  modifier"}),i.jsx("p",{className:"text-sm mt-2",children:"ou crez-en un nouveau"})]})]})})]})]})},xse=()=>{const{projectsData:e={},setProjectsData:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState({coverImage:"",clientDescription:"",ctaText:""}),a=p.useRef(null),l=p.useMemo(()=>Object.values(e).map(h=>({value:h.type,label:h.title,icon:h.icon})),[e]);p.useEffect(()=>{l.length>0&&!r&&n(l[0].value)},[l,r]),p.useEffect(()=>{if(r&&e[r]){const h=e[r];o({coverImage:h.coverImage||"",clientDescription:h.clientDescription||"",ctaText:h.ctaText||""})}},[r,e]);const c=(h,m)=>{o(g=>({...g,[h]:m}))},u=async()=>{if(!r)return;const h={...e[r],...s},m={...e,[r]:h};try{await t(m),F({title:" Modifications enregistres !",description:`L'affichage du projet "${e[r].title}" a t mis  jour.`,className:"bg-green-500 text-white"})}catch{F({title:" Erreur !",description:"Impossible de sauvegarder les modifications.",variant:"destructive"})}},f=h=>{const m=h.target.files[0];if(m){const g=new FileReader;g.onloadend=()=>{c("coverImage",g.result)},g.readAsDataURL(m)}},d=r&&e[r];return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"catalogue"}),i.jsxs("div",{className:"flex flex-1 gap-6 p-6",children:[i.jsx("div",{className:"w-[25%] flex-shrink-0",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:" Catalogue Client"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Configurez l'affichage des projets pour vos clients"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:l.length>0?l.map(h=>i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${r===h.value?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>n(h.value),children:[i.jsx("span",{className:"text-2xl",children:h.icon}),i.jsx("span",{className:"font-medium",children:h.label})]},h.value)):i.jsxs("div",{className:"text-center text-gray-500 py-8",children:[i.jsx(Mp,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"mt-2",children:"Aucun projet disponible"}),i.jsx("p",{className:"text-xs mt-1",children:`Crez d'abord des projets dans "Gestion des Projets"`})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:d?`Configuration de "${d.title}"`:"Slectionnez un projet"}),i.jsx("p",{className:"text-sm text-gray-500",children:d?"Personnalisez l'image, la description et le bouton d'action affichs aux clients.":"Cliquez sur un projet dans la liste pour configurer son affichage."})]}),d?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border border-indigo-200",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-3xl",children:d.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:d.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",d.type]})]})]})}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-cover-image",children:"Image de couverture (URL)"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(pe,{id:"project-cover-image",placeholder:"https://exemple.com/image.jpg",value:s.coverImage,onChange:h=>c("coverImage",h.target.value)}),i.jsx("input",{type:"file",ref:a,onChange:f,accept:"image/*",className:"hidden"}),i.jsx(H,{variant:"outline",onClick:()=>{var h;return(h=a.current)==null?void 0:h.click()},title:"Uploader une image",children:i.jsx(k3,{className:"h-4 w-4"})})]}),s.coverImage?i.jsx("div",{className:"mt-3 relative w-full aspect-video rounded-lg overflow-hidden bg-gray-100 border",children:i.jsx("img",{src:s.coverImage,alt:"Aperu de la couverture",className:"w-full h-full object-cover",onError:h=>{h.target.src="",h.target.style.display="none",F({title:"Erreur d'image",description:"L'URL de l'image n'est pas valide.",variant:"destructive"})}})}):i.jsx("div",{className:"mt-3 flex items-center justify-center w-full aspect-video rounded-lg bg-gray-100 border-2 border-dashed border-gray-300",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Mp,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune image de couverture"})]})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image affiche aux clients sur la page de prsentation du projet"})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-client-description",children:"Description du projet"}),i.jsx(ho,{id:"project-client-description",placeholder:"Courte description visible par le client...",value:s.clientDescription,onChange:h=>c("clientDescription",h.target.value),rows:5,className:"mt-1"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Texte prsent au client pour expliquer le projet"})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"project-cta-text",children:"Texte du bouton (CTA)"}),i.jsx(pe,{id:"project-cta-text",placeholder:"Ex: Ajouter ce projet",value:s.ctaText,onChange:h=>c("ctaText",h.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Texte affich sur le bouton d'action principal"})]}),i.jsx("div",{className:"flex justify-end pt-4 border-t",children:i.jsx(H,{onClick:u,className:"bg-green-600 hover:bg-green-700",children:"Enregistrer les modifications"})})]}):i.jsxs("div",{className:"text-center py-20 text-gray-400",children:[i.jsx(Mp,{className:"mx-auto h-20 w-20 mb-4"}),i.jsx("p",{className:"text-lg",children:"Slectionnez un projet  configurer"}),i.jsx("p",{className:"text-sm mt-2",children:'ou crez-en un dans "Gestion des Projets"'})]})]})})]})]})},yse=()=>{const e=Te(),{activeAdminUser:t}=Ve(),{organizationId:r}=on(),{partners:n,loading:s,error:o,refetch:a}=D0(r),[l,c]=p.useState(""),[u,f]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""}),v=p.useMemo(()=>(t==null?void 0:t.role)==="Global Admin"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="platform_admin",[t]),x=p.useMemo(()=>{if(!l.trim())return n;const j=l.toLowerCase();return n.filter(_=>{var S,N,E;return((S=_.name)==null?void 0:S.toLowerCase().includes(j))||((N=_.email)==null?void 0:N.toLowerCase().includes(j))||((E=_.specialty)==null?void 0:E.toLowerCase().includes(j))})},[n,l]),b=p.useMemo(()=>({total:n.length,active:n.filter(j=>j.active).length,inactive:n.filter(j=>!j.active).length,totalMissions:n.reduce((j,_)=>j+_.missionsCount,0)}),[n]),y=async()=>{var j,_,S,N,E;if(!m.companyName.trim()||!m.email.trim()){F({title:"Champs requis",description:"Le nom de l'entreprise et l'email sont obligatoires.",variant:"destructive"});return}if(!m.email.includes("@")){F({title:"Email invalide",description:"Veuillez entrer une adresse email valide.",variant:"destructive"});return}h(!0);try{const{data:C,error:k}=await T.functions.invoke("invite-partner",{body:{companyName:m.companyName.trim(),email:m.email.trim().toLowerCase(),contactLastName:((j=m.contactLastName)==null?void 0:j.trim())||null,contactFirstName:((_=m.contactFirstName)==null?void 0:_.trim())||null,phone:((S=m.phone)==null?void 0:S.trim())||null,organizationId:r}});if(k)throw k;if(C!=null&&C.error){F({title:"Erreur",description:C.error,variant:"destructive"});return}P.info("Invitation partenaire envoye",{email:m.email,partnerId:C==null?void 0:C.partnerId}),F({title:" Invitation envoye",description:`${m.companyName} recevra un email avec ses identifiants.`,className:"bg-green-500 text-white"}),g({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""}),f(!1),a()}catch(C){P.error("Erreur invitation partenaire",{error:C.message});let k="Une erreur est survenue lors de l'invitation.";(N=C.message)!=null&&N.includes("already registered")?k="Cet email est dj utilis.":(E=C.message)!=null&&E.includes("rate limit")&&(k="Trop de tentatives, ressayez plus tard."),F({title:"Erreur",description:k,variant:"destructive"})}finally{h(!1)}},w=()=>{f(!1),g({companyName:"",email:"",contactLastName:"",contactFirstName:"",phone:""})};return v?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Eo,{className:"h-7 w-7 text-orange-600"}),"Partenaires"]}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Grez les partenaires terrain de votre organisation"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",size:"sm",onClick:a,disabled:s,children:[i.jsx(qf,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Actualiser"]}),i.jsxs(H,{size:"sm",onClick:()=>f(!0),className:"bg-orange-600 hover:bg-orange-700",children:[i.jsx(bl,{className:"h-4 w-4 mr-2"}),"Inviter un partenaire"]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.total}),i.jsx("div",{className:"text-sm text-gray-500",children:"Partenaires"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.active}),i.jsx("div",{className:"text-sm text-gray-500",children:"Actifs"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:b.inactive}),i.jsx("div",{className:"text-sm text-gray-500",children:"Inactifs"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.totalMissions}),i.jsx("div",{className:"text-sm text-gray-500",children:"Missions totales"})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(pe,{type:"text",placeholder:"Rechercher un partenaire...",value:l,onChange:j=>c(j.target.value),className:"pl-10"})]})]}),s?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(De,{className:"h-8 w-8 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des partenaires..."})]}):o?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ly,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),i.jsxs("p",{className:"text-red-600 font-medium",children:["Erreur: ",o]}),i.jsx(H,{variant:"outline",className:"mt-4",onClick:a,children:"Ressayer"})]})}):x.length===0?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Eo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"Aucun partenaire trouv":"Aucun partenaire"}),i.jsx("p",{className:"text-gray-500 max-w-sm",children:l?"Modifiez votre recherche pour trouver des partenaires.":"Les partenaires apparatront ici une fois crs via l'invitation."})]})}):i.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Partenaire"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Email"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-700",children:"Spcialit"}),i.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700",children:"Statut"}),i.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-gray-700",children:"Missions"}),i.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-700"})]})}),i.jsx("tbody",{className:"divide-y",children:x.map(j=>{var _,S;return i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e(`/admin/partners/${j.id}`),children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:i.jsx("span",{className:"text-orange-600 font-semibold text-sm",children:((S=(_=j.name)==null?void 0:_.charAt(0))==null?void 0:S.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:j.name}),j.phone&&i.jsx("div",{className:"text-sm text-gray-500",children:j.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.email}),i.jsx("td",{className:"px-6 py-4",children:j.specialty?i.jsx(yo,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:j.specialty}):i.jsx("span",{className:"text-gray-400 text-sm",children:"Non dfinie"})}),i.jsx("td",{className:"px-6 py-4 text-center",children:j.active?i.jsxs(yo,{className:"bg-green-100 text-green-700 border-green-200",children:[i.jsx(A3,{className:"h-3 w-3 mr-1"}),"Actif"]}):i.jsxs(yo,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[i.jsx(R3,{className:"h-3 w-3 mr-1"}),"Inactif"]})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-700 font-medium text-sm",children:j.missionsCount})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx(Wn,{className:"h-5 w-5 text-gray-400"})})]},j.id)})})]})})]}),i.jsx(vh,{open:u,onOpenChange:w,children:i.jsxs(zc,{className:"sm:max-w-md",children:[i.jsxs(Uc,{children:[i.jsxs(Vc,{className:"flex items-center gap-2",children:[i.jsx(bl,{className:"h-5 w-5 text-orange-600"}),"Inviter un partenaire"]}),i.jsx(xh,{children:"Le partenaire recevra un email avec ses identifiants de connexion."})]}),i.jsxs("div",{className:"px-6 py-5 space-y-5",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-company",children:["Nom de l'entreprise ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(pe,{id:"invite-company",type:"text",placeholder:"Ex: Solaire Sud Ouest",value:m.companyName,onChange:j=>g(_=>({..._,companyName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(pe,{id:"invite-email",type:"email",placeholder:"partenaire@entreprise.com",value:m.email,onChange:j=>g(_=>({..._,email:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-contact-name",children:["Nom du contact ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(pe,{id:"invite-contact-name",type:"text",placeholder:"Dupont",value:m.contactLastName,onChange:j=>g(_=>({..._,contactLastName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-contact-firstname",children:["Prnom du contact ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(pe,{id:"invite-contact-firstname",type:"text",placeholder:"Jean",value:m.contactFirstName,onChange:j=>g(_=>({..._,contactFirstName:j.target.value})),disabled:d,className:"w-full rounded-lg"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Q,{htmlFor:"invite-phone",children:["Tlphone ",i.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),i.jsx(pe,{id:"invite-phone",type:"tel",placeholder:"06 12 34 56 78",value:m.phone,onChange:j=>g(_=>({..._,phone:j.target.value})),disabled:d,className:"w-full rounded-lg"})]})]}),i.jsxs(_R,{className:"flex gap-2 mt-6",children:[i.jsx(H,{variant:"outline",onClick:w,disabled:d,children:"Annuler"}),i.jsx(H,{onClick:y,disabled:d,className:"bg-orange-600 hover:bg-orange-700",children:d?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"h-4 w-4 mr-2 animate-spin"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(bl,{className:"h-4 w-4 mr-2"}),"Inviter le partenaire"]})})]})]})})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux Global Admin et Admin."}),i.jsx(H,{onClick:()=>e("/admin/pipeline"),children:"Retour au Pipeline"})]})})]})},bse=()=>{var w,j;const{partnerId:e}=fa(),t=Te(),{activeAdminUser:r}=Ve(),{organizationId:n}=on(),{togglePartnerActive:s,getPartnerWithMissions:o}=D0(n),[a,l]=p.useState(null),[c,u]=p.useState([]),[f,d]=p.useState(!0),[h,m]=p.useState(null),[g,v]=p.useState(!1),x=p.useMemo(()=>(r==null?void 0:r.role)==="Global Admin"||(r==null?void 0:r.role)==="Admin"||(r==null?void 0:r.role)==="platform_admin",[r]);p.useEffect(()=>{(async()=>{if(!e)return;d(!0),m(null);const S=await o(e);S.error?m(S.error):(l(S.partner),u(S.missions)),d(!1)})()},[e,o]);const b=async()=>{if(!a)return;v(!0);const _=!a.active,S=await s(a.id,_);S.success?(l(N=>({...N,active:_})),F({title:_?" Partenaire activ":" Partenaire dsactiv",description:_?`${a.name} peut maintenant recevoir des missions.`:`${a.name} ne recevra plus de nouvelles missions.`,className:_?"bg-green-500 text-white":"bg-orange-500 text-white"})):F({title:" Erreur",description:S.error||"Impossible de modifier le statut.",variant:"destructive"}),v(!1)},y=_=>{const S={pending:{label:"En attente",icon:Vd,className:"bg-gray-100 text-gray-700"},in_progress:{label:"En cours",icon:De,className:"bg-blue-100 text-blue-700"},completed:{label:"Termine",icon:Uf,className:"bg-green-100 text-green-700"},blocked:{label:"Bloque",icon:cy,className:"bg-red-100 text-red-700"},cancelled:{label:"Annule",icon:my,className:"bg-gray-100 text-gray-500"}},N=S[_]||S.pending,E=N.icon;return i.jsxs(yo,{className:N.className,children:[i.jsx(E,{className:"h-3 w-3 mr-1"}),N.label]})};return x?f?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 flex items-center justify-center",children:[i.jsx(De,{className:"h-8 w-8 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement du partenaire..."})]})]}):h||!a?i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ly,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600 font-medium mb-4",children:h||"Partenaire non trouv"}),i.jsx(H,{variant:"outline",onClick:()=>t("/admin/partners"),children:"Retour  la liste"})]})})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[i.jsxs(H,{variant:"ghost",className:"mb-4",onClick:()=>t("/admin/partners"),children:[i.jsx(uy,{className:"h-4 w-4 mr-2"}),"Retour  la liste"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[i.jsx("div",{className:"col-span-1",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-orange-100 flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-orange-600 font-bold text-2xl",children:((j=(w=a.name)==null?void 0:w.charAt(0))==null?void 0:j.toUpperCase())||"?"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a.name}),a.specialty&&i.jsx(yo,{variant:"outline",className:"mt-2 bg-blue-50 text-blue-700",children:a.specialty})]}),i.jsxs("div",{className:"space-y-4 border-t pt-4",children:[i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(en,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm",children:a.email})]}),a.phone&&i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(Pc,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm",children:a.phone})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(dy,{className:"h-4 w-4 text-gray-400"}),i.jsxs("span",{className:"text-sm",children:["Cr le ",new Date(a.createdAt).toLocaleDateString("fr-FR")]})]})]}),i.jsx("div",{className:"border-t pt-4 mt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Statut"}),i.jsx("div",{className:"text-sm text-gray-500",children:a.active?"Peut recevoir des missions":"Ne reoit plus de missions"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nh,{checked:a.active,onCheckedChange:b,disabled:g}),g&&i.jsx(De,{className:"h-4 w-4 animate-spin"})]})]})})]})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[i.jsxs("div",{className:"px-6 py-4 border-b",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx(Qg,{className:"h-5 w-5 text-blue-600"}),"Missions (",c.length,")"]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Historique des missions assignes  ce partenaire (lecture seule)"})]}),c.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(Qg,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucune mission assigne"})]}):i.jsx("div",{className:"divide-y max-h-[500px] overflow-y-auto",children:c.map(_=>i.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:_.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[i.jsx(yo,{variant:"outline",className:"text-xs",children:_.projectType}),_.stepName&&i.jsxs("span",{children:[" ",_.stepName]}),i.jsxs("span",{children:[" ",_.source]})]}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Cre le ",new Date(_.createdAt).toLocaleDateString("fr-FR"),_.dueDate&&i.jsxs(i.Fragment,{children:["  chance: ",new Date(_.dueDate).toLocaleDateString("fr-FR")]})]})]}),i.jsx("div",{children:y(_.status)})]})},_.id))})]})})]})]})]}):i.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:[i.jsx(gn,{activeModule:"partenaires"}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs restreint"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Cette page est rserve aux Global Admin et Admin."}),i.jsx(H,{onClick:()=>t("/admin/pipeline"),children:"Retour au Pipeline"})]})})]})},wse=()=>{const e=Te(),[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),[l,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!0),[b,y]=p.useState(!1),[w,j]=p.useState("");p.useEffect(()=>{const N=window.location.hash,E=N.includes("access_token")||N.includes("type=invite")||N.includes("type=recovery");P.info(" PartnerLoginPage - Vrification du flow invitation",{hash:N?N.substring(0,50)+"...":"(vide)",hasInviteToken:E});const C=async()=>{var M;const{data:{session:O}}=await T.auth.getSession();if(O){P.info(" Session active trouve",{userId:O.user.id,email:O.user.email,isRecovery:(M=O.user)==null?void 0:M.recovery});const{data:D,error:z}=await T.from("partners").select("email, company_name").eq("user_id",O.user.id).single();if(D&&!z){const B=new Date(O.user.created_at),A=(new Date-B)/(1e3*60*60),R=A<24;if(P.info(" Partenaire trouv",{email:D.email,isRecentInvite:R,hoursSinceCreation:A.toFixed(1)}),E||R){g(!0),j(D.email),y(!0),x(!1);return}}}E?(P.warn(" Hash prsent mais pas de session valide"),g(!0),y(!1),x(!1)):(g(!1),x(!1))},k=setTimeout(C,500),{data:{subscription:I}}=T.auth.onAuthStateChange(async(O,M)=>{(O==="SIGNED_IN"||O==="TOKEN_REFRESHED"||O==="INITIAL_SESSION")&&M&&C()});return()=>{clearTimeout(k),I.unsubscribe()}},[]);const _=async N=>{if(N.preventDefault(),l.length<6){F({title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}if(l!==u){F({title:"Erreur",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}h(!0);try{const{error:E}=await T.auth.updateUser({password:l});if(E){P.error("Erreur updateUser password",{error:E.message}),F({title:"Erreur",description:E.message||"Impossible de dfinir le mot de passe.",variant:"destructive"});return}P.info("Mot de passe partenaire dfini avec succs"),F({title:" Mot de passe cr !",description:"Bienvenue sur EVATIME.",className:"bg-green-500 text-white"}),e("/partner/missions")}catch(E){P.error("Erreur inattendue cration mot de passe",{error:E.message}),F({title:"Erreur",description:"Une erreur inattendue s'est produite.",variant:"destructive"})}finally{h(!1)}},S=async N=>{N.preventDefault(),a(!0);try{const{data:E,error:C}=await T.auth.signInWithPassword({email:t,password:n});if(C){F({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}),a(!1);return}const{data:k,error:I}=await T.from("partners").select("id, company_name, active").eq("user_id",E.user.id).single();if(I||!k){P.warn("Tentative de connexion partenaire par un non-partenaire",{userId:E.user.id,email:t,error:I==null?void 0:I.message}),await T.auth.signOut(),F({title:"Accs refus",description:"Ce compte n'est pas un compte partenaire.",variant:"destructive"}),a(!1);return}if(!k.active){await T.auth.signOut(),F({title:"Compte dsactiv",description:"Votre compte partenaire a t dsactiv. Contactez l'administrateur.",variant:"destructive"}),a(!1);return}P.info("Connexion partenaire russie",{partnerId:k.id,companyName:k.company_name}),F({title:"Connexion russie !",description:`Bienvenue ${k.company_name}`,className:"bg-green-500 text-white"}),e("/partner")}catch(E){P.error("Erreur inattendue lors de la connexion partenaire",{error:E.message}),F({title:"Erreur",description:"Une erreur inattendue s'est produite.",variant:"destructive"})}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 flex items-center justify-center p-4",children:i.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[m&&v&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(De,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Validation de votre invitation..."})]}),m&&!v&&!b&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pj,{className:"w-8 h-8 text-red-600"})}),i.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Lien expir"}),i.jsx("p",{className:"text-gray-500 mb-6",children:"Ce lien d'invitation n'est plus valide ou a dj t utilis."}),i.jsx(H,{onClick:()=>e("/partner/login"),className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Retour  la connexion"})]}),m&&!v&&b&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pj,{className:"w-8 h-8 text-orange-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crer votre mot de passe"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Dfinissez un mot de passe pour accder  votre espace"}),w&&i.jsx("p",{className:"text-sm text-orange-600 mt-1",children:w})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"new-password",children:"Nouveau mot de passe"}),i.jsx(pe,{id:"new-password",type:"password",placeholder:"",value:l,onChange:N=>c(N.target.value),required:!0,disabled:d,className:"h-12",minLength:6})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirm-password",children:"Confirmer le mot de passe"}),i.jsx(pe,{id:"confirm-password",type:"password",placeholder:"",value:u,onChange:N=>f(N.target.value),required:!0,disabled:d,className:"h-12",minLength:6})]}),i.jsx(H,{type:"submit",disabled:d,className:"w-full h-12 bg-orange-600 hover:bg-orange-700 text-white font-medium",children:d?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Cration..."]}):"Crer mon mot de passe"})]}),i.jsx("p",{className:"text-center text-sm text-gray-400 mt-8",children:"Accs rserv aux partenaires agrs"})]}),!m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qg,{className:"w-8 h-8 text-orange-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Espace Partenaire"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Connectez-vous  votre compte"})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsx(pe,{id:"email",type:"email",placeholder:"partenaire@entreprise.com",value:t,onChange:N=>r(N.target.value),required:!0,disabled:o,className:"h-12"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(pe,{id:"password",type:"password",placeholder:"",value:n,onChange:N=>s(N.target.value),required:!0,disabled:o,className:"h-12"})]}),i.jsx(H,{type:"submit",disabled:o,className:"w-full h-12 bg-orange-600 hover:bg-orange-700 text-white font-medium",children:o?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),i.jsx("p",{className:"text-center text-sm text-gray-400 mt-8",children:"Accs rserv aux partenaires agrs"})]})]})})})},BS=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState([]),[o,a]=p.useState(null);p.useEffect(()=>{let m=!0;return(async()=>{try{r(!0);const{data:{user:v},error:x}=await T.auth.getUser();if(x||!v){e("/partner/login");return}const{data:b,error:y}=await T.from("partners").select("id, company_name, email, phone, active").eq("user_id",v.id).single();if(y||!b){P.warn("PartnerMissionsPage: utilisateur non-partenaire",{userId:v.id}),await T.auth.signOut(),e("/partner/login");return}if(!b.active){await T.auth.signOut(),F({title:"Compte dsactiv",description:"Votre compte partenaire est dsactiv.",variant:"destructive"}),e("/partner/login");return}if(!m)return;a(b);const{data:w,error:j}=await T.from("missions").select("*").eq("partner_id",b.id).eq("status","pending").order("created_at",{ascending:!1});if(j)throw j;if(!m)return;s(w||[])}catch(v){P.error("PartnerMissionsPage load error",{err:v.message}),F({title:"Erreur",description:"Impossible de charger les missions.",variant:"destructive"})}finally{m&&r(!1)}})(),()=>{m=!1}},[e]);const l=new Date;l.setHours(0,0,0,0);const c=n.filter(m=>m.is_blocking),u=n.filter(m=>{if(m.is_blocking)return!1;const g=new Date(m.created_at);return g.setHours(0,0,0,0),g.getTime()>=l.getTime()}),f=n.filter(m=>{if(m.is_blocking)return!1;const g=new Date(m.created_at);return g.setHours(0,0,0,0),g.getTime()<l.getTime()}),d=n.length;if(t)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx(De,{className:"w-8 h-8 text-blue-600 animate-spin"})});const h=(m,g,v,x)=>g.length===0?null:i.jsxs("div",{className:"mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${v}`}),i.jsx("span",{className:"text-xs font-bold text-gray-400 tracking-widest",children:m})]}),i.jsx("div",{className:"space-y-3",children:g.map(b=>{var j;const y=b.client_name||((j=b.title)==null?void 0:j.replace("Mission pour ",""))||"Client",w=b.description||b.step_name||"";return i.jsxs("div",{className:"flex items-center bg-gray-100/60 rounded-2xl overflow-hidden cursor-pointer active:bg-gray-200/60 transition-colors",onClick:()=>e(`/partner/missions/${b.id}`),children:[i.jsx("div",{className:`w-1.5 self-stretch ${x} rounded-l-2xl shrink-0`}),i.jsxs("div",{className:"flex-1 flex items-center gap-3 p-4 pl-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-gray-900 truncate",children:y}),i.jsx("div",{className:"text-sm text-gray-500 truncate mt-0.5",children:w})]}),i.jsx(Wn,{className:"w-4 h-4 text-gray-300 shrink-0"})]})]},b.id)})})]});return i.jsxs("div",{className:"px-4 pt-6 pb-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-black text-gray-900",children:"Missions"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Command par Charly"})]}),d>0&&i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Ud,{className:"w-6 h-6 text-gray-400"}),i.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:d})]})]}),n.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ud,{className:"w-8 h-8 text-gray-300"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"Aucune mission en cours"}),i.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Vos nouvelles missions apparatront ici."})]}):i.jsxs(i.Fragment,{children:[h("CRITIQUE",c,"bg-red-500","bg-red-500"),h("AUJOURD'HUI",u,"bg-orange-400","bg-orange-400"),h("AUTRES",f,"bg-gray-300","bg-gray-300")]})]})},jse=()=>{const{missionId:e}=fa(),t=Te(),[r,n]=p.useState(!0),[s,o]=p.useState(null),[a,l]=p.useState(null),[c,u]=p.useState({}),[f,d]=p.useState(""),[h,m]=p.useState(!1),[g,v]=p.useState({}),[x,b]=p.useState({}),[y,w]=p.useState([]);p.useEffect(()=>{let I=!0;return(async()=>{var M;try{n(!0);const{data:{user:D},error:z}=await T.auth.getUser();if(z||!D){t("/partner/login");return}const{data:B,error:q}=await T.from("partners").select("id, active").eq("user_id",D.id).single();if(q||!B){await T.auth.signOut(),t("/partner/login");return}if(!B.active){await T.auth.signOut(),t("/partner/login");return}const{data:A,error:R}=await T.from("missions").select("*").eq("id",e).single();if(R||!A){F({title:"Erreur",description:"Mission introuvable.",variant:"destructive"}),t("/partner/missions");return}if(A.partner_id!==B.id){P.warn("Accs mission non autoris",{missionId:e,userId:D.id}),await T.auth.signOut(),t("/partner/login");return}if(!I)return;o(A);const{data:$}=await T.from("prospects").select("id, name, email, phone, address").eq("id",A.prospect_id).maybeSingle();if(I&&l($||null),((M=A.form_ids)==null?void 0:M.length)>0){const{data:W}=await T.from("forms").select("*").in("form_id",A.form_ids);if(W&&I){const ve={};W.forEach(se=>{ve[se.form_id]=se}),v(ve)}const{data:V,error:re}=await T.from("client_form_panels").select("*").eq("prospect_id",A.prospect_id).eq("project_type",A.project_type).eq("filled_by_role","partner").in("form_id",A.form_ids);if(re)P.error("Erreur chargement panels partenaire",{error:re.message});else if(V&&I){const ve=V.map(Z=>({id:Z.id,panelId:Z.panel_id,prospectId:Z.prospect_id,projectType:Z.project_type,formId:Z.form_id,status:Z.status,filledByRole:Z.filled_by_role,formData:Z.form_data||{},rejectionReason:Z.rejection_reason||null,lastSubmittedAt:Z.last_submitted_at}));w(ve);const se={};ve.forEach(Z=>{Z.formData&&Object.keys(Z.formData).length>0&&(se[Z.panelId]={...Z.formData})}),Object.keys(se).length>0&&(b(se),P.debug("Drafts pr-remplis depuis panels existants",{count:Object.keys(se).length})),P.debug("Panels partenaire chargs",{count:ve.length})}}const L=A.questions||A.payload||null;if(L&&typeof L=="object"){const W={};L.forEach((V,re)=>{W[V.id||re]=V.type==="boolean"?null:V.default||""}),u(W)}}catch(D){P.error("PartnerMissionDetail load error",{err:D.message}),F({title:"Erreur",description:"Impossible de charger la mission.",variant:"destructive"}),t("/partner/missions")}finally{I&&n(!1)}})(),()=>{I=!1}},[e,t]);const j=()=>t("/partner/missions"),_=(I,O)=>{u(M=>({...M,[I]:O}))},S=(I,O,M)=>{b(D=>({...D,[I]:{...D[I]||{},[O]:M}}))},N=async I=>{var A;const{panelId:O,formId:M}=I,D=g[M],z=x[O]||{},B=(A=D==null?void 0:D.fields)==null?void 0:A.filter(R=>R.required&&!z[R.id]);if((B==null?void 0:B.length)>0)return{success:!1,error:`Champs manquants dans "${(D==null?void 0:D.title)||"Formulaire"}"`,missingFields:B};const{error:q}=await T.from("client_form_panels").update({form_data:z,status:"submitted",last_submitted_at:new Date().toISOString()}).eq("panel_id",O);return q?(console.error("UPDATE PANEL ERROR:",q),{success:!1,error:q.message}):{success:!0}},E=async()=>{try{m(!0);const I=y.filter(D=>D.status==="pending"||D.status==="rejected");if(I.length>0){for(const D of I){const z=await N(D);if(!z.success){F({title:"Formulaire incomplet",description:z.error,variant:"destructive"}),m(!1);return}}w(D=>D.map(z=>({...z,status:I.some(B=>B.panelId===z.panelId)?"submitted":z.status,formData:x[z.panelId]||z.formData})))}const O={responses:c,comment:f||null,updated_at:new Date().toISOString(),forms_submitted:y.length},{error:M}=await T.from("missions").update({status:"completed",partner_notes:JSON.stringify(O),updated_at:new Date().toISOString(),completed_at:new Date().toISOString()}).eq("id",s.id);if(M)throw M;F({title:" Mission valide",description:"Formulaires envoys et mission termine. En attente de validation admin.",className:"bg-green-500 text-white"}),t("/partner/preuves")}catch(I){P.error("PartnerMissionDetail handleValidateMission error",{err:I.message}),F({title:"Erreur",description:"Impossible de valider la mission.",variant:"destructive"})}finally{m(!1)}},C=async I=>{try{if(m(!0),I==="blocked"&&(!f||f.trim()==="")){F({title:"Commentaire requis",description:"Veuillez fournir un commentaire.",variant:"destructive"}),m(!1);return}const O={responses:c,comment:f||null,updated_at:new Date().toISOString()},M={status:I,partner_notes:JSON.stringify(O),updated_at:new Date().toISOString()};I==="completed"&&(M.completed_at=new Date().toISOString());const{error:D}=await T.from("missions").update(M).eq("id",s.id);if(D)throw D;if(I==="blocked"&&y.length>0){const z=y.map(q=>q.panelId),{error:B}=await T.from("client_form_panels").update({status:"rejected",rejection_reason:`Mission impossible  ${f}`}).in("panel_id",z);B&&P.error("Erreur mise  jour panels aprs mission impossible",{error:B.message})}F({title:" Enregistr",description:"Votre rponse a t sauvegarde.",className:"bg-green-500 text-white"}),t("/partner/preuves")}catch(O){P.error("PartnerMissionDetail save error",{err:O.message}),F({title:"Erreur",description:"Impossible d'enregistrer la mission.",variant:"destructive"})}finally{m(!1)}},k=I=>{var M;const O={name:(s==null?void 0:s.client_name)||((M=s==null?void 0:s.title)==null?void 0:M.replace("Mission pour ",""))||(a==null?void 0:a.name)||"",phone:(s==null?void 0:s.phone)||(a==null?void 0:a.phone),email:(s==null?void 0:s.email)||(a==null?void 0:a.email),address:(s==null?void 0:s.address)||(a==null?void 0:a.address)};switch(I){case"Appel":O.phone&&(window.location.href=`tel:${O.phone}`);break;case"Mail":O.email&&(window.location.href=`mailto:${O.email}`);break;case"WhatsApp":if(O.phone){const D=O.phone.replace(/[^0-9]/g,"");window.open(`https://wa.me/${D}`,"_blank")}else F({title:"Numro manquant",description:"Ce client n'a pas de numro de tlphone.",variant:"destructive"});break;case"GPS":if(O.address){const D=encodeURIComponent(O.address);/Mac|iPod|iPhone|iPad/.test(navigator.platform)?window.location.href=`maps://?q=${D}`:window.open(`https://www.google.com/maps/search/?api=1&query=${D}`,"_blank")}break}};return r?i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx(De,{className:"w-8 h-8 text-blue-600 animate-spin"})}):s?i.jsx("div",{className:"px-4 pt-4 pb-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("header",{className:"mb-6 flex items-center gap-4",children:[i.jsx(H,{variant:"ghost",onClick:j,className:"p-2",children:i.jsx(uy,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.title}),i.jsx("p",{className:"text-sm text-gray-500",children:s.step_name||s.project_type})]})]}),i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),i.jsx("div",{className:"flex flex-wrap justify-between gap-2 text-center",children:[{icon:Pc,label:"Appel"},{icon:en,label:"Mail"},{icon:py,label:"WhatsApp"},{icon:hy,label:"GPS"}].map(({icon:I,label:O})=>i.jsxs("button",{onClick:()=>k(O),className:"flex flex-col items-center space-x-1 transition-colors group text-gray-600 hover:text-blue-600",children:[i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gray-100 group-hover:bg-blue-100",children:i.jsx(I,{className:"h-6 w-6"})}),i.jsx("span",{className:"text-xs font-medium",children:O})]},O))})]}),i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"ORDRE EVATIME"}),i.jsx("div",{className:"mt-2 font-medium text-gray-900",children:"Instruction"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description||""})]}),y.length>0&&i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"FORMULAIRES  REMPLIR"}),i.jsx("div",{className:"mt-4 space-y-6",children:y.map(I=>{var q,A;const O=g[I.formId],M=x[I.panelId]||{},D=I.status==="submitted",z=I.status==="approved",B=I.status==="rejected";return i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.title)||"Formulaire"}),z&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:" Valid"}),D&&!z&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:" Envoy"}),B&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700",children:" Refus"}),I.status==="pending"&&i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:"  remplir"})]}),(O==null?void 0:O.description)&&i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:O.description}),B&&I.rejectionReason&&i.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-300 rounded-lg",children:[i.jsx("p",{className:"text-sm font-semibold text-red-800 mb-1",children:" Formulaire refus"}),i.jsxs("p",{className:"text-sm text-red-700",children:[i.jsx("strong",{children:"Raison :"})," ",I.rejectionReason]}),i.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Veuillez corriger et soumettre  nouveau."})]}),(D||z)&&!B&&i.jsxs("div",{className:"space-y-3",children:[(q=O==null?void 0:O.fields)==null?void 0:q.map(R=>{var L;const $=((L=I.formData)==null?void 0:L[R.id])||M[R.id]||"";return i.jsxs("div",{children:[i.jsx(Q,{className:"text-xs text-gray-500 uppercase",children:R.label}),i.jsx("p",{className:"text-sm text-gray-900 mt-1 px-3 py-2 bg-gray-50 rounded border",children:R.type==="checkbox"?$?" Oui":" Non":$||""})]},R.id)}),D&&i.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded text-center",children:i.jsx("p",{className:"text-sm text-blue-700",children:" Formulaire envoy  En attente de validation admin"})}),z&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded text-center",children:i.jsx("p",{className:"text-sm text-green-700",children:" Formulaire valid par l'admin"})})]}),(I.status==="pending"||B)&&i.jsx("div",{className:"space-y-4",children:(A=O==null?void 0:O.fields)==null?void 0:A.map(R=>{var $;return i.jsxs("div",{children:[i.jsxs(Q,{className:"mb-2 block",children:[R.label,R.required&&i.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),R.type==="text"&&i.jsx(pe,{type:"text",value:M[R.id]||"",onChange:L=>S(I.panelId,R.id,L.target.value),placeholder:R.placeholder||""}),R.type==="textarea"&&i.jsx("textarea",{value:M[R.id]||"",onChange:L=>S(I.panelId,R.id,L.target.value),placeholder:R.placeholder||"",className:"w-full px-3 py-2 border rounded min-h-[80px]"}),R.type==="select"&&i.jsxs("select",{value:M[R.id]||"",onChange:L=>S(I.panelId,R.id,L.target.value),className:"w-full px-3 py-2 border rounded",children:[i.jsx("option",{value:"",children:"-- Slectionner --"}),($=R.options)==null?void 0:$.map(L=>i.jsx("option",{value:L,children:L},L))]}),R.type==="number"&&i.jsx(pe,{type:"number",value:M[R.id]||"",onChange:L=>S(I.panelId,R.id,L.target.value),placeholder:R.placeholder||""}),R.type==="date"&&i.jsx(pe,{type:"date",value:M[R.id]||"",onChange:L=>S(I.panelId,R.id,L.target.value)}),R.type==="checkbox"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:M[R.id]||!1,onChange:L=>S(I.panelId,R.id,L.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:R.placeholder})]})]},R.id)})})]},I.panelId)})})]}),s.questions||s.payload?i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"Merci de confirmer les lments suivants"}),i.jsx("div",{className:"mt-3 space-y-3",children:(s.questions||s.payload).map((I,O)=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-medium text-gray-900",children:I.label}),I.type==="boolean"?i.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[i.jsx("button",{onClick:()=>_(I.id||O,!0),className:`px-3 py-2 rounded ${c[I.id||O]===!0?"bg-green-50 border":"bg-gray-50"}`,children:"Oui"}),i.jsx("button",{onClick:()=>_(I.id||O,!1),className:`px-3 py-2 rounded ${c[I.id||O]===!1?"bg-red-50 border":"bg-gray-50"}`,children:"Non"})]}):i.jsx("input",{type:"text",value:c[I.id||O]||"",onChange:M=>_(I.id||O,M.target.value),className:"w-full px-3 py-2 border rounded"})]},I.id||O))})]}):null,i.jsxs("section",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:[i.jsx(Q,{className:"text-xs text-gray-500",children:"Commentaire (optionnel)"}),i.jsx("textarea",{value:f,onChange:I=>d(I.target.value),className:"w-full mt-2 px-3 py-2 border rounded min-h-[80px]"}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Le commentaire devient requis si vous marquez la mission comme impossible."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(H,{variant:"ghost",onClick:()=>C("blocked"),disabled:h,className:"flex-1 border",children:"IMPOSSIBLE  RALISER"}),i.jsx(H,{onClick:E,disabled:h,className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white",children:h?"Envoi en cours...":"VALIDER LA MISSION"})]})]})}):null},_se=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState([]),[o,a]=p.useState([]),[l,c]=p.useState(""),[u,f]=p.useState(null);p.useEffect(()=>{(async()=>{try{const{data:{user:x}}=await T.auth.getUser();if(!x)return;const{data:b}=await T.from("partners").select("id").eq("user_id",x.id).single();if(!b)return;const{data:y}=await T.from("missions").select("*").eq("partner_id",b.id).order("created_at",{ascending:!1});if(a(y||[]),!(y!=null&&y.length)){s([]),r(!1);return}const w=[...new Set(y.map(_=>_.prospect_id).filter(Boolean))],{data:j}=await T.from("prospects").select("id, name, email, phone, address").in("id",w);s(j||[])}catch(x){P.error("PartnerContactsPage load error",{err:x.message})}finally{r(!1)}})()},[]);const d=n.filter(v=>{if(!l)return!0;const x=l.toLowerCase();return(v.name||"").toLowerCase().includes(x)||(v.email||"").toLowerCase().includes(x)}),h=v=>o.filter(x=>x.prospect_id===v),m=v=>{const x=h(v.id);x.length===1?e(`/partner/missions/${x[0].id}`):f(b=>b===v.id?null:v.id)},g=v=>{switch(v){case"pending":return{text:" faire",cls:"bg-orange-100 text-orange-700"};case"completed":return{text:"Valide",cls:"bg-green-100 text-green-700"};case"submitted":return{text:"En attente",cls:"bg-blue-100 text-blue-700"};case"blocked":return{text:"Refuse",cls:"bg-red-100 text-red-700"};default:return{text:v,cls:"bg-gray-100 text-gray-600"}}};return t?i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx(De,{className:"w-8 h-8 text-blue-600 animate-spin"})}):i.jsxs("div",{className:"px-4 pt-6 pb-4",children:[i.jsx("h1",{className:"text-2xl font-black text-gray-900",children:"Annuaire"}),i.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Consultation seule"}),i.jsxs("div",{className:"mt-4 relative",children:[i.jsx(Wf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Rechercher un client ou contact...",className:"w-full pl-10 pr-4 py-3 bg-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),i.jsx("div",{className:"mt-5 space-y-3",children:d.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-400",children:"Aucun contact trouv."})}):d.map(v=>{const x=(v.name||"?")[0].toUpperCase(),b=v.email||v.phone||"",y=h(v.id),w=y.length>1,j=u===v.id;return i.jsxs("div",{className:"bg-gray-100/60 rounded-2xl overflow-hidden",children:[i.jsxs("div",{onClick:()=>m(v),className:"flex items-center gap-3 p-4 cursor-pointer active:bg-gray-200/60 transition-colors",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-bold text-gray-600 shrink-0",children:x}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-gray-900 truncate",children:v.name||""}),i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide truncate",children:b})]}),w&&i.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 shrink-0",children:y.length}),w?i.jsx(Rs,{className:`w-4 h-4 text-gray-300 shrink-0 transition-transform duration-200 ${j?"rotate-180":""}`}):i.jsx(Wn,{className:"w-4 h-4 text-gray-300 shrink-0"})]}),w&&j&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:y.map(_=>{const S=g(_.status),N=_.step_name||_.description||_.project_type||"";return i.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-xl p-3 cursor-pointer active:bg-gray-50 transition-colors",onClick:()=>e(`/partner/missions/${_.id}`),children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:N})}),i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${S.cls} shrink-0`,children:S.text}),i.jsx(Wn,{className:"w-4 h-4 text-gray-300 shrink-0"})]},_.id)})})]},v.id)})})]})};function Sse(e=null,t=null,r=null){const[n,s]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState(null),u=h=>({id:h.id,sender:h.sender,channel:h.channel,text:h.text,file:h.file,formId:h.form_id,completedFormId:h.completed_form_id,promptId:h.prompt_id,stepIndex:h.step_index,relatedMessageTimestamp:h.related_message_timestamp,metadata:h.metadata||null,read:h.read,timestamp:h.created_at,createdAt:h.created_at});return p.useEffect(()=>{if(!e||!t){a(!1);return}(async()=>{try{a(!0);let v=T.from("chat_messages").select("*").eq("prospect_id",e).eq("project_type",t);r&&(v=v.eq("channel",r));const{data:x,error:b}=await v.order("created_at",{ascending:!0});if(b)throw b;const y=(x||[]).map(u);s(y),c(null)}catch(v){P.error(" Error loading chat messages:",v),c(v.message)}finally{a(!1)}})();const m=r?`-${r}`:"-all",g=T.channel(`chat-${e}-${t}${m}-${Math.random().toString(36).slice(2)}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_messages",filter:`prospect_id=eq.${e}`},v=>{if(!(v.new&&v.new.project_type!==t)&&!(r&&v.new&&v.new.channel!==r))if(v.eventType==="INSERT"){const x=u(v.new);s(b=>b.some(y=>y.id===x.id)?b:[...b,x])}else if(v.eventType==="UPDATE"){const x=u(v.new);s(b=>b.map(y=>y.id===x.id?x:y))}else v.eventType==="DELETE"&&s(x=>x.filter(b=>b.id!==v.old.id))}).subscribe();return()=>{T.removeChannel(g)}},[e,t,r]),{messages:n,loading:o,error:l,sendMessage:async h=>{try{if(n.some(b=>h.promptId?b.promptId===h.promptId&&b.stepIndex===h.stepIndex&&b.text===h.text&&b.sender===h.sender:h.completedFormId?b.completedFormId===h.completedFormId&&b.sender===h.sender&&b.relatedMessageTimestamp===h.relatedMessageTimestamp:!1))return{success:!0,duplicate:!0};const g={prospect_id:e,project_type:t,sender:h.sender,text:h.text||null,file:h.file||null,form_id:h.formId||null,completed_form_id:h.completedFormId||null,prompt_id:h.promptId||null,step_index:h.stepIndex!==void 0?h.stepIndex:null,related_message_timestamp:h.relatedMessageTimestamp||null,channel:h.channel||r||"client",metadata:h.metadata||null,read:!1},{data:v,error:x}=await T.from("chat_messages").insert([g]).select().single();if(x)throw x;return{success:!0,data:u(v)}}catch(m){return P.error(" Error sending message:",m),{success:!1,error:m.message}}},markAsRead:async h=>{try{const{error:m}=await T.from("chat_messages").update({read:!0}).in("id",h);if(m)throw m;return{success:!0}}catch(m){return P.error(" Error marking messages as read:",m),{success:!1,error:m.message}}}}}const Nse=({prospectId:e,projectType:t,prospectName:r,onBack:n})=>{const{messages:s,loading:o,sendMessage:a,markAsRead:l}=Sse(e,t,"partner"),[c,u]=p.useState(""),[f,d]=p.useState(!1),h=p.useRef(null);p.useEffect(()=>{requestAnimationFrame(()=>{var g;(g=h.current)==null||g.scrollIntoView({behavior:"smooth",block:"end"})})},[s]),p.useEffect(()=>{if(!s.length)return;const g=s.filter(v=>v.sender!=="partner"&&!v.read).map(v=>v.id);g.length>0&&l(g)},[s]);const m=async()=>{if(!(!c.trim()||f)){d(!0);try{(await a({sender:"partner",channel:"partner",text:c.trim()})).success?u(""):F({title:"Erreur",description:"Message non envoy.",variant:"destructive"})}catch(g){P.error("PartnerCharlyPage: erreur envoi message",{err:g.message}),F({title:"Erreur",description:g.message,variant:"destructive"})}finally{d(!1)}}};return i.jsxs("div",{className:"flex flex-col h-full min-h-[calc(100vh-5rem)]",children:[i.jsxs("div",{className:"px-4 pt-4 pb-3 flex items-center gap-3 border-b border-gray-200",children:[i.jsx("button",{onClick:n,className:"p-1.5 rounded-full hover:bg-gray-100 transition-colors",children:i.jsx(uy,{className:"w-5 h-5 text-gray-600"})}),i.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-900 flex items-center justify-center text-white font-bold text-sm",children:"C"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-sm font-bold text-gray-900 truncate",children:r}),i.jsx("p",{className:"text-xs text-blue-600 font-semibold uppercase tracking-wide",children:t})]})]}),i.jsxs("div",{className:"flex-1 px-4 py-4 overflow-y-auto",children:[o?i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx(De,{className:"w-6 h-6 animate-spin text-gray-400"})}):s.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-400",children:[i.jsx(py,{className:"w-10 h-10 mb-2"}),i.jsx("p",{className:"text-sm",children:"Aucun message. Commencez la conversation !"})]}):s.map(g=>{const v=g.sender==="partner";return i.jsxs("div",{className:`flex items-end gap-2 mb-3 ${v?"justify-end":"justify-start"}`,children:[!v&&i.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-900 flex items-center justify-center text-white text-xs font-bold shrink-0",children:"C"}),i.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2.5 ${v?"bg-blue-600 text-white rounded-br-none":"bg-gray-100 text-gray-900 rounded-bl-none"}`,children:[i.jsx("p",{className:"text-sm leading-relaxed",children:g.text}),i.jsx("p",{className:`text-xs mt-1 ${v?"text-blue-200":"text-gray-400"}`,children:GH(new Date(g.timestamp),{addSuffix:!0,locale:AG})})]}),v&&i.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center text-white text-xs font-bold shrink-0",children:"P"})]},g.id)}),i.jsx("div",{ref:h})]}),i.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100",children:i.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-full px-4 py-2",children:[i.jsx("input",{type:"text",value:c,onChange:g=>u(g.target.value),onKeyDown:g=>g.key==="Enter"&&m(),placeholder:"crire au bureau...",className:"flex-1 bg-transparent text-sm focus:outline-none",disabled:f}),i.jsx("button",{onClick:m,disabled:f||!c.trim(),className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center text-white shrink-0 disabled:opacity-40 transition-opacity",children:f?i.jsx(De,{className:"w-4 h-4 animate-spin"}):i.jsx(cP,{className:"w-4 h-4"})})]})})]})},Ese=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState([]),[o,a]=p.useState(null);return p.useEffect(()=>{let l=!0;return(async()=>{try{r(!0);const{data:{user:u},error:f}=await T.auth.getUser();if(f||!u){e("/partner/login");return}const{data:d,error:h}=await T.from("partners").select("id, active").eq("user_id",u.id).single();if(h||!d||!d.active){e("/partner/login");return}const{data:m,error:g}=await T.from("missions").select("id, prospect_id, project_type, title, status, client_name, step_name, created_at").eq("partner_id",d.id).in("status",["pending","in_progress"]).order("created_at",{ascending:!1});if(g)throw g;if(!l)return;const v=new Set,x=[];for(const y of m||[]){const w=`${y.prospect_id}__${y.project_type}`;v.has(w)||(v.add(w),x.push({prospectId:y.prospect_id,projectType:y.project_type,prospectName:y.client_name||"Client",stepName:y.step_name,missionTitle:y.title,missionId:y.id,status:y.status}))}const b=await Promise.all(x.map(async y=>{const{count:w,error:j}=await T.from("chat_messages").select("id",{count:"exact",head:!0}).eq("prospect_id",y.prospectId).eq("project_type",y.projectType).eq("channel","partner").neq("sender","partner").eq("read",!1);return{...y,unreadCount:j?0:w||0}}));s(b)}catch(u){P.error("PartnerCharlyPage load error",{err:u.message}),F({title:"Erreur",description:"Impossible de charger les conversations.",variant:"destructive"})}finally{l&&r(!1)}})(),()=>{l=!1}},[e,o]),o?i.jsx(Nse,{prospectId:o.prospectId,projectType:o.projectType,prospectName:o.prospectName,onBack:()=>a(null)}):i.jsxs("div",{className:"flex flex-col h-full min-h-[calc(100vh-5rem)]",children:[i.jsxs("div",{className:"px-4 pt-6 pb-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-900 flex items-center justify-center text-white font-bold text-sm",children:"C"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Charly"}),i.jsx("p",{className:"text-xs text-blue-600 font-bold tracking-wide uppercase",children:"Assistant Direction"})]})]}),i.jsx("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:t?i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx(De,{className:"w-6 h-6 animate-spin text-gray-400"})}):n.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:[i.jsx(py,{className:"w-12 h-12 mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:"Aucune conversation active"}),i.jsx("p",{className:"text-xs mt-1",children:"Les conversations apparatront ici quand vous aurez des missions."})]}):i.jsx("div",{className:"space-y-2",children:n.map(l=>i.jsxs("button",{onClick:()=>a(l),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white border border-gray-200 hover:border-gray-300 hover:shadow-sm transition-all text-left",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-bold text-sm shrink-0",children:l.prospectName.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:l.prospectName}),l.unreadCount>0&&i.jsx("span",{className:"bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shrink-0",children:l.unreadCount})]}),i.jsxs("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:[l.projectType," ",l.stepName?` ${l.stepName}`:""]})]}),i.jsx(Wn,{className:"w-4 h-4 text-gray-400 shrink-0"})]},`${l.prospectId}-${l.projectType}`))})})]})},Cse=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState([]),[o,a]=p.useState({submitted:!0,completed:!1,blocked:!1});p.useEffect(()=>{(async()=>{try{const{data:{user:v}}=await T.auth.getUser();if(!v)return;const{data:x}=await T.from("partners").select("id").eq("user_id",v.id).single();if(!x)return;const{data:b}=await T.from("missions").select("*").eq("partner_id",x.id).in("status",["completed","blocked","submitted"]).order("updated_at",{ascending:!1});s(b||[])}catch(v){P.error("PartnerProofsPage load error",{err:v.message})}finally{r(!1)}})()},[]);const l=g=>{a(v=>({...v,[g]:!v[g]}))};if(t)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx(De,{className:"w-8 h-8 text-blue-600 animate-spin"})});const c=n.filter(g=>g.status==="submitted"),u=n.filter(g=>g.status==="completed"),f=n.filter(g=>g.status==="blocked"),d=n.length===0,h=[{key:"submitted",label:"En attente de validation",count:c.length,items:c,dotColor:"bg-orange-500",badgeBg:"bg-orange-100",badgeText:"text-orange-700",icon:Vd,iconColor:"text-orange-500"},{key:"completed",label:"Valides",count:u.length,items:u,dotColor:"bg-green-500",badgeBg:"bg-green-100",badgeText:"text-green-700",icon:Uf,iconColor:"text-green-500"},{key:"blocked",label:"Refuses",count:f.length,items:f,dotColor:"bg-red-500",badgeBg:"bg-red-100",badgeText:"text-red-700",icon:my,iconColor:"text-red-500"}],m=(g,v)=>{var y;const x=g.client_name||((y=g.title)==null?void 0:y.replace("Mission pour ",""))||"Client",b=g.step_name||g.project_type||"";return i.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-xl p-3 cursor-pointer active:bg-gray-50 transition-colors",onClick:()=>e(`/partner/missions/${g.id}`),children:[i.jsx("div",{className:`w-9 h-9 rounded-full ${v.badgeBg} flex items-center justify-center shrink-0`,children:i.jsx(v.icon,{className:`w-4 h-4 ${v.iconColor}`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:x}),b&&i.jsx("div",{className:"text-xs text-gray-400 truncate mt-0.5",children:b})]}),i.jsx(Wn,{className:"w-4 h-4 text-gray-300 shrink-0"})]},g.id)};return i.jsxs("div",{className:"px-4 pt-6 pb-4",children:[i.jsx("h1",{className:"text-2xl font-black text-gray-900",children:"Registre"}),d?i.jsxs("div",{className:"text-center py-16",children:[i.jsx(Vd,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-400",children:"Aucune preuve pour le moment."}),i.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Vos missions soumises apparatront ici."})]}):i.jsx("div",{className:"mt-5 space-y-3",children:h.map(g=>{const v=o[g.key];return i.jsxs("div",{className:"bg-gray-100/60 rounded-2xl overflow-hidden",children:[i.jsxs("button",{onClick:()=>l(g.key),className:"w-full flex items-center justify-between px-5 py-5 active:bg-gray-200/60 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`w-3 h-3 rounded-full ${g.dotColor}`}),i.jsx("span",{className:"text-base font-semibold text-gray-900",children:g.label})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("span",{className:`text-sm font-bold px-2.5 py-1 rounded-full ${g.badgeBg} ${g.badgeText}`,children:g.count}),i.jsx(Rs,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${v?"rotate-180":""}`})]})]}),v&&g.items.length>0&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:g.items.map(x=>m(x,g))}),v&&g.items.length===0&&i.jsx("div",{className:"px-4 pb-4 text-center",children:i.jsx("p",{className:"text-xs text-gray-400",children:"Aucune mission dans cette catgorie."})})]},g.key)})})]})},zS=()=>{var c;const{currentUser:e}=Ve(),[t,r]=p.useState(!1),n={filleuls:4,confirmes:3,gainsCumules:300},s=`https://evatime.fr/inscription/${((c=e==null?void 0:e.name)==null?void 0:c.replace(/\s+/g,"-"))||"Jack-Luc"}`,o=[{id:1,filleul:"Sophie Martin",statut:"En attente",gain:null,date:"06/11/2025",badgeColor:"bg-yellow-100 text-yellow-700"},{id:2,filleul:"Julien Dubois",statut:"Confirm",gain:100,date:"02/11/2025",badgeColor:"bg-green-100 text-green-700"},{id:3,filleul:"Alexandre Petit",statut:"Confirm",gain:100,date:"28/10/2025",badgeColor:"bg-green-100 text-green-700"}],a=()=>{navigator.clipboard.writeText(s),r(!0),F({title:"Lien copi !",description:"Le lien de parrainage a t copi dans le presse-papier.",className:"bg-green-500 text-white"}),setTimeout(()=>r(!1),2e3)},l=()=>{F({title:"Invitation",description:"Fonctionnalit d'invitation  venir..."})};return i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[i.jsxs("div",{className:"relative bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-xl overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]"}),i.jsxs("div",{className:"relative grid grid-cols-1 lg:grid-cols-[1fr_auto] gap-8 p-8 lg:p-12 items-center",children:[i.jsxs("div",{className:"text-white space-y-6",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium",children:[i.jsx(ev,{className:"h-5 w-5"}),"Programme de parrainage"]}),i.jsx("h1",{className:"text-4xl lg:text-5xl font-bold leading-tight",children:"Gagnez de l'argent en recommandant nos services ! "}),i.jsxs("p",{className:"text-xl text-blue-100 leading-relaxed",children:["Chaque ami que vous parrainez vous rapporte"," ",i.jsx("span",{className:"font-bold text-yellow-300 text-2xl",children:"100 "})," ","et lui offre galement"," ",i.jsx("span",{className:"font-bold text-yellow-300 text-2xl",children:"100 "})," de rduction.",i.jsx("br",{}),i.jsx("span",{className:"text-white font-semibold mt-2 block",children:"C'est gagnant-gagnant ! "})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[i.jsxs(H,{onClick:l,size:"lg",className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold shadow-lg hover:shadow-xl transition-all",children:[i.jsx(bl,{className:"h-5 w-5 mr-2"}),"Inviter un ami maintenant"]}),i.jsx(H,{onClick:a,size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 font-semibold",children:t?i.jsxs(i.Fragment,{children:[i.jsx($n,{className:"h-5 w-5 mr-2"}),"Lien copi !"]}):i.jsxs(i.Fragment,{children:[i.jsx(dj,{className:"h-5 w-5 mr-2"}),"Copier mon lien"]})})]})]}),i.jsx("div",{className:"hidden lg:block flex-shrink-0",children:i.jsx("img",{src:"https://ik.imagekit.io/bqla7nrgyf/ChatGPT%20Image%206%20nov.%202025%20a%CC%80%2017_33_52.png.webp?updatedAt=1762764615950",alt:"Programme de parrainage",className:"w-80 h-auto object-contain drop-shadow-2xl"})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[i.jsx(T3,{className:"h-6 w-6 text-green-600"}),"Vos performances de parrainage"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ae.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 text-center border-2 border-blue-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(Eo,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-blue-700 mb-2 uppercase tracking-wide",children:"Filleuls inscrits"}),i.jsx("p",{className:"text-5xl font-extrabold text-blue-900 mb-1",children:n.filleuls}),i.jsx("p",{className:"text-xs text-blue-600",children:"personnes invites"})]}),i.jsxs(ae.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 text-center border-2 border-green-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx($n,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-green-700 mb-2 uppercase tracking-wide",children:"Parrainages confirms"}),i.jsx("p",{className:"text-5xl font-extrabold text-green-900 mb-1",children:n.confirmes}),i.jsx("p",{className:"text-xs text-green-600",children:"souscriptions valides"})]}),i.jsxs(ae.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-6 text-center border-2 border-yellow-200 cursor-pointer",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(ev,{className:"h-8 w-8 text-white"})}),i.jsx("p",{className:"text-sm font-medium text-yellow-700 mb-2 uppercase tracking-wide",children:"Revenus gnrs"}),i.jsxs("p",{className:"text-5xl font-extrabold text-yellow-900 mb-1",children:[n.gainsCumules," "]}),i.jsx("p",{className:"text-xs text-yellow-600",children:"total des gains"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Votre lien de parrainage unique"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(pe,{value:s,readOnly:!0,className:"flex-1 bg-gray-50 border-gray-200"}),i.jsx(H,{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white",children:t?i.jsxs(i.Fragment,{children:[i.jsx($n,{className:"h-4 w-4 mr-2"}),"Copi"]}):i.jsxs(i.Fragment,{children:[i.jsx(dj,{className:"h-4 w-4 mr-2"}),"Copier le lien"]})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Suivi de vos parrainages"}),i.jsxs(H,{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(bl,{className:"h-4 w-4 mr-2"}),"Inviter un ami"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Filleul"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Statut"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Gain"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Date"})]})}),i.jsx("tbody",{children:o.map(u=>i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:u.filleul}),i.jsx("td",{className:"py-4 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${u.badgeColor}`,children:u.statut})}),i.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:u.gain?`+${u.gain} `:""}),i.jsx("td",{className:"py-4 px-4 text-gray-600",children:u.date})]},u.id))})]})})]})]})},US=({title:e,children:t})=>i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl shadow-card",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:e}),i.jsx("div",{className:"space-y-6",children:t})]}),qm=()=>{const e=nr();Te();const{currentUser:t,setCurrentUser:r,updateProspect:n}=Ve(),s=e.pathname.includes("/profil"),[o,a]=p.useState({name:"",companyName:"",email:"",phone:"",address:""});p.useEffect(()=>{t&&a({name:t.name||"",companyName:t.companyName||"",email:t.email||"",phone:t.phone||"",address:t.address||""})},[t]);const l=m=>{const{id:g,value:v}=m.target;a(x=>({...x,[g]:v}))},c=async()=>{if(t)try{const m=await n({id:t.id,name:o.name,email:o.email,phone:o.phone,company:o.companyName,address:o.address});if(m&&m.length>0){const g=m[0],v={id:g.id,name:g.name,email:g.email,phone:g.phone,companyName:g.company_name,address:g.address,tags:g.tags||[],userId:g.user_id,ownerId:g.owner_id,status:g.status,hasAppointment:g.has_appointment,affiliateName:g.affiliate_name,formData:g.form_data||{},createdAt:g.created_at,updatedAt:g.updated_at};r(v)}F({title:"Profil mis a jour !",description:"Vos informations ont ete enregistrees avec succes.",className:"bg-green-100 border-green-300 text-green-800"})}catch(m){P.error("Erreur sauvegarde profil:",m),F({title:"Erreur",description:"Impossible de sauvegarder les modifications.",variant:"destructive"})}},u=()=>{F({title:'Sauvegarde des "Prfrences de notifications"...',description:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},f=()=>{T.auth.signOut(),window.location.href="/"},d=s?"Mon Profil":"Paramtres",h=s?"Grez vos informations personnelles et vos prfrences.":"Grez les paramtres de l'application.";return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:d}),i.jsx("p",{className:"text-gray-600 mt-1",children:h})]}),i.jsxs(US,{title:"Informations Personnelles",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Tc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"name",type:"text",placeholder:"Jack Dupont",className:"pl-10",value:o.name,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",children:"Socit"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Zg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"companyName",type:"text",placeholder:"Nom de votre socit",className:"pl-10",value:o.companyName,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Adresse e-mail"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(en,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"email",type:"email",placeholder:"jack.dupont@email.com",className:"pl-10",value:o.email,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"phone",children:"Tlphone"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Pc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"phone",type:"tel",placeholder:"06 12 34 56 78",className:"pl-10",value:o.phone,onChange:l})]})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"address",children:"Adresse"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(hy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"address",type:"text",placeholder:"123 Rue de Paris, 75001 Paris",className:"pl-10",value:o.address,onChange:l})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 sm:gap-4 mt-6 pt-6 border-t",children:[i.jsxs(qc,{children:[i.jsx(yh,{asChild:!0,children:i.jsxs(H,{variant:"destructive",children:[i.jsx(S3,{className:"mr-2 h-4 w-4"}),"Se dconnecter"]})}),i.jsxs(va,{children:[i.jsxs(xa,{children:[i.jsx(ba,{children:"Confirmer la dconnexion"}),i.jsx(wa,{children:"tes-vous sr de vouloir vous dconnecter ? Vous recevrez un nouveau lien scuris pour vous reconnecter."})]}),i.jsxs(ya,{children:[i.jsx(_a,{children:"Annuler"}),i.jsx(ja,{onClick:f,className:"bg-red-600 hover:bg-red-700",children:"Se dconnecter"})]})]})]}),i.jsx(H,{onClick:c,className:"bg-green-600 hover:bg-green-700",children:"Enregistrer les modifications"})]})]}),i.jsxs(US,{title:"Prfrences de notifications",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Choisissez comment nous pouvons vous contacter pour les mises  jour importantes de vos projets."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[i.jsx(rr,{id:"notif-email",defaultChecked:!0}),i.jsxs("div",{className:"grid gap-1.5 leading-none",children:[i.jsx("label",{htmlFor:"notif-email",className:"font-medium cursor-pointer",children:"Par e-mail"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les notifications directement dans votre bote de rception."})]})]}),i.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[i.jsx(rr,{id:"notif-sms"}),i.jsxs("div",{className:"grid gap-1.5 leading-none",children:[i.jsx("label",{htmlFor:"notif-sms",className:"font-medium cursor-pointer",children:"Par SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes rapides sur votre tlphone."})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(H,{onClick:u,className:"w-full sm:w-auto",children:"Enregistrer les prfrences"})})]})]})},Pse=({project:e,projectStatus:t})=>{var f;const{currentUser:r,setCurrentUser:n,updateProspect:s}=Ve(),o=Te(),a=((f=r==null?void 0:r.tags)==null?void 0:f.includes(e.type))||!1,l=a&&(t==="abandon"||t==="archive"),c=async()=>{if(r!=null&&r.id)try{const{error:d}=await T.from("project_infos").upsert({prospect_id:r.id,project_type:e.type,status:"actif",data:{}},{onConflict:"prospect_id,project_type"});if(d)throw d;await T.from("project_history").insert({prospect_id:r.id,project_type:e.type,event_type:"status",description:"Projet ractiv par le client"}),F({title:"Projet ractiv ! ",description:`Le projet "${e.clientTitle}" est de nouveau actif dans votre tableau de bord.`,className:"bg-green-500 text-white"}),setTimeout(()=>window.location.reload(),1e3)}catch(d){P.error("Erreur ractivation:",d),F({title:"Erreur",description:"Impossible de ractiver le projet.",variant:"destructive"})}},u=async()=>{if(a&&!l){o("/dashboard",{state:{openProjectType:e.type}});return}if(!(r!=null&&r.id)){F({title:"Erreur",description:"Vous devez tre connect pour ajouter un projet.",variant:"destructive"});return}try{const d=[...r.tags||[],e.type];if(await s({id:r.id,tags:d}),e.steps&&e.steps.length>0){const h=JSON.parse(JSON.stringify(e.steps));h[0].status="in_progress";const{data:m,error:g}=await T.from("prospects").select("organization_id").eq("id",r.id).single();if(g||!(m!=null&&m.organization_id)){P.error("Organization introuvable pour le prospect:",{prospectId:r.id,error:g==null?void 0:g.message});return}const{error:v}=await T.from("project_steps_status").upsert({prospect_id:r.id,project_type:e.type,organization_id:m.organization_id,steps:h,updated_at:new Date().toISOString()},{onConflict:"prospect_id,project_type"});v&&P.error(" Erreur initialisation steps:",v),await new Promise(x=>setTimeout(x,500))}n({...r,tags:d}),F({title:"Projet ajout avec succs ! ",description:`Le projet "${e.clientTitle}" est maintenant dans votre tableau de bord.`}),o("/dashboard",{state:{openProjectType:e.type}})}catch(d){P.error("Erreur ajout projet:",d),F({title:"Erreur",description:"Impossible d'ajouter le projet. Veuillez ressayer.",variant:"destructive"})}};return i.jsxs(ae.div,{className:"bg-white rounded-3xl shadow-soft overflow-hidden flex flex-col",whileHover:{y:-5},children:[i.jsx("div",{className:"h-48 w-full bg-gray-100 flex items-center justify-center",children:e.coverImage?i.jsx("img",{src:e.coverImage,alt:e.clientTitle,className:"w-full h-full object-cover"}):i.jsx(dP,{className:"h-16 w-16 text-gray-300"})}),i.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.clientTitle}),i.jsx("p",{className:"text-gray-600 text-sm flex-grow mb-6",children:e.clientDescription||"Ce nouveau projet est disponible. Ajoutez-le  votre tableau de bord pour en savoir plus."}),l?i.jsxs(H,{onClick:c,className:"w-full mt-auto rounded-xl bg-orange-500 hover:bg-orange-600 text-white",size:"lg",children:[i.jsx(qf,{className:"mr-2 h-4 w-4"})," Ractiver ce projet"]}):i.jsx(H,{onClick:u,className:`w-full mt-auto rounded-xl ${a?"bg-blue-500 hover:bg-blue-600 text-white":"gradient-green hover:opacity-90"}`,size:"lg",children:a?" Voir le projet":e.ctaText||" Ajouter ce projet"})]})]})},VS=()=>{const{projectsData:e,currentUser:t}=Ve(),[r,n]=p.useState({});p.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)||!(t!=null&&t.tags)||t.tags.length===0)return;const{data:a}=await T.from("project_infos").select("project_type, status").eq("prospect_id",t.id).in("project_type",t.tags);if(a){const l={};a.forEach(c=>{l[c.project_type]=c.status||"actif"}),n(l)}})()},[t]);const s=Object.values(e).filter(o=>o.isPublic);return i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Dcouvrez nos offres exclusives "}),i.jsx("p",{className:"text-gray-600 mt-2 max-w-2xl mx-auto",children:"Choisissez lopportunit qui vous correspond et suivez-la directement dans votre Tableau de bord."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(o=>i.jsx(Pse,{project:o,projectStatus:r[o.type]||"actif"},o.type))})]})},Tse=()=>{const e=Te(),{setCurrentUser:t}=Ve(),[r,n]=p.useState("loading"),[s,o]=p.useState("Activation de votre compte...");return p.useEffect(()=>{(async()=>{try{const l=window.location.hash;if(!l||l.length===0){console.warn(" Aucun fragment trouv dans l'URL"),n("error"),o("Lien invalide. Veuillez demander un nouveau lien d'invitation.");return}const c=l.startsWith("#")?l.slice(1):l,u=new URLSearchParams(c),f=u.get("access_token"),d=u.get("refresh_token");if(!f){logger.error(" Pas d'access_token dans le fragment"),n("error"),o("Lien invalide ou expir. Veuillez demander un nouveau lien.");return}const{data:h,error:m}=await T.auth.setSession({access_token:f,refresh_token:d||""});if(m){logger.error(" Erreur setSession:",m),n("error"),o("Erreur lors de la connexion. Le lien a peut-tre expir.");return}window.history.replaceState({},document.title,window.location.pathname+window.location.search);const g=h.user;if(!g){n("error"),o("Erreur: utilisateur non trouv aprs authentification.");return}const{data:v,error:x}=await T.from("prospects").select("*").eq("email",g.email).is("user_id",null);if(x)throw logger.error("Erreur recherche prospect:",x),x;if(!v||v.length===0){const{data:_,error:S}=await T.from("prospects").select("*").eq("user_id",g.id).single();if(_){const N={id:_.id,userId:_.user_id,name:_.name,email:_.email,phone:_.phone,company:_.company_name,address:_.address,tags:_.tags||[],status:_.status,ownerId:_.owner_id,hasAppointment:_.has_appointment};t(N),n("success"),o("Connexion reussie !"),setTimeout(()=>{e("/dashboard")},1500);return}n("error"),o("Aucun compte trouve avec cet email. Contactez votre conseiller.");return}const b=v[0],{data:y,error:w}=await T.from("prospects").update({user_id:g.id}).eq("id",b.id).select().single();if(w)throw logger.error("Erreur mise a jour prospect:",w),w;const j={id:y.id,userId:y.user_id,name:y.name,email:y.email,phone:y.phone,company:y.company_name,address:y.address,tags:y.tags||[],status:y.status,ownerId:y.owner_id,hasAppointment:y.has_appointment};t(j),n("success"),o("Compte active avec succes ! Redirection..."),F({title:"Bienvenue !",description:"Votre compte a ete active avec succes.",className:"bg-green-500 text-white"}),setTimeout(()=>{e("/dashboard")},2e3)}catch(l){logger.error("Erreur activation:",l),n("error"),o("Une erreur est survenue. Veuillez reessayer.")}})()},[e,t]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[r==="loading"&&i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"h-16 w-16 text-blue-500 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Activation en cours..."}),i.jsx("p",{className:"text-gray-600",children:s})]}),r==="success"&&i.jsxs(i.Fragment,{children:[i.jsx(Uf,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Activation reussie !"}),i.jsx("p",{className:"text-gray-600",children:s})]}),r==="error"&&i.jsxs(i.Fragment,{children:[i.jsx(my,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur d'activation"}),i.jsx("p",{className:"text-gray-600 mb-4",children:s}),i.jsx("button",{onClick:()=>e("/"),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition",children:"Retour a l'accueil"})]})]})})},kse=()=>{const e=Te(),{setActiveAdminUser:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,b]=p.useState("");p.useEffect(()=>{const _=window.location.hash,S=_.includes("access_token")||_.includes("type=invite");if(P.info(" ActivateAccountPage - Vrification du flow invitation",{hash:_.substring(0,50)+"...",isInviteFlow:S}),S){const{data:{subscription:N}}=T.auth.onAuthStateChange(async(C,k)=>{C==="SIGNED_IN"&&k?await y(k):C==="TOKEN_REFRESHED"&&k&&await y(k)}),E=setTimeout(async()=>{P.warn(" Timeout - vrification manuelle de la session");const{data:{session:C}}=await T.auth.getSession();C?await y(C):(P.error(" Pas de session aprs timeout"),v(!1),m(!1))},5e3);return()=>{N.unsubscribe(),clearTimeout(E)}}else w()},[]);const y=async _=>{try{const S=_.user;if(!S||!S.email){P.error(" Pas d'utilisateur dans la session"),v(!1),m(!1);return}const{data:N,error:E}=await T.from("users").select("email, name").eq("user_id",S.id).single();if(E||!N){P.error(" Utilisateur non trouv dans table users:",E),v(!1),m(!1);return}P.info(" Session valide pour:",N.email),b(N.email),v(!0),m(!1)}catch(S){P.error(" Erreur validation session:",S),v(!1),m(!1)}},w=async()=>{try{P.info(" Vrification de la session existante...");const{data:{session:_},error:S}=await T.auth.getSession();if(S||!_){P.error(" Pas de session active:",S),v(!1),m(!1);return}await y(_)}catch(_){P.error(" Erreur vrification session:",_),v(!1),m(!1)}},j=async _=>{if(_.preventDefault(),!r||!s){F({title:"Champs manquants",description:"Veuillez remplir tous les champs.",variant:"destructive"});return}if(r.length<6){F({title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}if(r!==s){F({title:"Mots de passe diffrents",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}d(!0);try{P.info(" Mise  jour du mot de passe...");const{data:S,error:N}=await T.auth.updateUser({password:r});if(N){P.error(" Erreur updateUser:",N),F({title:"Erreur",description:"Impossible de dfinir le mot de passe. Veuillez ressayer.",variant:"destructive"}),d(!1);return}const E=S.user;if(!E){F({title:"Erreur",description:"Erreur lors de la mise  jour du compte.",variant:"destructive"}),d(!1);return}const{data:C,error:k}=await T.from("users").select("*").eq("user_id",E.id).single();if(k||!C){P.error(" Erreur rcupration donnes user:",k),F({title:"Erreur",description:"Impossible de rcuprer les informations du compte.",variant:"destructive"}),d(!1);return}F({title:"Compte activ !",description:"Votre mot de passe a t dfini. Connexion en cours...",className:"bg-green-500 text-white"});const I={id:C.id,userId:C.user_id,name:C.name,email:C.email,role:C.role,phone:C.phone,avatarUrl:C.avatar_url,managerId:C.manager_id,organizationId:C.organization_id,accessRights:C.access_rights,createdAt:C.created_at,updatedAt:C.updated_at};t(I),setTimeout(()=>{e("/admin/pipeline")},1200)}catch(S){P.error("Erreur activation compte:",S),F({title:"Erreur",description:"Une erreur est survenue. Veuillez ressayer.",variant:"destructive"}),d(!1)}};return h?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[i.jsx(De,{className:"h-16 w-16 text-blue-500 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vrification..."}),i.jsx("p",{className:"text-gray-600",children:"Veuillez patienter"})]})}):g?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center px-4",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(Uf,{className:"h-8 w-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Activation de votre compte"}),i.jsx("p",{className:"text-gray-600",children:"Bienvenue ! Dfinissez votre mot de passe pour activer votre compte professionnel."}),x&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Compte : ",i.jsx("strong",{children:x})]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Nouveau mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(pe,{id:"password",type:a?"text":"password",placeholder:"Minimum 6 caractres",required:!0,value:r,onChange:_=>n(_.target.value),className:"h-12 pr-10"}),i.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:a?i.jsx(Jl,{className:"h-5 w-5"}):i.jsx(Xl,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(pe,{id:"confirmPassword",type:c?"text":"password",placeholder:"Retapez votre mot de passe",required:!0,value:s,onChange:_=>o(_.target.value),className:"h-12 pr-10"}),i.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?i.jsx(Jl,{className:"h-5 w-5"}):i.jsx(Xl,{className:"h-5 w-5"})})]})]}),r&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-gray-600",children:"Force du mot de passe :"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=6?"bg-green-500":"bg-gray-200"}`}),i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=8?"bg-green-500":"bg-gray-200"}`}),i.jsx("div",{className:`h-1 flex-1 rounded ${r.length>=10&&/[A-Z]/.test(r)?"bg-green-500":"bg-gray-200"}`})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[r.length<6&&"Minimum 6 caractres requis",r.length>=6&&r.length<8&&"Acceptable",r.length>=8&&r.length<10&&"Bon",r.length>=10&&/[A-Z]/.test(r)&&"Excellent"]})]}),i.jsx(H,{type:"submit",disabled:f,className:"w-full h-12 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white text-lg font-semibold",children:f?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"mr-2 h-5 w-5 animate-spin"}),"Activation en cours..."]}):"Activer mon compte"})]})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Un problme ?"," ",i.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:underline font-medium",children:"Retour  la connexion"})]})})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex items-center justify-center px-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[i.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Lien invalide ou expir"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Ce lien d'activation n'est plus valide. Veuillez contacter votre administrateur pour recevoir une nouvelle invitation."}),i.jsx(H,{onClick:()=>e("/login"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Retour  la connexion"})]})})},Ase=()=>{const e=Te(),[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(!1),[u,f]=p.useState(!1),[d,h]=p.useState({companyName:"",adminEmail:"",adminName:"",adminPhone:""});p.useEffect(()=>{(async()=>{try{const{data:w,error:j}=await T.rpc("platform_list_organizations");if(j){console.error("[OrganizationsListPage] Error fetching organizations:",j),a(j.message);return}r(w||[])}catch(w){console.error("[OrganizationsListPage] Exception:",w),a(w.message)}finally{s(!1)}})()},[]);const m=y=>{e(`/platform/organizations/${y}`)},g=async y=>{if(y.preventDefault(),!d.companyName||!d.adminEmail||!d.adminName){F({title:"Erreur",description:"Le nom de l'organisation, l'email et le nom de l'administrateur sont requis",variant:"destructive"});return}try{f(!0);const w=await fetch("https://vvzxvtiyybilkswslqfn.supabase.co/functions/v1/platform_create_organization",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:d.companyName,adminEmail:d.adminEmail,adminName:d.adminName,adminPhone:d.adminPhone||null})}),j=await w.json();if(!w.ok)throw new Error(j.error||"Erreur lors de la cration");F({title:" Organisation cre !",description:"Un email d'invitation a t envoy  l'administrateur.",className:"bg-green-500 text-white"});const{data:_}=await T.rpc("platform_list_organizations");r(_||[]),c(!1),h({companyName:"",adminEmail:"",adminName:"",adminPhone:""})}catch(w){console.error("[Platform] Error creating organization:",w),F({title:"Erreur",description:w.message,variant:"destructive"})}finally{f(!1)}},v=(y,w)=>{navigator.clipboard.writeText(y).then(()=>{F({title:"Lien copi",description:`Le lien de connexion ${w} a t copi dans le presse-papiers`})}).catch(j=>{console.error("Failed to copy:",j),F({title:"Erreur",description:"Impossible de copier le lien",variant:"destructive"})})},x=y=>`https://evatime.fr/login?org=${y}`,b=y=>`https://evatime.fr/client-access?org=${y}`;return n?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-800 font-medium",children:"Erreur lors du chargement des organisations"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Organisations"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:[t.length," organisation",t.length!==1?"s":""," enregistre",t.length!==1?"s":""]})]}),i.jsxs(H,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[i.jsx(Rr,{className:"w-4 h-4"}),"Crer une organisation"]})]}),t.length===0?i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Aucune organisation trouve"})}):i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cre le"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Connexions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(y=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(y.id),children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(y.id),children:i.jsx("div",{className:"text-sm text-gray-600",children:y.slug})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:()=>m(y.id),children:i.jsx("div",{className:"text-sm text-gray-600",children:new Date(y.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:w=>{w.stopPropagation(),v(x(y.slug),"PRO")},className:"px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors",title:"Copier le lien de connexion PRO",children:" PRO"}),i.jsx("button",{onClick:w=>{w.stopPropagation(),v(b(y.slug),"CLIENT")},className:"px-3 py-1.5 text-xs font-medium text-green-700 bg-green-50 border border-green-200 rounded hover:bg-green-100 transition-colors",title:"Copier le lien de connexion CLIENT",children:" CLIENT"})]})})]},y.id))})]})}),i.jsx(vh,{open:l,onOpenChange:c,children:i.jsxs(zc,{children:[i.jsxs(Uc,{children:[i.jsx(Vc,{children:"Crer une nouvelle organisation"}),i.jsx(xh,{children:"Un email d'invitation sera envoy  l'administrateur pour dfinir son mot de passe."})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",children:"Nom de l'organisation *"}),i.jsx(pe,{id:"companyName",placeholder:"Ex: Acme Corporation",value:d.companyName,onChange:y=>h({...d,companyName:y.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminEmail",children:"Email administrateur *"}),i.jsx(pe,{id:"adminEmail",type:"email",placeholder:"admin@example.com",value:d.adminEmail,onChange:y=>h({...d,adminEmail:y.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminName",children:"Nom de l'administrateur *"}),i.jsx(pe,{id:"adminName",placeholder:"Jean Dupont",value:d.adminName,onChange:y=>h({...d,adminName:y.target.value}),disabled:u,required:!0})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminPhone",children:"Tlphone (optionnel)"}),i.jsx(pe,{id:"adminPhone",type:"tel",placeholder:"06 12 34 56 78",value:d.adminPhone,onChange:y=>h({...d,adminPhone:y.target.value}),disabled:u})]}),i.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:u,children:"Annuler"}),i.jsx(H,{type:"submit",disabled:u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Cration..."]}):"Crer l'organisation"})]})]})]})})]})},Rse=()=>{const{id:e}=fa(),t=Te(),[r,n]=p.useState(null),[s,o]=p.useState([]),[a,l]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(!0),[h,m]=p.useState(null),[g,v]=p.useState(!1),[x,b]=p.useState(null),[y,w]=p.useState(!1),[j,_]=p.useState(""),[S,N]=p.useState(""),[E,C]=p.useState(!1),[k,I]=p.useState("");p.useState(!1);const[O,M]=p.useState(null),[D,z]=p.useState(null),[B,q]=p.useState(!1),A=async()=>{try{const{data:U,error:ee}=await T.rpc("platform_get_organization_detail",{p_org_id:e});if(ee){console.error("[OrganizationDetailPage] RPC error:",ee),m(ee.message);return}if(U!=null&&U.error){console.error("[OrganizationDetailPage] RPC returned error:",U.error),m(U.error);return}n(U.organization||null),o(U.domains||[]),l(U.settings||null),U.organization&&(_(U.organization.pricing_plan||""),N(U.organization.monthly_price_reference||""),I(U.organization.evatime_load!==null?String(U.organization.evatime_load):""),M(U.organization.evatime_load_estimated),z(U.organization.evatime_load_score));const{data:ce,error:_e}=await T.rpc("platform_get_org_kpis",{p_org_id:e});!_e&&ce&&!ce.error&&u(ce)}catch(U){console.error("[OrganizationDetailPage] Exception:",U),m(U.message)}finally{d(!1)}};p.useEffect(()=>{A()},[e]);const R=()=>{t("/platform")},$=U=>{b(U),v(!0)},L=async()=>{if(!x)return;w(!0);const U=x==="suspend"?"suspended":"active";try{const{data:ee,error:ce}=await T.rpc("platform_set_org_status",{p_org_id:e,p_status:U});if(ce){console.error("[OrganizationDetailPage] Status change RPC error:",ce),F({title:"Erreur",description:ce.message,variant:"destructive"});return}if(ee!=null&&ee.error){F({title:"Erreur",description:ee.error,variant:"destructive"});return}F({title:x==="suspend"?"Organisation suspendue":"Organisation ractive",description:`L'organisation a t ${x==="suspend"?"suspendue":"ractive"} avec succs.`}),await A()}catch(ee){console.error("[OrganizationDetailPage] Status change exception:",ee),F({title:"Erreur",description:ee.message,variant:"destructive"})}finally{w(!1),v(!1),b(null)}},W=async()=>{C(!0);try{const{data:U,error:ee}=await T.rpc("platform_update_org_pricing",{p_org_id:e,p_pricing_plan:j||null,p_monthly_price:S?parseInt(S,10):null});if(ee){console.error("[OrganizationDetailPage] Pricing update RPC error:",ee),F({title:"Erreur",description:ee.message,variant:"destructive"});return}if(U!=null&&U.error){F({title:"Erreur",description:U.error,variant:"destructive"});return}F({title:"Pricing mis  jour",description:"Les informations de pricing ont t enregistres."}),await A()}catch(U){console.error("[OrganizationDetailPage] Pricing update exception:",U),F({title:"Erreur",description:U.message,variant:"destructive"})}finally{C(!1)}},V=async()=>{q(!0);try{const{data:U,error:ee}=await T.rpc("platform_calculate_evatime_load",{p_org_id:e});if(ee){console.error("[OrganizationDetailPage] Calculate load RPC error:",ee),F({title:"Erreur",description:ee.message,variant:"destructive"});return}if(U!=null&&U.error){F({title:"Erreur",description:U.error,variant:"destructive"});return}M(U.load),z(U.score),F({title:"Charge recalcule",description:`Score: ${U.score}  Niveau: ${U.load}`})}catch(U){console.error("[OrganizationDetailPage] Calculate load exception:",U),F({title:"Erreur",description:U.message,variant:"destructive"})}finally{q(!1)}},re=U=>{switch(U){case 0:return{emoji:"",label:"Lger",color:"bg-green-100 text-green-800"};case 1:return{emoji:"",label:"Normal",color:"bg-yellow-100 text-yellow-800"};case 2:return{emoji:"",label:"Complexe",color:"bg-orange-100 text-orange-800"};case 3:return{emoji:"",label:"Critique",color:"bg-red-100 text-red-800"};default:return{emoji:"",label:"Non calcul",color:"bg-gray-100 text-gray-600"}}},se=(()=>{if(O!=null)return O;if(!c)return null;const U=(c.admins||0)*2+(c.prospects||0)+(c.forms_pending||0)*5;return U<=15?0:U<=40?1:U<=70?2:3})(),Z=(U,ee)=>{navigator.clipboard.writeText(U).then(()=>{F({title:"Lien copi",description:`Le lien de connexion ${ee} a t copi dans le presse-papiers`})}).catch(ce=>{console.error("Failed to copy:",ce),F({title:"Erreur",description:"Impossible de copier le lien",variant:"destructive"})})},ue=U=>`https://evatime.fr/login?org=${U}`,Y=U=>`https://evatime.fr/client-access?org=${U}`;return f?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):h||!r?i.jsxs("div",{children:[i.jsx("button",{onClick:R,className:"mb-4 text-sm text-gray-600 hover:text-gray-900",children:" Retour  la liste"}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-800 font-medium",children:"Erreur lors du chargement de l'organisation"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:h||"Organisation non trouve"})]})]}):i.jsxs("div",{children:[i.jsxs("button",{onClick:R,className:"mb-6 text-sm text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Retour  la liste"})]}),i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r.name}),r.status==="suspended"?i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:" Suspendue"}):i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:" Active"})]}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["ID: ",r.id]})]}),i.jsx("div",{children:r.status==="suspended"?i.jsx("button",{onClick:()=>$("reactivate"),disabled:y,className:"px-4 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:y?"En cours...":" Ractiver"}):i.jsx("button",{onClick:()=>$("suspend"),disabled:y,className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors disabled:opacity-50",children:y?"En cours...":" Suspendre"})})]})}),i.jsx(qc,{open:g,onOpenChange:v,children:i.jsxs(va,{children:[i.jsxs(xa,{children:[i.jsx(ba,{children:x==="suspend"?"Suspendre cette organisation ?":"Ractiver cette organisation ?"}),i.jsx(wa,{children:x==="suspend"?"Les utilisateurs de cette organisation ne pourront plus accder  la plateforme.":"Les utilisateurs de cette organisation pourront  nouveau accder  la plateforme."})]}),i.jsxs(ya,{children:[i.jsx(_a,{disabled:y,children:"Annuler"}),i.jsx(ja,{onClick:L,disabled:y,className:x==="suspend"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:y?"En cours...":x==="suspend"?"Suspendre":"Ractiver"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Connexion  EVATIME"})}),i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 text-2xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Connexion PRO"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"text-xs bg-gray-100 px-3 py-2 rounded border border-gray-200 flex-1 break-all",children:ue(r.slug)}),i.jsx("button",{onClick:()=>Z(ue(r.slug),"PRO"),className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors whitespace-nowrap",children:"Copier"})]})]})]}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 text-2xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Connexion CLIENT"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"text-xs bg-gray-100 px-3 py-2 rounded border border-gray-200 flex-1 break-all",children:Y(r.slug)}),i.jsx("button",{onClick:()=>Z(Y(r.slug),"CLIENT"),className:"px-4 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded hover:bg-green-100 transition-colors whitespace-nowrap",children:"Copier"})]})]})]})]})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" KPIs Platform V1"})}),i.jsx("div",{className:"px-6 py-4",children:c?i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:c.admins}),i.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Admins"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:c.prospects}),i.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Prospects"})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:c.projects}),i.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Projets"})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-orange-700",children:c.forms_pending}),i.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Formulaires en attente"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center border border-gray-200",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-700",children:c.files}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Fichiers"})]}),i.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 text-center col-span-2 sm:col-span-3 lg:col-span-5",children:[i.jsx("p",{className:"text-sm font-medium text-teal-700",children:c.last_activity?new Date(c.last_activity).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Aucune activit"}),i.jsx("p",{className:"text-xs text-teal-600 mt-1",children:"Dernire activit"})]})]}):i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Chargement des KPIs..."})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Pricing (interne)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-700",children:" Indicateur interne  aucune facturation automatique"})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan tarifaire"}),i.jsxs("select",{value:j,onChange:U=>_(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:"-- Non dfini --"}),i.jsx("option",{value:"standard",children:"Standard"}),i.jsx("option",{value:"custom",children:"Custom"}),i.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix mensuel de rfrence ()"}),i.jsx("input",{type:"number",value:S,onChange:U=>N(U.target.value),placeholder:"490 / 1500 / 3000 / 10000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:W,disabled:E,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:E?"Enregistrement...":"Enregistrer le pricing"})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Charge EVATIME (auto)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-700",children:"Calcule automatiquement  partir de l'activit relle."})}),i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:re(se).emoji}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${re(se).color}`,children:re(se).label})]}),c&&i.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",(c.admins||0)*2+(c.prospects||0)+(c.forms_pending||0)*5]})]}),i.jsx("button",{onClick:V,disabled:B,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:B?"Calcul en cours...":" Recalculer"})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Prix recommand (indicatif)"})}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsx("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-gray-600",children:"Bas sur la charge observe. Aucun changement automatique."})}),i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:i.jsx("p",{className:"text-lg font-semibold text-blue-800",children:(()=>({0:" 490  / mois",1:" 1 500  / mois",2:" 3 000  / mois",3:"Sur engagement"})[se]||"Non calcul")()})})}),(()=>{const U=parseInt(S,10)||0,ee=se,_e={0:490,1:1500,2:3e3,3:5e3}[ee];return ee==null||U===0||!_e?null:Math.abs(U-_e)/_e>.5?i.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("p",{className:"text-sm text-orange-700",children:"Prix actuel trs diffrent de la charge observe."})]}):null})()]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organisation"})}),i.jsx("div",{className:"px-6 py-4",children:i.jsxs("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nom"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.name})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Slug"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.slug})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Cre le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(r.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Mise  jour le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(r.updated_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Domaines (",s.length,")"]})}),i.jsx("div",{className:"px-6 py-4",children:s.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun domaine configur"}):i.jsx("div",{className:"space-y-3",children:s.map(U=>i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:U.domain}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Cr le ",new Date(U.created_at).toLocaleDateString("fr-FR")]})]}),U.is_primary&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Principal"})]},U.id))})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Paramtres"})}),i.jsx("div",{className:"px-6 py-4",children:a?i.jsxs("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nom de marque"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.brand_name||"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Logo URL"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900 break-all",children:a.logo_url||"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Couleur primaire"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.primary_color?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:a.primary_color}}),i.jsx("span",{children:a.primary_color})]}):"-"})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Couleur secondaire"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.secondary_color?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:a.secondary_color}}),i.jsx("span",{children:a.secondary_color})]}):"-"})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Cr le"}),i.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(a.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}):i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun paramtre configur"})})]})]})]})},Ise=()=>{const e=Te(),[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),[l,c]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const{data:{user:d},error:h}=await T.auth.getUser();if(h||!d){c(!1);return}const{data:m,error:g}=await T.from("platform_admins").select("user_id, email").eq("user_id",d.id).single();!g&&m?e("/platform/organizations",{replace:!0}):c(!1)}catch(d){console.error("[PlatformLogin] Error checking auth:",d),c(!1)}})()},[e]);const u=async f=>{if(f.preventDefault(),!t.trim()||!/\S+@\S+\.\S+/.test(t)){F({title:"Email invalide",description:"Veuillez saisir une adresse email valide.",variant:"destructive"});return}if(!n.trim()){F({title:"Mot de passe requis",description:"Veuillez saisir votre mot de passe.",variant:"destructive"});return}try{a(!0);const{data:d,error:h}=await T.auth.signInWithPassword({email:t.trim(),password:n.trim()});if(h){console.error("[PlatformLogin] Auth error:",h),F({title:"chec de connexion",description:h.message==="Invalid login credentials"?"Email ou mot de passe incorrect.":h.message,variant:"destructive"}),a(!1);return}if(!d.user)throw new Error("Aucun utilisateur retourn aprs connexion");const{data:m,error:g}=await T.from("platform_admins").select("user_id, email").eq("user_id",d.user.id).single();if(g||!m){console.error("[PlatformLogin] User not in platform_admins:",g),await T.auth.signOut(),F({title:"Accs plateforme refus",description:"Votre compte n'est pas autoris  accder  la plateforme EVATIME.",variant:"destructive"}),a(!1);return}F({title:"Connexion russie",description:`Bienvenue ${m.email}`,className:"bg-green-500 text-white"}),e("/platform/organizations",{replace:!0})}catch(d){console.error("[PlatformLogin] Exception:",d),F({title:"Erreur",description:d.message||"Une erreur est survenue lors de la connexion.",variant:"destructive"}),a(!1)}};return l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white font-medium",children:"Vrification de la session..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:i.jsx(rv,{className:"w-8 h-8 text-gray-900"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"EVATIME Platform"}),i.jsx("p",{className:"text-gray-400",children:"Accs rserv aux administrateurs plateforme"})]}),i.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1,duration:.5},className:"bg-white rounded-lg shadow-xl p-8",children:[i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",className:"text-gray-700 font-medium",children:"Adresse email"}),i.jsxs("div",{className:"relative",children:[i.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(pe,{id:"email",type:"email",value:t,onChange:f=>r(f.target.value),placeholder:"admin@evatime.com",className:"pl-10 h-12 border-gray-300 focus:border-gray-900 focus:ring-gray-900",disabled:o,autoComplete:"email",autoFocus:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",className:"text-gray-700 font-medium",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(pe,{id:"password",type:"password",value:n,onChange:f=>s(f.target.value),placeholder:"",className:"pl-10 h-12 border-gray-300 focus:border-gray-900 focus:ring-gray-900",disabled:o,autoComplete:"current-password"})]})]}),i.jsx(H,{type:"submit",disabled:o,className:"w-full h-12 bg-gray-900 hover:bg-gray-800 text-white font-semibold text-base",children:o?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"mr-2 h-5 w-5 animate-spin"}),"Connexion en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(rv,{className:"mr-2 h-5 w-5"}),"Se connecter"]})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Accs restreint aux utilisateurs avec le rle"," ",i.jsx("span",{className:"font-mono font-semibold text-gray-700",children:"platform_admin"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-400",children:[" ",new Date().getFullYear()," EVATIME Platform - Tous droits rservs"]})})]})})},Ose=()=>{const e=Te(),[t,r]=p.useState(!0),[n,s]=p.useState(null),[o,a]=p.useState({lowPricing:[],churnRisk:[]}),[l,c]=p.useState(""),[u,f]=p.useState([]),d=u.filter(x=>{var y,w;if(!l.trim())return!0;const b=l.toLowerCase();return((y=x.name)==null?void 0:y.toLowerCase().includes(b))||((w=x.slug)==null?void 0:w.toLowerCase().includes(b))});p.useEffect(()=>{(async()=>{try{const{data:b,error:y}=await T.rpc("platform_get_home_kpis");if(y){console.error("[PlatformHomePage] RPC error:",y),F({title:"Erreur",description:y.message,variant:"destructive"});return}if(b!=null&&b.error){console.error("[PlatformHomePage] RPC returned error:",b.error),F({title:"Erreur",description:b.error,variant:"destructive"});return}s({orgsActive:b.orgs_active||0,orgsSuspended:b.orgs_suspended||0,revenueEstimate:b.revenue_estimate||0});const w=b.orgs_data||[];f(w);const j=N=>{if(N.evatime_load_estimated!==null&&N.evatime_load_estimated!==void 0)return N.evatime_load_estimated;const E=(N.users_count||0)*2+(N.prospects_count||0);return E<=15?0:E<=40?1:E<=70?2:3},_=w.filter(N=>{const E=N.monthly_price_reference||0,C=j(N);return E>0&&E<1500&&C>=2}),S=w.filter(N=>{const E=N.monthly_price_reference||0,C=j(N);return E>=1500&&C<=1});a({lowPricing:_,churnRisk:S})}catch(b){console.error("[PlatformHomePage] Exception:",b)}finally{r(!1)}})()},[]);const h=x=>{switch(x){case 0:return{emoji:"",label:"Lger"};case 1:return{emoji:"",label:"Normal"};case 2:return{emoji:"",label:"Complexe"};case 3:return{emoji:"",label:"Critique"};default:return{emoji:"",label:"-"}}},m=x=>{if(x.evatime_load_estimated!==null&&x.evatime_load_estimated!==void 0)return x.evatime_load_estimated;const b=(x.users_count||0)*2+(x.prospects_count||0);return b<=15?0:b<=40?1:b<=70?2:3},g=x=>{switch(x){case 0:return{value:490,label:"490 "};case 1:return{value:1500,label:"1 500 "};case 2:return{value:3e3,label:"3 000 "};case 3:return{value:5e3,label:"5 000 +"};default:return{value:0,label:"-"}}},v=x=>{const b=x.monthly_price_reference||0,y=m(x),w=g(y).value;return!b||!w?"neutral":b<w*.7?"under":b>w*1.5?"over":"ok"};return t?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Platform Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Vue d'ensemble de l'activit EVATIME"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(n==null?void 0:n.orgsActive)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Organisations actives"})]})]})}),i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(n==null?void 0:n.orgsSuspended)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Organisations suspendues"})]})]})}),i.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[((n==null?void 0:n.revenueEstimate)||0).toLocaleString("fr-FR")," "]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Revenu mensuel estim"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[i.jsxs("div",{className:"px-6 py-4 bg-orange-50 border-b border-orange-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:" Opportunits d'augmentation"}),i.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"EVATIME travaille beaucoup pour ces clients. Le prix actuel est infrieur  la charge observe."})]}),i.jsx("div",{className:"px-6 py-4",children:o.lowPricing.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun signal"}):i.jsx("ul",{className:"space-y-2",children:o.lowPricing.slice(0,5).map(x=>{var b;return i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>e(`/platform/organizations/${x.id}`),className:"text-sm text-blue-600 hover:underline",children:x.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:[((b=x.monthly_price_reference)==null?void 0:b.toLocaleString("fr-FR"))||0,"   ",x.prospects_count," prospects"]})]},x.id)})})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-red-800",children:" Clients  risque (valeur perue)"}),i.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Ces clients paient cher mais utilisent peu EVATIME. Ils peuvent ne plus percevoir la valeur."})]}),i.jsx("div",{className:"px-6 py-4",children:o.churnRisk.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun signal"}):i.jsx("ul",{className:"space-y-2",children:o.churnRisk.slice(0,5).map(x=>{var b;return i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>e(`/platform/organizations/${x.id}`),className:"text-sm text-blue-600 hover:underline",children:x.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:[((b=x.monthly_price_reference)==null?void 0:b.toLocaleString("fr-FR"))||0,"   ",x.prospects_count," prospects"]})]},x.id)})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organisations"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[u.length," organisation",u.length>1?"s":""," enregistre",u.length>1?"s":""]})]}),i.jsxs("button",{onClick:()=>e("/platform/organizations?action=create"),className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"+"})," Crer une organisation"]})]}),i.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:i.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value),placeholder:"Rechercher par nom, slug...",className:"w-full max-w-md px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nom"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Charge"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actuel"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Recommand"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Prospects"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Connexions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:l?"Aucune organisation trouve":"Aucune organisation"})}):d.map(x=>i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>e(`/platform/organizations/${x.id}`),children:[i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("span",{className:"font-medium text-gray-900",children:x.name}),i.jsx("span",{className:"ml-2 text-xs text-gray-400",children:x.slug})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?" Actif":" Suspendu"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{title:`Score estim: ${(x.users_count||0)*2+(x.prospects_count||0)}`,children:h(m(x)).emoji}),i.jsx("span",{className:"text-xs text-gray-500",children:h(m(x)).label})]})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:x.monthly_price_reference?i.jsxs("span",{className:`font-medium ${v(x)==="under"?"text-orange-600":v(x)==="over"?"text-red-600":"text-gray-900"}`,children:[x.monthly_price_reference.toLocaleString("fr-FR")," "]}):i.jsx("span",{className:"text-gray-400 italic",children:"Non dfini"})}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx("span",{className:"text-blue-600 font-medium",children:g(m(x)).label})}),i.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:x.prospects_count||0}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex gap-2",onClick:b=>b.stopPropagation(),children:[i.jsx("button",{onClick:()=>window.open(`https://evatime.fr/admin?org=${x.slug}`,"_blank"),className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-lg hover:bg-green-200 transition-colors",children:" PRO"}),i.jsx("button",{onClick:()=>window.open(`https://evatime.fr/dashboard?org=${x.slug}`,"_blank"),className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-200 transition-colors",children:" CLIENT"})]})})]},x.id))})]})})]})]})},Wm=({icon:e,title:t,description:r,badgeText:n,delay:s})=>i.jsxs(ae.div,{className:"bg-white border border-[#eef1f4] rounded-2xl shadow-card p-6 flex flex-col",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:s},children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:[e," ",t]}),i.jsx("p",{className:"text-gray-600 flex-grow",children:r}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs font-medium px-3 py-1.5 rounded-full",children:n})})]}),Dse=({isOpen:e,onOpenChange:t})=>{const r=Te(),{setActiveAdminUser:n}=Ve(),[s,o]=p.useState(""),[a,l]=p.useState(""),c=async f=>{f.preventDefault();try{const{data:d,error:h}=await T.auth.signInWithPassword({email:s,password:a});if(h){F({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"});return}const{data:m,error:g}=await T.from("users").select("*").eq("user_id",d.user.id).single();if(g||!m){logger.error(" Erreur dtaille:",g),F({title:"Erreur",description:`Compte professionnel introuvable. ${(g==null?void 0:g.message)||""}`,variant:"destructive"}),await T.auth.signOut();return}F({title:"Connexion russie !",description:"Redirection vers l'espace pro...",className:"bg-green-500 text-white"});const v={id:m.id,userId:m.user_id,name:m.name,email:m.email,role:m.role,phone:m.phone,avatarUrl:m.avatar_url,managerId:m.manager_id,accessRights:m.access_rights,createdAt:m.created_at,updatedAt:m.updated_at};n(v),t(!1),setTimeout(()=>{window.location.href="/admin"},500)}catch(d){logger.error("Pro login error:",d),F({title:"Erreur",description:"Une erreur est survenue lors de la connexion.",variant:"destructive"})}},u=()=>{r("/reset-password")};return i.jsx(vh,{open:e,onOpenChange:t,children:i.jsxs(zc,{className:"sm:max-w-md",children:[i.jsx(Uc,{children:i.jsx(Vc,{className:"text-2xl font-bold text-center",children:"Connexion Espace Pro"})}),i.jsxs("form",{onSubmit:c,className:"space-y-6 px-4 py-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsx(pe,{id:"email",type:"email",placeholder:"votre@email.com",required:!0,value:s,onChange:f=>o(f.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(pe,{id:"password",type:"password",placeholder:"********",required:!0,value:a,onChange:f=>l(f.target.value)})]}),i.jsx(H,{type:"submit",className:"w-full gradient-green text-white text-lg py-6",children:"Se connecter"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:u,className:"text-sm text-blue-600 hover:underline",children:"Mot de passe oubli ?"})})]})]})})},qS=()=>{const e=Te(),[t,r]=p.useState(!1),{slugUser:n}=fa();p.useEffect(()=>{n&&sessionStorage.setItem("affiliateUser",n)},[n]);const s=()=>{e("/login")},o=()=>{e("/client-access")},a=n?`/inscription/${n}`:"/inscription";return i.jsxs("div",{className:"bg-gray-50 relative",children:[i.jsx("header",{className:"absolute top-0 right-0 p-4 md:p-6 z-20",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(H,{onClick:s,className:"gradient-green text-white shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Espace Pro"}),i.jsx(H,{onClick:o,className:"gradient-blue text-white shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Espace Client"})]})}),i.jsx(Dse,{isOpen:t,onOpenChange:r}),i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4",children:i.jsxs("div",{className:"relative w-full max-w-4xl",children:[i.jsxs(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.7,ease:"easeOut"},className:"relative z-10 space-y-6",children:[i.jsxs(ae.h1,{className:"text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:["Gagnez ",i.jsx("span",{className:"text-green-600",children:"35% "})," sur votre lectricit, garantis entre 5 et 10 ans "]}),i.jsx(ae.h2,{className:"text-4xl md:text-5xl font-extrabold text-gray-800 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:"grce  une centrale solaire  ct de chez vous "}),i.jsx(ae.p,{className:"max-w-2xl mx-auto text-lg text-gray-600",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5}}),i.jsxs(ae.div,{className:"flex flex-col md:flex-row items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[i.jsx(go,{to:a,children:i.jsx(H,{size:"lg",className:"gradient-green text-white px-8 py-6 rounded-2xl shadow-soft hover:shadow-lg transition-all duration-300 transform hover:scale-105 text-lg font-semibold",children:"Je dmarre mon projet"})}),i.jsx("a",{href:"#comment-ca-marche",className:"mt-3 md:mt-0 md:ml-4 text-base font-medium text-[#1976D2] hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded-md",children:"Comment a marche ?"})]})]}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/4 -translate-y-1/4 w-96 h-96 bg-green-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob animation-delay-2000"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-3/4 -translate-y-3/4 w-96 h-96 bg-yellow-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob animation-delay-4000"})]})}),i.jsx("section",{id:"comment-ca-marche",className:"py-16 px-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[i.jsx(ae.h2,{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"Comment a marche ?"}),i.jsx(ae.p,{className:"max-w-3xl mx-auto text-lg text-gray-600 mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:"Un systme simple et transparent qui permet de consommer llectricit produite par une centrale solaire locale, avec des conomies garanties."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(Wm,{icon:"",title:"Producteur",description:"Centrale solaire photovoltaque qui produit de llectricit verte.",badgeText:" Production locale dnergie renouvelable",delay:.3}),i.jsx(Wm,{icon:"",title:"PMO",description:"Association qui gre et rpartit lnergie de manire quitable.",badgeText:" Gestion transparente et bnfique pour tous",delay:.4}),i.jsx(Wm,{icon:"",title:"Consommateurs",description:"Particuliers et entreprises qui bnficient dune lectricit moins chre.",badgeText:" Jusqu 40% dconomies sur la facture",delay:.5})]})]})}),i.jsx("style",{jsx:"true",children:`
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
      `})]})},$se=()=>{const e=Te(),t=nr(),{projectsData:r,authLoading:n,currentUser:s}=Ve(),{organizationId:o,organizationName:a}=on();p.useState("");const[l,c]=p.useState("");p.useState([]);const[u,f]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(null);p.useEffect(()=>{const x=sessionStorage.getItem("org_suspended_message");x&&(g(x),sessionStorage.removeItem("org_suspended_message"),F({title:"Organisation suspendue",description:x,variant:"destructive",duration:1e4}))},[]),p.useEffect(()=>{s&&e("/dashboard")},[s,e]),p.useEffect(()=>{var x;(x=t.state)!=null&&x.email&&(c(t.state.email),F({title:" Presque termin !",description:"Cliquez sur 'Recevoir le lien' pour accder  votre espace.",className:"bg-blue-500 text-white"}))},[t.state]),p.useMemo(()=>!r||Object.keys(r).length===0?[]:Object.values(r).filter(x=>x&&x.isPublic).map(x=>({id:x.type,label:x.clientTitle||x.title,icon:x.icon||"",color:x.color})),[r]);const v=async x=>{if(x.preventDefault(),!l.trim()||!/\S+@\S+\.\S+/.test(l)){F({title:"Email invalide",description:"Veuillez saisir une adresse email valide.",variant:"destructive"});return}if(!o){F({title:"Organisation non identifie",description:"Impossible de dterminer l'organisation. Veuillez ressayer.",variant:"destructive"});return}try{f(!0);const{data:b,error:y}=await T.rpc("check_prospect_exists_in_org",{p_email:l.trim(),p_organization_id:o});if(y)throw y;if(!b){F({title:"Compte introuvable",description:`Aucun compte client trouv avec cet email chez ${a||"cette organisation"}. Veuillez vous inscrire d'abord.`,variant:"destructive"}),f(!1);return}const w=`${window.location.origin}/dashboard`,{error:j}=await T.auth.signInWithOtp({email:l.trim(),options:{shouldCreateUser:!0,emailRedirectTo:w}});if(j)throw j;h(!0),F({title:" Email envoy !",description:"Consultez votre bote mail pour accder  votre espace.",className:"bg-green-500 text-white"})}catch(b){logger.error("Error sending magic link:",b),F({title:"Erreur",description:b.message||"Impossible d'envoyer le lien. Veuillez ressayer.",variant:"destructive"})}finally{f(!1)}};return n||!r||Object.keys(r).length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx(De,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):m?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-100 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-4xl",children:""})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Accs suspendu"}),i.jsx("p",{className:"text-gray-600 mb-6",children:m}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})}):d?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx(zf,{className:"w-20 h-20 text-green-500 mx-auto"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous vous avons envoy un lien scuris  ",i.jsx("strong",{children:l}),".",i.jsx("br",{}),i.jsx("br",{}),"Cliquez sur le lien dans l'email pour accder  votre espace client."]}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Connexion Client"}),i.jsx("p",{className:"text-gray-600",children:"Recevez un lien scuris pour accder  votre espace"})]}),i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Votre adresse email"}),i.jsxs("div",{className:"relative mt-2",children:[i.jsx(en,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"email",type:"email",placeholder:"jean.dupont@email.com",value:l,onChange:x=>c(x.target.value),className:"pl-10",disabled:u})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Ou continuer avec"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(H,{type:"button",variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[i.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),i.jsxs(H,{type:"button",variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple"]})]}),i.jsx("p",{className:"text-xs text-center text-gray-500",children:"Connexion sociale bientt disponible"})]}),i.jsx(H,{type:"submit",className:"w-full gradient-blue text-white py-6 text-lg font-semibold",disabled:u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):"Recevoir mon lien scuris"}),i.jsx("p",{className:"text-xs text-center text-gray-500",children:"Un lien unique vous sera envoy par email pour accder  votre espace en toute scurit."})]}),i.jsxs("div",{className:"mt-6 text-center space-y-2",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Pas encore de compte ?"," ",i.jsx("button",{onClick:()=>e("/inscription"),className:"text-blue-600 font-medium hover:underline",children:"Crer un compte"})]}),i.jsx("button",{onClick:()=>e("/"),className:"text-sm text-gray-500 hover:underline block mx-auto",children:" Retour  l'accueil"})]})]})})},Mse=()=>{const e=Te(),{setActiveAdminUser:t}=Ve(),[r,n]=p.useState(""),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(null);p.useEffect(()=>{const h=sessionStorage.getItem("org_suspended_message");h&&(u(h),sessionStorage.removeItem("org_suspended_message"),F({title:"Organisation suspendue",description:h,variant:"destructive",duration:1e4}))},[]);const f=async h=>{h.preventDefault(),l(!0);try{const{data:m,error:g}=await T.auth.signInWithPassword({email:r,password:s});if(g){F({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}),l(!1);return}const{data:v,error:x}=await T.from("users").select("*").eq("user_id",m.user.id).single();if(x||!v){P.error(" Erreur dtaille:",x),F({title:"Erreur",description:`Compte professionnel introuvable. ${(x==null?void 0:x.message)||""}`,variant:"destructive"}),await T.auth.signOut(),l(!1);return}if(v.organization_id){const{data:y,error:w}=await T.rpc("platform_get_org_status",{p_org_id:v.organization_id});if(!w&&(y==null?void 0:y.status)==="suspended"){await T.auth.signOut(),F({title:"Organisation suspendue",description:"Votre organisation est temporairement suspendue. Contactez le support.",variant:"destructive",duration:1e4}),l(!1);return}}F({title:"Connexion russie !",description:"Chargement de votre espace...",className:"bg-green-500 text-white"});const b={id:v.id,userId:v.user_id,name:v.name,email:v.email,role:v.role,phone:v.phone,avatarUrl:v.avatar_url,managerId:v.manager_id,accessRights:v.access_rights,createdAt:v.created_at,updatedAt:v.updated_at};t(b),setTimeout(()=>{e("/admin/pipeline")},1200)}catch(m){P.error("Pro login error:",m),F({title:"Erreur",description:"Une erreur est survenue lors de la connexion.",variant:"destructive"}),l(!1)}},d=()=>{e("/reset-password")};return c?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex flex-col items-center justify-center px-4",children:i.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-4xl",children:""})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Accs suspendu"}),i.jsx("p",{className:"text-gray-600 mb-6",children:c}),i.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Retour  l'accueil"})]})})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex flex-col items-center justify-center px-4",children:[i.jsxs("button",{onClick:()=>e("/"),className:"absolute top-6 left-6 text-gray-600 hover:text-gray-900 flex items-center gap-2 transition-colors",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Retour  l'accueil"})]}),i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Espace Pro"}),i.jsx("p",{className:"text-gray-600",children:"Connectez-vous  votre compte professionnel"})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"email",children:"Email professionnel"}),i.jsx(pe,{id:"email",type:"email",placeholder:"votre@email.com",required:!0,value:r,onChange:h=>n(h.target.value),className:"h-12"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Mot de passe"}),i.jsx(pe,{id:"password",type:"password",placeholder:"********",required:!0,value:s,onChange:h=>o(h.target.value),className:"h-12"})]}),i.jsx(H,{type:"submit",disabled:a,className:"w-full h-12 gradient-green text-white text-lg font-semibold",children:a?"Connexion...":"Se connecter"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:d,className:"text-sm text-blue-600 hover:underline",children:"Mot de passe oubli ?"})})]})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Vous tes un client ?"," ",i.jsx("button",{onClick:()=>e("/client-access"),className:"text-blue-600 hover:underline font-medium",children:"Accdez  votre espace client"})]})})]})]})};function RD({organizationId:e=null,enabled:t=!0}={}){const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useRef(!1),u=p.useRef(null);p.useEffect(()=>{!t||!e||u.current!==e&&(u.current=e,f(e))},[e,t]),p.useEffect(()=>{if(!t||!e)return;const x=T.channel(`project-templates-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_templates",filter:`organization_id=eq.${e}`},b=>{var w;if(c.current){c.current=!1;return}if((w=b.new)!=null&&w.organization_id&&b.new.organization_id!==e)return;const y=j=>({...j,clientTitle:j.client_title,isPublic:j.is_public,coverImage:j.image_url,clientDescription:j.client_description,ctaText:j.cta_text});b.eventType==="INSERT"?n(j=>j.find(S=>S.id===b.new.id)?j:[...j,y(b.new)]):b.eventType==="UPDATE"?n(j=>j.map(_=>_.id===b.new.id?y(b.new):_)):b.eventType==="DELETE"&&n(j=>j.filter(_=>_.id!==b.old.id))}).subscribe();return()=>{T.removeChannel(x)}},[e]);const f=async x=>{try{o(!0),l(null);const{data:b,error:y}=await T.rpc("get_project_templates_for_org",{p_organization_id:x});if(y)throw y;const w=(Array.isArray(b)?b:[]).map(j=>({...j,clientTitle:j.client_title,isPublic:j.is_public,coverImage:j.image_url,clientDescription:j.client_description,ctaText:j.cta_text}));w.sort((j,_)=>(j.type||"").localeCompare(_.type||"")),n(w)}catch(b){P.error("Erreur fetch project templates:",{error:b.message}),l(b.message)}finally{o(!1)}};return{projectTemplates:r,loading:s,error:a,addTemplate:async x=>{if(!e)throw new Error("organization_id requis pour crer un template");try{c.current=!0;const b={...x,organization_id:e},{data:y,error:w}=await T.from("project_templates").insert([b]).select().single();if(w)throw w;const j={...y,clientTitle:y.client_title,isPublic:y.is_public,coverImage:y.image_url,clientDescription:y.client_description,ctaText:y.cta_text};return n(_=>[..._,j]),j}catch(b){throw P.error("Erreur cration template:",{error:b.message}),c.current=!1,b}},updateTemplate:async(x,b)=>{try{c.current=!0;const{data:y,error:w}=await T.from("project_templates").update(b).eq("id",x).select().single();if(w)throw w;const j={...y,clientTitle:y.client_title,isPublic:y.is_public,coverImage:y.image_url,clientDescription:y.client_description,ctaText:y.cta_text};return n(_=>_.map(S=>S.id===x?j:S)),j}catch(y){throw P.error("Erreur modification template:",{error:y.message}),c.current=!1,y}},deleteTemplate:async x=>{try{c.current=!0;const{error:b}=await T.from("project_templates").delete().eq("id",x);if(b)throw b;n(y=>y.filter(w=>w.id!==x))}catch(b){throw P.error("Erreur suppression template:",{error:b.message}),c.current=!1,b}},getTemplateByType:x=>r.find(b=>b.type===x),getPublicTemplates:()=>r.filter(x=>x.is_public===!0),refresh:f}}const WS=()=>{const e=Te(),{slugUser:t}=fa(),{currentUser:r,activeAdminUser:n,setActiveAdminUser:s}=Ve(),{organizationId:o}=on(),{projectTemplates:a,loading:l}=RD({organizationId:o}),[c,u]=p.useState([]),[f,d]=p.useState({name:"",email:""}),[h,m]=p.useState({}),[g,v]=p.useState({id:null,name:null}),[x,b]=p.useState(!1),[y,w]=p.useState(!1);p.useEffect(()=>{localStorage.removeItem("activeAdminUser"),localStorage.removeItem("adminUser"),localStorage.removeItem("users"),n&&s(null)},[n,s]);const j=p.useMemo(()=>!a||a.length===0?[]:a.filter(C=>C.isPublic||C.is_public).map(C=>({id:C.type,label:C.clientTitle||C.client_title,icon:C.icon})),[a]);p.useEffect(()=>{r&&(F({title:"Vous tes dj connect",description:"Redirection vers votre espace client...",variant:"destructive"}),setTimeout(()=>e("/dashboard"),2e3))},[r,e]),p.useEffect(()=>{const C=t||sessionStorage.getItem("affiliateUser");C&&T.from("users").select("id, name, affiliate_slug").eq("affiliate_slug",C).single().then(({data:k,error:I})=>{k&&!I?v({id:k.id,name:k.name}):console.error(" Commercial non trouv pour le slug:",C,I)})},[t]);const _=C=>{u(k=>k.includes(C)?k.filter(I=>I!==C):[...k,C])},S=C=>{const{id:k,value:I}=C.target;d(O=>({...O,[k]:I}))},N=()=>{const C={};return f.name||(C.name="Le nom complet est requis."),f.email?/\S+@\S+\.\S+/.test(f.email)||(C.email="L'adresse e-mail est invalide."):C.email="L'adresse e-mail est requise.",m(C),Object.keys(C).length===0},E=async C=>{if(C.preventDefault(),!!N()){if(c.length===0){F({title:"Slection requise",description:"Veuillez slectionner au moins un projet.",variant:"destructive"});return}try{b(!0);const k=[...new Set(c)],{data:I,error:O}=await T.rpc("check_prospect_exists_in_org",{p_email:f.email.trim(),p_organization_id:o});if(O){console.error("Error checking prospect:",O),F({title:"Erreur",description:"Impossible de vrifier l'email. Ressayez.",variant:"destructive"}),b(!1);return}if(I){F({title:"Compte existant",description:"Un compte existe dj avec cet email dans cette organisation. Connectez-vous plutt.",variant:"destructive"}),b(!1);return}const{data:M,error:D}=await T.rpc("create_affiliated_prospect",{p_name:f.name,p_email:f.email.trim(),p_phone:null,p_company:null,p_address:"",p_affiliate_slug:t||null,p_tags:k,p_status:null,p_host:window.location.hostname});if(D)throw console.error(" Erreur cration prospect:",D),D;const z=`${window.location.origin}/dashboard`,{error:B}=await T.auth.signInWithOtp({email:f.email.trim(),options:{shouldCreateUser:!0,emailRedirectTo:z}});if(B)throw B;sessionStorage.removeItem("affiliateUser"),w(!0),F({title:" Compte cr !",description:"Un email vous a t envoy. Cliquez sur le lien pour accder  votre espace.",className:"bg-green-500 text-white",duration:5e3})}catch(k){F({title:"Erreur",description:k.message||"Une erreur est survenue lors de l'inscription.",variant:"destructive"})}finally{b(!1)}}};return y?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-lg bg-white p-8 rounded-2xl shadow-soft text-center",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(en,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Inscription russie !"}),i.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Un email avec un lien de connexion vous a t envoy  :"}),i.jsx("p",{className:"text-xl font-semibold text-blue-600 mb-6",children:f.email}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:[" ",i.jsx("strong",{children:"Vrifiez votre bote mail"})," et cliquez sur le lien pour accder  votre espace client."]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Le lien est valide pendant 60 minutes."})]})]}),i.jsx(H,{onClick:()=>e("/client-access"),className:"w-full gradient-blue text-white",children:"Retour  la connexion"})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg bg-white p-8 rounded-2xl shadow-soft",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-2",children:"Choisissez vos projets"}),i.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Commencez par slectionner les projets qui vous intressent."}),i.jsxs("form",{onSubmit:E,className:"space-y-6",children:[i.jsx("div",{className:"space-y-4",children:j.map((C,k)=>i.jsx(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*(k+1)},children:i.jsxs(Q,{htmlFor:C.id,className:`flex items-center space-x-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${c.includes(C.id)?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[i.jsx(rr,{id:C.id,checked:c.includes(C.id),onCheckedChange:()=>_(C.id)}),i.jsxs("span",{className:"text-base font-medium text-gray-800 flex items-center",children:[i.jsx("span",{className:"mr-2",children:C.icon})," ",C.label]})]})},C.id))}),i.jsxs("div",{className:"space-y-4 pt-6 border-t mt-6",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Tc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"name",placeholder:"Jean Dupont",onChange:S,value:f.name,className:"pl-10",disabled:x})]}),h.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(en,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"email",type:"email",placeholder:"jean.dupont@email.com",onChange:S,value:f.email,className:"pl-10",disabled:x})]}),h.email&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.email})]})]}),i.jsx(H,{type:"submit",size:"lg",className:"w-full gradient-green text-white text-base font-semibold py-6 rounded-xl shadow-soft hover:shadow-lg transition-all transform hover:scale-105",disabled:x,children:x?"Inscription...":"Crer mon compte"}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Dj un compte ?"," ",i.jsx("button",{type:"button",onClick:()=>e("/client-access"),className:"text-blue-600 font-medium hover:underline",children:"Se connecter"})]})})]})]})})},Lse=()=>{const e=Te(),[t,r]=p.useState(!1),[n,s]=p.useState({companyName:"",adminEmail:"",adminPassword:""}),[o,a]=p.useState({}),l=f=>{const{id:d,value:h}=f.target;s(m=>({...m,[d]:h})),o[d]&&a(m=>({...m,[d]:""}))},c=()=>{const f={};return(!n.companyName||n.companyName.trim().length<2)&&(f.companyName="Le nom de l'entreprise doit contenir au moins 2 caractres"),(!n.adminEmail||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.adminEmail))&&(f.adminEmail="Email invalide"),(!n.adminPassword||n.adminPassword.length<6)&&(f.adminPassword="Le mot de passe doit contenir au moins 6 caractres"),a(f),Object.keys(f).length===0},u=async f=>{if(f.preventDefault(),!c()){F({title:"Erreur de validation",description:"Veuillez corriger les erreurs dans le formulaire",variant:"destructive"});return}r(!0);try{const d=await fetch("https://vvzxvtiyybilkswslqfn.supabase.co/functions/v1/create_organization_onboarding",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:n.companyName.trim(),adminEmail:n.adminEmail.trim().toLowerCase(),adminPassword:n.adminPassword})}),h=await d.json();if(!d.ok)throw console.error("[SignupPage] Edge Function error:",h),new Error(h.error||"Erreur lors de la cration de l'organisation");if(!(h!=null&&h.success))throw console.error("[SignupPage] Edge Function returned error:",h),new Error((h==null?void 0:h.error)||"Erreur lors de la cration de l'organisation");F({title:" Organisation cre avec succs !",description:"Vous pouvez maintenant vous connecter avec vos identifiants.",className:"bg-green-500 text-white"}),setTimeout(()=>{e("/login",{state:{email:n.adminEmail.trim().toLowerCase(),message:"Votre organisation a t cre ! Connectez-vous pour accder  votre espace."}})},1500)}catch(d){console.error("[SignupPage] Error:",d),F({title:"Erreur",description:d.message||"Une erreur est survenue lors de la cration de l'organisation",variant:"destructive"})}finally{r(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:i.jsx(Zg,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Crer votre organisation"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Commencez votre essai gratuit en quelques clics"})]}),i.jsxs("form",{onSubmit:u,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"companyName",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Nom de l'entreprise *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(pe,{id:"companyName",type:"text",placeholder:"Ex: Acme Corporation",value:n.companyName,onChange:l,disabled:t,className:`pl-10 ${o.companyName?"border-red-500":""}`})]}),o.companyName&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.companyName})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminEmail",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Email administrateur *"}),i.jsxs("div",{className:"relative",children:[i.jsx(en,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(pe,{id:"adminEmail",type:"email",placeholder:"admin@acme.com",value:n.adminEmail,onChange:l,disabled:t,className:`pl-10 ${o.adminEmail?"border-red-500":""}`})]}),o.adminEmail&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.adminEmail})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"adminPassword",className:"text-sm font-medium text-gray-700 mb-1.5",children:"Mot de passe *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx(pe,{id:"adminPassword",type:"password",placeholder:"Minimum 6 caractres",value:n.adminPassword,onChange:l,disabled:t,className:`pl-10 ${o.adminPassword?"border-red-500":""}`})]}),o.adminPassword&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.adminPassword})]}),i.jsx(H,{type:"submit",disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3",children:t?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-5 h-5 mr-2 animate-spin"}),"Cration en cours..."]}):"Crer mon organisation"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Vous avez dj un compte ?"," ",i.jsx("button",{onClick:()=>e("/client-access"),className:"text-blue-600 hover:text-blue-700 font-medium",disabled:t,children:"Se connecter"})]})})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-xs text-gray-500",children:" Vos donnes sont scurises et chiffres"})})]})})},Fse=()=>{const e=Te(),{setUserProjects:t,addProspect:r,setCurrentUser:n}=Ve(),[s,o]=p.useState({company:"",name:"",email:"",phone:"",password:""}),[a,l]=p.useState({}),c=d=>{const{id:h,value:m}=d.target;o(g=>({...g,[h]:m}))},u=()=>{const d={};return s.company||(d.company="Le nom de l'entreprise est requis."),s.name||(d.name="Le nom complet est requis."),s.email?/\S+@\S+\.\S+/.test(s.email)||(d.email="L'adresse e-mail est invalide."):d.email="L'adresse e-mail est requise.",s.phone||(d.phone="Le numro de tlphone est requis."),s.password?s.password.length<6&&(d.password="Le mot de passe doit contenir au moins 6 caractres."):d.password="Le mot de passe est requis.",l(d),Object.keys(d).length===0},f=d=>{if(d.preventDefault(),u()){const h=["ProducteurPro"],m={id:`prospect-${Date.now()}`,name:s.name,companyName:s.company,email:s.email,phone:s.phone,address:"",tags:h,status:"Intress",hasAppointment:!1};r(m),t&&t(h);const g={id:m.id,name:m.name,email:m.email};n(g),F({title:"Inscription russie !",description:"Bienvenue dans votre espace partenaire Evatime."}),e("/dashboard")}};return i.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:i.jsx("div",{className:"container mx-auto px-4 py-16 lg:py-24",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-24 items-center",children:[i.jsxs(ae.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"space-y-8",children:[i.jsxs("h1",{className:"text-4xl lg:text-6xl font-extrabold tracking-tight",children:["Vendez votre lectricit  un tarif ",i.jsx("span",{className:"text-green-400",children:"plus attractif"})," que l'EDF OA."]}),i.jsx("p",{className:"text-lg text-gray-300",children:"Grce  l'autoconsommation collective (ACC), vous pouvez vendre votre surplus d'nergie directement aux consommateurs locaux, en court-circuitant les tarifs d'obligation d'achat. Augmentez la rentabilit de vos centrales, qu'il s'agisse d'une seule installation ou d'un parc entier."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(v3,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Rentabilit Maximale :"})," Obtenez un meilleur prix pour chaque kWh produit."]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(Eo,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Circuit Court :"})," Vendez localement et renforcez votre impact territorial."]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-500/20 p-2 rounded-full",children:i.jsx(fP,{className:"h-5 w-5 text-green-400"})}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold",children:"Simplicit Garantie :"})," Notre plateforme gre la complexit administrative pour vous."]})]})]})]}),i.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"Devenez Partenaire Producteur"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"company",className:"text-gray-300",children:"Nom de l'entreprise"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(d3,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"company",placeholder:"Solar Corp",onChange:c,value:s.company,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.company&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.company})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"name",className:"text-gray-300",children:"Nom complet"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Tc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"name",placeholder:"Jack Dupont",onChange:c,value:s.name,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.name&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.name})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"phone",className:"text-gray-300",children:"Tlphone"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Pc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"phone",type:"tel",placeholder:"06 12 34 56 78",onChange:c,value:s.phone,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.phone&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.phone})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"email",className:"text-gray-300",children:"Email"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(en,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"email",type:"email",placeholder:"jack.dupont@email.com",onChange:c,value:s.email,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.email&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.email})]}),i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"password",className:"text-gray-300",children:"Mot de passe"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx(Vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(pe,{id:"password",type:"password",placeholder:"",onChange:c,value:s.password,className:"pl-10 bg-white/10 text-white placeholder-gray-400 border-white/30 focus:ring-green-400 focus:border-green-400"})]}),a.password&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:a.password})]}),i.jsx(H,{type:"submit",size:"lg",className:"w-full bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 mt-4",children:"Je maximise mes revenus"})]})]})]})})})};function Bse(){var r,n,s,o,a,l,c,u,f;const[e,t]=p.useState({projects:null,pipeline:null,company:null,loading:!0,error:null});return p.useEffect(()=>{async function d(){try{const{data:h,error:m}=await T.from("project_templates").select("*");if(m)throw m;const{data:g,error:v}=await T.from("global_pipeline_steps").select("*").order("position");if(v)throw v;const{data:x,error:b}=await T.from("company_settings").select("*").limit(1).single();if(b)throw b;t({projects:h,pipeline:g,company:x,loading:!1,error:null})}catch(h){logger.error(" Erreur:",h),t(m=>({...m,loading:!1,error:h}))}}d()},[]),e.loading?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Test de connexion Supabase en cours..."})]})}):e.error?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-2xl w-full",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:" Erreur de connexion"}),i.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(e.error,null,2)})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:" Connexion Supabase russie !"}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:[" Modles de projets (",(r=e.projects)==null?void 0:r.length,")"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(n=e.projects)==null?void 0:n.map(d=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl mb-2",children:d.icon}),i.jsx("h3",{className:"font-semibold text-gray-900",children:d.title}),i.jsx("p",{className:"text-sm text-gray-600",children:d.type}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:d.is_public?" Public":" Priv"})]},d.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:[" tapes du pipeline (",(s=e.pipeline)==null?void 0:s.length,")"]}),i.jsx("div",{className:"flex gap-4 overflow-x-auto",children:(o=e.pipeline)==null?void 0:o.map(d=>i.jsxs("div",{className:`${d.color} border border-gray-300 rounded-lg p-4 min-w-[150px]`,children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:d.label}),i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Position: ",d.position]})]},d.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Paramtres de l'entreprise"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nom:"})," ",(a=e.company)==null?void 0:a.company_name]}),i.jsxs("p",{className:"text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Formulaire de contact:"})," ",((u=(c=(l=e.company)==null?void 0:l.settings)==null?void 0:c.contact_form_config)==null?void 0:u.length)||0," champs"]}),((f=e.company)==null?void 0:f.logo_url)&&i.jsx("img",{src:e.company.logo_url,alt:"Logo",className:"h-16 mt-4"})]})]}),i.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-800",children:[" ",i.jsx("strong",{children:"Astuce:"})," Ouvre la console du navigateur (F12) pour voir les logs dtaills."]})})]})})}const zse=()=>{const[e]=Mf(),t=Te(),[r,n]=p.useState(!1),[s,o]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1);p.useEffect(()=>{(async()=>{const g=new URLSearchParams(window.location.hash.substring(1)),v=g.get("access_token");g.get("type");const x=g.get("error"),b=g.get("error_description"),y=e.get("token"),w=e.get("type");if(x){logger.error(" Erreur dans le hash:",x,b),F({title:"Erreur d'authentification",description:b||"Une erreur est survenue.",variant:"destructive"}),setTimeout(()=>t("/"),3e3);return}v||y&&w==="recovery"||(console.warn(" Aucun token de rcupration valide trouv"),console.warn("URL complte:",window.location.href),F({title:"Lien invalide",description:"Ce lien de rinitialisation n'est pas valide ou a expir.",variant:"destructive"}),setTimeout(()=>t("/"),3e3))})()},[e,t]);const h=async m=>{if(m.preventDefault(),s!==a){F({title:"Erreur",description:"Les mots de passe ne correspondent pas.",variant:"destructive"});return}if(s.length<6){F({title:"Erreur",description:"Le mot de passe doit contenir au moins 6 caractres.",variant:"destructive"});return}n(!0);try{const{error:g}=await T.auth.updateUser({password:s});if(g)throw g;const{data:{user:v}}=await T.auth.getUser();if(v){const{data:x}=await T.from("prospects").select("*").eq("user_id",v.id).single();x?(F({title:" Compte activ",description:"Bienvenue ! Votre compte a t activ avec succs.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/dashboard")},1500)):(F({title:" Mot de passe modifi",description:"Votre mot de passe a t rinitialis avec succs.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/")},2e3))}else F({title:" Mot de passe modifi",description:"Vous pouvez maintenant vous connecter.",className:"bg-green-500 text-white"}),setTimeout(()=>{t("/")},2e3)}catch(g){logger.error("Erreur rinitialisation mot de passe:",g),F({title:"Erreur",description:g.message||"Impossible de rinitialiser le mot de passe.",variant:"destructive"})}finally{n(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"space-y-1 mb-6",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-4 mx-auto",children:i.jsx(Vf,{className:"w-6 h-6 text-blue-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-center",children:"Rinitialiser le mot de passe"}),i.jsx("p",{className:"text-center text-gray-600",children:"Choisissez un nouveau mot de passe pour votre compte"})]}),i.jsx("div",{children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"password",children:"Nouveau mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(pe,{id:"password",type:c?"text":"password",placeholder:"Au moins 6 caractres",value:s,onChange:m=>o(m.target.value),required:!0,disabled:r,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?i.jsx(Jl,{className:"w-4 h-4"}):i.jsx(Xl,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Q,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(pe,{id:"confirmPassword",type:f?"text":"password",placeholder:"Retapez votre mot de passe",value:a,onChange:m=>l(m.target.value),required:!0,disabled:r,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>d(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?i.jsx(Jl,{className:"w-4 h-4"}):i.jsx(Xl,{className:"w-4 h-4"})})]})]}),i.jsx(H,{type:"submit",className:"w-full",disabled:r,children:r?"Rinitialisation...":"Rinitialiser le mot de passe"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:()=>t("/"),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Retour  la connexion"})})]})})]})})};function Use(){const{signatureProcedureId:e}=fa(),[t]=Mf(),r=t.get("token"),[n,s]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1);p.useEffect(()=>{b()},[e,r]);const b=async()=>{try{if(s(!0),a(null),!r){a("Token manquant"),s(!1);return}P.debug("Chargement procdure",{signatureProcedureId:e,token:r});const{data:w,error:j}=await T.from("signature_procedures").select("*, project_files!signature_procedures_file_id_fkey(*)").eq("id",e).eq("access_token",r).single();if(j||!w){P.error("Erreur chargement procdure",j),a("Lien invalide ou expir"),s(!1);return}if(new Date(w.access_token_expires_at)<new Date){a("Lien expir - Veuillez contacter votre conseiller"),s(!1);return}if(w.status==="refused"||w.status==="cancelled"){a(`Signature ${w.status==="refused"?"refuse":"annule"}`),s(!1);return}c(w);const{data:S}=await T.from("signature_proofs").select("id, created_at").eq("signature_procedure_id",w.id).eq("signer_email",w.signer_email).maybeSingle();if(S){P.info("Signataire principal a dj sign",{email:w.signer_email,signedAt:S.created_at}),x(!0),s(!1);return}P.debug(" Procdure charge",{signer_name:w.signer_name,signer_email:w.signer_email,status:w.status});const{data:N,error:E}=await T.storage.from("project-files").createSignedUrl(w.project_files.storage_path,3600);if(E){P.error("Erreur cration URL signe",E),a("Impossible de charger le PDF"),s(!1);return}f(N.signedUrl),s(!1)}catch(w){P.error("Erreur chargement procdure",w),a("Erreur lors du chargement"),s(!1)}},y=async()=>{if(!d){alert("Veuillez accepter les conditions avant de signer");return}try{g(!0),P.debug("Tlchargement PDF pour calcul hash...");const _=await(await(await fetch(u)).blob()).arrayBuffer(),S=await crypto.subtle.digest("SHA-256",_),E=Array.from(new Uint8Array(S)).map(A=>A.toString(16).padStart(2,"0")).join("");P.debug("Hash SHA-256 calcul",{documentHash:E.substring(0,16)+"..."});const{data:C,error:k}=await T.functions.invoke("internal-signature",{body:{signature_procedure_id:e,signer_email:l.signer_email,signer_user_id:null,pdf_file_id:l.file_id,pdf_hash:E}});if(k)throw P.error("Erreur cration preuve signature",k),k;P.debug("Preuve de signature cre",C);const{data:I}=await T.from("signature_procedures").select("signers").eq("id",e).single(),O=((I==null?void 0:I.signers)||[]).map(A=>A.email===l.signer_email&&A.role==="principal"?{...A,status:"signed",signed_at:new Date().toISOString()}:A),M=O.some(A=>A.status==="pending"),D=M?"partially_signed":"completed";P.debug(" Analyse des signataires:",{totalSigners:O.length,signedCount:O.filter(A=>A.status==="signed").length,pendingCount:O.filter(A=>A.status==="pending").length,hasPendingSigners:M,globalStatus:D,allSigners:O});const z={signed_at:new Date().toISOString(),user_agent:navigator.userAgent,platform:navigator.platform,language:navigator.language,screen_resolution:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,consent_text:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite.",signature_method:"AES_eIDAS_art26",document_hash_algorithm:"SHA-256"},{data:B,error:q}=await T.from("signature_procedures").update({status:D,signers:O,signed_at:new Date().toISOString(),document_hash:E,signature_metadata:z}).eq("id",e).eq("access_token",r).select().single();if(q)throw P.error("Erreur mise  jour signature",q),q;if(P.debug("Signature enregistre avec succs",{procedureId:e,signer_name:B.signer_name,signer_email:B.signer_email,globalStatus:D,signed_at:B.signed_at}),D==="completed"){P.debug(" Status = completed - Appel generate-signed-pdf",{procedure_id:e});const{data:A,error:R}=await T.functions.invoke("generate-signed-pdf",{body:{signature_procedure_id:e}});R?P.error(" Erreur gnration PDF sign",R):P.debug(" PDF sign gnr avec succs",A)}else P.debug(" Status = partially_signed - Attente des co-signataires",{globalStatus:D,pendingSigners:O.filter(A=>A.status==="pending")});c(B),x(!0),g(!1)}catch(w){P.error("Erreur signature",w),a(`Erreur lors de la signature: ${w.message}`),g(!1)}};return n?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(De,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Chargement du document..."})]})}):o?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(ly,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),i.jsx("p",{className:"text-gray-600",children:o})]})}):v&&l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(zf,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contrat sign !"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Votre signature lectronique a t enregistre avec succs."}),i.jsxs("div",{className:"text-sm text-gray-500 space-y-1 bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Signataire:"})," ",l.signer_name]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",l.signer_email]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date(l.signed_at).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-t-lg shadow-lg p-6 border-b",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Signature lectronique"}),i.jsxs("p",{className:"text-gray-600",children:["Signataire: ",i.jsx("span",{className:"font-semibold",children:l==null?void 0:l.signer_name})," (",l==null?void 0:l.signer_email,")"]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Expire le: ",new Date(l==null?void 0:l.access_token_expires_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 border-b",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document  signer"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"600px"},children:i.jsx("iframe",{src:u,className:"w-full h-full",title:"Document PDF"})})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-b-lg",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Consentement  la signature lectronique"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique conforme au rglement eIDAS (article 26) et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite."}),i.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Cette signature est horodate et scelle par un hash cryptographique SHA-256 du document."})]}),i.jsxs("div",{className:"flex items-start space-x-3 mb-6",children:[i.jsx(rr,{id:"accept",checked:d,onCheckedChange:h,className:"mt-1"}),i.jsx("label",{htmlFor:"accept",className:"text-sm text-gray-700 cursor-pointer",children:"J'ai lu et accept les termes du contrat, et je consens  signer lectroniquement ce document"})]}),i.jsx(H,{onClick:y,disabled:!d||m,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-6 text-lg",children:m?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-5 h-5 animate-spin mr-2"}),"Signature en cours..."]}):i.jsx(i.Fragment,{children:" Signer le contrat"})}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Signature lectronique avance (AES) conforme au rglement eIDAS (UE) n910/2014 - Article 26"})]})]})})}const Vse=()=>{const[e]=Mf();Te();const t=e.get("token"),[r,n]=p.useState("otp"),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(""),[f,d]=p.useState(null),[h,m]=p.useState(""),[g,v]=p.useState(""),[x,b]=p.useState(""),[y,w]=p.useState(!1),[j,_]=p.useState(!1),[S,N]=p.useState(3),[E,C]=p.useState(!1);p.useEffect(()=>{if(!t){u("Token manquant");return}(async()=>{var D;try{l(!0);const{data:z,error:B}=await T.from("cosigner_invite_tokens").select("signature_procedure_id, signer_email").eq("token",t).single();if(B||!z){u("Lien invalide"),l(!1);return}const{data:q,error:A}=await T.from("signature_procedures").select("*").eq("id",z.signature_procedure_id).single();if(A||!q){u("Procdure de signature introuvable"),l(!1);return}d(q);const R=(D=q.signers)==null?void 0:D.find(V=>V.email===z.signer_email&&V.role==="cosigner");m(z.signer_email),v((R==null?void 0:R.name)||z.signer_email);const{data:$}=await T.from("signature_proofs").select("id, created_at").eq("signature_procedure_id",q.id).eq("signer_email",z.signer_email).maybeSingle();if($){P.info("Co-signataire a dj sign",{email:z.signer_email,signedAt:$.created_at}),_(!0),l(!1);return}l(!1);const L=`otp_requested_${t}`;localStorage.getItem(L)||(k(),localStorage.setItem(L,Date.now().toString()),setTimeout(()=>localStorage.removeItem(L),10*60*1e3))}catch(z){P.error("Erreur chargement procdure",z),u("Erreur chargement"),l(!1)}})()},[t]);const k=async()=>{try{l(!0),u("");const{data:M,error:D}=await T.functions.invoke("send-cosigner-otp",{body:{token:t}});if(D){u(D.message||"Erreur envoi OTP");return}if(M!=null&&M.already_signed){P.info("Co-signataire a dj sign",{signedAt:M.signed_at}),_(!0),l(!1);return}N(3),u(""),M!=null&&M.dev_otp&&window.location.hostname==="localhost"&&(P.debug("OTP DEV:",M.dev_otp),console.log(" [DEV ONLY] Votre OTP:",M.dev_otp))}catch(M){P.error("Erreur requestOtp",M),u("Erreur envoi OTP")}finally{l(!1)}},I=async M=>{if(M.preventDefault(),s.length!==6){u("Le code doit contenir 6 chiffres");return}try{l(!0),u("");const{data:D,error:z}=await T.functions.invoke("verify-cosigner-otp",{body:{token:t,otp:s}});if(z||D!=null&&D.error){const q=(D==null?void 0:D.error)||(z==null?void 0:z.message)||"Code incorrect";u(q),(D==null?void 0:D.remaining_attempts)!==void 0&&N(D.remaining_attempts),l(!1);return}d(D.procedure),m(D.procedure.signer_email),v(D.procedure.signer_name||D.procedure.signer_email);const{data:B}=await T.from("project_files").select("storage_path").eq("id",D.procedure.file_id).single();if(B!=null&&B.storage_path){const{data:q}=await T.storage.from("project-files").createSignedUrl(B.storage_path,3600);q!=null&&q.signedUrl&&(b(q.signedUrl),n("pdf"))}}catch(D){P.error("Erreur verifyOtp",D),u("Erreur vrification")}finally{l(!1)}},O=async()=>{try{w(!0),u("");const z=await(await(await fetch(x)).blob()).arrayBuffer(),B=await crypto.subtle.digest("SHA-256",z),A=Array.from(new Uint8Array(B)).map(re=>re.toString(16).padStart(2,"0")).join("");P.debug("Cosigner signature - PDF hash calcul",{pdfHash:A});const{data:R,error:$}=await T.functions.invoke("internal-signature",{body:{signature_procedure_id:f.id,signer_email:h,signer_user_id:null,pdf_file_id:f.file_id,pdf_hash:A}});if($){P.error("Erreur signature cosigner",$),u("Erreur lors de la signature"),w(!1);return}P.debug("Preuve de signature cre",R);const{data:L,error:W}=await T.from("signature_procedures").select("id, signers").eq("id",f.id).single();if(W){P.error("Erreur rcupration procdure",W),u("Erreur lors de la signature"),w(!1);return}if(!L){P.error("Procdure introuvable"),u("Procdure introuvable"),w(!1);return}const V=L.id;if(L!=null&&L.signers){const re=L.signers.map(ue=>ue.email===h&&ue.role==="cosigner"?{...ue,status:"signed",signed_at:new Date().toISOString()}:ue),ve=re.some(ue=>ue.status==="pending"),se=ve?"partially_signed":"completed";P.debug(" Co-signataire - Analyse des signataires:",{email:h,procedureId:V,totalSigners:re.length,signedCount:re.filter(ue=>ue.status==="signed").length,pendingCount:re.filter(ue=>ue.status==="pending").length,hasPendingSigners:ve,globalStatus:se,allSigners:re});const{error:Z}=await T.from("signature_procedures").update({signers:re,status:se}).eq("id",V);if(Z){P.error("Erreur mise  jour procdure",Z),u("Erreur lors de la signature"),w(!1);return}if(P.debug("Procdure mise  jour avec succs",{globalStatus:se}),se==="completed"){P.debug(" Co-signataire - Status = completed - Appel generate-signed-pdf",{signature_procedure_id:V});const{data:ue,error:Y}=await T.functions.invoke("generate-signed-pdf",{body:{signature_procedure_id:V}});Y?P.error(" Co-signataire - Erreur gnration PDF sign",Y):P.debug(" Co-signataire - PDF sign gnr avec succs",ue)}else P.debug(" Co-signataire - Status = partially_signed - Attente d'autres signataires",{globalStatus:se,pendingSigners:re.filter(ue=>ue.status==="pending")})}_(!0),w(!1)}catch(M){P.error("Erreur handleSign",M),u("Erreur lors de la signature"),w(!1)}};return t?j?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(zf,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contrat sign !"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Votre signature lectronique a t enregistre avec succs."}),f&&h&&i.jsxs("div",{className:"text-sm text-gray-500 space-y-1 bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Signataire:"})," ",g]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",h]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date().toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:r==="otp"?i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(rv,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vrification de scurit"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Un code  6 chiffres a t envoy par email"})]}),i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Q,{htmlFor:"otp",children:"Code de vrification"}),i.jsx(pe,{id:"otp",type:"text",value:s,onChange:M=>o(M.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"text-center text-2xl tracking-widest",maxLength:6,disabled:a}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tentatives restantes: ",S]})]}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx(H,{type:"submit",className:"w-full",disabled:a||s.length!==6,children:a?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-4 h-4 mr-2 animate-spin"}),"Vrification..."]}):"Vrifier le code"}),i.jsx(H,{type:"button",variant:"outline",className:"w-full",onClick:k,disabled:a,children:"Renvoyer un code"})]})]}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-t-lg shadow-lg p-6 border-b",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Signature lectronique - Co-signataire"}),i.jsxs("p",{className:"text-gray-600",children:["Signataire: ",i.jsx("span",{className:"font-semibold",children:f==null?void 0:f.signer_email})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Document vrifi et scuris"})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 border-b",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document  signer"}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:i.jsx("p",{className:"text-sm text-red-700",children:c})}),i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"600px"},children:i.jsx("iframe",{src:x,className:"w-full h-full",title:"Document PDF"})})]}),i.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-b-lg",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Consentement  la signature lectronique"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"En signant lectroniquement ce document, je reconnais avoir lu et accept l'intgralit des termes du contrat ci-joint. Je consens  l'utilisation de la signature lectronique conforme au rglement eIDAS (article 26) et reconnais qu'elle a la mme valeur juridique qu'une signature manuscrite."}),i.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Cette signature est horodate et scelle par un hash cryptographique SHA-256 du document."})]}),i.jsxs("div",{className:"flex items-start space-x-3 mb-6",children:[i.jsx(rr,{id:"accept",checked:E,onCheckedChange:C,className:"mt-1"}),i.jsx("label",{htmlFor:"accept",className:"text-sm text-gray-700 cursor-pointer",children:"J'ai lu et accept les termes du contrat, et je consens  signer lectroniquement ce document"})]}),i.jsx(H,{onClick:O,disabled:!E||y,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-6 text-lg",children:y?i.jsxs(i.Fragment,{children:[i.jsx(De,{className:"w-5 h-5 animate-spin mr-2"}),"Signature en cours..."]}):i.jsx(i.Fragment,{children:" Signer le contrat"})}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Signature lectronique avance (AES) conforme au rglement eIDAS (UE) n910/2014 - Article 26"})]})]})})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-red-600",children:"Token manquant"})})})},ID=p.createContext(null),qse=({children:e})=>{const[t,r]=p.useState(null),[n,s]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(!0),[v,x]=p.useState(!1);p.useEffect(()=>{(async()=>{var w;try{const j=window.location.hostname,{data:_,error:S}=await T.rpc("resolve_organization_from_host",{host:j});if(S){console.warn("[PublicOrg] RPC error, fallback to platform:",S.message),x(!0),g(!1);return}const N=(_==null?void 0:_.id)||Array.isArray(_)&&((w=_[0])==null?void 0:w.id)||(typeof _=="string"?_:null);if(!N){console.info("[PublicOrg] No org found for hostname, using platform defaults"),x(!0),g(!1);return}r(N),x(!1);const{data:E,error:C}=await T.from("organization_settings").select("display_name, logo_url, primary_color, secondary_color, landing_page_config").eq("organization_id",N).single();!C&&E&&(s(E.display_name),a(E.logo_url),c(E.primary_color),f(E.secondary_color),h(E.landing_page_config)),g(!1)}catch(j){console.error("[PublicOrg] Exception:",j),x(!0),g(!1)}})()},[]),p.useEffect(()=>{l&&document.documentElement.style.setProperty("--primary",l),u&&document.documentElement.style.setProperty("--secondary",u)},[l,u]),p.useEffect(()=>{n&&(document.title=n)},[n]);const b={organizationId:t,brandName:n||"EVATIME",logoUrl:o||"/evatime-logo.png",primaryColor:l,secondaryColor:u,landingConfig:d,loading:m,isPlatform:v};return i.jsx(ID.Provider,{value:b,children:e})},Wse=()=>{const e=p.useContext(ID);if(e)return{organizationId:e.organizationId,isPlatformOrg:e.isPlatform,brandName:e.brandName,logoUrl:e.logoUrl,organizationLoading:e.loading,landingConfig:e.landingConfig};const t=p.useContext(w0);return t?{organizationId:t.organizationId,isPlatformOrg:t.isPlatformOrg,brandName:t.brandName,logoUrl:t.logoUrl,organizationLoading:t.organizationLoading,landingConfig:null}:{organizationId:null,isPlatformOrg:!0,brandName:"EVATIME",logoUrl:"/evatime-logo.png",organizationLoading:!1,landingConfig:null}};function ud(){const{toast:e}=xP(),{organizationId:t,isPlatformOrg:r,brandName:n,logoUrl:s,organizationLoading:o,landingConfig:a}=Wse(),l=a,c=r||!t,u=c?"EVATIME":n||"EVATIME",f=c?"/evatime-logo.png":s||"/evatime-logo.png",d=["Gnration automatique de devis personnaliss","Cration de factures intelligentes","Suivi des paiements en temps rel","Relances clients automatises","Rapports d'activit instantans"],h=[{icon:nv,title:"Automatisations intelligentes",description:"L'IA gre vos tches rptitives pendant que vous vous concentrez sur l'essentiel",gradient:"from-blue-500 to-cyan-500"},{icon:yl,title:"Formulaires & questionnaires IA",description:"Crez des formulaires adaptatifs qui s'ajustent automatiquement aux rponses",gradient:"from-cyan-500 to-blue-600"},{icon:I3,title:"Workflows automatiques",description:"Orchestrez vos processus mtier sans une ligne de code",gradient:"from-blue-600 to-indigo-600"},{icon:b3,title:"Documents instantans",description:"Gnrez devis, factures et contrats en quelques secondes",gradient:"from-indigo-600 to-blue-500"},{icon:m3,title:"Paiements & signatures",description:"Encaissez et faites signer vos documents en un clic",gradient:"from-blue-500 to-cyan-600"},{icon:tv,title:"Gestion de projets complte",description:"Pilotez tous vos projets depuis une interface unifie",gradient:"from-cyan-600 to-blue-500"},{icon:g3,title:"Donnes connectes en temps rel",description:"Synchronisation instantane de toutes vos informations",gradient:"from-blue-500 to-indigo-500"}],m=[{icon:fj,title:"Qualification du projet",description:"Le client remplit un formulaire intelligent qui collecte les informations cls sur son projet (localisation, consommation, type de toiture...). L'IA analyse les donnes en temps rel pour valider l'ligibilit du projet."},{icon:Yl,title:"Pr-tude automatique",description:"L'IA gnre instantanment une pr-tude complte : Le client peut simuler lui mme son installation."},{icon:_3,title:"tude technique",description:"Si le client est intress, l'IA assigne le projet  un technicien. Le technicien complte les informations sur site via une application, et l'IA met  jour l'tude technique en temps rel."},{icon:C3,title:"Offre personnalise",description:"Sur la base de l'tude finalise, l'IA gnre une offre commerciale dtaille et personnalise, incluant le plan de financement et les garanties. Elle est envoye automatiquement au client. Un rdv avec un commercial en visio ou sur le terrain est souvent ncssaire pour le contact humain et facilit la rcupration des documents"},{icon:uj,title:"Signature & Paiement",description:"Le client peut signer lectroniquement son devis en un clic en direct avec un closer au telephone ou what app. L'IA dclenche ensuite la demande d'acompte et suit le paiement en temps rel."},{icon:hj,title:"Dmarches administratives",description:"Une fois le devis sign, l'IA pr-remplit tous les documents administratifs ncessaires (mairie, Enedis...) et suit leur avancement, vous notifiant  chaque tape cl."},{icon:O3,title:"Installation & Mise en service",description:"L'IA planifie l'intervention avec le client et les quipes techniques. Elle gnre le rapport de fin de chantier et dclenche la facturation finale une fois l'installation valide."}],g=[{icon:fj,title:"Qualification du besoin",description:"Le client dcrit son projet de piscine via un questionnaire interactif : dimensions, type (enterre, hors-sol), options (chauffage, volet...). L'IA affine les questions pour cerner prcisment ses attentes."},{icon:hy,title:"tude du terrain",description:"L'IA analyse l'adresse du client, les rgles d'urbanisme locales (PLU) et utilise des donnes satellites pour une premire validation de la faisabilit technique (accs, topographie)."},{icon:x3,title:"Proposition de modles adapts",description:"En fonction du budget, des dimensions et des contraintes du terrain, l'IA propose une slection de modles de piscines et d'amnagements pertinents, avec des visuels 3D."},{icon:yl,title:"Offre complte & devis",description:"Une fois le modle choisi, l'IA gnre un devis dtaill incluant la piscine, les quipements, les travaux de terrassement et les options, le tout envoy instantanment au client."},{icon:uj,title:"Signature & paiement acompte",description:"Le client signe son devis en ligne. L'IA gnre la facture d'acompte et propose le paiement en ligne pour lancer officiellement le projet."},{icon:hj,title:"Dclarations & dmarches",description:"L'IA prpare automatiquement la dclaration pralable de travaux ou la demande de permis de construire avec toutes les pices ncessaires, prte  tre dpose en mairie."},{icon:P3,title:"Prparation & travaux",description:"L'IA coordonne le planning des quipes (terrassement, maonnerie, pose...) et informe le client en temps rel de l'avancement du chantier  chaque tape cl."},{icon:y3,title:"Mise en eau & livraison",description:"Une fois les travaux termins, l'IA planifie la mise en eau, gnre le procs-verbal de rception et envoie les guides d'entretien personnaliss au client."}],v="https://horizons-cdn.hostinger.com/0006a1c4-b9a7-4c6e-882d-144771383456/3bfa51980327b635c396a2f5c6661668.png",x="https://horizons-cdn.hostinger.com/0006a1c4-b9a7-4c6e-882d-144771383456/1f9d3e047ee189487d139fbe166d1557.png",b=()=>{e({title:"Fonctionnalit  venir !",description:" Cette fonctionnalit n'est pas encore implmentemais ne vous inquitez pas ! "})},y=()=>{const w=l||{},j=w.hero_title||`Bienvenue chez ${u}`,_=w.hero_subtitle||"Suivez l'avancement de votre projet en temps rel",S=w.hero_cta_text||"Je dmarre mon projet",N=w.show_how_it_works!==!1,E=w.blocks||[{title:"tude",description:"Analyse de votre projet"},{title:"Installation",description:"Ralisation des travaux"},{title:"Suivi",description:"Accompagnement continu"}];return i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"pt-32 pb-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[i.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent leading-tight",children:j}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto",children:_}),i.jsxs("div",{className:"flex justify-center items-center gap-4",children:[i.jsx(H,{onClick:()=>window.location.href="/inscription",className:"bg-[#22c55e] hover:bg-[#16a34a] hover:scale-105 text-white rounded-full px-10 py-6 text-lg font-semibold transition-transform duration-200",children:S}),N&&i.jsx("button",{onClick:()=>{var C;return(C=document.getElementById("how-it-works"))==null?void 0:C.scrollIntoView({behavior:"smooth"})},className:"text-[#22c55e] hover:text-[#16a34a] font-medium text-lg transition-colors",children:w.how_it_works_title||"Comment a marche ?"})]})]})})}),N&&i.jsx("section",{id:"how-it-works",className:"py-20 px-6 bg-gradient-to-br from-blue-50 to-cyan-50",children:i.jsxs("div",{className:"container mx-auto max-w-6xl",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16 text-gray-900",children:w.how_it_works_title||"Comment a marche ?"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:E.map((C,k)=>i.jsxs(ae.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:k*.1},viewport:{once:!0},className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-4xl mb-4",children:C.icon||k+1}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:C.title}),i.jsx("p",{className:"text-gray-600",children:C.description})]},k))})]})}),i.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-blue-600 via-cyan-600 to-blue-700",children:i.jsx("div",{className:"container mx-auto max-w-4xl text-center",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8",children:"Prt  commencer ?"}),i.jsx(H,{onClick:()=>window.location.href="/inscription",className:"bg-white text-blue-600 hover:bg-gray-100 rounded-full px-10 py-6 text-lg shadow-xl font-semibold",children:S})]})})}),i.jsx("footer",{className:"bg-gray-900 text-white py-12 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"flex flex-col items-center gap-6",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f&&i.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:i.jsx("img",{src:f,alt:`${u} Logo`,className:"w-full h-full object-contain"})}),i.jsx("span",{className:"text-xl font-bold",children:u}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",u,". Tous droits rservs."]})]}),i.jsx(H,{onClick:()=>window.location.href="/partner/login",className:"bg-[#f97316] hover:bg-[#ea580c] hover:scale-105 text-white rounded-full px-8 py-3 font-semibold transition-transform duration-200 shadow-lg",children:"Espace Partenaire"})]})})})]})};return o?i.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!c&&o?i.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs(i.Fragment,{children:[i.jsxs(zd,{children:[i.jsx("title",{children:"EVATIME - L'IA qui pilote votre activit"}),i.jsx("meta",{name:"description",content:"Automatisez votre activit avec l'intelligence artificielle. Formulaires IA, workflows automatiques, documents instantans et gestion de projets complte."})]}),i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:s?i.jsx("div",{className:"h-12 flex items-center justify-center",children:i.jsx("img",{src:s,alt:`${u} Logo`,className:"h-full object-contain max-w-[200px]"})}):i.jsx("div",{children:i.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:u})})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(H,{onClick:()=>window.location.href="/login",className:"bg-[#22c55e] hover:bg-[#16a34a] hover:scale-105 text-white rounded-full px-6 font-medium transition-transform duration-200",children:"Espace Pro"}),i.jsx(H,{onClick:()=>window.location.href="/client-access",className:"bg-[#0ea5e9] hover:bg-[#0284c7] hover:scale-105 text-white rounded-full px-6 font-medium transition-transform duration-200",children:"Espace Client"})]})]})})}),!c&&y(),c&&i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"pt-32 pb-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[i.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent leading-tight",children:["L'IA qui pilote",i.jsx("br",{}),"votre activit"," ",i.jsx("img",{src:x,alt:"Rocket icon",className:"inline-block h-20 w-20 align-middle -mt-5 ml-1"})]}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto",children:"Automatisez vos processus, gnrez vos documents et pilotez votre entreprise avec l'intelligence artificielle"}),i.jsx("div",{className:"flex justify-center",children:i.jsxs(H,{onClick:b,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-full px-8 py-6 text-lg shadow-xl",children:["Essayer gratuitement",i.jsx(cj,{className:"ml-2 h-5 w-5"})]})})]})})}),i.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-blue-50 to-cyan-50",children:i.jsxs("div",{className:"container mx-auto max-w-6xl",children:[i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Comment a marche ?"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Une plateforme qui connecte votre entreprise, vos clients et l'IA pour automatiser l'ensemble de votre activit"})]}),i.jsxs(ae.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-6",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Votre entreprise"}),i.jsx("p",{className:"text-gray-600",children:"Dites  EVATIME comment vous travaillez. Elle transforme vos tapes en un systme 100 % automatis."})]}),i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-6",children:i.jsx(nv,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"L'IA EVATIME"}),i.jsx("p",{className:"text-gray-600",children:"Elle cre les formulaires, pose les bonnes questions, collecte les documents, envoie les relances, gre le pipeline et vous notifie uniquement quand il faut agir."})]}),i.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center mb-6",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Vos clients"}),i.jsx("p",{className:"text-gray-600",children:"Une interface simple o ils envoient leurs infos, dposent leurs documents, signent, paient et suivent l'avancement, sans jamais vous dranger."})]})]})]})}),i.jsx("section",{className:"py-20 px-6 bg-white",children:i.jsxs("div",{className:"container mx-auto max-w-5xl",children:[i.jsx(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Exemple : Workflow automatis pour une socit solaire"})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 h-full w-px bg-gray-200 hidden md:block"}),m.map((w,j)=>i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.15},className:"relative flex md:items-center mb-12",children:[i.jsxs("div",{className:`flex items-center w-full md:w-1/2 ${j%2===0?"md:pr-12":"md:pl-12 md:ml-auto md:text-right"}`,children:[i.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center md:hidden mr-4",children:i.jsx(w.icon,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600",children:w.description})]})]}),i.jsx("div",{className:"hidden md:flex absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full bg-white border-4 border-gray-200 items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:i.jsx(w.icon,{className:"h-6 w-6 text-white"})})})]},j))]}),i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-16 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-8 text-center text-white flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsx("p",{className:"text-xl font-semibold",children:"Ce processus est 100% automatique et pilot par l'IA d'EVATIME"}),i.jsxs(H,{onClick:b,variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30 rounded-full px-6 py-3 flex-shrink-0",children:["Voir un autre exemple de workflow",i.jsx(Wn,{className:"ml-2 h-4 w-4"})]})]})]})}),i.jsx("section",{className:"py-20 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[i.jsxs(ae.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full mb-6",children:[i.jsx(fP,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-semibold",children:"Automatisations intelligentes"})]}),i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"L'IA travaille pour vous 24/7"}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Librez-vous des tches rptitives et concentrez-vous sur ce qui compte vraiment : dvelopper votre activit"}),i.jsx("div",{className:"space-y-4",children:d.map((w,j)=>i.jsxs(ae.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:j*.1},className:"flex items-start gap-3",children:[i.jsx(zf,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),i.jsx("span",{className:"text-gray-700 text-lg",children:w})]},j))})]}),i.jsx(ae.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative",children:i.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl border border-gray-100",children:[i.jsx("img",{alt:"Automatisations intelligentes EVATIME",className:"w-full h-auto",src:"https://images.unsplash.com/photo-1516383274235-5f42d6c6426d"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/20 to-transparent"})]})})]})})}),i.jsx("section",{className:"py-20 px-6 bg-gray-50",children:i.jsxs("div",{className:"container mx-auto max-w-7xl",children:[i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Tout ce dont vous avez besoin"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Une suite complte d'outils pilots par l'IA pour grer votre activit de A  Z"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((w,j)=>i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.1},className:"bg-white rounded-3xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group cursor-pointer",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${w.gradient} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`,children:i.jsx(w.icon,{className:"h-7 w-7 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-3 text-gray-900",children:w.title}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:w.description})]},j))})]})}),i.jsx("section",{className:"py-20 px-6 bg-gray-50",children:i.jsxs("div",{className:"container mx-auto max-w-5xl",children:[i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:"Exemple : Workflow pour un constructeur de piscine"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Du premier contact  la mise en eau, EVATIME gnre et pilote automatiquement l'intgralit du processus pour chaque projet de construction de piscine."})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 h-full w-px bg-gray-200 hidden md:block"}),g.map((w,j)=>i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.15},className:"relative flex md:items-center mb-12",children:[i.jsxs("div",{className:`flex items-center w-full md:w-1/2 ${j%2!==0?"md:pr-12":"md:pl-12 md:ml-auto md:text-right"}`,children:[i.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center md:hidden mr-4",children:i.jsx(w.icon,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600",children:w.description})]})]}),i.jsx("div",{className:"hidden md:flex absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full bg-white border-4 border-gray-200 items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:i.jsx(w.icon,{className:"h-6 w-6 text-white"})})})]},j))]}),i.jsx(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-12 text-center",children:i.jsxs("p",{className:"text-lg text-gray-700 font-medium bg-blue-50 p-4 rounded-lg inline-block",children:["Tout ce workflow piscine est gnr automatiquement ds qu'un client dmarre un projet."," ",i.jsx("span",{className:"font-bold text-blue-700",children:"EVATIME s'adapte  chaque mtier."})]})})]})}),i.jsxs("section",{className:"py-32 px-6 bg-gradient-to-br from-blue-600 via-cyan-600 to-blue-700 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10",children:i.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),i.jsx("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:i.jsxs(ae.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[i.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6 text-white",children:"Prt  transformer votre activit ?"}),i.jsx("p",{className:"text-xl md:text-2xl text-blue-100 mb-12",children:"Rejoignez les entreprises qui ont choisi l'intelligence artificielle pour piloter leur croissance"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsxs(H,{onClick:b,className:"bg-white text-blue-600 hover:bg-gray-100 rounded-full px-10 py-6 text-lg shadow-xl font-semibold",children:["Commencer gratuitement",i.jsx(cj,{className:"ml-2 h-5 w-5"})]}),i.jsx(H,{onClick:b,variant:"outline",className:"border-2 border-white text-white hover:bg-white/10 rounded-full px-10 py-6 text-lg",children:"Planifier une dmo"})]})]})})]})]}),i.jsx("footer",{className:"bg-gray-900 text-white py-12 px-6",children:i.jsx("div",{className:"container mx-auto max-w-6xl",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:i.jsx("img",{src:v,alt:"EVATIME Logo",className:"w-full h-full object-contain"})}),i.jsx("span",{className:"text-xl font-bold",children:"EVATIME"})]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," EVATIME. Tous droits rservs."]})]})})})]})]})}const Hse=Object.freeze(Object.defineProperty({__proto__:null,default:ud},Symbol.toStringTag,{value:"Module"})),Gse=[{id:"name",name:"Nom*",type:"text",placeholder:"Jean Dupont",required:!0},{id:"companyName",name:"Socit",type:"text",placeholder:"Nom de la socit (optionnel)",required:!1},{id:"email",name:"Email*",type:"email",placeholder:"jean.dupont@email.com",required:!0},{id:"phone",name:"Tlphone",type:"text",placeholder:"06 12 34 56 78",required:!1},{id:"address",name:"Adresse",type:"text",placeholder:"1 Rue de la Paix, 75002 Paris",required:!1}],Kse={id:"id",name:"name",email:"email",phone:"phone",address:"address",status:"status",tags:"tags",notes:"notes",company_name:"companyName",owner_id:"ownerId",has_appointment:"hasAppointment",affiliate_name:"affiliateName",form_data:"formData",created_at:"createdAt",updated_at:"updatedAt",user_id:"userId",organization_id:"organizationId"},Xa=e=>{if(!e)return null;const t={};for(const[r,n]of Object.entries(Kse))e[r]!==void 0&&(t[n]=e[r]);return t.company=e.company_name,t.form_data=e.form_data||{},t.tags=t.tags||[],t.formData=t.formData||{},t.hasAppointment=t.hasAppointment||!1,t},Yse={id:"id",title:"title",type:"type",status:"status",notes:"notes",location:"location",share:"share",step:"step",start_time:"start",end_time:"end",contact_id:"contactId",assigned_user_id:"assignedUserId",project_id:"projectId",rescheduled_from_id:"rescheduledFromId",created_at:"createdAt",updated_at:"updatedAt",organization_id:"organizationId"},Qa=e=>{if(!e)return null;const t={};for(const[r,n]of Object.entries(Yse))e[r]!==void 0&&(t[n]=e[r]);return t},OD=(e,t)=>Array.isArray(e)?e.map(t).filter(Boolean):[],Jse=(e,t)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),[c,u]=p.useState(0),[f,d]=p.useState(!0),h=p.useRef(null),m=p.useRef(!0),g=500,v=async(j=0,_=!1)=>{try{_||o(!0);const{data:{session:S}}=await T.auth.getSession();if(!S){console.warn("[useSupabaseProspects] No session - skipping prospects loading"),n([]),o(!1);return}const{data:N,error:E}=await T.rpc("get_prospects_safe",{p_limit:g,p_offset:j});if(E)throw P.error("Erreur fetch prospects",{error:E.message}),E;const{data:C}=await T.rpc("get_prospects_count");C!==null&&u(C);const k=OD(N,Xa);d(k.length===g),P.debug("Prospects fetched",{count:k.length,offset:j,total:C}),n(_?I=>[...I,...k]:k),l(null)}catch(S){P.error("Erreur chargement prospects",{error:S.message}),l(S.message),F({title:"Erreur",description:"Impossible de charger les prospects.",variant:"destructive"})}finally{o(!1)}},x=()=>{f&&!s&&v(r.length,!0)};return p.useEffect(()=>{if(!e||!e.id){o(!1),n([]);return}v()},[e==null?void 0:e.id]),p.useEffect(()=>{if(!e||!t)return;m.current=!0;const j=T.channel(`prospects-changes-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"prospects",filter:`organization_id=eq.${t}`},_=>{if(m.current)if(_.eventType==="INSERT"){const S=Xa(_.new);n(N=>[S,...N]),F({title:" Nouveau contact",description:`${S.name} a t ajout !`,className:"bg-green-500 text-white"})}else if(_.eventType==="UPDATE"){P.info(" [useSupabaseProspects] Real-time UPDATE received",{prospectId:_.new.id,name:_.new.name,organizationId:_.new.organization_id,hasFormData:!!_.new.form_data,formDataKeys:_.new.form_data?Object.keys(_.new.form_data):[]});const S=Xa(_.new);P.info(" [useSupabaseProspects] updatedProspect after transform",{id:S.id,name:S.name,hasFormData:!!S.formData,formDataProjects:Object.keys(S.formData||{}),fullObject:S}),n(N=>{const E=N.map(C=>C.id===_.new.id?S:C);return P.info(" [useSupabaseProspects] State updated, new array length:",E.length),[...E]})}else _.eventType==="DELETE"&&(n(S=>S.filter(N=>N.id!==_.old.id)),F({title:" Contact supprim",description:"Un contact a t supprim."}))}).on("broadcast",{event:"prospect-updated"},_=>{var S;m.current&&(P.debug("Broadcast manual UPDATE received",{id:(S=_.payload)==null?void 0:S.id}),n(N=>N.map(E=>E.id===_.payload.id?_.payload:E)))}).subscribe();return h.current=j,()=>{m.current=!1,T.removeChannel(j),h.current=null}},[e==null?void 0:e.id,t]),p.useEffect(()=>{const j=T.channel("prospects-broadcast-global").on("broadcast",{event:"prospect-updated"},_=>{var S;P.debug("GLOBAL Broadcast received",{id:(S=_.payload)==null?void 0:S.id}),n(N=>{var C,k;P.debug("Before update",{name:(C=N.find(I=>I.id===_.payload.id))==null?void 0:C.name});const E=N.map(I=>I.id===_.payload.id?{..._.payload}:I);return P.debug("After update",{name:(k=E.find(I=>I.id===_.payload.id))==null?void 0:k.name}),E})}).subscribe();return h.current||(h.current=j),()=>{T.removeChannel(j)}},[]),{prospects:r,loading:s,error:a,addProspect:async j=>{try{console.log("[addProspect] started",{prospectData:j});const{data:{user:_}}=await T.auth.getUser();if(!_)throw new Error("Utilisateur non authentifi");if(console.log("[addProspect] auth user",{userId:_.id}),!t)throw new Error("organization_id manquant");console.log("[addProspect] organizationId",{organizationId:t});const{data:S,error:N}=await T.from("prospects").insert({name:j.name,email:j.email,phone:j.phone||"",company_name:j.company||j.companyName||"",address:j.address||"",owner_id:j.ownerId||_.id,status:j.status||"lead",tags:j.tags||[],has_appointment:j.hasAppointment||!1,affiliate_name:j.affiliateName||null,organization_id:t,created_at:new Date().toISOString()}).select().single();if(console.log("[addProspect] insert result",{data:S,error:N==null?void 0:N.message}),N)throw console.error("[addProspect] insert failed",N),N;const E=Xa(S);return F({title:"Succs",description:`Prospect "${S.name}" cr !`,className:"bg-green-500 text-white"}),E}catch(_){throw console.error("[addProspect] error",_),F({title:"Erreur",description:_.message||"Impossible d'ajouter le prospect.",variant:"destructive"}),_}},updateProspect:async(j,_)=>{try{P.debug("updateProspect called",{idType:typeof j,updatesType:typeof _});let S,N;typeof j=="object"&&j.id?(S=j.id,N=j,P.debug("Update mode: full object")):(S=j,N=_,P.debug("Update mode: separate params"));const E={};N.name!==void 0&&(E.name=N.name),N.email!==void 0&&(E.email=N.email),N.phone!==void 0&&(E.phone=N.phone),N.company!==void 0&&(E.company_name=N.company),N.companyName!==void 0&&(E.company_name=N.companyName),N.address!==void 0&&(E.address=N.address),N.ownerId!==void 0&&(E.owner_id=N.ownerId),N.status!==void 0&&(E.status=N.status),N.tags!==void 0&&(E.tags=N.tags),N.hasAppointment!==void 0&&(E.has_appointment=N.hasAppointment),N.affiliateName!==void 0&&(E.affiliate_name=N.affiliateName),N.formData!==void 0&&(E.form_data=N.formData),P.debug("Preparing update",{prospectId:S,fieldsUpdated:Object.keys(E)});const{data:{user:C}}=await T.auth.getUser(),{data:k}=await T.from("users").select("id").eq("user_id",C==null?void 0:C.id).single();let I,O;if(k){P.debug("Update mode: ADMIN - using update_prospect_safe");const M=await T.rpc("update_prospect_safe",{_prospect_id:S,_data:E});I=M.data,O=M.error}else{P.debug("Update mode: CLIENT - using update_own_prospect_profile");const M=await T.rpc("update_own_prospect_profile",{_data:E});I=M.data,O=M.error}if(O)throw P.error("Erreur RPC",{error:O.message}),P.error("Dtails erreur",{details:JSON.stringify(O)}),O;if(P.debug("RPC Success",{prospectId:S}),I&&I.length>0){const M=I[0],D=Xa(M);n(z=>z.map(B=>B.id===S?D:B)),P.debug("Local state updated immediately"),!k&&h.current&&(P.debug("Broadcasting manual update to other users"),h.current.send({type:"broadcast",event:"prospect-updated",payload:D}))}return I}catch(S){throw P.error("Erreur update prospect",{error:S.message}),F({title:"Erreur",description:S.message||"Impossible de modifier le prospect.",variant:"destructive"}),S}},deleteProspect:async j=>{try{const{error:_}=await T.from("prospects").delete().eq("id",j);if(_)throw _;n(S=>S.filter(N=>N.id!==j)),F({title:"Succs",description:"Prospect supprim avec succs !",className:"bg-green-500 text-white"})}catch(_){throw P.error("Erreur suppression prospect",{error:_.message}),F({title:"Erreur",description:_.message||"Impossible de supprimer le prospect.",variant:"destructive"}),_}},refetchProspects:v,totalCount:c,hasMore:f,loadMore:x}};function Xse({projectType:e,prospectId:t,enabled:r=!0,activeAdminUser:n}){const[s,o]=p.useState([]),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[f,d]=p.useState(null),h=p.useCallback(async()=>{if(!(!e||!r))try{l(!0),d(null);let v=T.from("project_history").select("*").eq("project_type",e).order("created_at",{ascending:!1});t&&(v=v.eq("prospect_id",t));const{data:x,error:b}=await v;if(b)throw b;o(x||[])}catch(v){P.error("Erreur rcupration project history:",{error:v.message}),d(v.message)}finally{l(!1)}},[e,t,r]);p.useEffect(()=>{if(!e||!r)return;h();const v=T.channel(`project-history-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"project_history",filter:`project_type=eq.${e}`},x=>{o(b=>[x.new,...b])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"project_history",filter:`project_type=eq.${e}`},x=>{o(b=>b.map(y=>y.id===x.new.id?x.new:y))}).subscribe();return()=>{T.removeChannel(v)}},[e,r,h]);const m=p.useCallback(async({event_type:v,title:x,description:b,metadata:y,createdBy:w,createdByName:j})=>{if(!(!e||!v)){if(!(n!=null&&n.organization_id))throw P.error(" [useSupabaseProjectHistory] organization_id manquant pour addHistoryEvent"),new Error("organization_id manquant pour addHistoryEvent");try{u(!0),d(null);const{data:_,error:S}=await T.from("project_history").insert([{project_type:e,prospect_id:t||null,event_type:v,title:x,description:b,metadata:y,created_by:w||null,created_by_name:j||null,organization_id:n.organization_id}]).select().single();if(S)throw S;return _}catch(_){throw P.error("Erreur ajout history event:",{error:_.message}),d(_.message),_}finally{u(!1)}}},[e,t,n]),g=p.useCallback(async({prospectId:v,projectType:x,title:b,description:y,metadata:w,createdBy:j,createdByName:_})=>{if(!x||!v)return P.error("prospectId and projectType required"),{success:!1,error:"Paramtres manquants"};if(!(n!=null&&n.organization_id))return P.error(" [useSupabaseProjectHistory] organization_id manquant pour addProjectEvent"),{success:!1,error:"organization_id manquant"};try{P.debug("Adding project event",{prospectId:v,projectType:x,title:b,organizationId:n.organization_id});const S=(w==null?void 0:w.event_type)||"form_event",{data:N,error:E}=await T.from("project_history").insert([{project_type:x,prospect_id:v,event_type:S,title:b,description:y,metadata:w||null,created_by:j||null,created_by_name:_||j||null,organization_id:n.organization_id}]).select().single();if(E)throw P.error("Supabase error:",E.message),E;return P.debug("Project event created",{eventId:N.id}),{success:!0,data:N}}catch(S){return P.error("[addProjectEvent] Exception:",{error:S.message||S}),{success:!1,error:S.message||"Erreur inconnue"}}},[n]);return{history:s,loading:a,saving:c,error:f,addHistoryEvent:m,addProjectEvent:g,refetch:h}}const Qse=(e,t)=>{const[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),[c,u]=p.useState(null),{addProjectEvent:f}=Xse({projectType:null,enabled:!1,activeAdminUser:e}),d=async()=>{try{const y=new Date,w=new Date(y);w.setMonth(w.getMonth()-3);const j=new Date(y);j.setMonth(j.getMonth()+3);const{data:_,error:S}=await T.from("appointments").select("*").gte("start_time",w.toISOString()).lte("start_time",j.toISOString()).order("start_time",{ascending:!0});if(S)throw S;const N=OD(_,Qa);return P.debug("Appointments fetched",{count:N.length,range:`${w.toISOString()} - ${j.toISOString()}`}),n(N),N}catch(y){throw P.error("Erreur chargement appointments:",{error:y.message}),y}},h=async()=>{try{o(!0),l(null),await d()}catch(y){P.error("Erreur chargement agenda:",{error:y.message}),l(y.message),F({title:"Erreur",description:"Impossible de charger l'agenda.",variant:"destructive"})}finally{o(!1)}};p.useEffect(()=>{e&&h()},[e]),p.useEffect(()=>{if(!e||!t)return;const y=T.channel(`agenda-changes-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"appointments",filter:`organization_id=eq.${t}`},w=>{if(w.eventType==="INSERT"){const j=Qa(w.new);n(_=>_.some(S=>S.id===j.id)?_:[..._,j])}if(w.eventType==="UPDATE"){const j=Qa(w.new);n(_=>_.map(S=>S.id===w.new.id?j:S))}w.eventType==="DELETE"&&n(j=>j.filter(_=>_.id!==w.old.id))}).subscribe();return u(y),()=>{T.removeChannel(y)}},[e,t]);const m=async y=>{try{const{data:{user:w}}=await T.auth.getUser();if(!w)throw new Error("Non authentifi");const j=y.contactId&&y.contactId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)?y.contactId:null;let _=y.assignedUserId;_||(_=w.id);const S=new Date,N=new Date(S.getTime()+60*60*1e3);if(!t)throw new Error("Organization ID manquant - Impossible de crer le rendez-vous");const{data:E,error:C}=await T.from("appointments").insert([{title:y.title||"Rendez-vous",start_time:y.startTime||S.toISOString(),end_time:y.endTime||N.toISOString(),contact_id:j,assigned_user_id:_,project_id:y.projectId||null,step:y.step||null,type:y.type||"physical",status:y.status||"pending",share:y.share||!1,notes:y.notes||null,location:y.location||null,organization_id:t}]).select().single();if(C)throw C;const k=Qa(E);if(n(I=>[...I,k]),F({title:"Succs",description:"Rendez-vous ajout avec succs !",className:"bg-green-500 text-white"}),E.project_id&&E.contact_id)try{const I=E.type==="physical"?"RDV Physique":E.type==="virtual"?"RDV Visio":E.type==="call"?"Appel":"Tche",M=new Date(E.start_time).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});await f({prospectId:E.contact_id,projectType:E.project_id,title:"Activit planifie",description:`${I} programm pour le ${M}`,metadata:{event_type:"activity",activity_type:E.type,appointment_id:E.id,start_time:E.start_time,end_time:E.end_time,status:E.status,step:E.step,source:"agenda"},createdBy:(w==null?void 0:w.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),P.debug(" Activit journalise dans project_history",{appointmentId:E.id,projectId:E.project_id,type:E.type})}catch(I){P.error(" Erreur journalisation project_history (non-bloquant)",{error:I.message,appointmentId:E.id})}return k}catch(w){throw P.error("Erreur ajout appointment",{error:w.message}),P.error("Dtails erreur",{details:JSON.stringify(w,null,2)}),F({title:"Erreur",description:w.message||"Impossible d'ajouter le rendez-vous.",variant:"destructive"}),w}},g=async(y,w)=>{try{const j=r.find(C=>C.id===y),_={};w.title!==void 0&&(_.title=w.title),w.startTime!==void 0&&(_.start_time=w.startTime),w.endTime!==void 0&&(_.end_time=w.endTime),w.contactId!==void 0&&(_.contact_id=w.contactId),w.assignedUserId!==void 0&&(_.assigned_user_id=w.assignedUserId),w.projectId!==void 0&&(_.project_id=w.projectId),w.step!==void 0&&(_.step=w.step),w.type!==void 0&&(_.type=w.type),w.status!==void 0&&(_.status=w.status),w.share!==void 0&&(_.share=w.share),w.notes!==void 0&&(_.notes=w.notes),w.location!==void 0&&(_.location=w.location);const{data:S,error:N}=await T.from("appointments").update(_).eq("id",y).select().single();if(N)throw N;const E=Qa(S);if(n(C=>C.map(k=>k.id===y?E:k)),S.project_id&&S.contact_id&&j)try{const C=w.status!==void 0&&j.status!==S.status,k=(w.startTime!==void 0||w.endTime!==void 0)&&(j.start!==S.start_time||j.end!==S.end_time),I=w.step!==void 0||w.notes!==void 0||w.location!==void 0;if(C||k||I){let O="Activit mise  jour : ";const M=[];if(C){const z={pending:"En attente",effectue:"Effectu",annule:"Annul",reporte:"Report"};M.push(`statut chang en "${z[S.status]||S.status}"`)}if(k){const B=new Date(S.start_time).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"});M.push(`reprogramm le ${B}`)}I&&!C&&!k&&M.push("informations modifies"),O+=M.join(", ");const{data:{user:D}}=await T.auth.getUser();await f({prospectId:S.contact_id,projectType:S.project_id,title:"Activit mise  jour",description:O,metadata:{event_type:"activity",activity_type:S.type,appointment_id:S.id,start_time:S.start_time,end_time:S.end_time,status:S.status,step:S.step,changes:{status:C?{from:j.status,to:S.status}:void 0,date:k?{from:j.start,to:S.start_time}:void 0},source:"agenda"},createdBy:(D==null?void 0:D.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),P.debug(" Modification activit journalise dans project_history",{appointmentId:S.id,changes:{hasStatusChange:C,hasDateChange:k,hasOtherChange:I}})}}catch(C){P.error(" Erreur journalisation project_history (non-bloquant)",{error:C.message,appointmentId:S.id})}return S}catch(j){throw P.error("Erreur update appointment:",{error:j.message}),F({title:"Erreur",description:j.message||"Impossible de modifier le rendez-vous.",variant:"destructive"}),j}},v=async y=>{try{const w=r.find(_=>_.id===y),{error:j}=await T.from("appointments").delete().eq("id",y);if(j)throw j;if(n(_=>_.filter(S=>S.id!==y)),F({title:"Succs",description:"Rendez-vous supprim avec succs !",className:"bg-green-500 text-white"}),w!=null&&w.projectId&&(w!=null&&w.contactId))try{const _=w.type==="physical"?"RDV Physique":w.type==="virtual"?"RDV Visio":w.type==="call"?"Appel":"Tche",{data:{user:S}}=await T.auth.getUser();await f({prospectId:w.contactId,projectType:w.projectId,title:"Activit supprime",description:`${_} supprim de l'agenda`,metadata:{event_type:"activity",activity_type:w.type,appointment_id:y,status:"deleted",deleted_at:new Date().toISOString(),source:"agenda"},createdBy:(S==null?void 0:S.id)||null,createdByName:(e==null?void 0:e.name)||"Systme"}),P.debug(" Suppression activit journalise dans project_history",{appointmentId:y,type:w.type})}catch(_){P.error(" Erreur journalisation project_history (non-bloquant)",{error:_.message,appointmentId:y})}}catch(w){throw P.error("Erreur suppression appointment:",{error:w.message}),F({title:"Erreur",description:w.message||"Impossible de supprimer le rendez-vous.",variant:"destructive"}),w}},x=r.filter(y=>y.type==="call"),b=r.filter(y=>y.type==="task");return{appointments:r,calls:x,tasks:b,loading:s,error:a,addAppointment:m,updateAppointment:g,deleteAppointment:v,addCall:m,updateCall:g,deleteCall:v,addTask:m,updateTask:g,deleteTask:v,refetchAll:h}},Zse=(e={})=>{const t=typeof e=="string"?e:(e==null?void 0:e.organizationId)||null,r=typeof e=="string"?!0:(e==null?void 0:e.enabled)!==!1,[n,s]=p.useState(null),[o,a]=p.useState(!0),[l,c]=p.useState(null),u=p.useRef(!1),f="9769af46-b3ac-4909-8810-a8cf3fd6e307",d=async()=>{if(!r){a(!1);return}try{a(!0);const{data:E,error:C}=await T.from("company_settings").select("*").eq("id",f).single();if(C)throw C;s(E),c(null)}catch(E){P.error("Erreur chargement company settings:",{error:E.message}),c(E.message)}finally{a(!1)}};p.useEffect(()=>{if(!r){a(!1);return}d()},[r]),p.useEffect(()=>{if(!r)return;const E=T.channel("company-settings-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"company_settings",filter:`id=eq.${f}`},C=>{s(k=>JSON.stringify(k)===JSON.stringify(C.new)?k:(u.current=!1,C.new))}).subscribe();return()=>{T.removeChannel(E)}},[r]);const h=async E=>{try{u.current=!0;const{error:C}=await T.from("company_settings").update({logo_url:E,updated_at:new Date().toISOString()}).eq("id",f);if(C)throw P.error("Supabase update error details:",{error:C.message}),u.current=!1,C;if(t){const{error:k}=await T.from("organization_settings").update({logo_url:E,updated_at:new Date().toISOString()}).eq("organization_id",t);k?P.warn("Sync logo vers organization_settings chou:",{error:k.message}):P.info("Logo synchronis vers organization_settings")}return s(k=>({...k,logo_url:E,updated_at:new Date().toISOString()})),F({title:"Logo mis  jour !",description:"Le logo de l'entreprise a t modifi.",className:"bg-green-500 text-white"}),!0}catch(C){throw P.error("Erreur update logo:",{error:C.message}),F({title:"Erreur",description:C.message||"Impossible de mettre  jour le logo.",variant:"destructive"}),C}},m=async()=>{try{u.current=!0;const{error:E}=await T.from("company_settings").update({logo_url:null,updated_at:new Date().toISOString()}).eq("id",f);if(E)throw P.error("Supabase remove error details:",{error:E.message}),u.current=!1,E;if(t){const{error:C}=await T.from("organization_settings").update({logo_url:null,updated_at:new Date().toISOString()}).eq("organization_id",t);C?P.warn("Sync suppression logo vers organization_settings chou:",{error:C.message}):P.info("Suppression logo synchronise vers organization_settings")}return s(C=>({...C,logo_url:null,updated_at:new Date().toISOString()})),F({title:"Logo supprim",description:"Le logo de l'entreprise a t retir.",className:"bg-blue-500 text-white"}),!0}catch(E){throw P.error("Erreur suppression logo:",{error:E.message}),F({title:"Erreur",description:E.message||"Impossible de supprimer le logo.",variant:"destructive"}),E}},g=async E=>{try{u.current=!0;const{error:C}=await T.from("company_settings").update({settings:E,updated_at:new Date().toISOString()}).eq("id",f);if(C)throw P.error("Supabase settings update error details:",{error:C.message}),u.current=!1,C;return s(k=>({...k,settings:E,updated_at:new Date().toISOString()})),!0}catch(C){throw P.error("Erreur update settings:",{error:C.message}),F({title:"Erreur",description:C.message||"Impossible de mettre  jour les paramtres.",variant:"destructive"}),C}},v=async E=>{if(!t)return P.error("updateFormContactConfig: organizationId requis pour isolation multi-tenant"),F({title:"Erreur",description:"Organisation non dfinie. Impossible de sauvegarder.",variant:"destructive"}),!1;try{u.current=!0;const{error:C}=await T.from("organization_settings").upsert({organization_id:t,form_contact_config:E,updated_at:new Date().toISOString()},{onConflict:"organization_id"});if(C)throw P.error("Supabase form contact upsert error (organization_settings):",{error:C.message}),u.current=!1,C;return P.info("Form contact config sauvegard dans organization_settings",{organizationId:t}),!0}catch(C){throw P.error("Erreur update form contact config:",{error:C.message}),F({title:"Erreur",description:"Impossible de mettre  jour le formulaire de contact.",variant:"destructive"}),C}},x=()=>{var E;return((E=n==null?void 0:n.settings)==null?void 0:E.form_contact_config)||[]},b=async E=>{try{u.current=!0;const k={...(n==null?void 0:n.settings)||{},global_pipeline_steps:E},{error:I}=await T.from("company_settings").update({settings:k,updated_at:new Date().toISOString()}).eq("id",f);if(I)throw P.error("Supabase global pipeline update error:",{error:I.message}),u.current=!1,I;return s(O=>({...O,settings:k,updated_at:new Date().toISOString()})),!0}catch(C){throw P.error("Erreur update global pipeline steps:",{error:C.message}),F({title:"Erreur",description:"Impossible de mettre  jour les pipelines globaux.",variant:"destructive"}),C}},y=()=>{var E;return((E=n==null?void 0:n.settings)==null?void 0:E.global_pipeline_steps)||[]},w=async E=>{try{u.current=!0;const k={...(n==null?void 0:n.settings)||{},landing_page_config:E},{error:I}=await T.from("company_settings").update({settings:k,updated_at:new Date().toISOString()}).eq("id",f);if(I)throw P.error("Supabase landing page config update error:",{error:I.message}),u.current=!1,I;return s(O=>({...O,settings:k,updated_at:new Date().toISOString()})),!0}catch(C){throw P.error("Erreur update landing page config:",{error:C.message}),F({title:"Erreur",description:"Impossible de mettre  jour la configuration de la landing page.",variant:"destructive"}),C}},j=async(E,C)=>{try{u.current=!0;const k=(n==null?void 0:n.settings)||{},O={...k.landing_page_config||{},[E]:C},M={...k,landing_page_config:O},{error:D}=await T.from("company_settings").update({settings:M,updated_at:new Date().toISOString()}).eq("id",f);if(D)throw u.current=!1,D;return s(z=>({...z,settings:M,updated_at:new Date().toISOString()})),!0}catch(k){throw P.error("Erreur update landing page field:",{error:k.message,field:E,value:C}),k}},_=async(E,C)=>{try{u.current=!0;const k=(n==null?void 0:n.settings)||{},I=k.landing_page_config||{},M=(I.blocks||N()).map(q=>q.id===E?{...q,...C}:q),D={...I,blocks:M},z={...k,landing_page_config:D},{error:B}=await T.from("company_settings").update({settings:z,updated_at:new Date().toISOString()}).eq("id",f);if(B)throw u.current=!1,B;return s(q=>({...q,settings:z,updated_at:new Date().toISOString()})),!0}catch(k){throw P.error("Erreur update landing page block:",{error:k.message,blockId:E,blockData:C}),k}},S=()=>{var C;const E=((C=n==null?void 0:n.settings)==null?void 0:C.landing_page_config)||{};return{landing_logo_url:E.landing_logo_url||null,hero_title:E.hero_title||"Bienvenue sur notre plateforme",hero_subtitle:E.hero_subtitle||"Grez vos projets nergtiques en toute simplicit",hero_cta_text:E.hero_cta_text||"Commencer maintenant",hero_cta_link:E.hero_cta_link||"/inscription",blocks:E.blocks||N()}},N=()=>[{id:1,icon:"",title:"Crez votre projet",description:"Inscrivez-vous et dcrivez votre projet en quelques clics."},{id:2,icon:"",title:"Nous intervenons",description:"Notre quipe prend en charge votre dossier de A  Z."},{id:3,icon:"",title:"Profitez des rsultats",description:"Suivez l'avancement en temps rel depuis votre espace client."}];return{companySettings:n,loading:o,error:l,updateLogo:h,removeLogo:m,updateSettings:g,updateFormContactConfig:v,getFormContactConfig:x,updateGlobalPipelineSteps:b,getGlobalPipelineSteps:y,updateLandingPageConfig:w,updateLandingPageField:j,updateLandingPageBlock:_,getLandingPageConfig:S,refetch:d}};function eoe(e=null){const[t,r]=p.useState([]),[n,s]=p.useState(!0),[o,a]=p.useState(null),l=p.useRef(!1);p.useEffect(()=>{e&&c()},[e]),p.useEffect(()=>{if(!e)return;const m=T.channel(`global-pipeline-changes-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"global_pipeline_steps",filter:`organization_id=eq.${e}`},g=>{if(l.current){l.current=!1;return}g.eventType==="INSERT"?r(v=>v.find(b=>b.id===g.new.id)?v:[...v,g.new].sort((b,y)=>b.position-y.position)):g.eventType==="UPDATE"?r(v=>v.map(x=>x.id===g.new.id?g.new:x).sort((x,b)=>x.position-b.position)):g.eventType==="DELETE"&&r(v=>v.filter(x=>x.id!==g.old.id))}).subscribe();return()=>{T.removeChannel(m)}},[e]);const c=async()=>{if(!e){r([]),s(!1);return}try{s(!0),a(null);const{data:m,error:g}=await T.rpc("get_global_pipeline_steps_for_org",{p_organization_id:e});if(g)throw g;const v=Array.isArray(m)?[...m].sort((x,b)=>(x.position??0)-(b.position??0)):[];r(v)}catch(m){P.error(" Erreur fetch global pipeline steps:",m),a(m.message)}finally{s(!1)}};return{globalPipelineSteps:t,loading:n,error:o,addStep:async(m,g="bg-gray-100")=>{if(!e)throw new Error("organization_id requis pour crer une colonne pipeline");try{l.current=!0;const x=(t.length>0?Math.max(...t.map(j=>j.position)):-1)+1,b=`global-pipeline-step-${Date.now()}`,{data:y,error:w}=await T.from("global_pipeline_steps").insert([{step_id:b,label:m,color:g,position:x,organization_id:e}]).select().single();if(w)throw w;return r(j=>[...j,y].sort((_,S)=>_.position-S.position)),y}catch(v){throw P.error(" Erreur cration colonne pipeline:",v),l.current=!1,v}},updateStep:async(m,g)=>{try{l.current=!0;const{data:v,error:x}=await T.from("global_pipeline_steps").update(g).eq("id",m).select().single();if(x)throw x;return r(b=>b.map(y=>y.id===m?v:y).sort((y,w)=>y.position-w.position)),v}catch(v){throw P.error(" Erreur modification colonne pipeline:",v),l.current=!1,v}},deleteStep:async m=>{try{l.current=!0;const{error:g}=await T.from("global_pipeline_steps").delete().eq("id",m);if(g)throw g;r(v=>v.filter(x=>x.id!==m))}catch(g){throw P.error(" Erreur suppression colonne pipeline:",g),l.current=!1,g}},reorderSteps:async m=>{try{l.current=!0;const g=m.map((v,x)=>({id:v.id,position:x}));for(const v of g){const{error:x}=await T.from("global_pipeline_steps").update({position:v.position}).eq("id",v.id);if(x)throw x}r(m)}catch(g){throw P.error(" Erreur rorganisation colonnes pipeline:",g),l.current=!1,g}},refresh:c}}function toe(e,t=!0){const[r,n]=p.useState([]),[s,o]=p.useState(!0);p.useEffect(()=>{if(!t||!e){o(!1);return}a();const f=`notifications-${e}-${Date.now()}`,d=T.channel(f).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`owner_id=eq.${e}`},h=>{if(h.eventType==="INSERT"){const m=u(h.new);n(g=>g.find(x=>x.id===m.id)?g:[m,...g])}else if(h.eventType==="UPDATE"){const m=u(h.new);n(g=>g.map(v=>v.id===m.id?m:v))}else h.eventType==="DELETE"&&n(m=>m.filter(g=>g.id!==h.old.id))}).subscribe();return()=>{T.removeChannel(d)}},[e,t]);async function a(){try{o(!0);const{data:f,error:d}=await T.from("notifications").select(`
          *,
          prospects!inner(owner_id)
        `).eq("prospects.owner_id",e).order("created_at",{ascending:!1});if(d)throw d;const h=(f||[]).map(u);n(h)}catch(f){P.error(" Error loading admin notifications:",f)}finally{o(!1)}}async function l(f){try{const{prospectId:d,projectType:h,prospectName:m,projectName:g,ownerId:v}=f;if(!v){P.error("ownerId is REQUIRED for notifications");return}P.debug("Checking existing notification",{prospectId:d,projectType:h});const{data:x,error:b}=await T.from("notifications").select("*").eq("prospect_id",d).eq("project_type",h).eq("read",!1).neq("project_name"," Message partenaire").neq("project_name"," Message interne").maybeSingle();if(P.debug("Existing notification check",{found:!!x,error:!!b}),b){P.error(" Error checking existing notification:",b);return}if(x){P.debug("Incrementing notification count",{from:x.count,to:x.count+1});const{error:y}=await T.from("notifications").update({count:x.count+1,created_at:new Date().toISOString()}).eq("id",x.id);if(y)throw P.error("Error updating notification:",y),y;P.debug("Notification count incremented successfully")}else{const{data:y,error:w}=await T.from("prospects").select("organization_id").eq("id",d).single();if(w||!(y!=null&&y.organization_id))throw P.error("Organization introuvable pour le prospect:",{prospectId:d,error:w==null?void 0:w.message}),new Error("Organization introuvable pour le prospect");P.debug("Creating new notification with count=1");const{error:j}=await T.from("notifications").insert({prospect_id:d,owner_id:v,organization_id:y.organization_id,project_type:h,prospect_name:m,project_name:g,count:1,read:!1});if(j)throw P.error("Error creating notification:",j),j;P.debug("New notification created")}}catch(d){P.error("Error creating/updating notification:",d)}}async function c(f){if(!f){P.warn("markAsRead appel sans notificationId valide");return}try{const{error:d}=await T.from("notifications").update({read:!0}).eq("id",f);if(d)throw d;n(h=>h.map(m=>m.id===f?{...m,read:!0}:m))}catch(d){P.error("Error marking notification as read:",d)}}function u(f){return{id:f.id,prospectId:f.prospect_id,projectType:f.project_type,prospectName:f.prospect_name,projectName:f.project_name,count:f.count,read:f.read,timestamp:f.created_at}}return{notifications:r,loading:s,createOrUpdateNotification:l,markAsRead:c,refresh:a}}function roe(e,t=!0){const[r,n]=p.useState([]),[s,o]=p.useState(!0);p.useEffect(()=>{if(!t||!e){n([]),o(!1);return}a();const f=T.channel(`client-notifications-${e}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"client_notifications",filter:`prospect_id=eq.${e}`},d=>{if(d.eventType==="INSERT"){const h=u(d.new);n(m=>m.find(v=>v.id===h.id)?m:[h,...m])}else if(d.eventType==="UPDATE"){const h=u(d.new);n(m=>m.map(g=>g.id===h.id?h:g))}else d.eventType==="DELETE"&&n(h=>h.filter(m=>m.id!==d.old.id))}).subscribe();return()=>{T.removeChannel(f)}},[e,t]);async function a(){try{o(!0);const{data:f,error:d}=await T.from("client_notifications").select("*").eq("prospect_id",e).order("created_at",{ascending:!1});if(d)throw d;const h=(f||[]).map(u);n(h)}catch(f){P.error("Erreur chargement client notifications:",{error:f.message})}finally{o(!1)}}async function l(f){try{const{prospectId:d,projectType:h,projectName:m,message:g}=f;if(!d||!h){P.error("Missing required fields:",{error:{prospectId:d,projectType:h}.message});return}const{data:v,error:x}=await T.from("client_notifications").select("*").eq("prospect_id",d).eq("project_type",h).eq("read",!1).maybeSingle();if(x){P.error("Error checking existing notification:",{error:x.message});return}if(v){const{error:b}=await T.from("client_notifications").update({count:v.count+1,message:g,created_at:new Date().toISOString()}).eq("id",v.id);if(b)throw P.error("Erreur update notification:",{error:b.message}),b}else{const{data:b,error:y}=await T.from("prospects").select("organization_id").eq("id",d).single();if(y||!(b!=null&&b.organization_id))throw P.error("Organization introuvable pour le prospect:",{prospectId:d,error:y==null?void 0:y.message}),new Error("Organization introuvable pour le prospect");const{data:w,error:j}=await T.from("client_notifications").insert({prospect_id:d,project_type:h,project_name:m,message:g,count:1,read:!1,organization_id:b.organization_id}).select();if(j)throw P.error("Error inserting notification:",{error:j.message}),j}}catch(d){P.error("Erreur cration/updating client notification:",{error:d.message})}}async function c(f){if(!f){P.warn("markAsRead appel sans notificationId valide");return}try{const{error:d}=await T.from("client_notifications").update({read:!0}).eq("id",f);if(d)throw d;n(h=>h.map(m=>m.id===f?{...m,read:!0}:m))}catch(d){P.error("Error marking client notification as read:",{error:d.message})}}function u(f){return{id:f.id,projectType:f.project_type,projectName:f.project_name,message:f.message,count:f.count,read:f.read,timestamp:f.created_at}}return{notifications:r,loading:s,createOrUpdateNotification:l,markAsRead:c,refresh:a}}function noe(e=null){const{organizationId:t}=on(),[r,n]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=m=>({panelId:m.panel_id,prospectId:m.prospect_id,projectType:m.project_type,formId:m.form_id,promptId:m.prompt_id,currentStepIndex:m.current_step_index,messageTimestamp:m.message_timestamp,status:m.status,userOverride:m.user_override,stepName:m.step_name,filledByRole:m.filled_by_role||"client",formData:m.form_data||{},rejectionReason:m.rejection_reason||null,lastSubmittedAt:m.last_submitted_at?new Date(m.last_submitted_at).getTime():null,createdAt:new Date(m.created_at).getTime(),updatedAt:new Date(m.updated_at).getTime()});p.useEffect(()=>{if(e==="__DISABLED__"){n([]),o(!1);return}if(!t){n([]),o(!1);return}(async()=>{try{o(!0);const{data:{session:x}}=await T.auth.getSession();if(P.debug("Loading client form panels",{prospectId:e}),!x){P.debug("No session - skipping form panels loading"),n([]),o(!1);return}let b=T.from("client_form_panels").select("*").eq("organization_id",t);e&&(b=b.eq("prospect_id",e));const{data:y,error:w}=await b.order("created_at",{ascending:!1});if(w)throw P.error("Supabase SELECT error:",w.message),w;console.log("[useSupabaseClientFormPanels] RPC result:",{raw:(y==null?void 0:y.length)||0,organizationId:t,prospectId:e,firstPanel:y!=null&&y[0]?{id:y[0].id,panel_id:y[0].panel_id,prospect_id:y[0].prospect_id,form_id:y[0].form_id,status:y[0].status,filled_by_role:y[0].filled_by_role,form_data:y[0].form_data}:null});const j=Array.isArray(y)?y.map(c):[];console.log("[useSupabaseClientFormPanels] Transformed:",{count:j.length}),n(j),l(null)}catch(x){P.error(" [useSupabaseClientFormPanels] Exception chargement:",x.message||x),n([]),l(x.message||"Erreur inconnue")}finally{o(!1)}})();const g=e?`client-form-panels-${e}`:"client-form-panels-all",v=T.channel(g).on("postgres_changes",{event:"*",schema:"public",table:"client_form_panels",...e&&{filter:`prospect_id=eq.${e}`}},x=>{try{if(x.eventType==="INSERT"){const b=c(x.new);n(y=>{const w=Array.isArray(y)?y:[];return w.some(j=>j.panelId===b.panelId)?w:[b,...w]})}else if(x.eventType==="UPDATE"){const b=c(x.new);n(y=>(Array.isArray(y)?y:[]).map(j=>j.panelId===b.panelId?b:j))}else x.eventType==="DELETE"&&n(b=>(Array.isArray(b)?b:[]).filter(w=>w.panelId!==x.old.panel_id))}catch(b){P.error(" [useSupabaseClientFormPanels] Erreur real-time:",b)}}).subscribe();return()=>{T.removeChannel(v)}},[e,t]);const u=async(m,g)=>{try{const v={};g.status!==void 0&&(v.status=g.status),g.userOverride!==void 0&&(v.user_override=g.userOverride),g.lastSubmittedAt!==void 0&&(v.last_submitted_at=g.lastSubmittedAt),g.formData!==void 0&&(v.form_data=g.formData),g.rejectionReason!==void 0&&(v.rejection_reason=g.rejectionReason);const{error:x}=await T.from("client_form_panels").update(v).eq("panel_id",m);if(x)throw x;return{success:!0}}catch(v){return P.error(" Erreur mise  jour form panel:",v),{success:!1,error:v.message}}},f=async m=>{try{const{error:g}=await T.from("client_form_panels").delete().eq("panel_id",m);if(g)throw g;return{success:!0}}catch(g){return P.error(" Erreur suppression form panel:",g),{success:!1,error:g.message}}},d=async(m,g)=>{try{let v=T.from("client_form_panels").delete().eq("prospect_id",m);g&&(v=v.eq("project_type",g));const{error:x}=await v;if(x)throw x;return{success:!0}}catch(v){return P.error(" Erreur suppression form panels:",v),{success:!1,error:v.message}}},h=async m=>{try{P.debug("Creating form panel",{prospectId:m.prospectId,projectType:m.projectType,formId:m.formId});const{error:g}=await T.from("client_form_panels").insert({panel_id:m.panelId||`panel-${m.prospectId}-${m.projectType}-${m.formId}-${Date.now()}`,prospect_id:m.prospectId,project_type:m.projectType,form_id:m.formId,prompt_id:m.promptId||null,current_step_index:m.currentStepIndex||0,message_timestamp:m.messageTimestamp,status:m.status||"pending",step_name:m.stepName||null,action_id:m.actionId||null});if(g)throw P.error("Supabase INSERT error:",g.message),g;return P.debug("Form panel created successfully"),{success:!0}}catch(g){return P.error("Form panel insertion error:",g.message||g),{success:!1,error:g.message||"Erreur inconnue"}}};return{formPanels:Array.isArray(r)?r:[],loading:s,error:a,createFormPanel:h,updateFormPanel:u,deleteFormPanel:f,deleteFormPanelsByProspect:d}}function soe(e,t=!0){const[r,n]=p.useState({}),[s,o]=p.useState(!0);return p.useEffect(()=>{if(!t||!e)return;(async()=>{try{const{data:c,error:u}=await T.from("project_steps_status").select("prospect_id, project_type, steps");if(u)throw u;const f={};(c||[]).forEach(d=>{const h=`${d.prospect_id}-${d.project_type}`;f[h]=d.steps}),n(f)}catch(c){logger.error(" Error loading all project steps:",c)}finally{o(!1)}})();const l=T.channel(`all-project-steps-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_steps_status",filter:`organization_id=eq.${e}`},c=>{if(c.eventType==="INSERT"||c.eventType==="UPDATE"){const u=`${c.new.prospect_id}-${c.new.project_type}`;n(f=>({...f,[u]:c.new.steps}))}else if(c.eventType==="DELETE"){const u=`${c.old.prospect_id}-${c.old.project_type}`;n(f=>{const{[u]:d,...h}=f;return h})}}).subscribe();return()=>{T.removeChannel(l)}},[t,e]),{allProjectSteps:r,loading:s}}const ooe=(e,t=!0)=>{const[r,n]=p.useState({}),[s,o]=p.useState(!0),[a,l]=p.useState(null),c=p.useCallback(d=>{if(!d||d.length===0)return{};const h={};return d.forEach(m=>{const{prospect_id:g,project_type:v,data:x}=m;if(!g||!v)return;h[g]||(h[g]={});const b={};(x==null?void 0:x.amount)!==void 0&&x.amount!==null&&(b.amount=x.amount),(x==null?void 0:x.status)!==void 0&&x.status!==null&&(b.status=x.status),h[g][v]=b}),h},[]);p.useEffect(()=>{(async()=>{try{if(!e){n({}),o(!1);return}o(!0),l(null);const{data:h,error:m}=await T.rpc("get_project_infos_for_org",{p_organization_id:e});if(m){P.error("Erreur chargement project_infos:",{error:m.message}),l(m);return}const g=c(h||[]);n(g),P.debug("project_infos loaded from Supabase",{count:Object.keys(g).length})}catch(h){P.error("Erreur fetchProjectInfos:",{error:h.message}),l(h)}finally{o(!1)}})()},[c,e]),p.useEffect(()=>{if(!t||!e)return;const d=T.channel(`project-infos-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"project_infos",filter:`organization_id=eq.${e}`},h=>{if(P.debug("Real-time project_infos",{eventType:h.eventType}),h.eventType==="INSERT"||h.eventType==="UPDATE"){const{prospect_id:m,project_type:g,data:v}=h.new;n(x=>{const b={...x};b[m]||(b[m]={});const y={};return(v==null?void 0:v.amount)!==void 0&&v.amount!==null&&(y.amount=v.amount),(v==null?void 0:v.status)!==void 0&&v.status!==null&&(y.status=v.status),b[m][g]=y,b})}else if(h.eventType==="DELETE"){const{prospect_id:m,project_type:g}=h.old;n(v=>{var b;const x={...v};return(b=x[m])!=null&&b[g]&&(delete x[m][g],Object.keys(x[m]).length===0&&delete x[m]),x})}}).subscribe();return()=>{T.removeChannel(d)}},[t,e]);const u=p.useCallback((d,h)=>{var m;return!d||!h?{}:((m=r==null?void 0:r[d])==null?void 0:m[h])||{}},[r]),f=p.useCallback(async(d,h,m)=>{var g;if(!d||!h){console.warn(" updateProjectInfo: prospectId ou projectType manquant");return}try{const v=((g=r==null?void 0:r[d])==null?void 0:g[h])||{},x=typeof m=="function"?m(v):{...v,...m},b={};(x==null?void 0:x.amount)!==void 0&&(b.amount=x.amount),(x==null?void 0:x.status)!==void 0&&(b.status=x.status),n(w=>{const j={...w};return j[d]||(j[d]={}),Object.keys(b).length===0?(delete j[d][h],Object.keys(j[d]).length===0&&delete j[d]):j[d][h]=b,j});const{error:y}=await T.from("project_infos").upsert({prospect_id:d,project_type:h,data:b},{onConflict:"prospect_id,project_type"});if(y)throw P.error("Erreur upsert project_infos:",{error:y.message}),y;P.debug("project_info updated",{prospectId:d,projectType:h})}catch(v){P.error("Error updateProjectInfo:",{error:v.message});const{data:x}=await T.from("project_infos").select("prospect_id, project_type, data").eq("prospect_id",d).eq("project_type",h).single();throw x&&n(b=>{var j,_;const y={...b};y[d]||(y[d]={});const w={};return((j=x.data)==null?void 0:j.amount)!==void 0&&(w.amount=x.data.amount),((_=x.data)==null?void 0:_.status)!==void 0&&(w.status=x.data.status),y[d][h]=w,y}),v}},[r]);return{projectInfos:r,getProjectInfo:u,updateProjectInfo:f,isLoading:s,error:a}};function ioe(e,t,r=!0){p.useEffect(()=>{if(!r||!e||!t||Object.keys(t).length===0)return;const n=T.channel(`auto-create-tasks-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"project_steps_status",filter:`organization_id=eq.${e}`},async s=>{var o;try{const{prospect_id:a,project_type:l,steps:c}=s.new,u=c.findIndex(g=>g.status==="in_progress");if(u===-1)return;P.debug("Step changed to in_progress",{prospect_id:a,project_type:l,currentStepIndex:u});const f=Object.values(t).find(g=>g.projectId===l);if(!f){P.debug("No prompt found for project",{project_type:l});return}const d=(o=f.stepsConfig)==null?void 0:o[u];if(!d){P.debug("No config for step",{currentStepIndex:u});return}const{data:h,error:m}=await T.from("prospects").select("owner_id, name").eq("id",a).single();if(m){P.error("Error fetching prospect",{error:m});return}for(const g of d.actions||[]){if(g.hasClientAction===!1){P.debug("Creating checklist task",{prospect_id:a,project_type:l,currentStepIndex:u,actionId:g.id});const v=(g.checklist||[]).map(y=>` ${y.text}`).join(`
`),x=GS(new Date),b=new Date(x);b.setMinutes(b.getMinutes()+30),await HS({prospect:h,prospect_id:a,project_type:l,stepName:c[u].name,title:`Tche pour ${h.name}`,notes:v||"Tches  effectuer",taskTime:x,endTime:b});continue}if(g.hasClientAction!==!1&&g.managementMode==="manual"&&g.createTask!==!1){P.debug("Creating task for manual action",{prospect_id:a,project_type:l,currentStepIndex:u,actionId:g.id});const v=GS(new Date),x=new Date(v);x.setMinutes(x.getMinutes()+30),await HS({prospect:h,prospect_id:a,project_type:l,stepName:c[u].name,title:`Tche pour ${h.name}`,notes:g.taskTitle||"Action requise pour ce client",taskTime:v,endTime:x})}}}catch(a){P.error("Error in auto-create-tasks listener",{error:a})}}).subscribe();return()=>{T.removeChannel(n)}},[t,r,e])}async function HS({prospect:e,prospect_id:t,project_type:r,stepName:n,title:s,notes:o,taskTime:a,endTime:l}){const{data:c,error:u}=await T.from("appointments").select("id").eq("type","task").eq("contact_id",t).eq("project_id",r).eq("step",n).eq("title",s).eq("status","pending").gte("created_at",new Date(Date.now()-6e4).toISOString());if(u&&P.error(" Erreur vrification tches existantes:",u),c&&c.length>0)return P.warn(" Tche dj existante, skip cration:",{prospect:e.name,project_type:r,step:n,existing_tasks:c.length}),!0;const{error:f}=await T.from("appointments").insert({type:"task",title:s,assigned_user_id:e.owner_id,contact_id:t,project_id:r,step:n,start_time:a.toISOString(),end_time:l.toISOString(),status:"pending",notes:o,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return f?f.code==="23505"?(P.warn(" Tche dj existante (bloque par contrainte unique DB):",{prospect:e.name,project_type:r,step:n,constraint:"unique_pending_task_per_prospect_step"}),!0):(P.error("Error creating task",{error:f}),F({title:"Erreur",description:"Impossible de crer la tche automatique",variant:"destructive"}),!1):(P.info(" Task created automatically",{prospect:e.name,project_type:r,step:n,scheduled_for:a.toISOString()}),F({title:" Tche cre",description:`Une tche a t cre pour ${e.name}`,className:"bg-green-500 text-white"}),!0)}function GS(e=new Date){const t=e.getHours();if(t<9){const r=new Date(e);return r.setHours(9,0,0,0),r}if(t>=9&&t<19)return e;if(t>=19){const r=new Date(e);return r.setDate(r.getDate()+1),r.setHours(9,0,0,0),r}return e}function aoe(e,{organizationId:t=null,enabled:r=!0}={}){p.useEffect(()=>{if(!r)return;if(!t){P.warn(" useAutoVerificationTasks: Pas d'organization_id fourni");return}if(!e||Object.keys(e).length===0)return;const n=T.channel(`auto-verification-tasks-${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${t}`},async s=>{var o,a;try{const l=(o=s.old)==null?void 0:o.status,c=(a=s.new)==null?void 0:a.status;l!=="submitted"&&c==="submitted"&&(P.debug("Client form submitted",{panel_id:s.new.panel_id,prospect_id:s.new.prospect_id,project_type:s.new.project_type}),await loe(s.new,e))}catch(l){P.error(" Erreur dans useAutoVerificationTasks:",l)}}).subscribe();return()=>{T.removeChannel(n)}},[e,t,r])}async function loe(e,t){const{prospect_id:r,project_type:n,form_id:s,verification_mode:o}=e;if((o??"HUMAN").toUpperCase()!=="HUMAN")return;const{data:l,error:c}=await T.from("prospects").select("name, owner_id, organization_id").eq("id",r).single();if(c||!l){P.error(" Erreur rcupration prospect:",c);return}if(!l.organization_id){P.error(" Organization ID manquant pour le prospect:",{prospect_id:r});return}const{data:u,error:f}=await T.from("forms").select("name").eq("form_id",s).single(),d=(u==null?void 0:u.name)||s,h=e.step_name||n||"tape",{data:m,error:g}=await T.from("appointments").select("id").eq("type","task").eq("contact_id",r).eq("project_id",n).eq("step",h).eq("title",`Vrifier le formulaire de ${l.name}`).eq("status","pending").gte("created_at",new Date(Date.now()-6e4).toISOString());if(g&&P.error(" Erreur vrification tches existantes:",g),m&&m.length>0){P.warn(" Tche de vrification dj existante, skip cration:",{prospect:l.name,form:d,existing_tasks:m.length});return}let v=l.owner_id;if(!v){P.warn(` owner_id NULL pour ${l.name}, recherche fallback Global Admin`);const{data:_,error:S}=await T.from("users").select("user_id").eq("organization_id",l.organization_id).eq("role","Global Admin").limit(1).single();if(!S&&_)v=_.user_id;else{P.error(` Aucun admin disponible pour org ${l.organization_id}`),F({title:"Erreur",description:"Aucun admin disponible pour assigner la tche.",variant:"destructive"});return}}const x=`Vrifier le formulaire de ${l.name}`,b=new Date,y=new Date(b.getTime()+30*60*1e3),w={type:"task",title:x,assigned_user_id:v,contact_id:r,project_id:n,step:h,organization_id:l.organization_id,start_time:b.toISOString(),end_time:y.toISOString(),status:"pending",notes:` Vrification requise par un humain

 **Formulaire:** ${d}
 **Client:** ${l.name}
 **tape:** ${h}
 **Projet:** ${n}

 Consultez les rponses du client et validez ou rejetez le formulaire.`,created_at:b.toISOString(),updated_at:b.toISOString()},{error:j}=await T.from("appointments").insert(w);if(j){if(j.code==="23505"){P.warn(" Tche dj existante (bloque par contrainte unique DB):",{prospect:l.name,form:d,constraint:"unique_pending_task_per_prospect_step"});return}P.error(" Erreur cration tche de vrification:",j),F({title:"Erreur",description:"Impossible de crer la tche de vrification.",variant:"destructive"});return}P.info(" Tche de vrification cre:",{title:x,prospect:l.name,form:d,assigned_to:l.owner_id}),F({title:" Tche cre",description:`Tche de vrification assigne pour ${l.name}`,className:"bg-green-500 text-white"})}function coe(e=new Date){const t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getDay(),n=t.getHours();if(r===0||r===6){const s=r===0?1:2;return t.setDate(t.getDate()+s),t.setHours(8,0,0,0),t}return n<8?(t.setHours(8,0,0,0),t):(n>=20&&(r===5?t.setDate(t.getDate()+3):t.setDate(t.getDate()+1),t.setHours(8,0,0,0)),t)}async function uoe({prospectId:e,projectType:t,moduleId:r,formId:n,ownerId:s,reminderCount:o=0}){try{const{data:a,error:l}=await T.from("prospects").select("first_name, last_name, email").eq("id",e).single();if(l)throw new Error(`Prospect introuvable: ${l.message}`);const{data:c,error:u}=await T.from("forms").select("name").eq("form_id",n).single();if(u)throw new Error(`Formulaire introuvable: ${u.message}`);const f=coe(),d="Formulaire client non complt",h=`
Le client ${a.first_name} ${a.last_name} (${a.email}) n'a pas complt le formulaire "${c.name}" aprs ${o} relance(s).

 Module : ${r}
 Projet : ${t}
 ${o} relance(s) automatique(s) envoye(s)

Action requise : Contacter le client pour l'accompagner dans la compltion du formulaire.
    `.trim(),{data:m,error:g}=await T.from("tasks").insert({title:d,description:h,contact_id:e,owner_id:s,status:"pending",priority:"medium",due_date:f.toISOString(),task_type:"follow_up",metadata:{source:"workflow_v2_auto",moduleId:r,projectType:t,formId:n,reminderCount:o,createdBy:"system"}}).select().single();if(g)throw new Error(`Erreur cration tche: ${g.message}`);return console.log(" [TaskScheduler] Tche cre:",{taskId:m.id,scheduledAt:f.toISOString(),prospectId:e,ownerId:s,reminderCount:o}),{success:!0,taskId:m.id,scheduledAt:f}}catch(a){return console.error(" [TaskScheduler] Erreur cration tche:",a),{success:!1,error:a.message}}}const doe={answer_question:{label:"Rpondre aux questions",icon:"",description:"Rpond aux questions poses par l'utilisateur"},show_checklist:{label:"Afficher la checklist",icon:"",description:"Montre les lments  vrifier pour cette tape"},show_documents:{label:"Lister les documents",icon:"",description:"Affiche les documents requis ou disponibles"},explain_clause:{label:"Expliquer une clause",icon:"",description:"Explique le contenu juridique d'une clause"},verify_owner:{label:"Vrifier le propritaire",icon:"",description:"Vrifie les informations du propritaire foncier"},calculate_tariff:{label:"Calculer le tarif",icon:"",description:"Calcule le tarif de vente optimal"},check_eligibility:{label:"Vrifier l'ligibilit",icon:"",description:"Vrifie si le projet rpond aux critres"},explain_technical:{label:"Expliquer techniquement",icon:"",description:"Fournit des explications techniques dtailles"},final_check:{label:"Vrification finale",icon:"",description:"Effectue une vrification complte avant validation"}};function cie(e){return doe[e]||{label:e,icon:"",description:"Action personnalise"}}const mb={targetAudience:"CLIENT",actionType:null,allowedFormIds:[],allowedTemplateIds:[],managementMode:"HUMAN",verificationMode:"HUMAN",completionTrigger:null,requiredFields:[],reminderConfig:{enabled:!1,delayDays:1,maxRemindersBeforeTask:3}},Ci={objective:"Accompagner l'utilisateur dans cette tape du projet",instructions:"Rponds de manire claire et concise. Si tu ne connais pas la rponse, demande des prcisions.",buttonLabels:{proceedLabel:"Valider et continuer",needDataLabel:"J'ai besoin d'infos"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:null,tone:"professional",maxResponseLength:500,actionConfig:{...mb}},ms={"appel-offre-investisseurs":{objective:"Guider l'investisseur dans la soumission de son dossier d'appel d'offre photovoltaque",instructions:`Tu es un expert en appels d'offre CRE (Commission de Rgulation de l'nergie).
    
Ton rle:
- Expliquer le processus de soumission
- Vrifier que le dossier est complet
- Rpondre aux questions sur les critres d'ligibilit
- Aider  calculer le tarif de vente optimal

Rgles:
- Ne jamais inventer de chiffres ou de dates
- Toujours vrifier les informations avant de rpondre
- Si incertain, demander confirmation  l'quipe technique
- tre prcis sur les dlais (gnralement 2-3 mois pour les rsultats)`,buttonLabels:{proceedLabel:"Soumettre le dossier",needDataLabel:"Question sur l'AO"},allowedActions:["answer_question","show_checklist","show_documents","calculate_tariff","check_eligibility"],knowledgeKey:"appel-offre",tone:"professional",maxResponseLength:600},"appel-offre":{objective:"Accompagner la soumission  l'appel d'offre CRE",instructions:`Expert en appels d'offre photovoltaque.
    
Priorits:
1. Vrifier l'ligibilit du projet
2. S'assurer que le dossier est complet
3. Conseiller sur le tarif de vente
4. Rappeler les dates limites`,buttonLabels:{proceedLabel:"Valider la soumission",needDataLabel:"Question AO"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:"appel-offre",tone:"professional",maxResponseLength:500},pdb:{objective:"Scuriser la signature de la promesse de bail avec le propritaire",instructions:`Tu es un assistant juridique spcialis en baux photovoltaques.
    
Ton rle:
- Expliquer les clauses du contrat
- Vrifier les informations du propritaire
- Guider le processus de signature
- Rassurer sur les engagements mutuels

Rgles:
- Toujours recommander une relecture juridique pour les cas complexes
- Ne jamais donner de conseil fiscal personnalis
- Vrifier l'identit du signataire (propritaire lgal)`,buttonLabels:{proceedLabel:"Envoyer pour signature",needDataLabel:"Question sur le bail"},allowedActions:["answer_question","show_checklist","show_documents","verify_owner","explain_clause"],knowledgeKey:"pdb",tone:"reassuring",maxResponseLength:500,actionConfig:{targetAudience:"CLIENT",actionType:"SIGNATURE",allowedFormIds:[],allowedTemplateIds:[],managementMode:"HUMAN",verificationMode:"HUMAN"}},"etude-technique":{objective:"Valider la faisabilit technique du projet photovoltaque",instructions:`Tu es un ingnieur photovoltaque.
    
Ton rle:
- Expliquer les aspects techniques
- Rpondre aux questions sur le dimensionnement
- Clarifier les rsultats de l'tude
- Prparer la visite sur site`,buttonLabels:{proceedLabel:"Valider l'tude",needDataLabel:"Question technique"},allowedActions:["answer_question","show_checklist","explain_technical"],knowledgeKey:"etude-technique",tone:"technical",maxResponseLength:600},raccordement:{objective:"Accompagner la demande de raccordement au rseau Enedis",instructions:`Tu es un expert en raccordement lectrique.
    
Ton rle:
- Expliquer le processus Enedis
- Anticiper les dlais
- Aider  prparer le dossier
- Rpondre aux questions sur la PTF`,buttonLabels:{proceedLabel:"Soumettre  Enedis",needDataLabel:"Question raccordement"},allowedActions:["answer_question","show_checklist","show_documents"],knowledgeKey:"raccordement",tone:"professional",maxResponseLength:500},"mise-en-service":{objective:"Finaliser la mise en service de l'installation",instructions:`Tu supervises la mise en service de l'installation.
    
Ton rle:
- Vrifier que tout est prt
- Coordonner avec Enedis
- S'assurer du bon fonctionnement
- Clbrer la russite du projet !`,buttonLabels:{proceedLabel:" Mettre en service",needDataLabel:"Question finale"},allowedActions:["answer_question","show_checklist","final_check"],knowledgeKey:"mise-en-service",tone:"enthusiastic",maxResponseLength:400}};function foe(e){if(!e)return Ci;const t=e.toLowerCase().replace(/[_\s]/g,"-");if(ms[t])return{...Ci,...ms[t]};const r=Object.keys(ms).find(n=>t.includes(n)||n.includes(t));return r?{...Ci,...ms[r]}:Ci}function uie(e,t){if(!e)return;const r=e.toLowerCase().replace(/[_\s]/g,"-");ms[r]={...ms[r]||Ci,...t},console.log("[V2 Config] Module AI config updated",{moduleId:e,updates:t})}function hoe(e){return foe(e).actionConfig||{...mb}}function die(e,t){if(!e)return;const r=e.toLowerCase().replace(/[_\s]/g,"-"),n=ms[r]||{...Ci},s=n.actionConfig||{...mb};ms[r]={...n,actionConfig:{...s,...t}},console.log("[V2 Config] Module action config updated",{moduleId:e,actionUpdates:t})}function fie(e,t=null){var d;const r=[],n=[],s=hoe(e),o=s.targetAudience;(Array.isArray(o)?o.length>0:!!o)||r.push({field:"targetAudience",message:"Au moins une cible doit tre slectionne (Client, Commercial ou Partenaire)"});const l=s.actionType;l||r.push({field:"actionType",message:"Le type d'action doit tre dfini (Formulaire ou Signature)"}),l==="FORM"&&(s.allowedFormIds||[]).length===0&&r.push({field:"allowedFormIds",message:"Au moins un formulaire doit tre slectionn"}),l==="SIGNATURE"&&((s.allowedFormIds||[]).length===0&&r.push({field:"allowedFormIds",message:"Au moins un formulaire de collecte doit tre slectionn pour la signature"}),(s.allowedTemplateIds||[]).length===0&&n.push("Aucun template de contrat slectionn (optionnel)"));const c=s.managementMode;(!c||!["AI","HUMAN"].includes(c))&&r.push({field:"managementMode",message:"Le mode de gestion doit tre dfini (IA ou Humain)"});const u=s.verificationMode;return(!u||!["AI","HUMAN"].includes(u))&&r.push({field:"verificationMode",message:"Le mode de vrification doit tre dfini (IA ou Humain)"}),s.completionTrigger||r.push({field:"completionTrigger",message:"Un trigger de compltion doit tre slectionn (Formulaire valid, Signature complte, etc.)"}),l==="FORM"&&o==="CLIENT"&&((s.requiredFields||[]).length===0&&r.push({field:"requiredFields",message:"Au moins un champ requis doit tre dfini pour viter les validations incompltes"}),(d=s.reminderConfig)!=null&&d.enabled||r.push({field:"reminderConfig",message:"La relance automatique doit tre active pour les formulaires Client"})),console.log("[V2 Validator] Config validation",{moduleId:e,projectType:t,isComplete:r.length===0,errorsCount:r.length,warningsCount:n.length}),{isComplete:r.length===0,errors:r,warnings:n}}function poe(e,t=!0){const r=p.useRef(new Set);p.useEffect(()=>{if(!t||!e)return;const n=T.channel(`form-reminder-watcher-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},async s=>{try{const o=s.new;if(o.status==="approved"||o.task_created)return;const a=`${o.prospect_id}-${o.form_id}-${o.reminder_count}`;if(r.current.has(a))return;const l=o.reminder_count||0,c=o.max_reminders_before_task||3;if(l===0)return;if(l>=c){P.info(" [FormReminderWatcher] Seuil atteint  Cration de tche",{prospect_id:o.prospect_id,form_id:o.form_id,reminder_count:l,max_reminders:c});const{data:u,error:f}=await T.from("prospects").select("owner_id, name, email").eq("id",o.prospect_id).single();if(f||!(u!=null&&u.owner_id)){P.error("[FormReminderWatcher] Owner ID introuvable",{error:f});return}const{data:d,error:h}=await T.from("forms").select("name").eq("form_id",o.form_id).single(),m=(d==null?void 0:d.name)||"Formulaire",g=await uoe({prospectId:o.prospect_id,prospectName:u.name,prospectEmail:u.email,projectType:o.project_type,formName:m,formId:o.form_id,ownerId:u.owner_id,reminderCount:l});g.success?(P.info(" [FormReminderWatcher] Tche cre avec succs",{task_id:g.taskId,scheduled_at:g.scheduledAt}),r.current.add(a),await T.from("client_form_panels").update({task_created:!0}).eq("panel_id",o.panel_id)):P.error("[FormReminderWatcher] chec cration tche",{error:g.error})}else P.debug("[FormReminderWatcher] Seuil non atteint",{reminder_count:l,max_reminders:c,remaining:c-l})}catch(o){P.error("[FormReminderWatcher] Erreur dans le watcher",{error:o})}}).subscribe();return()=>{T.removeChannel(n)}},[t,e])}const Hm=1*60*1e3,KS=" Vous tes toujours l ? N'hsitez pas si vous avez des questions, je suis l pour vous aider.",Tl={start:0,end:24},tx=[0,1,2,3,4,5,6];function moe(){const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getHours(),n=t.getDay();return tx.includes(n)&&r>=Tl.start&&r<Tl.end}function goe(){const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Europe/Paris"})),r=t.getHours(),n=t.getDay();if(tx.includes(n)&&r<Tl.start){const l=new Date(t);return l.setHours(Tl.start,0,0,0),l.getTime()-t.getTime()}let s=1,o=(n+1)%7;for(;!tx.includes(o);)s++,o=(o+1)%7;const a=new Date(t);return a.setDate(a.getDate()+s),a.setHours(Tl.start,0,0,0),a.getTime()-t.getTime()}function voe(e,t=!1){const r=p.useRef(new Map),n=p.useRef(new Set),s=p.useCallback(async(l,c,u)=>{try{P.info(" [PresenceCheck] Envoi message prsence",{prospectId:l,projectType:c,panelId:u});const{data:f,error:d}=await T.from("client_form_panels").select("panel_id, status, presence_message_sent").eq("panel_id",u).single();if(d||!f){P.warn("[PresenceCheck] Panel introuvable",{panelId:u,error:d});return}if(f.status!=="pending"){P.debug("[PresenceCheck] Panel non pending, skip",{panelId:u,status:f.status});return}if(f.presence_message_sent===!0){P.debug("[PresenceCheck] Message dj envoy, skip",{panelId:u});return}if(!moe()){P.debug("[PresenceCheck] Hors fentre horaire, report",{panelId:u});const g=goe(),v=setTimeout(()=>{s(l,c,u)},g);r.current.set(u,v);return}const{error:h}=await T.from("chat_messages").insert({prospect_id:l,project_type:c,sender:"admin",text:KS,channel:"client",metadata:{type:"presence_check",automated:!0,panel_id:u}});if(h){P.error("[PresenceCheck] Erreur envoi message",{panelId:u,error:h});return}const{error:m}=await T.from("client_form_panels").update({presence_message_sent:!0}).eq("panel_id",u);if(m){P.error("[PresenceCheck] Erreur update flag",{panelId:u,error:m});return}P.info(" [PresenceCheck] Message envoy avec succs",{panelId:u}),n.current.add(u)}catch(f){P.error("[PresenceCheck] Erreur inattendue",{panelId:u,error:f})}},[]),o=p.useCallback((l,c,u,f=Hm)=>{if(r.current.has(u)&&clearTimeout(r.current.get(u)),n.current.has(u))return;const d=setTimeout(()=>{s(l,c,u),r.current.delete(u)},f);r.current.set(u,d)},[s]),a=p.useCallback(l=>{r.current.has(l)&&(clearTimeout(r.current.get(l)),r.current.delete(l))},[]);p.useEffect(()=>{if(!t||!e)return;const l=T.channel(`presence-check-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`organization_id=eq.${e}`},async f=>{var g;const d=f.new;if(d.sender==="admin"||d.sender==="pro"){if(((g=d.metadata)==null?void 0:g.type)==="presence_check"||d.text===KS){P.debug("[PresenceCheck] Ignore message prsence auto",{prospectId:d.prospect_id,projectType:d.project_type});return}const{data:v,error:x}=await T.from("chat_messages").select("id").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("sender","client").limit(1);if(x||!v||v.length===0){P.debug("[PresenceCheck] Client jamais interagi, pas de timer",{prospectId:d.prospect_id,projectType:d.project_type});return}P.debug("[PresenceCheck] Message admin/pro dtect, client a dj interagi, dmarrage timer",{prospectId:d.prospect_id,projectType:d.project_type,sender:d.sender});const{data:b,error:y}=await T.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("status","pending");if(y||!b||b.length===0)return;for(const w of b){if(w.presence_message_sent){P.debug("[PresenceCheck] Panel dj notifi, pas de nouveau timer",{panelId:w.panel_id});continue}o(w.prospect_id,w.project_type,w.panel_id)}return}if(d.sender!=="client")return;P.debug("[PresenceCheck] Message client dtect",{prospectId:d.prospect_id,projectType:d.project_type});const{data:h,error:m}=await T.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).eq("status","pending");if(!(m||!h||h.length===0))for(const v of h)a(v.panel_id),n.current.delete(v.panel_id),await T.from("client_form_panels").update({presence_message_sent:!1}).eq("panel_id",v.panel_id),P.debug("[PresenceCheck] Timer reset aprs rponse client",{panelId:v.panel_id})}).subscribe(),c=T.channel(`presence-check-panels-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},async f=>{const d=f.new;if(d.status!=="pending")return;P.debug("[PresenceCheck] Nouveau panel dtect",{panelId:d.panel_id});const{data:h,error:m}=await T.from("chat_messages").select("sender, created_at").eq("prospect_id",d.prospect_id).eq("project_type",d.project_type).order("created_at",{ascending:!1}).limit(1);if(m||!h||h.length===0){P.debug("[PresenceCheck] Panel cr sans historique, pas de timer",{panelId:d.panel_id});return}const g=h[0];if(g.sender==="client"){P.debug("[PresenceCheck] Dernier message client, on attend un message admin avant timer",{panelId:d.panel_id});return}const v=new Date(g.created_at),b=new Date().getTime()-v.getTime(),y=Math.max(Hm-b,0);y===0?s(d.prospect_id,d.project_type,d.panel_id):o(d.prospect_id,d.project_type,d.panel_id,y)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"client_form_panels",filter:`organization_id=eq.${e}`},f=>{const d=f.new;d.status!=="pending"&&(a(d.panel_id),P.debug("[PresenceCheck] Panel termin, timer annul",{panelId:d.panel_id}))}).subscribe();return(async()=>{const{data:f,error:d}=await T.from("client_form_panels").select("panel_id, prospect_id, project_type, presence_message_sent").eq("status","pending").eq("presence_message_sent",!1);if(d||!f){P.error("[PresenceCheck] Erreur chargement panels existants",{error:d});return}P.info(`[PresenceCheck] ${f.length} panels pending  surveiller`);for(const h of f){const{data:m}=await T.from("chat_messages").select("sender, created_at").eq("prospect_id",h.prospect_id).eq("project_type",h.project_type).order("created_at",{ascending:!1}).limit(1);if(!m||m.length===0){P.debug("[PresenceCheck] Panel pending sans messages, skip timer",{panelId:h.panel_id});continue}const g=m[0];if(g.sender!=="admin"&&g.sender!=="pro"){P.debug("[PresenceCheck] Dernier message ct client, pas de timer",{panelId:h.panel_id});continue}const v=new Date(g.created_at),b=new Date().getTime()-v.getTime(),y=Math.max(Hm-b,0);y===0?s(h.prospect_id,h.project_type,h.panel_id):o(h.prospect_id,h.project_type,h.panel_id,y)}})(),()=>{for(const[f,d]of r.current.entries())clearTimeout(d);r.current.clear(),T.removeChannel(l),T.removeChannel(c)}},[t,e,o,a,s])}function xoe(e,t=!0){const r=p.useRef(new Set),n=p.useCallback(async(s,o,a)=>{try{if(r.current.has(a))return;if(r.current.add(a),r.current.size>1e3){const h=Array.from(r.current);r.current=new Set(h.slice(-500))}P.info(" [ReminderReset] Message client dtect, reset des relances",{prospectId:s,projectType:o,messageId:a});const{data:l,error:c}=await T.from("client_form_panels").select("panel_id, reminder_count, task_created").eq("prospect_id",s).eq("project_type",o).eq("status","pending").eq("task_created",!1);if(c){P.error("[ReminderReset] Erreur fetch panels",{error:c});return}if(!l||l.length===0){P.debug("[ReminderReset] Aucun panel pending  reset",{prospectId:s,projectType:o});return}const u=l.filter(h=>h.reminder_count>0);if(u.length===0){P.debug("[ReminderReset] Aucun panel avec relances  reset",{prospectId:s,projectType:o});const h=l.map(m=>m.panel_id);await T.from("client_form_panels").update({last_reminder_at:new Date().toISOString()}).in("panel_id",h);return}const f=u.map(h=>h.panel_id),{error:d}=await T.from("client_form_panels").update({reminder_count:0,last_reminder_at:new Date().toISOString()}).in("panel_id",f);if(d){P.error("[ReminderReset] Erreur update panels",{error:d});return}P.info(" [ReminderReset] Relances reset avec succs",{prospectId:s,projectType:o,panelsReset:f.length,panelIds:f,previousCounts:u.map(h=>({panelId:h.panel_id,count:h.reminder_count}))})}catch(l){P.error("[ReminderReset] Erreur inattendue",{error:l})}},[]);p.useEffect(()=>{if(!t||!e)return;const s=T.channel(`reminder-reset-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`organization_id=eq.${e}`},async o=>{const a=o.new;a.sender==="client"&&await n(a.prospect_id,a.project_type,a.id)}).subscribe();return()=>{T.removeChannel(s)}},[t,e,n])}const YS=p.lazy(()=>Lr(()=>import("./FinalPipeline-17af50e6.js"),["assets/FinalPipeline-17af50e6.js","assets/Agenda-0328e502.js","assets/index-2dd00071.js","assets/useSupabaseProjectStepsStatus-8eea27fa.js","assets/external-link-3bc9abab.js","assets/SearchableSelect-e9e59470.js","assets/useSupabaseProjectFiles-9ffdb9b6.js","assets/useSupabaseWorkflowModuleTemplates-63869f6c.js","assets/workflowV2Config-f801420c.js","assets/download-3716c62a.js","assets/pen-square-939f4bb4.js","assets/paperclip-6ae65259.js"])),yoe=p.lazy(()=>Lr(()=>import("./Agenda-0328e502.js").then(e=>e.a),["assets/Agenda-0328e502.js","assets/index-2dd00071.js","assets/useSupabaseProjectStepsStatus-8eea27fa.js","assets/external-link-3bc9abab.js"])),boe=p.lazy(()=>Lr(()=>import("./ProfilePage-819ff596.js"),["assets/ProfilePage-819ff596.js","assets/SearchableSelect-e9e59470.js","assets/pen-square-939f4bb4.js"])),woe=p.lazy(()=>Lr(()=>import("./CharlyPage-4e6be846.js"),[])),joe=p.lazy(()=>Lr(()=>import("./ConfigurationIA-0f67c9ab.js"),[])),_oe=p.lazy(()=>Lr(()=>import("./ContractTemplatesPage-342626a0.js"),["assets/ContractTemplatesPage-342626a0.js","assets/pen-square-939f4bb4.js"])),Soe=p.lazy(()=>Lr(()=>import("./ContractTemplateEditorPage-f655402b.js"),["assets/ContractTemplateEditorPage-f655402b.js","assets/ContractTemplateEditorPage-8e59e50e.css"])),JS=p.lazy(()=>Lr(()=>import("./ClientDashboardPage-f31bce5c.js"),["assets/ClientDashboardPage-f31bce5c.js","assets/useSupabaseProjectStepsStatus-8eea27fa.js","assets/useSupabaseProjectFiles-9ffdb9b6.js","assets/index-2dd00071.js","assets/download-3716c62a.js","assets/paperclip-6ae65259.js"])),Noe=p.lazy(()=>Lr(()=>import("./WorkflowV2Page-c50328ed.js"),["assets/WorkflowV2Page-c50328ed.js","assets/workflowV2Config-f801420c.js","assets/useSupabaseProjectStepsStatus-8eea27fa.js","assets/useSupabaseProjectFiles-9ffdb9b6.js","assets/useSupabaseWorkflowModuleTemplates-63869f6c.js","assets/ModuleConfigTab-c19e822a.js","assets/rocket-5b6d7bea.js","assets/download-3716c62a.js","assets/external-link-3bc9abab.js"])),Eoe=p.lazy(()=>Lr(()=>import("./ProspectDetailsV2-78122d3c.js"),["assets/ProspectDetailsV2-78122d3c.js","assets/workflowV2Config-f801420c.js","assets/useSupabaseProjectStepsStatus-8eea27fa.js","assets/rocket-5b6d7bea.js"])),Coe=p.lazy(()=>Lr(()=>import("./WorkflowV2ConfigPage-93eea3c0.js"),["assets/WorkflowV2ConfigPage-93eea3c0.js","assets/ModuleConfigTab-c19e822a.js","assets/useSupabaseWorkflowModuleTemplates-63869f6c.js","assets/workflowV2Config-f801420c.js","assets/rocket-5b6d7bea.js","assets/download-3716c62a.js"])),XS=["bg-blue-100","bg-yellow-100","bg-green-100","bg-purple-100","bg-orange-100","bg-indigo-100","bg-teal-100","bg-pink-100","bg-rose-100","bg-gray-100"],Poe={MARKET:"bg-blue-100",ETUDE:"bg-yellow-100",OFFRE:"bg-green-100",CONTRAT:"bg-blue-100","CONTRAT OK":"bg-blue-100","CLIENT ACTIF":"bg-purple-100"},rx=e=>(e||"").toString().trim().toUpperCase(),QS=(e,t,r,n=0)=>{const s=rx(e),o=Poe[s]||XS[n%XS.length];return{id:t||`global-pipeline-step-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,label:s,color:typeof r=="string"&&r.trim()?r:o}},Toe=e=>Array.isArray(e)?e.map((t,r)=>{if(typeof t=="string"){const n=rx(t);return n?QS(n,`legacy-global-pipeline-${r}`,void 0,r):null}if(t&&typeof t=="object"&&"label"in t){const n=rx(t.label);if(!n)return null;const s=typeof t.color=="string"?t.color:void 0;return QS(n,t.id||`legacy-global-pipeline-${r}`,s,r)}return null}).filter(Boolean):[],koe=(e=[],t=[])=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],s=t[r];if(!n||!s||n.id!==s.id||n.name!==s.name||n.type!==s.type||n.placeholder!==s.placeholder||!!n.required!=!!s.required)return!1}return!0},Aoe=(e=[],t=[])=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],s=t[r];if(!n||!s||n.id!==s.id||n.label!==s.label||n.color!==s.color)return!1}return!0},DD=J.createContext(),Ve=()=>J.useContext(DD),mt={INIT:"init",RESOLVING_ORG:"resolving_org",AUTH:"auth",LOADING_USER:"loading_user",READY:"ready",ERROR:"error"};function Roe(){const e=nr();if(e.pathname==="/landing")return i.jsx(ud,{});const t=Te(),r=e.pathname.startsWith("/admin"),[n,s]=p.useState(mt.INIT),[o,a]=p.useState(null),{organizationId:l,organizationLoading:c,organizationError:u,organizationReady:f,brandName:d,logoUrl:h,primaryColor:m,secondaryColor:g,brandingLoading:v,brandingError:x}=on(),[b,y]=p.useState([]),[w,j]=p.useState([]),[_,S]=p.useState(null),[N,E]=p.useState([]),[C,k]=p.useState({});p.useState([]),p.useState([]);const[I,O]=p.useState({}),[M,D]=p.useState({}),[z,B]=p.useState(null),[q,A]=p.useState(null),[R,$]=p.useState(!0),[L,W]=p.useState(!1),[V,re]=p.useState(null),[ve,se]=p.useState(!1),Z=p.useRef(!1);p.useEffect(()=>{if(n===mt.INIT){s(mt.RESOLVING_ORG);return}if(n===mt.RESOLVING_ORG){if(u){P.error("[Boot] Organization resolution failed",{error:u}),a(u),s(mt.ERROR);return}if(f){s(mt.AUTH);return}}if(n===mt.AUTH&&!R){s(V?mt.LOADING_USER:mt.READY);return}n===mt.LOADING_USER&&(L||_||!q&&!_&&!R)&&s(mt.READY)},[n,f,u,l,R,V,L,q,_]),b0();const{prospects:ue,addProspect:Y,updateProspect:U,loading:ee}=Jse(R?null:q,l),{appointments:ce,calls:_e,tasks:ke,loading:dt,error:ln,addAppointment:Sn,updateAppointment:Ta,deleteAppointment:Zn,addCall:Go,updateCall:$D,deleteCall:MD,addTask:LD,updateTask:FD,deleteTask:BD,refresh:zD}=Qse(R?null:q,l);p.useEffect(()=>{!R&&!ee&&ue&&j(ue)},[ue,ee,R]);const gb=e.pathname.startsWith("/dashboard"),vb=R||!gb?null:_==null?void 0:_.id;V&&!R&&P.debug("App routing info",{isClientRoute:gb,activeAdmin:q==null?void 0:q.name,currentUser:_==null?void 0:_.name,prospectIdForForms:vb});const{formPanels:UD,createFormPanel:VD,updateFormPanel:qD,deleteFormPanelsByProspect:WD}=noe(f?vb:"__DISABLED__"),{companySettings:sp,updateLogo:HD,removeLogo:GD,updateFormContactConfig:xb,getFormContactConfig:yb}=Zse({organizationId:l,enabled:f});p.useEffect(()=>{if(!l){B(null);return}(async()=>{try{const{data:K,error:G}=await T.from("organization_settings").select("form_contact_config").eq("organization_id",l).single();if(G){P.debug("[App] organization_settings.form_contact_config non trouv, fallback vers company_settings"),B(null);return}B((K==null?void 0:K.form_contact_config)||null)}catch{B(null)}})()},[l]);const{globalPipelineSteps:bb,loading:KD,addStep:YD,updateStep:JD,deleteStep:XD,reorderSteps:$oe}=eoe(f?l:null),{allProjectSteps:Xc,loading:op}=soe(l);p.useEffect(()=>{!R&&!op&&Xc&&k(X=>{const K={...X};return Object.entries(Xc).forEach(([G,le])=>{const[fe,ie]=G.split("-"),qe=`prospect_${fe}_project_${ie}`;K[qe]=le}),K})},[Xc,op,R]);const{projectTemplates:ip,loading:Moe,addTemplate:QD,updateTemplate:ZD,deleteTemplate:e$,getPublicTemplates:Loe}=RD({organizationId:l,enabled:f}),{forms:wb,loading:jb}=O0(l);p.useEffect(()=>{!R&&!jb&&O(wb)},[wb,jb,R]);const{prompts:Qc,loading:_b}=vI({organizationId:l,enabled:f});p.useEffect(()=>{!R&&!_b&&D(Qc)},[Qc,_b,R]),ioe(l,Qc,!R&&L),aoe(Qc,{organizationId:l,enabled:!R&&L&&f}),poe(l,!R&&L),voe(l,!R&&L),xoe(l,!R&&L);const{notifications:t$,createOrUpdateNotification:r$,markAsRead:n$}=toe((q==null?void 0:q.user_id)||null,!R&&L&&!!q),{notifications:s$,createOrUpdateNotification:o$,markAsRead:i$}=roe((_==null?void 0:_.id)||null,!R&&!!_),{projectInfos:ka,getProjectInfo:a$,updateProjectInfo:Sb}=ooe(l),Aa=p.useMemo(()=>ip.reduce((K,G)=>(K[G.type]=G,K),{}),[ip]),l$=h||"",c$=HD,Nb=z&&z.length>0?z:yb().length>0?yb():Gse;p.useEffect(()=>{(async()=>{var fe;const le=new URLSearchParams(window.location.search).get("code");if(le){try{const{data:ie,error:qe}=await T.auth.exchangeCodeForSession(le);qe?P.error("Error exchanging code for session",{error:qe.message}):ie.session&&(P.debug("Session established from code",{email:(fe=ie.session.user)==null?void 0:fe.email}),re(ie.session),window.history.replaceState({},document.title,window.location.pathname+window.location.hash))}catch(ie){P.error("Exception during code exchange",{error:ie.message})}return}})();const{data:{subscription:K}}=T.auth.onAuthStateChange((G,le)=>{var fe;P.debug("Auth event",{event:G,email:(fe=le==null?void 0:le.user)==null?void 0:fe.email}),re(le??null)});return T.auth.getSession().then(({data:G})=>{var fe;const le=G.session;le&&(P.debug("Initial session found",{email:(fe=le.user)==null?void 0:fe.email}),re(le))}),()=>K.unsubscribe()},[]);const cn=p.useRef(!1);async function Eb(X){if(!cn.current){cn.current=!0;try{$(!0);const{data:K}=await T.from("users").select("*").eq("user_id",X).maybeSingle();if(K){if(K.organization_id){const{data:ie}=await T.rpc("platform_get_org_status",{p_org_id:K.organization_id});if((ie==null?void 0:ie.status)==="suspended"){P.info("Organization suspended, logging out admin"),await T.auth.signOut(),$(!1),cn.current=!1,sessionStorage.setItem("org_suspended_message","Votre organisation est temporairement suspendue. Contactez le support.");return}}const fe={id:K.id,user_id:K.user_id,userId:K.user_id,name:K.name,email:K.email,role:K.role,phone:K.phone,avatar_url:K.avatar_url,avatarUrl:K.avatar_url,manager_id:K.manager_id,managerId:K.manager_id,organization_id:K.organization_id,organizationId:K.organization_id,access_rights:K.access_rights,accessRights:K.access_rights,created_at:K.created_at,createdAt:K.created_at,updated_at:K.updated_at,updatedAt:K.updated_at};A(fe),W(!0),S(null),setTimeout(()=>{$(!1),cn.current=!1},0);return}if(!f||!l){P.debug("Client lookup skipped: organization context not ready",{userId:X,organizationReady:f,organizationId:l}),setTimeout(()=>{$(!1),cn.current=!1},0);return}let G=null;const{data:le}=await T.from("prospects").select("*").eq("user_id",X).eq("organization_id",l).maybeSingle();if(G=le||null,!G){P.debug("No prospect linked in this organization for user",{userId:X,organizationId:l}),se(!0),S(null),setTimeout(()=>{$(!1),cn.current=!1},0);return}if(se(!1),G){if(G.organization_id){const{data:ie}=await T.rpc("platform_get_org_status",{p_org_id:G.organization_id});if((ie==null?void 0:ie.status)==="suspended"){P.info("Organization suspended, logging out client"),await T.auth.signOut(),$(!1),cn.current=!1,sessionStorage.setItem("org_suspended_message","Votre organisation est temporairement suspendue. Contactez le support.");return}}const fe={id:G.id,name:G.name,email:G.email,phone:G.phone,address:G.address,companyName:G.company_name,tags:G.tags||[],userId:G.user_id,ownerId:G.owner_id,organizationId:G.organization_id,organization_id:G.organization_id,status:G.status,hasAppointment:G.has_appointment,affiliateName:G.affiliate_name,formData:G.form_data||{},createdAt:G.created_at,updatedAt:G.updated_at};S(fe),A(null),G.tags&&Array.isArray(G.tags)&&y(G.tags),setTimeout(()=>{$(!1),cn.current=!1},0);return}S(null),A(null),setTimeout(()=>{$(!1)},0)}catch(K){P.error("Erreur chargement utilisateur authentifi",{error:K.message}),setTimeout(()=>{$(!1)},0)}finally{cn.current=!1}}}p.useEffect(()=>{if(e.pathname.startsWith("/inscription")||e.pathname.startsWith("/register")||e.pathname==="/"||e.pathname.startsWith("/platform-login")||e.pathname.startsWith("/platform")){A(null),se(!1),setTimeout(()=>{$(!1)},0);return}if(!V){A(null),S(null),se(!1),setTimeout(()=>{$(!1)},0);return}se(!1),$(!0),Eb(V.user.id),e.pathname==="/"&&!_&&!q&&setTimeout(()=>{_&&t("/dashboard")},1e3)},[V]),p.useEffect(()=>{var X;V&&(!f||!l||q||!_&&!cn.current&&(P.debug("Organization ready - triggering deferred user load",{organizationId:l,userId:(X=V.user)==null?void 0:X.id}),$(!0),Eb(V.user.id)))},[f,l,V,q,_]),p.useEffect(()=>{if(!(_!=null&&_.id))return;P.debug("Setting up real-time channel for currentUser prospect",{prospectId:_.id});const X=T.channel(`client-prospect-${_.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"prospects",filter:`id=eq.${_.id}`},K=>{var le;P.debug("Real-time UPDATE received for currentUser",{prospectId:(le=K.new)==null?void 0:le.id});const G={id:K.new.id,name:K.new.name,email:K.new.email,phone:K.new.phone,address:K.new.address,companyName:K.new.company_name,tags:K.new.tags||[],userId:K.new.user_id,ownerId:K.new.owner_id,status:K.new.status,hasAppointment:K.new.has_appointment,affiliateName:K.new.affiliate_name,formData:K.new.form_data||{},createdAt:K.new.created_at,updatedAt:K.new.updated_at};S(G)}).subscribe();return()=>{T.removeChannel(X)}},[_==null?void 0:_.id]),p.useEffect(()=>{if(!(_!=null&&_.id)||!w.length)return;const X=w.find(K=>K.id===_.id);if(X){const K=JSON.stringify(_.formData||_.form_data),G=JSON.stringify(X.formData||X.form_data);K!==G&&S({..._,formData:X.formData||X.form_data,form_data:X.formData||X.form_data})}},[w,_==null?void 0:_.id]),p.useEffect(()=>{Z.current=!0},[]);const u$=async X=>{try{const K=[];for(const[G,le]of Object.entries(X)){const fe=ip.find(qe=>qe.type===G),ie={title:le.title,client_title:le.clientTitle||le.client_title,icon:le.icon,color:le.color,steps:le.steps,is_public:le.isPublic!==void 0?le.isPublic:le.is_public,image_url:le.coverImage||le.image_url,client_description:le.clientDescription||le.client_description,cta_text:le.ctaText||le.cta_text};fe?(fe.title!==ie.title||fe.client_title!==ie.client_title||fe.icon!==ie.icon||fe.color!==ie.color||JSON.stringify(fe.steps)!==JSON.stringify(ie.steps)||fe.is_public!==ie.is_public||fe.image_url!==ie.image_url||fe.client_description!==ie.client_description||fe.cta_text!==ie.cta_text)&&K.push(ZD(fe.id,ie)):K.push(QD({type:G,...ie}))}K.length>0&&await Promise.all(K)}catch(K){throw P.error("Erreur handleSetProjectsData",{error:K.message}),K}},d$=async X=>{const K=Nb||[],G=typeof X=="function"?X(K):X;if(!Array.isArray(G)){P.warn("Invalid form contact config, using default",{received:typeof G});return}if(!koe(K,G))try{await xb(G),B(G)}catch(le){P.error("Erreur update config formulaire contact",{error:le.message})}},f$=(X,K)=>{var G;return!X||!K?{}:((G=ka==null?void 0:ka[X])==null?void 0:G[K])||{}},Cb=Sb,h$=async X=>{const K=bb,G=typeof X=="function"?X(K):X,le=Toe(G);if(!Aoe(K,le))try{const fe=new Set(K.map(We=>We.id)),ie=new Set(le.map(We=>We.id));for(const We of K)ie.has(We.id)||await XD(We.id);for(const We of le)fe.has(We.id)||await YD(We.label,We.color||"bg-gray-100");const qe=le.filter(We=>fe.has(We.id));for(let We=0;We<qe.length;We++){const Ie=qe[We],jr=K.find(ap=>ap.id===Ie.id);jr&&(jr.label!==Ie.label||jr.color!==Ie.color||jr.position!==We)&&await JD(Ie.id,{label:Ie.label,color:Ie.color,position:We})}}catch(fe){P.error("Erreur update pipeline steps",{error:fe.message}),F({title:"Erreur",description:"Impossible de mettre  jour les colonnes du pipeline.",variant:"destructive"})}};p.useEffect(()=>{(async()=>{var G,le;if(!l)return;const K=localStorage.getItem("evatime_form_contact_config");if(K){const fe=JSON.parse(K),ie=z&&z.length>0;((le=(G=sp==null?void 0:sp.settings)==null?void 0:G.form_contact_config)==null?void 0:le.length)>0,ie||(await xb(fe),B(fe)),localStorage.removeItem("evatime_form_contact_config")}})()},[l,z]),p.useEffect(()=>{localStorage.getItem("evatime_company_logo")&&localStorage.removeItem("evatime_company_logo")},[]);const p$=async(X,K,G)=>{var le,fe,ie;try{if(G.completedFormId&&G.sender==="client"){const{data:Ie}=await T.from("chat_messages").select("id").eq("prospect_id",X).eq("project_type",K).eq("sender","client").eq("completed_form_id",G.completedFormId).eq("related_message_timestamp",G.relatedMessageTimestamp||"");if(Ie&&Ie.length>0)return}if(G.promptId){const{data:Ie}=await T.from("chat_messages").select("id").eq("prospect_id",X).eq("project_type",K).eq("sender",G.sender).eq("prompt_id",G.promptId).eq("step_index",G.stepIndex||0).eq("text",G.text||"");if(Ie&&Ie.length>0)return}const qe={prospect_id:X,project_type:K,sender:G.sender,text:G.text||null,file:G.file||null,form_id:G.formId||null,completed_form_id:G.completedFormId||null,prompt_id:G.promptId||null,step_index:G.stepIndex!==void 0?G.stepIndex:null,related_message_timestamp:G.relatedMessageTimestamp||null,channel:G.channel||"client",read:!1},{error:We}=await T.from("chat_messages").insert([qe]);if(We)throw We;if(G.file&&G.sender==="client"&&Cb(X,K,Ie=>K==="ACC"&&!(Ie!=null&&Ie.ribFile)?{...Ie,ribFile:G.file.name}:Ie||{}),G.sender==="client"){const{data:Ie,error:jr}=await T.from("prospects").select("name, owner_id").eq("id",X).single();if(jr){P.error("Error loading prospect for notification",{error:jr}),F({title:"Erreur",description:"Impossible de charger les informations du prospect.",variant:"destructive"});return}Ie?await r$({prospectId:X,ownerId:Ie.owner_id,projectType:K,prospectName:Ie.name,projectName:((le=Aa[K])==null?void 0:le.title)||K}):P.warn("No prospect data found for notification",{prospectId:X})}(G.sender==="admin"||G.sender==="pro")&&await o$({prospectId:X,projectType:K,projectName:((fe=Aa[K])==null?void 0:fe.title)||K,message:((ie=G.text)==null?void 0:ie.substring(0,50))||"Nouveau message"})}catch(qe){P.error("Erreur envoi message",{error:qe.message}),F({title:"Erreur",description:"Impossible d'envoyer le message. Vrifiez votre connexion.",variant:"destructive"})}},m$=X=>{n$(X)},g$=(X,K,G)=>N.filter(le=>le.share===!0&&le.contactId===X&&le.projectId===K&&le.step===G),Ra=async(X,K,G)=>{const le=`prospect_${X}_project_${K}`;k(fe=>({...fe,[le]:G}));try{if(!l){P.warn("updateProjectSteps: organisation manquante  skip server save");return}const{data:fe,error:ie}=await T.from("project_steps_status").upsert({prospect_id:X,project_type:K,steps:G,organization_id:l,updated_at:new Date().toISOString()},{onConflict:"prospect_id,project_type"}).select().single();if(ie){P.error("Erreur sauvegarde Supabase",{error:ie.message}),F({title:"Erreur",description:"Impossible de sauvegarder les tapes",variant:"destructive"});return}}catch(fe){P.error("Erreur sauvegarde project steps",{error:fe.message})}},v$=(X,K)=>{var qe;const G=`prospect_${X}_project_${K}`,le=C[G],fe=(qe=Aa[K])==null?void 0:qe.steps;if(!fe||fe.length===0)return[];const ie=JSON.parse(JSON.stringify(fe));return le&&le.length>0?ie.forEach((We,Ie)=>{const jr=le.find(ap=>ap.name===We.name);jr&&(We.status=jr.status)}):ie.length>0&&ie[0].status==="pending"&&(ie[0].status="in_progress"),ie},x$=async(X,K,G,le)=>{if(!le||le.length===0){P.error("No steps provided",{prospectId:X,projectType:K});return}if(P.debug("Steps received from caller",{count:le.length}),G<0||G>=le.length){P.error("Index tape invalide",{currentStepIndex:G,stepsLength:le.length});return}const fe=JSON.parse(JSON.stringify(le)),ie=fe[G];if(ie!=null&&ie.subSteps&&Array.isArray(ie.subSteps)&&ie.subSteps.length>0){let qe=ie.subSteps.findIndex(Ie=>Ie.status==="in_progress");if(qe===-1&&(qe=ie.subSteps.findIndex(Ie=>Ie.status==="pending"),qe!==-1&&(ie.subSteps[qe].status="in_progress")),qe!==-1){ie.subSteps[qe].status="completed";const Ie=ie.subSteps.findIndex(jr=>jr.status==="pending");if(Ie!==-1){ie.subSteps[Ie].status="in_progress",ie.status="in_progress",fe[G]=ie,P.debug("Substep completed, staying in same step",{completedSub:qe,nextSub:Ie,stepName:ie.name}),await Ra(X,K,fe);return}}if(!ie.subSteps.every(Ie=>Ie.status==="completed")){P.warn("Sous-tapes incompltes dtectes alors que aucune active trouve",{stepName:ie.name,subSteps:ie.subSteps}),ie.status="in_progress",fe[G]=ie,await Ra(X,K,fe);return}ie.status="completed",fe[G]=ie}else ie.status="completed",fe[G]=ie;fe[G].name,G+1<fe.length&&(fe[G+1].status="in_progress",fe[G+1].name),await Ra(X,K,fe)},y$=async X=>{var G;if(b.includes(X))return!1;const K=[...b,X];if(y(K),_){const le=[..._.tags||[],X];try{await Pb({id:_.id,tags:le}),P.debug(" Tags updated in Supabase",{projectType:X,updatedTags:le})}catch(ie){return P.error(" Failed to update tags in Supabase",ie),F({title:"Erreur",description:"Impossible d'ajouter le projet. Veuillez ressayer.",variant:"destructive"}),!1}const fe=(G=Aa[X])==null?void 0:G.steps;if(fe&&fe.length>0){const ie=JSON.parse(JSON.stringify(fe));ie[0].status="in_progress",Ra(_.id,X,ie)}}return!0},Pb=async X=>{try{await U(X.id,X),_&&_.id===X.id&&(S({..._,...X}),X.tags&&y(X.tags))}catch(K){P.error("Erreur update prospect",{error:K.message}),F({title:"Erreur",description:K.message||"Impossible de modifier le prospect.",variant:"destructive"})}},b$={userProjects:b,setUserProjects:y,addProject:y$,projectsData:Aa,setProjectsData:u$,deleteProjectTemplate:e$,prospects:ue,prospectsLoading:ee,setProspects:j,addProspect:Y,updateProspect:Pb,currentUser:_,setCurrentUser:(X,K)=>{const G=X?{...X,affiliateName:K}:null;S(G),G?G.tags&&Array.isArray(G.tags)&&y(G.tags):t("/")},appointments:ce||[],addAppointment:Sn,updateAppointment:Ta,deleteAppointment:Zn,getSharedAppointments:g$,getProjectSteps:v$,updateProjectSteps:Ra,completeStepAndProceed:x$,calls:_e||[],addCall:Go,updateCall:$D,deleteCall:MD,tasks:ke||[],addTask:LD,updateTask:FD,deleteTask:BD,agendaLoading:dt,refreshAgenda:zD,addChatMessage:p$,notifications:t$,markNotificationAsRead:m$,clientNotifications:s$,markClientNotificationAsRead:i$,forms:I,prompts:M,formContactConfig:Nb,setFormContactConfig:d$,projectInfos:ka,getProjectInfo:f$,updateProjectInfo:Cb,supabaseProjectInfos:ka,getSupabaseProjectInfo:a$,updateSupabaseProjectInfo:Sb,globalPipelineSteps:bb,setGlobalPipelineSteps:h$,pipelineLoading:KD,allProjectSteps:Xc,allStepsLoading:op,activeAdminUser:q,setActiveAdminUser:A,switchActiveAdminUser:X=>{X&&X.id&&(A(X),F({title:`Connect en tant que ${X.name}`,description:`Vous naviguez maintenant avec le profil de ${X.name}.`,className:"bg-blue-600 text-white"}))},authLoading:R,adminReady:L,bootStatus:n,bootError:o,BOOT_STATUS:mt,clientFormPanels:UD,registerClientForm:VD,updateClientFormPanel:qD,clearClientFormsFor:WD,companyLogo:l$,setCompanyLogo:c$,removeLogo:GD,brandName:d,logoUrl:h,primaryColor:m,secondaryColor:g},Tb=()=>{const X=d||"Application";return e.pathname==="/"?`${X} - conomisez sur votre lectricit`:e.pathname.startsWith("/inscription")?`${X} - Dmarrez votre projet`:e.pathname==="/producteurs"?`${X} - Vendez mieux votre lectricit`:e.pathname.startsWith("/dashboard/offres")?`${X} - Nos Offres Exclusives`:e.pathname.startsWith("/dashboard/profil")?`${X} - Votre Profil`:e.pathname.startsWith("/dashboard")?`${X} - Votre Espace Client`:e.pathname.startsWith("/admin/profil")?`${X} Pro - Mon Profil`:e.pathname.startsWith("/admin/charly")?`${X} Pro - Charly AI`:r?`${X} Pro - Espace Admin`:X},kb=()=>e.pathname==="/"?"Dpensez 35 % de moins sur votre lectricit, garanti 10 ans.":e.pathname.startsWith("/inscription")?`Choisissez vos projets et rejoignez ${d||"notre plateforme"}.`:e.pathname==="/producteurs"?"Optimisez la rentabilit de vos centrales solaires avec l'autoconsommation collective.":e.pathname.startsWith("/dashboard/offres")?"Dcouvrez nos offres pour l'autonomie nergtique, la production solaire et l'investissement.":e.pathname.startsWith("/dashboard/profil")?"Grez vos informations personnelles et vos prfrences.":e.pathname.startsWith("/dashboard")?"Suivez l'avancement de vos projets nergtiques ACC, solaire, et plus.":e.pathname.startsWith("/admin/profil")?"Grez vos informations, utilisateurs et clients.":e.pathname.startsWith("/admin/charly")?"Grez vos campagnes et scripts avec votre assistant IA Charly.":r?`Grez vos prospects, projets et agenda avec ${d||"la plateforme"} Pro.`:"La solution pour vos projets nergtiques.";if(n===mt.ERROR)return i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connexion impossible"}),i.jsx("p",{className:"text-gray-600 mb-4",children:o||"Le serveur ne rpond pas. Vrifiez votre connexion internet."}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[i.jsx("strong",{children:"Dtails techniques :"}),i.jsx("br",{}),"Boot status: ",n,i.jsx("br",{}),"Organization: ",l||"non rsolue"]})}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Ressayer"}),i.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Retour  l'accueil"})]})]})});if(n===mt.INIT||n===mt.RESOLVING_ORG){const X={[mt.INIT]:"Initialisation...",[mt.RESOLVING_ORG]:"Connexion au serveur..."};return i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 font-medium",children:X[n]||"Chargement..."}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:n===mt.RESOLVING_ORG&&"Cela peut prendre quelques secondes..."})]})})}return i.jsxs(DD.Provider,{value:b$,children:[i.jsxs(zd,{children:[i.jsx("title",{children:Tb()}),i.jsx("meta",{name:"description",content:kb()}),i.jsx("meta",{property:"og:title",content:Tb()}),i.jsx("meta",{property:"og:description",content:kb()})]}),ve&&!R&&!e.pathname.startsWith("/partner")&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-900 px-4 py-3 text-sm flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:"Compte non rattach  cette organisation."}),i.jsx("span",{children:"Demandez une invitation."})]}),i.jsx(p.Suspense,{fallback:i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement..."})]})}),children:i.jsxs(F4,{children:[i.jsx(me,{path:"/platform-login",element:i.jsx(Ise,{})}),i.jsxs(me,{path:"/platform",element:i.jsx(BG,{}),children:[i.jsx(me,{index:!0,element:i.jsx(Ose,{})}),i.jsx(me,{path:"organizations",element:i.jsx(Ase,{})}),i.jsx(me,{path:"organizations/:id",element:i.jsx(Rse,{})})]}),i.jsx(me,{path:"/",element:i.jsx(ud,{})}),i.jsx(me,{path:"/landing",element:i.jsx(ud,{})}),i.jsx(me,{path:"/solaire",element:i.jsx(qS,{})}),i.jsx(me,{path:"/login",element:i.jsx(Mse,{})}),i.jsx(me,{path:"/activate-account",element:i.jsx(kse,{})}),i.jsx(me,{path:"/signup",element:i.jsx(Lse,{})}),i.jsx(me,{path:"/client-access",element:i.jsx($se,{})}),i.jsx(me,{path:"/inscription",element:i.jsx(WS,{})}),i.jsx(me,{path:"/inscription/:slugUser",element:i.jsx(WS,{})}),i.jsx(me,{path:"/producteurs",element:i.jsx(Fse,{})}),i.jsx(me,{path:"/test-supabase",element:i.jsx(Bse,{})}),i.jsx(me,{path:"/reset-password",element:i.jsx(zse,{})}),i.jsx(me,{path:"/signature/:signatureProcedureId",element:i.jsx(Use,{})}),i.jsx(me,{path:"/sign/cosigner",element:i.jsx(Vse,{})}),i.jsx(me,{path:"/partner/login",element:i.jsx(wse,{})}),i.jsxs(me,{path:"/partner",element:i.jsx(UG,{}),children:[i.jsx(me,{index:!0,element:i.jsx(BS,{})}),i.jsx(me,{path:"missions",element:i.jsx(BS,{})}),i.jsx(me,{path:"missions/:missionId",element:i.jsx(jse,{})}),i.jsx(me,{path:"contacts",element:i.jsx(_se,{})}),i.jsx(me,{path:"charly",element:i.jsx(Ese,{})}),i.jsx(me,{path:"preuves",element:i.jsx(Cse,{})})]}),i.jsx(me,{path:"/:slugUser",element:i.jsx(qS,{})}),i.jsx(me,{path:"/client/activation",element:i.jsx(Tse,{})}),i.jsxs(me,{path:"/client/dashboard",element:i.jsx(w1,{}),children:[i.jsx(me,{index:!0,element:i.jsx(JS,{})}),i.jsx(me,{path:"parrainage",element:i.jsx(zS,{})}),i.jsx(me,{path:"profil",element:i.jsx(qm,{})}),i.jsx(me,{path:"offres",element:i.jsx(VS,{})})]}),i.jsxs(me,{path:"/dashboard",element:i.jsx(w1,{}),children:[i.jsx(me,{index:!0,element:i.jsx(JS,{})}),i.jsx(me,{path:"parrainage",element:i.jsx(zS,{})}),i.jsx(me,{path:"profil",element:i.jsx(qm,{})}),i.jsx(me,{path:"offres",element:i.jsx(VS,{})})]}),i.jsxs(me,{path:"/admin",element:i.jsx(LG,{}),children:[i.jsx(me,{index:!0,element:i.jsx(YS,{})}),i.jsx(me,{path:"pipeline",element:i.jsx(YS,{})}),i.jsx(me,{path:"agenda",element:i.jsx(yoe,{})}),i.jsx(me,{path:"contacts",element:i.jsx(vK,{})}),i.jsx(me,{path:"charly",element:i.jsx(woe,{})}),i.jsx(me,{path:"configuration-ia",element:i.jsx(joe,{})}),i.jsx(me,{path:"workflows-charly",element:i.jsx(_J,{})}),i.jsx(me,{path:"workflow-v2/:prospectId/:projectType",element:i.jsx(Noe,{})}),i.jsx(me,{path:"workflow-v2-config",element:i.jsx(Coe,{})}),i.jsx(me,{path:"prospect-v2/:prospectId",element:i.jsx(Eoe,{})}),i.jsx(me,{path:"landing-page",element:i.jsx(RJ,{})}),i.jsx(me,{path:"projects-management",element:i.jsx(Ure,{})}),i.jsx(me,{path:"forms-management",element:i.jsx(vse,{})}),i.jsx(me,{path:"contract-templates",element:i.jsx(_oe,{})}),i.jsx(me,{path:"contract-templates/editor",element:i.jsx(Soe,{})}),i.jsx(me,{path:"project-display",element:i.jsx(xse,{})}),i.jsx(me,{path:"partners",element:i.jsx(yse,{})}),i.jsx(me,{path:"partners/:partnerId",element:i.jsx(bse,{})}),i.jsx(me,{path:"profil",element:i.jsx(boe,{})}),i.jsx(me,{path:"parametres",element:i.jsx(qm,{})})]})]})}),i.jsx(B3,{})]})}class Ioe extends J.Component{constructor(r){super(r);qs(this,"handleReload",()=>{window.location.reload()});qs(this,"handleGoHome",()=>{window.location.href="/"});qs(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){console.error(" ErrorBoundary caught an error:",r),console.error("Component stack:",n.componentStack),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-lg w-full text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"bg-red-100 rounded-full p-4",children:i.jsx(cy,{className:"h-12 w-12 text-red-600"})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oups ! Une erreur est survenue"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"L'application a rencontr un problme inattendu. Essayez de rafrachir la page ou de retourner  l'accueil."}),!1,i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsxs(H,{onClick:this.handleReload,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(qf,{className:"h-4 w-4 mr-2"}),"Rafrachir"]}),i.jsxs(H,{onClick:this.handleGoHome,variant:"outline",children:[i.jsx(aP,{className:"h-4 w-4 mr-2"}),"Retour  l'accueil"]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Si le problme persiste, contactez le support technique."})]})}):this.props.children}}const Ooe=()=>{const e=window.location.pathname;return e==="/"||e==="/landing"},Doe=()=>{if(Ooe()){const e=J.lazy(()=>Lr(()=>Promise.resolve().then(()=>Hse),void 0));return i.jsx(J.Suspense,{fallback:i.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"})})}),children:i.jsx(Hw,{children:i.jsx(qse,{children:i.jsx(e,{})})})})}return i.jsx(Ioe,{children:i.jsx(Hw,{children:i.jsx(MG,{children:i.jsx(GW,{children:i.jsx(Roe,{})})})})})};Gm.createRoot(document.getElementById("root")).render(i.jsx(J.StrictMode,{children:i.jsx(Doe,{})}));export{Wn as $,qc as A,H as B,dy as C,vh as D,yh as E,va as F,xa as G,ba as H,wa as I,ya as J,_a as K,ja as L,en as M,F as N,yl as O,Rr as P,k3 as Q,J as R,Yt as S,Mn as T,Eo as U,Xl as V,Mp as W,Fo as X,Yl as Y,ly as Z,uP as _,on as a,Vd as a$,he as a0,dj as a1,Uf as a2,De as a3,Tc as a4,Qg as a5,Mf as a6,hoe as a7,uy as a8,bl as a9,ta as aA,YW as aB,v1 as aC,tH as aD,JW as aE,UH as aF,Ly as aG,fP as aH,ho as aI,Nh as aJ,eie as aK,vI as aL,Zoe as aM,S3 as aN,Kte as aO,Lre as aP,mre as aQ,mse as aR,rr as aS,Co as aT,v6 as aU,h3 as aV,Di as aW,Qk as aX,Zk as aY,c0 as aZ,oc as a_,Q as aa,pe as ab,$n as ac,xh as ad,Sse as ae,O0 as af,wJ as ag,GH as ah,cP as ai,noe as aj,d3 as ak,j3 as al,LA as am,$I as an,MI as ao,M0 as ap,ED as aq,CD as ar,PD as as,TD as at,kD as au,ex as av,Wf as aw,nK as ax,sn as ay,Rt as az,Ve as b,OG as b0,nv as b1,cj as b2,gn as b3,Uoe as b4,br as b5,Io as b6,fh as b7,nr as b8,p3 as b9,Vf as ba,fa as bb,cy as bc,rv as bd,D0 as be,mb as bf,fie as bg,foe as bh,E3 as bi,uie as bj,die as bk,cie as bl,Lr as bm,JH as bn,oe as c,RD as d,Xse as e,f3 as f,Rs as g,b0 as h,AG as i,i as j,zc as k,P as l,ae as m,Uc as n,Vc as o,Pc as p,py as q,p as r,T as s,hy as t,Te as u,Bt as v,Jt as w,zt as x,Pe as y,_R as z};
